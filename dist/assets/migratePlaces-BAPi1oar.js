import{m as g,Y as u,o as p,W as i,n as c,H as m,S as I}from"./index-BUL6LB55.js";const f={apiKey:"AIzaSyBqib0e-wk2w9NwrhVZ4qLmAo4-QVAMHGU",authDomain:"dsaccounting-18f75.firebaseapp.com",projectId:"dsaccounting-18f75",storageBucket:"dsaccounting-18f75.firebasestorage.app",messagingSenderId:"84268332508",appId:"1:84268332508:web:ef4a9143dc6ccf93010b19",measurementId:"G-NHX29V4CTY"},A=I(f,"source-firebase"),b=u(A);async function G(){const e={success:!1,total:0,migrated:0,errors:[]};try{console.log("[MIGRATION] Starting places collection migration..."),console.log("[MIGRATION] Source: dsaccounting-18f75"),console.log("[MIGRATION] Destination: doorstep-c75e3");const t=g(b,"place"),r=await p(t);if(e.total=r.size,console.log(`[MIGRATION] Found ${e.total} places in source database`),e.total===0)return e.success=!0,console.log("[MIGRATION] No places to migrate"),e;const l=400;let s=i(c),o=0;for(const a of r.docs){const n=a.data(),d=m(c,"place",a.id);s.set(d,n),o++,e.migrated++,console.log(`[MIGRATION] Queued: ${a.id} - ${n.name||"Unnamed"}`),o>=l&&(await s.commit(),console.log(`[MIGRATION] Committed batch of ${o} places`),s=i(c),o=0)}o>0&&(await s.commit(),console.log(`[MIGRATION] Committed final batch of ${o} places`)),e.success=!0,console.log(`[MIGRATION] ✅ Complete! Migrated ${e.migrated}/${e.total} places`)}catch(t){e.errors.push(t.message),console.error("[MIGRATION] ❌ Error:",t)}return e}export{G as default,G as migratePlaces};
