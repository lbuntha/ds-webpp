import{a as w,r,j as e,f}from"./index-BUL6LB55.js";import{B as p}from"./Button-CqEssTF4.js";import{g as N}from"./errorUtils-CUS756ws.js";function E(){const u=w(),[t,c]=r.useState("PHONE"),[a,j]=r.useState(""),[n,x]=r.useState(""),[d,o]=r.useState(!1),[m,l]=r.useState(null),[h,g]=r.useState(null),b=async()=>{if(!a.trim()){l("Please enter your phone number");return}o(!0),l(null);try{const s=await f.requestOTP(a.trim(),"LOGIN");s.success?(s.debugCode&&g(s.debugCode),c("OTP")):l(s.message)}catch(s){l(N(s))}finally{o(!1)}},v=async()=>{if(!n.trim()||n.length!==6){l("Please enter the 6-digit code");return}o(!0),l(null);try{await f.loginWithOTP(a.trim(),n),u("/app",{replace:!0})}catch(s){const i=N(s);l(i),(i.includes("No OTP found")||i.includes("expired"))&&(x(""),g(null),c("PHONE"))}finally{o(!1)}};return e.jsxs("div",{className:"min-h-screen flex flex-row bg-white",children:[e.jsxs("div",{className:"hidden lg:flex lg:w-5/12 bg-slate-900 relative overflow-hidden flex-col justify-between p-12 text-white",children:[e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-10",children:[e.jsx("img",{src:"/logo/icon.png",alt:"Doorstep",className:"h-8 w-8 object-contain"}),e.jsx("span",{className:"text-2xl font-bold tracking-tight text-white drop-shadow-sm",children:"Doorstep"})]}),e.jsx("h1",{className:"text-4xl font-extrabold leading-tight mb-6",children:"Welcome Back"}),e.jsx("p",{className:"text-slate-400 text-lg leading-relaxed max-w-md",children:"Login securely with your phone number. No password required."})]}),e.jsx("div",{className:"absolute -bottom-20 -right-20 w-80 h-80 bg-blue-600/10 rounded-full blur-3xl"})]}),e.jsx("div",{className:"flex-1 flex items-center justify-center p-8",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs("button",{onClick:()=>t==="PHONE"?u("/auth/login"):c("PHONE"),className:"flex items-center gap-2 text-slate-500 hover:text-slate-700 mb-8 transition-colors",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Back to Login"]}),e.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-sm border border-gray-100",children:[e.jsxs("div",{className:"mb-8 text-center",children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-3xl",children:"ðŸ“±"})})}),e.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:t==="PHONE"?"Enter Phone Number":"Verify Code"}),e.jsx("p",{className:"mt-2 text-sm text-slate-600",children:t==="PHONE"?"We'll send you a verification code":`Enter the code sent to ${a}`})]}),m&&e.jsx("div",{className:"mb-6 p-4 rounded-lg bg-red-50 border border-red-200 text-red-700 text-sm",children:m}),h&&t==="OTP"&&e.jsxs("div",{className:"mb-6 p-4 rounded-lg bg-blue-50 border border-blue-200 text-blue-700 text-sm",children:[e.jsx("strong",{children:"Dev Mode:"})," Your OTP is ",e.jsx("code",{className:"font-mono bg-blue-100 px-2 py-1 rounded",children:h})]}),t==="PHONE"&&e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Phone Number"}),e.jsx("input",{type:"tel",value:a,onChange:s=>j(s.target.value),placeholder:"e.g., 012 345 678",className:"w-full px-4 py-3 rounded-xl border border-gray-300 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-all text-lg",autoFocus:!0})]}),e.jsx(p,{onClick:b,isLoading:d,className:"w-full py-3",children:"Send Code"})]}),t==="OTP"&&e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Verification Code"}),e.jsx("input",{type:"text",value:n,onChange:s=>x(s.target.value.replace(/\D/g,"").slice(0,6)),placeholder:"Enter 6-digit code",className:"w-full px-4 py-3 rounded-xl border border-gray-300 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-all text-lg text-center tracking-widest font-mono",maxLength:6,autoFocus:!0})]}),e.jsx(p,{onClick:v,isLoading:d,className:"w-full py-3",children:"Login"}),e.jsx("button",{onClick:b,className:"w-full text-sm text-blue-600 hover:text-blue-700",disabled:d,children:"Resend Code"})]}),e.jsx("div",{className:"flex justify-center mt-8 gap-2",children:["PHONE","OTP"].map((s,i)=>e.jsx("div",{className:`w-2 h-2 rounded-full transition-colors ${t===s?"bg-blue-600":"bg-gray-300"}`},s))})]})]})})]})}export{E as default};
