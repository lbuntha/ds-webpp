const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/LandingPage-CwHJjakf.js","assets/Button-CqEssTF4.js","assets/LanguageSwitcher-Bw_PeBba.js","assets/toast-DfW6NkLH.js","assets/AuthForms-DKiK7dhL.js","assets/errorUtils-CUS756ws.js","assets/PendingApproval-CWmLvJ4W.js","assets/Card-k44aVk4n.js","assets/OnboardingView-C7c95oSd.js","assets/Input-fEXGFBn-.js","assets/OTPSignup-DQvKrk72.js","assets/PhoneSignupView-DmOxvqaV.js","assets/PhoneResetView-BH7M0Qbn.js","assets/EmailResetView-BjYcUANN.js","assets/CustomerLayout-DKswQ628.js","assets/CustomerDashboard-BpVr2cbz.js","assets/TrackingTimeline--cIDV8xm.js","assets/ChatModal-BSO-ygqo.js","assets/CustomerProfile-C5yBrG1Z.js","assets/Avatar-Cwp5HxF7.js","assets/ImageUpload-DSrilhq8.js","assets/Modal-CwdR8lyW.js","assets/LocationPicker-BSHbKGYS.js","assets/PlaceAutocomplete-XL2CORH3.js","assets/CustomerBooking-D4MlLAaW.js","assets/Toast-8q3YfUAL.js","assets/imageUtils-D2x4nXU4.js","assets/CustomerSummaryReport-BbF8S5s1.js","assets/NotificationBell-MmXT0gZ-.js","assets/WalletDashboard-J_MiwyHy.js","assets/PublicTracker-uW3fB7BF.js","assets/DriverLayout-Cyec8Cn6.js","assets/DriverDashboard-C-dD5YO5.js","assets/notificationService-W2xlDV8M.js","assets/SettlementReportModal-EYU7i1B4.js","assets/DriverPickupProcessor-Cp3MWOGN.js","assets/MainLayout-BgUzvvHj.js","assets/MenuIcon-Cobwt2rr.js","assets/Dashboard-X4OS45Tf.js","assets/accountingService-Cqm7tQaN.js","assets/AnalyticsDashboard-Df7FcXlf.js","assets/JournalView-5Z7OtgyM.js","assets/JournalEntryForm-Dob5X59z.js","assets/BankingView-BWQw10ED.js","assets/AccountForm-nZf74hqk.js","assets/StaffLoansView-CFmfXvhf.js","assets/StandardExpenseView-C-VewPEy.js","assets/createLucideIcon-CEuAjdeA.js","assets/save-Y9IUSdaF.js","assets/ExpenseTemplatesView-0OYvdfWa.js","assets/plus-rnI6Vdzr.js","assets/trash-2-CYr50t1o.js","assets/ParcelsOverviewView-B213r7qS.js","assets/ParcelsNewView-C0MMZ4EF.js","assets/ParcelsOperationsView-Rd07awOQ.js","assets/ParcelsWarehouseView-DuFvyaqp.js","assets/ParcelsDispatchView-XMjIihj1.js","assets/DelayedChatsView-Dbv9Ea4U.js","assets/DelayedChatReport-CMA8KPwt.js","assets/ParcelsFleetView-D_Onh1Oe.js","assets/ParcelsPlacesView-ByA1Ltln.js","assets/ParcelsProductsView-CXYmEkX-.js","assets/ParcelServiceSetup-C0Mgq5sV.js","assets/package-BdetSlVF.js","assets/ParcelsRetentionView-BpKzFEru.js","assets/ParcelsServiceSetupView-SfA8jx3e.js","assets/DriverCommissionSetupView-DRF7Kr1W.js","assets/DriverCommissionSetup-hu5-4W3_.js","assets/ParcelsAgingView-CTR9EZd2.js","assets/InTransitAgingReport-DiBAMAJo.js","assets/PromotionsPage-DZpgjaL7.js","assets/CashbackPage-BA1EsNLI.js","assets/CashbackReportPage-CizitoJQ.js","assets/StockManagement-BWKPntj-.js","assets/search-DTZoH1GY.js","assets/chevron-up-DSgXiHgz.js","assets/triangle-alert-caMmt7Ek.js","assets/x-C56ZNX5h.js","assets/camera-zNyZa9TX.js","assets/StockAlertReport-D2jcw8Fv.js","assets/download-DAoIALzT.js","assets/funnel-Bpc5ey4e.js","assets/CustomerStockView-N4_h94-e.js","assets/ProductCatalog-BZqldX7i.js","assets/StockRequestList-CPMgOp8d.js","assets/truck-dDUXP_FN.js","assets/IncomingRequests-Dby-cghP.js","assets/ReportsView-BH_UedjD.js","assets/ClosingView-DvH4AG4w.js","assets/SettingsView-C95G30Va.js","assets/MenuBuilder-BtbqS8hr.js","assets/UsersView-5HGoXx76.js","assets/CustomersView-EWBaW9kv.js","assets/BookingStatusByDriverReport-DufFNZct.js","assets/UserProfileView-CItl2_C5.js","assets/UserManualView-DtPhJDvB.js","assets/SeedPermissionsView-Br7Nw2Iz.js","assets/MenuBuilderView-Bk-6JEkK.js","assets/DriverJobsView-2OWPrr7W.js","assets/DriverPickupsView-D2uomEp-.js","assets/DriverEarningsView-DN6kpa8u.js","assets/DriverWalletView-BotsP9mx.js","assets/DriverProfileView-BZ3wk_J_.js","assets/CustomerBookingView-x1bWFV-Y.js","assets/CustomerParcelsView-Z5iMqDfl.js","assets/CustomerTrackingView-B2VSsJcd.js","assets/CustomerWalletView-Bz6Ko1A6.js","assets/CustomerReportView-DrtBNfpc.js","assets/CustomerProfileView-DsGRQw7g.js","assets/AuthView-Lp1ZpZTr.js","assets/PhoneLoginView-JbUntCiM.js","assets/EmployeeManagementView-DBdpDxe6.js","assets/StaffLoanIssueView-B2vnPEb3.js","assets/StaffAllowanceView-BZaSfWeD.js","assets/payrollService-D5oO5LUj.js","assets/StaffSettlementView-EMLJ7GeH.js","assets/StaffDepositView-DOvT4Ntv.js","assets/PayrollView-BOjB0VJO.js","assets/CustomerSettlementReport-CeweiNB7.js","assets/SettledParcelsReport-yzouF--c.js","assets/TelegramView-CRf6OZzI.js"])))=>i.map(i=>d[i]);
function nR(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in n)){const a=Object.getOwnPropertyDescriptor(r,s);a&&Object.defineProperty(n,s,a.get?a:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function t(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=t(s);fetch(s.href,a)}})();var rV=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function aT(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var rp={exports:{}},Ql={},ip={exports:{}},at={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var D_;function rR(){if(D_)return at;D_=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),E=Symbol.iterator;function T(j){return j===null||typeof j!="object"?null:(j=E&&j[E]||j["@@iterator"],typeof j=="function"?j:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,U={};function L(j,te,be){this.props=j,this.context=te,this.refs=U,this.updater=be||S}L.prototype.isReactComponent={},L.prototype.setState=function(j,te){if(typeof j!="object"&&typeof j!="function"&&j!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,j,te,"setState")},L.prototype.forceUpdate=function(j){this.updater.enqueueForceUpdate(this,j,"forceUpdate")};function z(){}z.prototype=L.prototype;function $(j,te,be){this.props=j,this.context=te,this.refs=U,this.updater=be||S}var Z=$.prototype=new z;Z.constructor=$,C(Z,L.prototype),Z.isPureReactComponent=!0;var oe=Array.isArray,we=Object.prototype.hasOwnProperty,me={current:null},I={key:!0,ref:!0,__self:!0,__source:!0};function A(j,te,be){var De,xe={},ze=null,rt=null;if(te!=null)for(De in te.ref!==void 0&&(rt=te.ref),te.key!==void 0&&(ze=""+te.key),te)we.call(te,De)&&!I.hasOwnProperty(De)&&(xe[De]=te[De]);var $e=arguments.length-2;if($e===1)xe.children=be;else if(1<$e){for(var _t=Array($e),ln=0;ln<$e;ln++)_t[ln]=arguments[ln+2];xe.children=_t}if(j&&j.defaultProps)for(De in $e=j.defaultProps,$e)xe[De]===void 0&&(xe[De]=$e[De]);return{$$typeof:n,type:j,key:ze,ref:rt,props:xe,_owner:me.current}}function N(j,te){return{$$typeof:n,type:j.type,key:te,ref:j.ref,props:j.props,_owner:j._owner}}function V(j){return typeof j=="object"&&j!==null&&j.$$typeof===n}function M(j){var te={"=":"=0",":":"=2"};return"$"+j.replace(/[=:]/g,function(be){return te[be]})}var G=/\/+/g;function D(j,te){return typeof j=="object"&&j!==null&&j.key!=null?M(""+j.key):te.toString(36)}function We(j,te,be,De,xe){var ze=typeof j;(ze==="undefined"||ze==="boolean")&&(j=null);var rt=!1;if(j===null)rt=!0;else switch(ze){case"string":case"number":rt=!0;break;case"object":switch(j.$$typeof){case n:case e:rt=!0}}if(rt)return rt=j,xe=xe(rt),j=De===""?"."+D(rt,0):De,oe(xe)?(be="",j!=null&&(be=j.replace(G,"$&/")+"/"),We(xe,te,be,"",function(ln){return ln})):xe!=null&&(V(xe)&&(xe=N(xe,be+(!xe.key||rt&&rt.key===xe.key?"":(""+xe.key).replace(G,"$&/")+"/")+j)),te.push(xe)),1;if(rt=0,De=De===""?".":De+":",oe(j))for(var $e=0;$e<j.length;$e++){ze=j[$e];var _t=De+D(ze,$e);rt+=We(ze,te,be,_t,xe)}else if(_t=T(j),typeof _t=="function")for(j=_t.call(j),$e=0;!(ze=j.next()).done;)ze=ze.value,_t=De+D(ze,$e++),rt+=We(ze,te,be,_t,xe);else if(ze==="object")throw te=String(j),Error("Objects are not valid as a React child (found: "+(te==="[object Object]"?"object with keys {"+Object.keys(j).join(", ")+"}":te)+"). If you meant to render a collection of children, use an array instead.");return rt}function ft(j,te,be){if(j==null)return j;var De=[],xe=0;return We(j,De,"","",function(ze){return te.call(be,ze,xe++)}),De}function Xe(j){if(j._status===-1){var te=j._result;te=te(),te.then(function(be){(j._status===0||j._status===-1)&&(j._status=1,j._result=be)},function(be){(j._status===0||j._status===-1)&&(j._status=2,j._result=be)}),j._status===-1&&(j._status=0,j._result=te)}if(j._status===1)return j._result.default;throw j._result}var Ge={current:null},ie={transition:null},_e={ReactCurrentDispatcher:Ge,ReactCurrentBatchConfig:ie,ReactCurrentOwner:me};function ue(){throw Error("act(...) is not supported in production builds of React.")}return at.Children={map:ft,forEach:function(j,te,be){ft(j,function(){te.apply(this,arguments)},be)},count:function(j){var te=0;return ft(j,function(){te++}),te},toArray:function(j){return ft(j,function(te){return te})||[]},only:function(j){if(!V(j))throw Error("React.Children.only expected to receive a single React element child.");return j}},at.Component=L,at.Fragment=t,at.Profiler=s,at.PureComponent=$,at.StrictMode=r,at.Suspense=f,at.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_e,at.act=ue,at.cloneElement=function(j,te,be){if(j==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+j+".");var De=C({},j.props),xe=j.key,ze=j.ref,rt=j._owner;if(te!=null){if(te.ref!==void 0&&(ze=te.ref,rt=me.current),te.key!==void 0&&(xe=""+te.key),j.type&&j.type.defaultProps)var $e=j.type.defaultProps;for(_t in te)we.call(te,_t)&&!I.hasOwnProperty(_t)&&(De[_t]=te[_t]===void 0&&$e!==void 0?$e[_t]:te[_t])}var _t=arguments.length-2;if(_t===1)De.children=be;else if(1<_t){$e=Array(_t);for(var ln=0;ln<_t;ln++)$e[ln]=arguments[ln+2];De.children=$e}return{$$typeof:n,type:j.type,key:xe,ref:ze,props:De,_owner:rt}},at.createContext=function(j){return j={$$typeof:l,_currentValue:j,_currentValue2:j,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},j.Provider={$$typeof:a,_context:j},j.Consumer=j},at.createElement=A,at.createFactory=function(j){var te=A.bind(null,j);return te.type=j,te},at.createRef=function(){return{current:null}},at.forwardRef=function(j){return{$$typeof:h,render:j}},at.isValidElement=V,at.lazy=function(j){return{$$typeof:_,_payload:{_status:-1,_result:j},_init:Xe}},at.memo=function(j,te){return{$$typeof:p,type:j,compare:te===void 0?null:te}},at.startTransition=function(j){var te=ie.transition;ie.transition={};try{j()}finally{ie.transition=te}},at.unstable_act=ue,at.useCallback=function(j,te){return Ge.current.useCallback(j,te)},at.useContext=function(j){return Ge.current.useContext(j)},at.useDebugValue=function(){},at.useDeferredValue=function(j){return Ge.current.useDeferredValue(j)},at.useEffect=function(j,te){return Ge.current.useEffect(j,te)},at.useId=function(){return Ge.current.useId()},at.useImperativeHandle=function(j,te,be){return Ge.current.useImperativeHandle(j,te,be)},at.useInsertionEffect=function(j,te){return Ge.current.useInsertionEffect(j,te)},at.useLayoutEffect=function(j,te){return Ge.current.useLayoutEffect(j,te)},at.useMemo=function(j,te){return Ge.current.useMemo(j,te)},at.useReducer=function(j,te,be){return Ge.current.useReducer(j,te,be)},at.useRef=function(j){return Ge.current.useRef(j)},at.useState=function(j){return Ge.current.useState(j)},at.useSyncExternalStore=function(j,te,be){return Ge.current.useSyncExternalStore(j,te,be)},at.useTransition=function(){return Ge.current.useTransition()},at.version="18.3.1",at}var O_;function um(){return O_||(O_=1,ip.exports=rR()),ip.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var L_;function iR(){if(L_)return Ql;L_=1;var n=um(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function l(h,f,p){var _,E={},T=null,S=null;p!==void 0&&(T=""+p),f.key!==void 0&&(T=""+f.key),f.ref!==void 0&&(S=f.ref);for(_ in f)r.call(f,_)&&!a.hasOwnProperty(_)&&(E[_]=f[_]);if(h&&h.defaultProps)for(_ in f=h.defaultProps,f)E[_]===void 0&&(E[_]=f[_]);return{$$typeof:e,type:h,key:T,ref:S,props:E,_owner:s.current}}return Ql.Fragment=t,Ql.jsx=l,Ql.jsxs=l,Ql}var x_;function sR(){return x_||(x_=1,rp.exports=iR()),rp.exports}var J=sR(),b=um();const lT=aT(b),oR=nR({__proto__:null,default:lT},[b]);var nd={},sp={exports:{}},or={},op={exports:{}},ap={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var V_;function aR(){return V_||(V_=1,(function(n){function e(ie,_e){var ue=ie.length;ie.push(_e);e:for(;0<ue;){var j=ue-1>>>1,te=ie[j];if(0<s(te,_e))ie[j]=_e,ie[ue]=te,ue=j;else break e}}function t(ie){return ie.length===0?null:ie[0]}function r(ie){if(ie.length===0)return null;var _e=ie[0],ue=ie.pop();if(ue!==_e){ie[0]=ue;e:for(var j=0,te=ie.length,be=te>>>1;j<be;){var De=2*(j+1)-1,xe=ie[De],ze=De+1,rt=ie[ze];if(0>s(xe,ue))ze<te&&0>s(rt,xe)?(ie[j]=rt,ie[ze]=ue,j=ze):(ie[j]=xe,ie[De]=ue,j=De);else if(ze<te&&0>s(rt,ue))ie[j]=rt,ie[ze]=ue,j=ze;else break e}}return _e}function s(ie,_e){var ue=ie.sortIndex-_e.sortIndex;return ue!==0?ue:ie.id-_e.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var l=Date,h=l.now();n.unstable_now=function(){return l.now()-h}}var f=[],p=[],_=1,E=null,T=3,S=!1,C=!1,U=!1,L=typeof setTimeout=="function"?setTimeout:null,z=typeof clearTimeout=="function"?clearTimeout:null,$=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Z(ie){for(var _e=t(p);_e!==null;){if(_e.callback===null)r(p);else if(_e.startTime<=ie)r(p),_e.sortIndex=_e.expirationTime,e(f,_e);else break;_e=t(p)}}function oe(ie){if(U=!1,Z(ie),!C)if(t(f)!==null)C=!0,Xe(we);else{var _e=t(p);_e!==null&&Ge(oe,_e.startTime-ie)}}function we(ie,_e){C=!1,U&&(U=!1,z(A),A=-1),S=!0;var ue=T;try{for(Z(_e),E=t(f);E!==null&&(!(E.expirationTime>_e)||ie&&!M());){var j=E.callback;if(typeof j=="function"){E.callback=null,T=E.priorityLevel;var te=j(E.expirationTime<=_e);_e=n.unstable_now(),typeof te=="function"?E.callback=te:E===t(f)&&r(f),Z(_e)}else r(f);E=t(f)}if(E!==null)var be=!0;else{var De=t(p);De!==null&&Ge(oe,De.startTime-_e),be=!1}return be}finally{E=null,T=ue,S=!1}}var me=!1,I=null,A=-1,N=5,V=-1;function M(){return!(n.unstable_now()-V<N)}function G(){if(I!==null){var ie=n.unstable_now();V=ie;var _e=!0;try{_e=I(!0,ie)}finally{_e?D():(me=!1,I=null)}}else me=!1}var D;if(typeof $=="function")D=function(){$(G)};else if(typeof MessageChannel<"u"){var We=new MessageChannel,ft=We.port2;We.port1.onmessage=G,D=function(){ft.postMessage(null)}}else D=function(){L(G,0)};function Xe(ie){I=ie,me||(me=!0,D())}function Ge(ie,_e){A=L(function(){ie(n.unstable_now())},_e)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(ie){ie.callback=null},n.unstable_continueExecution=function(){C||S||(C=!0,Xe(we))},n.unstable_forceFrameRate=function(ie){0>ie||125<ie?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<ie?Math.floor(1e3/ie):5},n.unstable_getCurrentPriorityLevel=function(){return T},n.unstable_getFirstCallbackNode=function(){return t(f)},n.unstable_next=function(ie){switch(T){case 1:case 2:case 3:var _e=3;break;default:_e=T}var ue=T;T=_e;try{return ie()}finally{T=ue}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(ie,_e){switch(ie){case 1:case 2:case 3:case 4:case 5:break;default:ie=3}var ue=T;T=ie;try{return _e()}finally{T=ue}},n.unstable_scheduleCallback=function(ie,_e,ue){var j=n.unstable_now();switch(typeof ue=="object"&&ue!==null?(ue=ue.delay,ue=typeof ue=="number"&&0<ue?j+ue:j):ue=j,ie){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=ue+te,ie={id:_++,callback:_e,priorityLevel:ie,startTime:ue,expirationTime:te,sortIndex:-1},ue>j?(ie.sortIndex=ue,e(p,ie),t(f)===null&&ie===t(p)&&(U?(z(A),A=-1):U=!0,Ge(oe,ue-j))):(ie.sortIndex=te,e(f,ie),C||S||(C=!0,Xe(we))),ie},n.unstable_shouldYield=M,n.unstable_wrapCallback=function(ie){var _e=T;return function(){var ue=T;T=_e;try{return ie.apply(this,arguments)}finally{T=ue}}}})(ap)),ap}var M_;function lR(){return M_||(M_=1,op.exports=aR()),op.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var U_;function uR(){if(U_)return or;U_=1;var n=um(),e=lR();function t(i){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+i,u=1;u<arguments.length;u++)o+="&args[]="+encodeURIComponent(arguments[u]);return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,s={};function a(i,o){l(i,o),l(i+"Capture",o)}function l(i,o){for(s[i]=o,i=0;i<o.length;i++)r.add(o[i])}var h=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),f=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_={},E={};function T(i){return f.call(E,i)?!0:f.call(_,i)?!1:p.test(i)?E[i]=!0:(_[i]=!0,!1)}function S(i,o,u,d){if(u!==null&&u.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return d?!1:u!==null?!u.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function C(i,o,u,d){if(o===null||typeof o>"u"||S(i,o,u,d))return!0;if(d)return!1;if(u!==null)switch(u.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function U(i,o,u,d,m,g,w){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=d,this.attributeNamespace=m,this.mustUseProperty=u,this.propertyName=i,this.type=o,this.sanitizeURL=g,this.removeEmptyString=w}var L={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){L[i]=new U(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var o=i[0];L[o]=new U(o,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){L[i]=new U(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){L[i]=new U(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){L[i]=new U(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){L[i]=new U(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){L[i]=new U(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){L[i]=new U(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){L[i]=new U(i,5,!1,i.toLowerCase(),null,!1,!1)});var z=/[\-:]([a-z])/g;function $(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var o=i.replace(z,$);L[o]=new U(o,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var o=i.replace(z,$);L[o]=new U(o,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var o=i.replace(z,$);L[o]=new U(o,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){L[i]=new U(i,1,!1,i.toLowerCase(),null,!1,!1)}),L.xlinkHref=new U("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){L[i]=new U(i,1,!1,i.toLowerCase(),null,!0,!0)});function Z(i,o,u,d){var m=L.hasOwnProperty(o)?L[o]:null;(m!==null?m.type!==0:d||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(C(o,u,m,d)&&(u=null),d||m===null?T(o)&&(u===null?i.removeAttribute(o):i.setAttribute(o,""+u)):m.mustUseProperty?i[m.propertyName]=u===null?m.type===3?!1:"":u:(o=m.attributeName,d=m.attributeNamespace,u===null?i.removeAttribute(o):(m=m.type,u=m===3||m===4&&u===!0?"":""+u,d?i.setAttributeNS(d,o,u):i.setAttribute(o,u))))}var oe=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,we=Symbol.for("react.element"),me=Symbol.for("react.portal"),I=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),N=Symbol.for("react.profiler"),V=Symbol.for("react.provider"),M=Symbol.for("react.context"),G=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),We=Symbol.for("react.suspense_list"),ft=Symbol.for("react.memo"),Xe=Symbol.for("react.lazy"),Ge=Symbol.for("react.offscreen"),ie=Symbol.iterator;function _e(i){return i===null||typeof i!="object"?null:(i=ie&&i[ie]||i["@@iterator"],typeof i=="function"?i:null)}var ue=Object.assign,j;function te(i){if(j===void 0)try{throw Error()}catch(u){var o=u.stack.trim().match(/\n( *(at )?)/);j=o&&o[1]||""}return`
`+j+i}var be=!1;function De(i,o){if(!i||be)return"";be=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(Y){var d=Y}Reflect.construct(i,[],o)}else{try{o.call()}catch(Y){d=Y}i.call(o.prototype)}else{try{throw Error()}catch(Y){d=Y}i()}}catch(Y){if(Y&&d&&typeof Y.stack=="string"){for(var m=Y.stack.split(`
`),g=d.stack.split(`
`),w=m.length-1,O=g.length-1;1<=w&&0<=O&&m[w]!==g[O];)O--;for(;1<=w&&0<=O;w--,O--)if(m[w]!==g[O]){if(w!==1||O!==1)do if(w--,O--,0>O||m[w]!==g[O]){var F=`
`+m[w].replace(" at new "," at ");return i.displayName&&F.includes("<anonymous>")&&(F=F.replace("<anonymous>",i.displayName)),F}while(1<=w&&0<=O);break}}}finally{be=!1,Error.prepareStackTrace=u}return(i=i?i.displayName||i.name:"")?te(i):""}function xe(i){switch(i.tag){case 5:return te(i.type);case 16:return te("Lazy");case 13:return te("Suspense");case 19:return te("SuspenseList");case 0:case 2:case 15:return i=De(i.type,!1),i;case 11:return i=De(i.type.render,!1),i;case 1:return i=De(i.type,!0),i;default:return""}}function ze(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case I:return"Fragment";case me:return"Portal";case N:return"Profiler";case A:return"StrictMode";case D:return"Suspense";case We:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case M:return(i.displayName||"Context")+".Consumer";case V:return(i._context.displayName||"Context")+".Provider";case G:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case ft:return o=i.displayName||null,o!==null?o:ze(i.type)||"Memo";case Xe:o=i._payload,i=i._init;try{return ze(i(o))}catch{}}return null}function rt(i){var o=i.type;switch(i.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=o.render,i=i.displayName||i.name||"",o.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ze(o);case 8:return o===A?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function $e(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function _t(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function ln(i){var o=_t(i)?"checked":"value",u=Object.getOwnPropertyDescriptor(i.constructor.prototype,o),d=""+i[o];if(!i.hasOwnProperty(o)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var m=u.get,g=u.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return m.call(this)},set:function(w){d=""+w,g.call(this,w)}}),Object.defineProperty(i,o,{enumerable:u.enumerable}),{getValue:function(){return d},setValue:function(w){d=""+w},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function Ir(i){i._valueTracker||(i._valueTracker=ln(i))}function Wt(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var u=o.getValue(),d="";return i&&(d=_t(i)?i.checked?"true":"false":i.value),i=d,i!==u?(o.setValue(i),!0):!1}function jn(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function Fi(i,o){var u=o.checked;return ue({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:u??i._wrapperState.initialChecked})}function ca(i,o){var u=o.defaultValue==null?"":o.defaultValue,d=o.checked!=null?o.checked:o.defaultChecked;u=$e(o.value!=null?o.value:u),i._wrapperState={initialChecked:d,initialValue:u,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function Xn(i,o){o=o.checked,o!=null&&Z(i,"checked",o,!1)}function Bi(i,o){Xn(i,o);var u=$e(o.value),d=o.type;if(u!=null)d==="number"?(u===0&&i.value===""||i.value!=u)&&(i.value=""+u):i.value!==""+u&&(i.value=""+u);else if(d==="submit"||d==="reset"){i.removeAttribute("value");return}o.hasOwnProperty("value")?Ut(i,o.type,u):o.hasOwnProperty("defaultValue")&&Ut(i,o.type,$e(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(i.defaultChecked=!!o.defaultChecked)}function fo(i,o,u){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var d=o.type;if(!(d!=="submit"&&d!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+i._wrapperState.initialValue,u||o===i.value||(i.value=o),i.defaultValue=o}u=i.name,u!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,u!==""&&(i.name=u)}function Ut(i,o,u){(o!=="number"||jn(i.ownerDocument)!==i)&&(u==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+u&&(i.defaultValue=""+u))}var Ft=Array.isArray;function ur(i,o,u,d){if(i=i.options,o){o={};for(var m=0;m<u.length;m++)o["$"+u[m]]=!0;for(u=0;u<i.length;u++)m=o.hasOwnProperty("$"+i[u].value),i[u].selected!==m&&(i[u].selected=m),m&&d&&(i[u].defaultSelected=!0)}else{for(u=""+$e(u),o=null,m=0;m<i.length;m++){if(i[m].value===u){i[m].selected=!0,d&&(i[m].defaultSelected=!0);return}o!==null||i[m].disabled||(o=i[m])}o!==null&&(o.selected=!0)}}function po(i,o){if(o.dangerouslySetInnerHTML!=null)throw Error(t(91));return ue({},o,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function mo(i,o){var u=o.value;if(u==null){if(u=o.children,o=o.defaultValue,u!=null){if(o!=null)throw Error(t(92));if(Ft(u)){if(1<u.length)throw Error(t(93));u=u[0]}o=u}o==null&&(o=""),u=o}i._wrapperState={initialValue:$e(u)}}function Rr(i,o){var u=$e(o.value),d=$e(o.defaultValue);u!=null&&(u=""+u,u!==i.value&&(i.value=u),o.defaultValue==null&&i.defaultValue!==u&&(i.defaultValue=u)),d!=null&&(i.defaultValue=""+d)}function Yn(i){var o=i.textContent;o===i._wrapperState.initialValue&&o!==""&&o!==null&&(i.value=o)}function Es(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function li(i,o){return i==null||i==="http://www.w3.org/1999/xhtml"?Es(o):i==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var hn,Qn=(function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,u,d,m){MSApp.execUnsafeLocalFunction(function(){return i(o,u,d,m)})}:i})(function(i,o){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=o;else{for(hn=hn||document.createElement("div"),hn.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=hn.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;o.firstChild;)i.appendChild(o.firstChild)}});function ui(i,o){if(o){var u=i.firstChild;if(u&&u===i.lastChild&&u.nodeType===3){u.nodeValue=o;return}}i.textContent=o}var ci={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},vs=["Webkit","ms","Moz","O"];Object.keys(ci).forEach(function(i){vs.forEach(function(o){o=o+i.charAt(0).toUpperCase()+i.substring(1),ci[o]=ci[i]})});function di(i,o,u){return o==null||typeof o=="boolean"||o===""?"":u||typeof o!="number"||o===0||ci.hasOwnProperty(i)&&ci[i]?(""+o).trim():o+"px"}function kn(i,o){i=i.style;for(var u in o)if(o.hasOwnProperty(u)){var d=u.indexOf("--")===0,m=di(u,o[u],d);u==="float"&&(u="cssFloat"),d?i.setProperty(u,m):i[u]=m}}var Ts=ue({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Jn(i,o){if(o){if(Ts[i]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(t(137,i));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(t(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(t(61))}if(o.style!=null&&typeof o.style!="object")throw Error(t(62))}}function ji(i,o){if(i.indexOf("-")===-1)return typeof o.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var hi=null;function zi(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Zn=null,Ar=null,Nt=null;function go(i){if(i=Vl(i)){if(typeof Zn!="function")throw Error(t(280));var o=i.stateNode;o&&(o=yc(o),Zn(i.stateNode,i.type,o))}}function zr(i){Ar?Nt?Nt.push(i):Nt=[i]:Ar=i}function fi(){if(Ar){var i=Ar,o=Nt;if(Nt=Ar=null,go(i),o)for(i=0;i<o.length;i++)go(o[i])}}function yo(i,o){return i(o)}function Gi(){}var zn=!1;function _o(i,o,u){if(zn)return i(o,u);zn=!0;try{return yo(i,o,u)}finally{zn=!1,(Ar!==null||Nt!==null)&&(Gi(),fi())}}function Hi(i,o){var u=i.stateNode;if(u===null)return null;var d=yc(u);if(d===null)return null;u=d[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(i=i.type,d=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!d;break e;default:i=!1}if(i)return null;if(u&&typeof u!="function")throw Error(t(231,o,typeof u));return u}var pi=!1;if(h)try{var x={};Object.defineProperty(x,"passive",{get:function(){pi=!0}}),window.addEventListener("test",x,x),window.removeEventListener("test",x,x)}catch{pi=!1}function H(i,o,u,d,m,g,w,O,F){var Y=Array.prototype.slice.call(arguments,3);try{o.apply(u,Y)}catch(ae){this.onError(ae)}}var K=!1,re=null,ce=!1,Te=null,Ve={onError:function(i){K=!0,re=i}};function Ee(i,o,u,d,m,g,w,O,F){K=!1,re=null,H.apply(Ve,arguments)}function Se(i,o,u,d,m,g,w,O,F){if(Ee.apply(this,arguments),K){if(K){var Y=re;K=!1,re=null}else throw Error(t(198));ce||(ce=!0,Te=Y)}}function Re(i){var o=i,u=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,(o.flags&4098)!==0&&(u=o.return),i=o.return;while(i)}return o.tag===3?u:null}function qe(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function ke(i){if(Re(i)!==i)throw Error(t(188))}function Ye(i){var o=i.alternate;if(!o){if(o=Re(i),o===null)throw Error(t(188));return o!==i?null:i}for(var u=i,d=o;;){var m=u.return;if(m===null)break;var g=m.alternate;if(g===null){if(d=m.return,d!==null){u=d;continue}break}if(m.child===g.child){for(g=m.child;g;){if(g===u)return ke(m),i;if(g===d)return ke(m),o;g=g.sibling}throw Error(t(188))}if(u.return!==d.return)u=m,d=g;else{for(var w=!1,O=m.child;O;){if(O===u){w=!0,u=m,d=g;break}if(O===d){w=!0,d=m,u=g;break}O=O.sibling}if(!w){for(O=g.child;O;){if(O===u){w=!0,u=g,d=m;break}if(O===d){w=!0,d=g,u=m;break}O=O.sibling}if(!w)throw Error(t(189))}}if(u.alternate!==d)throw Error(t(190))}if(u.tag!==3)throw Error(t(188));return u.stateNode.current===u?i:o}function it(i){return i=Ye(i),i!==null?Dt(i):null}function Dt(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var o=Dt(i);if(o!==null)return o;i=i.sibling}return null}var xt=e.unstable_scheduleCallback,qt=e.unstable_cancelCallback,lt=e.unstable_shouldYield,$t=e.unstable_requestPaint,Et=e.unstable_now,Wi=e.unstable_getCurrentPriorityLevel,Gn=e.unstable_ImmediatePriority,bn=e.unstable_UserBlockingPriority,Gr=e.unstable_NormalPriority,Hr=e.unstable_LowPriority,er=e.unstable_IdlePriority,Pr=null,fn=null;function ot(i){if(fn&&typeof fn.onCommitFiberRoot=="function")try{fn.onCommitFiberRoot(Pr,i,void 0,(i.current.flags&128)===128)}catch{}}var It=Math.clz32?Math.clz32:Rt,Tn=Math.log,en=Math.LN2;function Rt(i){return i>>>=0,i===0?32:31-(Tn(i)/en|0)|0}var Hn=64,Wr=4194304;function vt(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function qi(i,o){var u=i.pendingLanes;if(u===0)return 0;var d=0,m=i.suspendedLanes,g=i.pingedLanes,w=u&268435455;if(w!==0){var O=w&~m;O!==0?d=vt(O):(g&=w,g!==0&&(d=vt(g)))}else w=u&~m,w!==0?d=vt(w):g!==0&&(d=vt(g));if(d===0)return 0;if(o!==0&&o!==d&&(o&m)===0&&(m=d&-d,g=o&-o,m>=g||m===16&&(g&4194240)!==0))return o;if((d&4)!==0&&(d|=u&16),o=i.entangledLanes,o!==0)for(i=i.entanglements,o&=d;0<o;)u=31-It(o),m=1<<u,d|=i[u],o&=~m;return d}function Eo(i,o){switch(i){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function vo(i,o){for(var u=i.suspendedLanes,d=i.pingedLanes,m=i.expirationTimes,g=i.pendingLanes;0<g;){var w=31-It(g),O=1<<w,F=m[w];F===-1?((O&u)===0||(O&d)!==0)&&(m[w]=Eo(O,o)):F<=o&&(i.expiredLanes|=O),g&=~O}}function ml(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function gl(){var i=Hn;return Hn<<=1,(Hn&4194240)===0&&(Hn=64),i}function yl(i){for(var o=[],u=0;31>u;u++)o.push(i);return o}function To(i,o,u){i.pendingLanes|=o,o!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,o=31-It(o),i[o]=u}function Lh(i,o){var u=i.pendingLanes&~o;i.pendingLanes=o,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=o,i.mutableReadLanes&=o,i.entangledLanes&=o,o=i.entanglements;var d=i.eventTimes;for(i=i.expirationTimes;0<u;){var m=31-It(u),g=1<<m;o[m]=0,d[m]=-1,i[m]=-1,u&=~g}}function _l(i,o){var u=i.entangledLanes|=o;for(i=i.entanglements;u;){var d=31-It(u),m=1<<d;m&o|i[d]&o&&(i[d]|=o),u&=~m}}var pt=0;function mi(i){return i&=-i,1<i?4<i?(i&268435455)!==0?16:536870912:4:1}var El,da,vl,Tl,wl,gi=!1,ha=[],yi=null,_i=null,wn=null,wo=new Map,$i=new Map,cr=[],tc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ws(i,o){switch(i){case"focusin":case"focusout":yi=null;break;case"dragenter":case"dragleave":_i=null;break;case"mouseover":case"mouseout":wn=null;break;case"pointerover":case"pointerout":wo.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":$i.delete(o.pointerId)}}function qr(i,o,u,d,m,g){return i===null||i.nativeEvent!==g?(i={blockedOn:o,domEventName:u,eventSystemFlags:d,nativeEvent:g,targetContainers:[m]},o!==null&&(o=Vl(o),o!==null&&da(o)),i):(i.eventSystemFlags|=d,o=i.targetContainers,m!==null&&o.indexOf(m)===-1&&o.push(m),i)}function nc(i,o,u,d,m){switch(o){case"focusin":return yi=qr(yi,i,o,u,d,m),!0;case"dragenter":return _i=qr(_i,i,o,u,d,m),!0;case"mouseover":return wn=qr(wn,i,o,u,d,m),!0;case"pointerover":var g=m.pointerId;return wo.set(g,qr(wo.get(g)||null,i,o,u,d,m)),!0;case"gotpointercapture":return g=m.pointerId,$i.set(g,qr($i.get(g)||null,i,o,u,d,m)),!0}return!1}function fa(i){var o=Ao(i.target);if(o!==null){var u=Re(o);if(u!==null){if(o=u.tag,o===13){if(o=qe(u),o!==null){i.blockedOn=o,wl(i.priority,function(){vl(u)});return}}else if(o===3&&u.stateNode.current.memoizedState.isDehydrated){i.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Ct(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var u=pa(i.domEventName,i.eventSystemFlags,o[0],i.nativeEvent);if(u===null){u=i.nativeEvent;var d=new u.constructor(u.type,u);hi=d,u.target.dispatchEvent(d),hi=null}else return o=Vl(u),o!==null&&da(o),i.blockedOn=u,!1;o.shift()}return!0}function rc(i,o,u){Ct(i)&&u.delete(o)}function xh(){gi=!1,yi!==null&&Ct(yi)&&(yi=null),_i!==null&&Ct(_i)&&(_i=null),wn!==null&&Ct(wn)&&(wn=null),wo.forEach(rc),$i.forEach(rc)}function Ss(i,o){i.blockedOn===o&&(i.blockedOn=null,gi||(gi=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,xh)))}function Is(i){function o(m){return Ss(m,i)}if(0<ha.length){Ss(ha[0],i);for(var u=1;u<ha.length;u++){var d=ha[u];d.blockedOn===i&&(d.blockedOn=null)}}for(yi!==null&&Ss(yi,i),_i!==null&&Ss(_i,i),wn!==null&&Ss(wn,i),wo.forEach(o),$i.forEach(o),u=0;u<cr.length;u++)d=cr[u],d.blockedOn===i&&(d.blockedOn=null);for(;0<cr.length&&(u=cr[0],u.blockedOn===null);)fa(u),u.blockedOn===null&&cr.shift()}var Ki=oe.ReactCurrentBatchConfig,Xi=!0;function Ei(i,o,u,d){var m=pt,g=Ki.transition;Ki.transition=null;try{pt=1,Sl(i,o,u,d)}finally{pt=m,Ki.transition=g}}function ic(i,o,u,d){var m=pt,g=Ki.transition;Ki.transition=null;try{pt=4,Sl(i,o,u,d)}finally{pt=m,Ki.transition=g}}function Sl(i,o,u,d){if(Xi){var m=pa(i,o,u,d);if(m===null)qh(i,o,d,vi,u),ws(i,d);else if(nc(m,i,o,u,d))d.stopPropagation();else if(ws(i,d),o&4&&-1<tc.indexOf(i)){for(;m!==null;){var g=Vl(m);if(g!==null&&El(g),g=pa(i,o,u,d),g===null&&qh(i,o,d,vi,u),g===m)break;m=g}m!==null&&d.stopPropagation()}else qh(i,o,d,null,u)}}var vi=null;function pa(i,o,u,d){if(vi=null,i=zi(d),i=Ao(i),i!==null)if(o=Re(i),o===null)i=null;else if(u=o.tag,u===13){if(i=qe(o),i!==null)return i;i=null}else if(u===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null);return vi=i,null}function ma(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Wi()){case Gn:return 1;case bn:return 4;case Gr:case Hr:return 16;case er:return 536870912;default:return 16}default:return 16}}var dr=null,ga=null,Yi=null;function sc(){if(Yi)return Yi;var i,o=ga,u=o.length,d,m="value"in dr?dr.value:dr.textContent,g=m.length;for(i=0;i<u&&o[i]===m[i];i++);var w=u-i;for(d=1;d<=w&&o[u-d]===m[g-d];d++);return Yi=m.slice(i,1<d?1-d:void 0)}function So(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function Ti(){return!0}function Il(){return!1}function Dn(i){function o(u,d,m,g,w){this._reactName=u,this._targetInst=m,this.type=d,this.nativeEvent=g,this.target=w,this.currentTarget=null;for(var O in i)i.hasOwnProperty(O)&&(u=i[O],this[O]=u?u(g):g[O]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?Ti:Il,this.isPropagationStopped=Il,this}return ue(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Ti)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Ti)},persist:function(){},isPersistent:Ti}),o}var wi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Io=Dn(wi),Rs=ue({},wi,{view:0,detail:0}),ya=Dn(Rs),_a,Ea,hr,Ro=ue({},Rs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ze,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==hr&&(hr&&i.type==="mousemove"?(_a=i.screenX-hr.screenX,Ea=i.screenY-hr.screenY):Ea=_a=0,hr=i),_a)},movementY:function(i){return"movementY"in i?i.movementY:Ea}}),Rl=Dn(Ro),oc=ue({},Ro,{dataTransfer:0}),ac=Dn(oc),va=ue({},Rs,{relatedTarget:0}),Sn=Dn(va),lc=ue({},wi,{animationName:0,elapsedTime:0,pseudoElement:0}),uc=Dn(lc),As=ue({},wi,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),c=Dn(As),y=ue({},wi,{data:0}),v=Dn(y),R={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},q={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Q={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fe(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=Q[i])?!!o[i]:!1}function Ze(){return fe}var Qt=ue({},Rs,{key:function(i){if(i.key){var o=R[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=So(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?q[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ze,charCode:function(i){return i.type==="keypress"?So(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?So(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),At=Dn(Qt),tn=ue({},Ro,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),fr=Dn(tn),Qi=ue({},Rs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ze}),Si=Dn(Qi),Ii=ue({},wi,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ta=Dn(Ii),Al=ue({},Ro,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),YS=Dn(Al),QS=[9,13,27,32],Vh=h&&"CompositionEvent"in window,Pl=null;h&&"documentMode"in document&&(Pl=document.documentMode);var JS=h&&"TextEvent"in window&&!Pl,Ig=h&&(!Vh||Pl&&8<Pl&&11>=Pl),Rg=" ",Ag=!1;function Pg(i,o){switch(i){case"keyup":return QS.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Cg(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var wa=!1;function ZS(i,o){switch(i){case"compositionend":return Cg(o);case"keypress":return o.which!==32?null:(Ag=!0,Rg);case"textInput":return i=o.data,i===Rg&&Ag?null:i;default:return null}}function eI(i,o){if(wa)return i==="compositionend"||!Vh&&Pg(i,o)?(i=sc(),Yi=ga=dr=null,wa=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return Ig&&o.locale!=="ko"?null:o.data;default:return null}}var tI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ng(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!tI[i.type]:o==="textarea"}function kg(i,o,u,d){zr(d),o=pc(o,"onChange"),0<o.length&&(u=new Io("onChange","change",null,u,d),i.push({event:u,listeners:o}))}var Cl=null,Nl=null;function nI(i){Kg(i,0)}function cc(i){var o=Pa(i);if(Wt(o))return i}function rI(i,o){if(i==="change")return o}var bg=!1;if(h){var Mh;if(h){var Uh="oninput"in document;if(!Uh){var Dg=document.createElement("div");Dg.setAttribute("oninput","return;"),Uh=typeof Dg.oninput=="function"}Mh=Uh}else Mh=!1;bg=Mh&&(!document.documentMode||9<document.documentMode)}function Og(){Cl&&(Cl.detachEvent("onpropertychange",Lg),Nl=Cl=null)}function Lg(i){if(i.propertyName==="value"&&cc(Nl)){var o=[];kg(o,Nl,i,zi(i)),_o(nI,o)}}function iI(i,o,u){i==="focusin"?(Og(),Cl=o,Nl=u,Cl.attachEvent("onpropertychange",Lg)):i==="focusout"&&Og()}function sI(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return cc(Nl)}function oI(i,o){if(i==="click")return cc(o)}function aI(i,o){if(i==="input"||i==="change")return cc(o)}function lI(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var $r=typeof Object.is=="function"?Object.is:lI;function kl(i,o){if($r(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var u=Object.keys(i),d=Object.keys(o);if(u.length!==d.length)return!1;for(d=0;d<u.length;d++){var m=u[d];if(!f.call(o,m)||!$r(i[m],o[m]))return!1}return!0}function xg(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Vg(i,o){var u=xg(i);i=0;for(var d;u;){if(u.nodeType===3){if(d=i+u.textContent.length,i<=o&&d>=o)return{node:u,offset:o-i};i=d}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=xg(u)}}function Mg(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?Mg(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function Ug(){for(var i=window,o=jn();o instanceof i.HTMLIFrameElement;){try{var u=typeof o.contentWindow.location.href=="string"}catch{u=!1}if(u)i=o.contentWindow;else break;o=jn(i.document)}return o}function Fh(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}function uI(i){var o=Ug(),u=i.focusedElem,d=i.selectionRange;if(o!==u&&u&&u.ownerDocument&&Mg(u.ownerDocument.documentElement,u)){if(d!==null&&Fh(u)){if(o=d.start,i=d.end,i===void 0&&(i=o),"selectionStart"in u)u.selectionStart=o,u.selectionEnd=Math.min(i,u.value.length);else if(i=(o=u.ownerDocument||document)&&o.defaultView||window,i.getSelection){i=i.getSelection();var m=u.textContent.length,g=Math.min(d.start,m);d=d.end===void 0?g:Math.min(d.end,m),!i.extend&&g>d&&(m=d,d=g,g=m),m=Vg(u,g);var w=Vg(u,d);m&&w&&(i.rangeCount!==1||i.anchorNode!==m.node||i.anchorOffset!==m.offset||i.focusNode!==w.node||i.focusOffset!==w.offset)&&(o=o.createRange(),o.setStart(m.node,m.offset),i.removeAllRanges(),g>d?(i.addRange(o),i.extend(w.node,w.offset)):(o.setEnd(w.node,w.offset),i.addRange(o)))}}for(o=[],i=u;i=i.parentNode;)i.nodeType===1&&o.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof u.focus=="function"&&u.focus(),u=0;u<o.length;u++)i=o[u],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var cI=h&&"documentMode"in document&&11>=document.documentMode,Sa=null,Bh=null,bl=null,jh=!1;function Fg(i,o,u){var d=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;jh||Sa==null||Sa!==jn(d)||(d=Sa,"selectionStart"in d&&Fh(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),bl&&kl(bl,d)||(bl=d,d=pc(Bh,"onSelect"),0<d.length&&(o=new Io("onSelect","select",null,o,u),i.push({event:o,listeners:d}),o.target=Sa)))}function dc(i,o){var u={};return u[i.toLowerCase()]=o.toLowerCase(),u["Webkit"+i]="webkit"+o,u["Moz"+i]="moz"+o,u}var Ia={animationend:dc("Animation","AnimationEnd"),animationiteration:dc("Animation","AnimationIteration"),animationstart:dc("Animation","AnimationStart"),transitionend:dc("Transition","TransitionEnd")},zh={},Bg={};h&&(Bg=document.createElement("div").style,"AnimationEvent"in window||(delete Ia.animationend.animation,delete Ia.animationiteration.animation,delete Ia.animationstart.animation),"TransitionEvent"in window||delete Ia.transitionend.transition);function hc(i){if(zh[i])return zh[i];if(!Ia[i])return i;var o=Ia[i],u;for(u in o)if(o.hasOwnProperty(u)&&u in Bg)return zh[i]=o[u];return i}var jg=hc("animationend"),zg=hc("animationiteration"),Gg=hc("animationstart"),Hg=hc("transitionend"),Wg=new Map,qg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ps(i,o){Wg.set(i,o),a(o,[i])}for(var Gh=0;Gh<qg.length;Gh++){var Hh=qg[Gh],dI=Hh.toLowerCase(),hI=Hh[0].toUpperCase()+Hh.slice(1);Ps(dI,"on"+hI)}Ps(jg,"onAnimationEnd"),Ps(zg,"onAnimationIteration"),Ps(Gg,"onAnimationStart"),Ps("dblclick","onDoubleClick"),Ps("focusin","onFocus"),Ps("focusout","onBlur"),Ps(Hg,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Dl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),fI=new Set("cancel close invalid load scroll toggle".split(" ").concat(Dl));function $g(i,o,u){var d=i.type||"unknown-event";i.currentTarget=u,Se(d,o,void 0,i),i.currentTarget=null}function Kg(i,o){o=(o&4)!==0;for(var u=0;u<i.length;u++){var d=i[u],m=d.event;d=d.listeners;e:{var g=void 0;if(o)for(var w=d.length-1;0<=w;w--){var O=d[w],F=O.instance,Y=O.currentTarget;if(O=O.listener,F!==g&&m.isPropagationStopped())break e;$g(m,O,Y),g=F}else for(w=0;w<d.length;w++){if(O=d[w],F=O.instance,Y=O.currentTarget,O=O.listener,F!==g&&m.isPropagationStopped())break e;$g(m,O,Y),g=F}}}if(ce)throw i=Te,ce=!1,Te=null,i}function Ot(i,o){var u=o[Jh];u===void 0&&(u=o[Jh]=new Set);var d=i+"__bubble";u.has(d)||(Xg(o,i,2,!1),u.add(d))}function Wh(i,o,u){var d=0;o&&(d|=4),Xg(u,i,d,o)}var fc="_reactListening"+Math.random().toString(36).slice(2);function Ol(i){if(!i[fc]){i[fc]=!0,r.forEach(function(u){u!=="selectionchange"&&(fI.has(u)||Wh(u,!1,i),Wh(u,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[fc]||(o[fc]=!0,Wh("selectionchange",!1,o))}}function Xg(i,o,u,d){switch(ma(o)){case 1:var m=Ei;break;case 4:m=ic;break;default:m=Sl}u=m.bind(null,o,u,i),m=void 0,!pi||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(m=!0),d?m!==void 0?i.addEventListener(o,u,{capture:!0,passive:m}):i.addEventListener(o,u,!0):m!==void 0?i.addEventListener(o,u,{passive:m}):i.addEventListener(o,u,!1)}function qh(i,o,u,d,m){var g=d;if((o&1)===0&&(o&2)===0&&d!==null)e:for(;;){if(d===null)return;var w=d.tag;if(w===3||w===4){var O=d.stateNode.containerInfo;if(O===m||O.nodeType===8&&O.parentNode===m)break;if(w===4)for(w=d.return;w!==null;){var F=w.tag;if((F===3||F===4)&&(F=w.stateNode.containerInfo,F===m||F.nodeType===8&&F.parentNode===m))return;w=w.return}for(;O!==null;){if(w=Ao(O),w===null)return;if(F=w.tag,F===5||F===6){d=g=w;continue e}O=O.parentNode}}d=d.return}_o(function(){var Y=g,ae=zi(u),le=[];e:{var se=Wg.get(i);if(se!==void 0){var ve=Io,Pe=i;switch(i){case"keypress":if(So(u)===0)break e;case"keydown":case"keyup":ve=At;break;case"focusin":Pe="focus",ve=Sn;break;case"focusout":Pe="blur",ve=Sn;break;case"beforeblur":case"afterblur":ve=Sn;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ve=Rl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ve=ac;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ve=Si;break;case jg:case zg:case Gg:ve=uc;break;case Hg:ve=Ta;break;case"scroll":ve=ya;break;case"wheel":ve=YS;break;case"copy":case"cut":case"paste":ve=c;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ve=fr}var Ce=(o&4)!==0,Jt=!Ce&&i==="scroll",W=Ce?se!==null?se+"Capture":null:se;Ce=[];for(var B=Y,X;B!==null;){X=B;var de=X.stateNode;if(X.tag===5&&de!==null&&(X=de,W!==null&&(de=Hi(B,W),de!=null&&Ce.push(Ll(B,de,X)))),Jt)break;B=B.return}0<Ce.length&&(se=new ve(se,Pe,null,u,ae),le.push({event:se,listeners:Ce}))}}if((o&7)===0){e:{if(se=i==="mouseover"||i==="pointerover",ve=i==="mouseout"||i==="pointerout",se&&u!==hi&&(Pe=u.relatedTarget||u.fromElement)&&(Ao(Pe)||Pe[Ji]))break e;if((ve||se)&&(se=ae.window===ae?ae:(se=ae.ownerDocument)?se.defaultView||se.parentWindow:window,ve?(Pe=u.relatedTarget||u.toElement,ve=Y,Pe=Pe?Ao(Pe):null,Pe!==null&&(Jt=Re(Pe),Pe!==Jt||Pe.tag!==5&&Pe.tag!==6)&&(Pe=null)):(ve=null,Pe=Y),ve!==Pe)){if(Ce=Rl,de="onMouseLeave",W="onMouseEnter",B="mouse",(i==="pointerout"||i==="pointerover")&&(Ce=fr,de="onPointerLeave",W="onPointerEnter",B="pointer"),Jt=ve==null?se:Pa(ve),X=Pe==null?se:Pa(Pe),se=new Ce(de,B+"leave",ve,u,ae),se.target=Jt,se.relatedTarget=X,de=null,Ao(ae)===Y&&(Ce=new Ce(W,B+"enter",Pe,u,ae),Ce.target=X,Ce.relatedTarget=Jt,de=Ce),Jt=de,ve&&Pe)t:{for(Ce=ve,W=Pe,B=0,X=Ce;X;X=Ra(X))B++;for(X=0,de=W;de;de=Ra(de))X++;for(;0<B-X;)Ce=Ra(Ce),B--;for(;0<X-B;)W=Ra(W),X--;for(;B--;){if(Ce===W||W!==null&&Ce===W.alternate)break t;Ce=Ra(Ce),W=Ra(W)}Ce=null}else Ce=null;ve!==null&&Yg(le,se,ve,Ce,!1),Pe!==null&&Jt!==null&&Yg(le,Jt,Pe,Ce,!0)}}e:{if(se=Y?Pa(Y):window,ve=se.nodeName&&se.nodeName.toLowerCase(),ve==="select"||ve==="input"&&se.type==="file")var Oe=rI;else if(Ng(se))if(bg)Oe=aI;else{Oe=sI;var Be=iI}else(ve=se.nodeName)&&ve.toLowerCase()==="input"&&(se.type==="checkbox"||se.type==="radio")&&(Oe=oI);if(Oe&&(Oe=Oe(i,Y))){kg(le,Oe,u,ae);break e}Be&&Be(i,se,Y),i==="focusout"&&(Be=se._wrapperState)&&Be.controlled&&se.type==="number"&&Ut(se,"number",se.value)}switch(Be=Y?Pa(Y):window,i){case"focusin":(Ng(Be)||Be.contentEditable==="true")&&(Sa=Be,Bh=Y,bl=null);break;case"focusout":bl=Bh=Sa=null;break;case"mousedown":jh=!0;break;case"contextmenu":case"mouseup":case"dragend":jh=!1,Fg(le,u,ae);break;case"selectionchange":if(cI)break;case"keydown":case"keyup":Fg(le,u,ae)}var je;if(Vh)e:{switch(i){case"compositionstart":var Ke="onCompositionStart";break e;case"compositionend":Ke="onCompositionEnd";break e;case"compositionupdate":Ke="onCompositionUpdate";break e}Ke=void 0}else wa?Pg(i,u)&&(Ke="onCompositionEnd"):i==="keydown"&&u.keyCode===229&&(Ke="onCompositionStart");Ke&&(Ig&&u.locale!=="ko"&&(wa||Ke!=="onCompositionStart"?Ke==="onCompositionEnd"&&wa&&(je=sc()):(dr=ae,ga="value"in dr?dr.value:dr.textContent,wa=!0)),Be=pc(Y,Ke),0<Be.length&&(Ke=new v(Ke,i,null,u,ae),le.push({event:Ke,listeners:Be}),je?Ke.data=je:(je=Cg(u),je!==null&&(Ke.data=je)))),(je=JS?ZS(i,u):eI(i,u))&&(Y=pc(Y,"onBeforeInput"),0<Y.length&&(ae=new v("onBeforeInput","beforeinput",null,u,ae),le.push({event:ae,listeners:Y}),ae.data=je))}Kg(le,o)})}function Ll(i,o,u){return{instance:i,listener:o,currentTarget:u}}function pc(i,o){for(var u=o+"Capture",d=[];i!==null;){var m=i,g=m.stateNode;m.tag===5&&g!==null&&(m=g,g=Hi(i,u),g!=null&&d.unshift(Ll(i,g,m)),g=Hi(i,o),g!=null&&d.push(Ll(i,g,m))),i=i.return}return d}function Ra(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function Yg(i,o,u,d,m){for(var g=o._reactName,w=[];u!==null&&u!==d;){var O=u,F=O.alternate,Y=O.stateNode;if(F!==null&&F===d)break;O.tag===5&&Y!==null&&(O=Y,m?(F=Hi(u,g),F!=null&&w.unshift(Ll(u,F,O))):m||(F=Hi(u,g),F!=null&&w.push(Ll(u,F,O)))),u=u.return}w.length!==0&&i.push({event:o,listeners:w})}var pI=/\r\n?/g,mI=/\u0000|\uFFFD/g;function Qg(i){return(typeof i=="string"?i:""+i).replace(pI,`
`).replace(mI,"")}function mc(i,o,u){if(o=Qg(o),Qg(i)!==o&&u)throw Error(t(425))}function gc(){}var $h=null,Kh=null;function Xh(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var Yh=typeof setTimeout=="function"?setTimeout:void 0,gI=typeof clearTimeout=="function"?clearTimeout:void 0,Jg=typeof Promise=="function"?Promise:void 0,yI=typeof queueMicrotask=="function"?queueMicrotask:typeof Jg<"u"?function(i){return Jg.resolve(null).then(i).catch(_I)}:Yh;function _I(i){setTimeout(function(){throw i})}function Qh(i,o){var u=o,d=0;do{var m=u.nextSibling;if(i.removeChild(u),m&&m.nodeType===8)if(u=m.data,u==="/$"){if(d===0){i.removeChild(m),Is(o);return}d--}else u!=="$"&&u!=="$?"&&u!=="$!"||d++;u=m}while(u);Is(o)}function Cs(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return i}function Zg(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var u=i.data;if(u==="$"||u==="$!"||u==="$?"){if(o===0)return i;o--}else u==="/$"&&o++}i=i.previousSibling}return null}var Aa=Math.random().toString(36).slice(2),Ri="__reactFiber$"+Aa,xl="__reactProps$"+Aa,Ji="__reactContainer$"+Aa,Jh="__reactEvents$"+Aa,EI="__reactListeners$"+Aa,vI="__reactHandles$"+Aa;function Ao(i){var o=i[Ri];if(o)return o;for(var u=i.parentNode;u;){if(o=u[Ji]||u[Ri]){if(u=o.alternate,o.child!==null||u!==null&&u.child!==null)for(i=Zg(i);i!==null;){if(u=i[Ri])return u;i=Zg(i)}return o}i=u,u=i.parentNode}return null}function Vl(i){return i=i[Ri]||i[Ji],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function Pa(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(t(33))}function yc(i){return i[xl]||null}var Zh=[],Ca=-1;function Ns(i){return{current:i}}function Lt(i){0>Ca||(i.current=Zh[Ca],Zh[Ca]=null,Ca--)}function kt(i,o){Ca++,Zh[Ca]=i.current,i.current=o}var ks={},On=Ns(ks),tr=Ns(!1),Po=ks;function Na(i,o){var u=i.type.contextTypes;if(!u)return ks;var d=i.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===o)return d.__reactInternalMemoizedMaskedChildContext;var m={},g;for(g in u)m[g]=o[g];return d&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=o,i.__reactInternalMemoizedMaskedChildContext=m),m}function nr(i){return i=i.childContextTypes,i!=null}function _c(){Lt(tr),Lt(On)}function ey(i,o,u){if(On.current!==ks)throw Error(t(168));kt(On,o),kt(tr,u)}function ty(i,o,u){var d=i.stateNode;if(o=o.childContextTypes,typeof d.getChildContext!="function")return u;d=d.getChildContext();for(var m in d)if(!(m in o))throw Error(t(108,rt(i)||"Unknown",m));return ue({},u,d)}function Ec(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||ks,Po=On.current,kt(On,i),kt(tr,tr.current),!0}function ny(i,o,u){var d=i.stateNode;if(!d)throw Error(t(169));u?(i=ty(i,o,Po),d.__reactInternalMemoizedMergedChildContext=i,Lt(tr),Lt(On),kt(On,i)):Lt(tr),kt(tr,u)}var Zi=null,vc=!1,ef=!1;function ry(i){Zi===null?Zi=[i]:Zi.push(i)}function TI(i){vc=!0,ry(i)}function bs(){if(!ef&&Zi!==null){ef=!0;var i=0,o=pt;try{var u=Zi;for(pt=1;i<u.length;i++){var d=u[i];do d=d(!0);while(d!==null)}Zi=null,vc=!1}catch(m){throw Zi!==null&&(Zi=Zi.slice(i+1)),xt(Gn,bs),m}finally{pt=o,ef=!1}}return null}var ka=[],ba=0,Tc=null,wc=0,Cr=[],Nr=0,Co=null,es=1,ts="";function No(i,o){ka[ba++]=wc,ka[ba++]=Tc,Tc=i,wc=o}function iy(i,o,u){Cr[Nr++]=es,Cr[Nr++]=ts,Cr[Nr++]=Co,Co=i;var d=es;i=ts;var m=32-It(d)-1;d&=~(1<<m),u+=1;var g=32-It(o)+m;if(30<g){var w=m-m%5;g=(d&(1<<w)-1).toString(32),d>>=w,m-=w,es=1<<32-It(o)+m|u<<m|d,ts=g+i}else es=1<<g|u<<m|d,ts=i}function tf(i){i.return!==null&&(No(i,1),iy(i,1,0))}function nf(i){for(;i===Tc;)Tc=ka[--ba],ka[ba]=null,wc=ka[--ba],ka[ba]=null;for(;i===Co;)Co=Cr[--Nr],Cr[Nr]=null,ts=Cr[--Nr],Cr[Nr]=null,es=Cr[--Nr],Cr[Nr]=null}var pr=null,mr=null,Vt=!1,Kr=null;function sy(i,o){var u=Or(5,null,null,0);u.elementType="DELETED",u.stateNode=o,u.return=i,o=i.deletions,o===null?(i.deletions=[u],i.flags|=16):o.push(u)}function oy(i,o){switch(i.tag){case 5:var u=i.type;return o=o.nodeType!==1||u.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(i.stateNode=o,pr=i,mr=Cs(o.firstChild),!0):!1;case 6:return o=i.pendingProps===""||o.nodeType!==3?null:o,o!==null?(i.stateNode=o,pr=i,mr=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(u=Co!==null?{id:es,overflow:ts}:null,i.memoizedState={dehydrated:o,treeContext:u,retryLane:1073741824},u=Or(18,null,null,0),u.stateNode=o,u.return=i,i.child=u,pr=i,mr=null,!0):!1;default:return!1}}function rf(i){return(i.mode&1)!==0&&(i.flags&128)===0}function sf(i){if(Vt){var o=mr;if(o){var u=o;if(!oy(i,o)){if(rf(i))throw Error(t(418));o=Cs(u.nextSibling);var d=pr;o&&oy(i,o)?sy(d,u):(i.flags=i.flags&-4097|2,Vt=!1,pr=i)}}else{if(rf(i))throw Error(t(418));i.flags=i.flags&-4097|2,Vt=!1,pr=i}}}function ay(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;pr=i}function Sc(i){if(i!==pr)return!1;if(!Vt)return ay(i),Vt=!0,!1;var o;if((o=i.tag!==3)&&!(o=i.tag!==5)&&(o=i.type,o=o!=="head"&&o!=="body"&&!Xh(i.type,i.memoizedProps)),o&&(o=mr)){if(rf(i))throw ly(),Error(t(418));for(;o;)sy(i,o),o=Cs(o.nextSibling)}if(ay(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(t(317));e:{for(i=i.nextSibling,o=0;i;){if(i.nodeType===8){var u=i.data;if(u==="/$"){if(o===0){mr=Cs(i.nextSibling);break e}o--}else u!=="$"&&u!=="$!"&&u!=="$?"||o++}i=i.nextSibling}mr=null}}else mr=pr?Cs(i.stateNode.nextSibling):null;return!0}function ly(){for(var i=mr;i;)i=Cs(i.nextSibling)}function Da(){mr=pr=null,Vt=!1}function of(i){Kr===null?Kr=[i]:Kr.push(i)}var wI=oe.ReactCurrentBatchConfig;function Ml(i,o,u){if(i=u.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(u._owner){if(u=u._owner,u){if(u.tag!==1)throw Error(t(309));var d=u.stateNode}if(!d)throw Error(t(147,i));var m=d,g=""+i;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===g?o.ref:(o=function(w){var O=m.refs;w===null?delete O[g]:O[g]=w},o._stringRef=g,o)}if(typeof i!="string")throw Error(t(284));if(!u._owner)throw Error(t(290,i))}return i}function Ic(i,o){throw i=Object.prototype.toString.call(o),Error(t(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i))}function uy(i){var o=i._init;return o(i._payload)}function cy(i){function o(W,B){if(i){var X=W.deletions;X===null?(W.deletions=[B],W.flags|=16):X.push(B)}}function u(W,B){if(!i)return null;for(;B!==null;)o(W,B),B=B.sibling;return null}function d(W,B){for(W=new Map;B!==null;)B.key!==null?W.set(B.key,B):W.set(B.index,B),B=B.sibling;return W}function m(W,B){return W=Fs(W,B),W.index=0,W.sibling=null,W}function g(W,B,X){return W.index=X,i?(X=W.alternate,X!==null?(X=X.index,X<B?(W.flags|=2,B):X):(W.flags|=2,B)):(W.flags|=1048576,B)}function w(W){return i&&W.alternate===null&&(W.flags|=2),W}function O(W,B,X,de){return B===null||B.tag!==6?(B=Qf(X,W.mode,de),B.return=W,B):(B=m(B,X),B.return=W,B)}function F(W,B,X,de){var Oe=X.type;return Oe===I?ae(W,B,X.props.children,de,X.key):B!==null&&(B.elementType===Oe||typeof Oe=="object"&&Oe!==null&&Oe.$$typeof===Xe&&uy(Oe)===B.type)?(de=m(B,X.props),de.ref=Ml(W,B,X),de.return=W,de):(de=Kc(X.type,X.key,X.props,null,W.mode,de),de.ref=Ml(W,B,X),de.return=W,de)}function Y(W,B,X,de){return B===null||B.tag!==4||B.stateNode.containerInfo!==X.containerInfo||B.stateNode.implementation!==X.implementation?(B=Jf(X,W.mode,de),B.return=W,B):(B=m(B,X.children||[]),B.return=W,B)}function ae(W,B,X,de,Oe){return B===null||B.tag!==7?(B=Mo(X,W.mode,de,Oe),B.return=W,B):(B=m(B,X),B.return=W,B)}function le(W,B,X){if(typeof B=="string"&&B!==""||typeof B=="number")return B=Qf(""+B,W.mode,X),B.return=W,B;if(typeof B=="object"&&B!==null){switch(B.$$typeof){case we:return X=Kc(B.type,B.key,B.props,null,W.mode,X),X.ref=Ml(W,null,B),X.return=W,X;case me:return B=Jf(B,W.mode,X),B.return=W,B;case Xe:var de=B._init;return le(W,de(B._payload),X)}if(Ft(B)||_e(B))return B=Mo(B,W.mode,X,null),B.return=W,B;Ic(W,B)}return null}function se(W,B,X,de){var Oe=B!==null?B.key:null;if(typeof X=="string"&&X!==""||typeof X=="number")return Oe!==null?null:O(W,B,""+X,de);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case we:return X.key===Oe?F(W,B,X,de):null;case me:return X.key===Oe?Y(W,B,X,de):null;case Xe:return Oe=X._init,se(W,B,Oe(X._payload),de)}if(Ft(X)||_e(X))return Oe!==null?null:ae(W,B,X,de,null);Ic(W,X)}return null}function ve(W,B,X,de,Oe){if(typeof de=="string"&&de!==""||typeof de=="number")return W=W.get(X)||null,O(B,W,""+de,Oe);if(typeof de=="object"&&de!==null){switch(de.$$typeof){case we:return W=W.get(de.key===null?X:de.key)||null,F(B,W,de,Oe);case me:return W=W.get(de.key===null?X:de.key)||null,Y(B,W,de,Oe);case Xe:var Be=de._init;return ve(W,B,X,Be(de._payload),Oe)}if(Ft(de)||_e(de))return W=W.get(X)||null,ae(B,W,de,Oe,null);Ic(B,de)}return null}function Pe(W,B,X,de){for(var Oe=null,Be=null,je=B,Ke=B=0,gn=null;je!==null&&Ke<X.length;Ke++){je.index>Ke?(gn=je,je=null):gn=je.sibling;var wt=se(W,je,X[Ke],de);if(wt===null){je===null&&(je=gn);break}i&&je&&wt.alternate===null&&o(W,je),B=g(wt,B,Ke),Be===null?Oe=wt:Be.sibling=wt,Be=wt,je=gn}if(Ke===X.length)return u(W,je),Vt&&No(W,Ke),Oe;if(je===null){for(;Ke<X.length;Ke++)je=le(W,X[Ke],de),je!==null&&(B=g(je,B,Ke),Be===null?Oe=je:Be.sibling=je,Be=je);return Vt&&No(W,Ke),Oe}for(je=d(W,je);Ke<X.length;Ke++)gn=ve(je,W,Ke,X[Ke],de),gn!==null&&(i&&gn.alternate!==null&&je.delete(gn.key===null?Ke:gn.key),B=g(gn,B,Ke),Be===null?Oe=gn:Be.sibling=gn,Be=gn);return i&&je.forEach(function(Bs){return o(W,Bs)}),Vt&&No(W,Ke),Oe}function Ce(W,B,X,de){var Oe=_e(X);if(typeof Oe!="function")throw Error(t(150));if(X=Oe.call(X),X==null)throw Error(t(151));for(var Be=Oe=null,je=B,Ke=B=0,gn=null,wt=X.next();je!==null&&!wt.done;Ke++,wt=X.next()){je.index>Ke?(gn=je,je=null):gn=je.sibling;var Bs=se(W,je,wt.value,de);if(Bs===null){je===null&&(je=gn);break}i&&je&&Bs.alternate===null&&o(W,je),B=g(Bs,B,Ke),Be===null?Oe=Bs:Be.sibling=Bs,Be=Bs,je=gn}if(wt.done)return u(W,je),Vt&&No(W,Ke),Oe;if(je===null){for(;!wt.done;Ke++,wt=X.next())wt=le(W,wt.value,de),wt!==null&&(B=g(wt,B,Ke),Be===null?Oe=wt:Be.sibling=wt,Be=wt);return Vt&&No(W,Ke),Oe}for(je=d(W,je);!wt.done;Ke++,wt=X.next())wt=ve(je,W,Ke,wt.value,de),wt!==null&&(i&&wt.alternate!==null&&je.delete(wt.key===null?Ke:wt.key),B=g(wt,B,Ke),Be===null?Oe=wt:Be.sibling=wt,Be=wt);return i&&je.forEach(function(tR){return o(W,tR)}),Vt&&No(W,Ke),Oe}function Jt(W,B,X,de){if(typeof X=="object"&&X!==null&&X.type===I&&X.key===null&&(X=X.props.children),typeof X=="object"&&X!==null){switch(X.$$typeof){case we:e:{for(var Oe=X.key,Be=B;Be!==null;){if(Be.key===Oe){if(Oe=X.type,Oe===I){if(Be.tag===7){u(W,Be.sibling),B=m(Be,X.props.children),B.return=W,W=B;break e}}else if(Be.elementType===Oe||typeof Oe=="object"&&Oe!==null&&Oe.$$typeof===Xe&&uy(Oe)===Be.type){u(W,Be.sibling),B=m(Be,X.props),B.ref=Ml(W,Be,X),B.return=W,W=B;break e}u(W,Be);break}else o(W,Be);Be=Be.sibling}X.type===I?(B=Mo(X.props.children,W.mode,de,X.key),B.return=W,W=B):(de=Kc(X.type,X.key,X.props,null,W.mode,de),de.ref=Ml(W,B,X),de.return=W,W=de)}return w(W);case me:e:{for(Be=X.key;B!==null;){if(B.key===Be)if(B.tag===4&&B.stateNode.containerInfo===X.containerInfo&&B.stateNode.implementation===X.implementation){u(W,B.sibling),B=m(B,X.children||[]),B.return=W,W=B;break e}else{u(W,B);break}else o(W,B);B=B.sibling}B=Jf(X,W.mode,de),B.return=W,W=B}return w(W);case Xe:return Be=X._init,Jt(W,B,Be(X._payload),de)}if(Ft(X))return Pe(W,B,X,de);if(_e(X))return Ce(W,B,X,de);Ic(W,X)}return typeof X=="string"&&X!==""||typeof X=="number"?(X=""+X,B!==null&&B.tag===6?(u(W,B.sibling),B=m(B,X),B.return=W,W=B):(u(W,B),B=Qf(X,W.mode,de),B.return=W,W=B),w(W)):u(W,B)}return Jt}var Oa=cy(!0),dy=cy(!1),Rc=Ns(null),Ac=null,La=null,af=null;function lf(){af=La=Ac=null}function uf(i){var o=Rc.current;Lt(Rc),i._currentValue=o}function cf(i,o,u){for(;i!==null;){var d=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,d!==null&&(d.childLanes|=o)):d!==null&&(d.childLanes&o)!==o&&(d.childLanes|=o),i===u)break;i=i.return}}function xa(i,o){Ac=i,af=La=null,i=i.dependencies,i!==null&&i.firstContext!==null&&((i.lanes&o)!==0&&(rr=!0),i.firstContext=null)}function kr(i){var o=i._currentValue;if(af!==i)if(i={context:i,memoizedValue:o,next:null},La===null){if(Ac===null)throw Error(t(308));La=i,Ac.dependencies={lanes:0,firstContext:i}}else La=La.next=i;return o}var ko=null;function df(i){ko===null?ko=[i]:ko.push(i)}function hy(i,o,u,d){var m=o.interleaved;return m===null?(u.next=u,df(o)):(u.next=m.next,m.next=u),o.interleaved=u,ns(i,d)}function ns(i,o){i.lanes|=o;var u=i.alternate;for(u!==null&&(u.lanes|=o),u=i,i=i.return;i!==null;)i.childLanes|=o,u=i.alternate,u!==null&&(u.childLanes|=o),u=i,i=i.return;return u.tag===3?u.stateNode:null}var Ds=!1;function hf(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function fy(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function rs(i,o){return{eventTime:i,lane:o,tag:0,payload:null,callback:null,next:null}}function Os(i,o,u){var d=i.updateQueue;if(d===null)return null;if(d=d.shared,(Tt&2)!==0){var m=d.pending;return m===null?o.next=o:(o.next=m.next,m.next=o),d.pending=o,ns(i,u)}return m=d.interleaved,m===null?(o.next=o,df(d)):(o.next=m.next,m.next=o),d.interleaved=o,ns(i,u)}function Pc(i,o,u){if(o=o.updateQueue,o!==null&&(o=o.shared,(u&4194240)!==0)){var d=o.lanes;d&=i.pendingLanes,u|=d,o.lanes=u,_l(i,u)}}function py(i,o){var u=i.updateQueue,d=i.alternate;if(d!==null&&(d=d.updateQueue,u===d)){var m=null,g=null;if(u=u.firstBaseUpdate,u!==null){do{var w={eventTime:u.eventTime,lane:u.lane,tag:u.tag,payload:u.payload,callback:u.callback,next:null};g===null?m=g=w:g=g.next=w,u=u.next}while(u!==null);g===null?m=g=o:g=g.next=o}else m=g=o;u={baseState:d.baseState,firstBaseUpdate:m,lastBaseUpdate:g,shared:d.shared,effects:d.effects},i.updateQueue=u;return}i=u.lastBaseUpdate,i===null?u.firstBaseUpdate=o:i.next=o,u.lastBaseUpdate=o}function Cc(i,o,u,d){var m=i.updateQueue;Ds=!1;var g=m.firstBaseUpdate,w=m.lastBaseUpdate,O=m.shared.pending;if(O!==null){m.shared.pending=null;var F=O,Y=F.next;F.next=null,w===null?g=Y:w.next=Y,w=F;var ae=i.alternate;ae!==null&&(ae=ae.updateQueue,O=ae.lastBaseUpdate,O!==w&&(O===null?ae.firstBaseUpdate=Y:O.next=Y,ae.lastBaseUpdate=F))}if(g!==null){var le=m.baseState;w=0,ae=Y=F=null,O=g;do{var se=O.lane,ve=O.eventTime;if((d&se)===se){ae!==null&&(ae=ae.next={eventTime:ve,lane:0,tag:O.tag,payload:O.payload,callback:O.callback,next:null});e:{var Pe=i,Ce=O;switch(se=o,ve=u,Ce.tag){case 1:if(Pe=Ce.payload,typeof Pe=="function"){le=Pe.call(ve,le,se);break e}le=Pe;break e;case 3:Pe.flags=Pe.flags&-65537|128;case 0:if(Pe=Ce.payload,se=typeof Pe=="function"?Pe.call(ve,le,se):Pe,se==null)break e;le=ue({},le,se);break e;case 2:Ds=!0}}O.callback!==null&&O.lane!==0&&(i.flags|=64,se=m.effects,se===null?m.effects=[O]:se.push(O))}else ve={eventTime:ve,lane:se,tag:O.tag,payload:O.payload,callback:O.callback,next:null},ae===null?(Y=ae=ve,F=le):ae=ae.next=ve,w|=se;if(O=O.next,O===null){if(O=m.shared.pending,O===null)break;se=O,O=se.next,se.next=null,m.lastBaseUpdate=se,m.shared.pending=null}}while(!0);if(ae===null&&(F=le),m.baseState=F,m.firstBaseUpdate=Y,m.lastBaseUpdate=ae,o=m.shared.interleaved,o!==null){m=o;do w|=m.lane,m=m.next;while(m!==o)}else g===null&&(m.shared.lanes=0);Oo|=w,i.lanes=w,i.memoizedState=le}}function my(i,o,u){if(i=o.effects,o.effects=null,i!==null)for(o=0;o<i.length;o++){var d=i[o],m=d.callback;if(m!==null){if(d.callback=null,d=u,typeof m!="function")throw Error(t(191,m));m.call(d)}}}var Ul={},Ai=Ns(Ul),Fl=Ns(Ul),Bl=Ns(Ul);function bo(i){if(i===Ul)throw Error(t(174));return i}function ff(i,o){switch(kt(Bl,o),kt(Fl,i),kt(Ai,Ul),i=o.nodeType,i){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:li(null,"");break;default:i=i===8?o.parentNode:o,o=i.namespaceURI||null,i=i.tagName,o=li(o,i)}Lt(Ai),kt(Ai,o)}function Va(){Lt(Ai),Lt(Fl),Lt(Bl)}function gy(i){bo(Bl.current);var o=bo(Ai.current),u=li(o,i.type);o!==u&&(kt(Fl,i),kt(Ai,u))}function pf(i){Fl.current===i&&(Lt(Ai),Lt(Fl))}var Bt=Ns(0);function Nc(i){for(var o=i;o!==null;){if(o.tag===13){var u=o.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||u.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var mf=[];function gf(){for(var i=0;i<mf.length;i++)mf[i]._workInProgressVersionPrimary=null;mf.length=0}var kc=oe.ReactCurrentDispatcher,yf=oe.ReactCurrentBatchConfig,Do=0,jt=null,un=null,pn=null,bc=!1,jl=!1,zl=0,SI=0;function Ln(){throw Error(t(321))}function _f(i,o){if(o===null)return!1;for(var u=0;u<o.length&&u<i.length;u++)if(!$r(i[u],o[u]))return!1;return!0}function Ef(i,o,u,d,m,g){if(Do=g,jt=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,kc.current=i===null||i.memoizedState===null?PI:CI,i=u(d,m),jl){g=0;do{if(jl=!1,zl=0,25<=g)throw Error(t(301));g+=1,pn=un=null,o.updateQueue=null,kc.current=NI,i=u(d,m)}while(jl)}if(kc.current=Lc,o=un!==null&&un.next!==null,Do=0,pn=un=jt=null,bc=!1,o)throw Error(t(300));return i}function vf(){var i=zl!==0;return zl=0,i}function Pi(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pn===null?jt.memoizedState=pn=i:pn=pn.next=i,pn}function br(){if(un===null){var i=jt.alternate;i=i!==null?i.memoizedState:null}else i=un.next;var o=pn===null?jt.memoizedState:pn.next;if(o!==null)pn=o,un=i;else{if(i===null)throw Error(t(310));un=i,i={memoizedState:un.memoizedState,baseState:un.baseState,baseQueue:un.baseQueue,queue:un.queue,next:null},pn===null?jt.memoizedState=pn=i:pn=pn.next=i}return pn}function Gl(i,o){return typeof o=="function"?o(i):o}function Tf(i){var o=br(),u=o.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=i;var d=un,m=d.baseQueue,g=u.pending;if(g!==null){if(m!==null){var w=m.next;m.next=g.next,g.next=w}d.baseQueue=m=g,u.pending=null}if(m!==null){g=m.next,d=d.baseState;var O=w=null,F=null,Y=g;do{var ae=Y.lane;if((Do&ae)===ae)F!==null&&(F=F.next={lane:0,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null}),d=Y.hasEagerState?Y.eagerState:i(d,Y.action);else{var le={lane:ae,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null};F===null?(O=F=le,w=d):F=F.next=le,jt.lanes|=ae,Oo|=ae}Y=Y.next}while(Y!==null&&Y!==g);F===null?w=d:F.next=O,$r(d,o.memoizedState)||(rr=!0),o.memoizedState=d,o.baseState=w,o.baseQueue=F,u.lastRenderedState=d}if(i=u.interleaved,i!==null){m=i;do g=m.lane,jt.lanes|=g,Oo|=g,m=m.next;while(m!==i)}else m===null&&(u.lanes=0);return[o.memoizedState,u.dispatch]}function wf(i){var o=br(),u=o.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=i;var d=u.dispatch,m=u.pending,g=o.memoizedState;if(m!==null){u.pending=null;var w=m=m.next;do g=i(g,w.action),w=w.next;while(w!==m);$r(g,o.memoizedState)||(rr=!0),o.memoizedState=g,o.baseQueue===null&&(o.baseState=g),u.lastRenderedState=g}return[g,d]}function yy(){}function _y(i,o){var u=jt,d=br(),m=o(),g=!$r(d.memoizedState,m);if(g&&(d.memoizedState=m,rr=!0),d=d.queue,Sf(Ty.bind(null,u,d,i),[i]),d.getSnapshot!==o||g||pn!==null&&pn.memoizedState.tag&1){if(u.flags|=2048,Hl(9,vy.bind(null,u,d,m,o),void 0,null),mn===null)throw Error(t(349));(Do&30)!==0||Ey(u,o,m)}return m}function Ey(i,o,u){i.flags|=16384,i={getSnapshot:o,value:u},o=jt.updateQueue,o===null?(o={lastEffect:null,stores:null},jt.updateQueue=o,o.stores=[i]):(u=o.stores,u===null?o.stores=[i]:u.push(i))}function vy(i,o,u,d){o.value=u,o.getSnapshot=d,wy(o)&&Sy(i)}function Ty(i,o,u){return u(function(){wy(o)&&Sy(i)})}function wy(i){var o=i.getSnapshot;i=i.value;try{var u=o();return!$r(i,u)}catch{return!0}}function Sy(i){var o=ns(i,1);o!==null&&Jr(o,i,1,-1)}function Iy(i){var o=Pi();return typeof i=="function"&&(i=i()),o.memoizedState=o.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Gl,lastRenderedState:i},o.queue=i,i=i.dispatch=AI.bind(null,jt,i),[o.memoizedState,i]}function Hl(i,o,u,d){return i={tag:i,create:o,destroy:u,deps:d,next:null},o=jt.updateQueue,o===null?(o={lastEffect:null,stores:null},jt.updateQueue=o,o.lastEffect=i.next=i):(u=o.lastEffect,u===null?o.lastEffect=i.next=i:(d=u.next,u.next=i,i.next=d,o.lastEffect=i)),i}function Ry(){return br().memoizedState}function Dc(i,o,u,d){var m=Pi();jt.flags|=i,m.memoizedState=Hl(1|o,u,void 0,d===void 0?null:d)}function Oc(i,o,u,d){var m=br();d=d===void 0?null:d;var g=void 0;if(un!==null){var w=un.memoizedState;if(g=w.destroy,d!==null&&_f(d,w.deps)){m.memoizedState=Hl(o,u,g,d);return}}jt.flags|=i,m.memoizedState=Hl(1|o,u,g,d)}function Ay(i,o){return Dc(8390656,8,i,o)}function Sf(i,o){return Oc(2048,8,i,o)}function Py(i,o){return Oc(4,2,i,o)}function Cy(i,o){return Oc(4,4,i,o)}function Ny(i,o){if(typeof o=="function")return i=i(),o(i),function(){o(null)};if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function ky(i,o,u){return u=u!=null?u.concat([i]):null,Oc(4,4,Ny.bind(null,o,i),u)}function If(){}function by(i,o){var u=br();o=o===void 0?null:o;var d=u.memoizedState;return d!==null&&o!==null&&_f(o,d[1])?d[0]:(u.memoizedState=[i,o],i)}function Dy(i,o){var u=br();o=o===void 0?null:o;var d=u.memoizedState;return d!==null&&o!==null&&_f(o,d[1])?d[0]:(i=i(),u.memoizedState=[i,o],i)}function Oy(i,o,u){return(Do&21)===0?(i.baseState&&(i.baseState=!1,rr=!0),i.memoizedState=u):($r(u,o)||(u=gl(),jt.lanes|=u,Oo|=u,i.baseState=!0),o)}function II(i,o){var u=pt;pt=u!==0&&4>u?u:4,i(!0);var d=yf.transition;yf.transition={};try{i(!1),o()}finally{pt=u,yf.transition=d}}function Ly(){return br().memoizedState}function RI(i,o,u){var d=Ms(i);if(u={lane:d,action:u,hasEagerState:!1,eagerState:null,next:null},xy(i))Vy(o,u);else if(u=hy(i,o,u,d),u!==null){var m=qn();Jr(u,i,d,m),My(u,o,d)}}function AI(i,o,u){var d=Ms(i),m={lane:d,action:u,hasEagerState:!1,eagerState:null,next:null};if(xy(i))Vy(o,m);else{var g=i.alternate;if(i.lanes===0&&(g===null||g.lanes===0)&&(g=o.lastRenderedReducer,g!==null))try{var w=o.lastRenderedState,O=g(w,u);if(m.hasEagerState=!0,m.eagerState=O,$r(O,w)){var F=o.interleaved;F===null?(m.next=m,df(o)):(m.next=F.next,F.next=m),o.interleaved=m;return}}catch{}finally{}u=hy(i,o,m,d),u!==null&&(m=qn(),Jr(u,i,d,m),My(u,o,d))}}function xy(i){var o=i.alternate;return i===jt||o!==null&&o===jt}function Vy(i,o){jl=bc=!0;var u=i.pending;u===null?o.next=o:(o.next=u.next,u.next=o),i.pending=o}function My(i,o,u){if((u&4194240)!==0){var d=o.lanes;d&=i.pendingLanes,u|=d,o.lanes=u,_l(i,u)}}var Lc={readContext:kr,useCallback:Ln,useContext:Ln,useEffect:Ln,useImperativeHandle:Ln,useInsertionEffect:Ln,useLayoutEffect:Ln,useMemo:Ln,useReducer:Ln,useRef:Ln,useState:Ln,useDebugValue:Ln,useDeferredValue:Ln,useTransition:Ln,useMutableSource:Ln,useSyncExternalStore:Ln,useId:Ln,unstable_isNewReconciler:!1},PI={readContext:kr,useCallback:function(i,o){return Pi().memoizedState=[i,o===void 0?null:o],i},useContext:kr,useEffect:Ay,useImperativeHandle:function(i,o,u){return u=u!=null?u.concat([i]):null,Dc(4194308,4,Ny.bind(null,o,i),u)},useLayoutEffect:function(i,o){return Dc(4194308,4,i,o)},useInsertionEffect:function(i,o){return Dc(4,2,i,o)},useMemo:function(i,o){var u=Pi();return o=o===void 0?null:o,i=i(),u.memoizedState=[i,o],i},useReducer:function(i,o,u){var d=Pi();return o=u!==void 0?u(o):o,d.memoizedState=d.baseState=o,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:o},d.queue=i,i=i.dispatch=RI.bind(null,jt,i),[d.memoizedState,i]},useRef:function(i){var o=Pi();return i={current:i},o.memoizedState=i},useState:Iy,useDebugValue:If,useDeferredValue:function(i){return Pi().memoizedState=i},useTransition:function(){var i=Iy(!1),o=i[0];return i=II.bind(null,i[1]),Pi().memoizedState=i,[o,i]},useMutableSource:function(){},useSyncExternalStore:function(i,o,u){var d=jt,m=Pi();if(Vt){if(u===void 0)throw Error(t(407));u=u()}else{if(u=o(),mn===null)throw Error(t(349));(Do&30)!==0||Ey(d,o,u)}m.memoizedState=u;var g={value:u,getSnapshot:o};return m.queue=g,Ay(Ty.bind(null,d,g,i),[i]),d.flags|=2048,Hl(9,vy.bind(null,d,g,u,o),void 0,null),u},useId:function(){var i=Pi(),o=mn.identifierPrefix;if(Vt){var u=ts,d=es;u=(d&~(1<<32-It(d)-1)).toString(32)+u,o=":"+o+"R"+u,u=zl++,0<u&&(o+="H"+u.toString(32)),o+=":"}else u=SI++,o=":"+o+"r"+u.toString(32)+":";return i.memoizedState=o},unstable_isNewReconciler:!1},CI={readContext:kr,useCallback:by,useContext:kr,useEffect:Sf,useImperativeHandle:ky,useInsertionEffect:Py,useLayoutEffect:Cy,useMemo:Dy,useReducer:Tf,useRef:Ry,useState:function(){return Tf(Gl)},useDebugValue:If,useDeferredValue:function(i){var o=br();return Oy(o,un.memoizedState,i)},useTransition:function(){var i=Tf(Gl)[0],o=br().memoizedState;return[i,o]},useMutableSource:yy,useSyncExternalStore:_y,useId:Ly,unstable_isNewReconciler:!1},NI={readContext:kr,useCallback:by,useContext:kr,useEffect:Sf,useImperativeHandle:ky,useInsertionEffect:Py,useLayoutEffect:Cy,useMemo:Dy,useReducer:wf,useRef:Ry,useState:function(){return wf(Gl)},useDebugValue:If,useDeferredValue:function(i){var o=br();return un===null?o.memoizedState=i:Oy(o,un.memoizedState,i)},useTransition:function(){var i=wf(Gl)[0],o=br().memoizedState;return[i,o]},useMutableSource:yy,useSyncExternalStore:_y,useId:Ly,unstable_isNewReconciler:!1};function Xr(i,o){if(i&&i.defaultProps){o=ue({},o),i=i.defaultProps;for(var u in i)o[u]===void 0&&(o[u]=i[u]);return o}return o}function Rf(i,o,u,d){o=i.memoizedState,u=u(d,o),u=u==null?o:ue({},o,u),i.memoizedState=u,i.lanes===0&&(i.updateQueue.baseState=u)}var xc={isMounted:function(i){return(i=i._reactInternals)?Re(i)===i:!1},enqueueSetState:function(i,o,u){i=i._reactInternals;var d=qn(),m=Ms(i),g=rs(d,m);g.payload=o,u!=null&&(g.callback=u),o=Os(i,g,m),o!==null&&(Jr(o,i,m,d),Pc(o,i,m))},enqueueReplaceState:function(i,o,u){i=i._reactInternals;var d=qn(),m=Ms(i),g=rs(d,m);g.tag=1,g.payload=o,u!=null&&(g.callback=u),o=Os(i,g,m),o!==null&&(Jr(o,i,m,d),Pc(o,i,m))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var u=qn(),d=Ms(i),m=rs(u,d);m.tag=2,o!=null&&(m.callback=o),o=Os(i,m,d),o!==null&&(Jr(o,i,d,u),Pc(o,i,d))}};function Uy(i,o,u,d,m,g,w){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(d,g,w):o.prototype&&o.prototype.isPureReactComponent?!kl(u,d)||!kl(m,g):!0}function Fy(i,o,u){var d=!1,m=ks,g=o.contextType;return typeof g=="object"&&g!==null?g=kr(g):(m=nr(o)?Po:On.current,d=o.contextTypes,g=(d=d!=null)?Na(i,m):ks),o=new o(u,g),i.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=xc,i.stateNode=o,o._reactInternals=i,d&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=m,i.__reactInternalMemoizedMaskedChildContext=g),o}function By(i,o,u,d){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(u,d),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(u,d),o.state!==i&&xc.enqueueReplaceState(o,o.state,null)}function Af(i,o,u,d){var m=i.stateNode;m.props=u,m.state=i.memoizedState,m.refs={},hf(i);var g=o.contextType;typeof g=="object"&&g!==null?m.context=kr(g):(g=nr(o)?Po:On.current,m.context=Na(i,g)),m.state=i.memoizedState,g=o.getDerivedStateFromProps,typeof g=="function"&&(Rf(i,o,g,u),m.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(o=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),o!==m.state&&xc.enqueueReplaceState(m,m.state,null),Cc(i,u,m,d),m.state=i.memoizedState),typeof m.componentDidMount=="function"&&(i.flags|=4194308)}function Ma(i,o){try{var u="",d=o;do u+=xe(d),d=d.return;while(d);var m=u}catch(g){m=`
Error generating stack: `+g.message+`
`+g.stack}return{value:i,source:o,stack:m,digest:null}}function Pf(i,o,u){return{value:i,source:null,stack:u??null,digest:o??null}}function Cf(i,o){try{console.error(o.value)}catch(u){setTimeout(function(){throw u})}}var kI=typeof WeakMap=="function"?WeakMap:Map;function jy(i,o,u){u=rs(-1,u),u.tag=3,u.payload={element:null};var d=o.value;return u.callback=function(){zc||(zc=!0,Gf=d),Cf(i,o)},u}function zy(i,o,u){u=rs(-1,u),u.tag=3;var d=i.type.getDerivedStateFromError;if(typeof d=="function"){var m=o.value;u.payload=function(){return d(m)},u.callback=function(){Cf(i,o)}}var g=i.stateNode;return g!==null&&typeof g.componentDidCatch=="function"&&(u.callback=function(){Cf(i,o),typeof d!="function"&&(xs===null?xs=new Set([this]):xs.add(this));var w=o.stack;this.componentDidCatch(o.value,{componentStack:w!==null?w:""})}),u}function Gy(i,o,u){var d=i.pingCache;if(d===null){d=i.pingCache=new kI;var m=new Set;d.set(o,m)}else m=d.get(o),m===void 0&&(m=new Set,d.set(o,m));m.has(u)||(m.add(u),i=HI.bind(null,i,o,u),o.then(i,i))}function Hy(i){do{var o;if((o=i.tag===13)&&(o=i.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return i;i=i.return}while(i!==null);return null}function Wy(i,o,u,d,m){return(i.mode&1)===0?(i===o?i.flags|=65536:(i.flags|=128,u.flags|=131072,u.flags&=-52805,u.tag===1&&(u.alternate===null?u.tag=17:(o=rs(-1,1),o.tag=2,Os(u,o,1))),u.lanes|=1),i):(i.flags|=65536,i.lanes=m,i)}var bI=oe.ReactCurrentOwner,rr=!1;function Wn(i,o,u,d){o.child=i===null?dy(o,null,u,d):Oa(o,i.child,u,d)}function qy(i,o,u,d,m){u=u.render;var g=o.ref;return xa(o,m),d=Ef(i,o,u,d,g,m),u=vf(),i!==null&&!rr?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~m,is(i,o,m)):(Vt&&u&&tf(o),o.flags|=1,Wn(i,o,d,m),o.child)}function $y(i,o,u,d,m){if(i===null){var g=u.type;return typeof g=="function"&&!Yf(g)&&g.defaultProps===void 0&&u.compare===null&&u.defaultProps===void 0?(o.tag=15,o.type=g,Ky(i,o,g,d,m)):(i=Kc(u.type,null,d,o,o.mode,m),i.ref=o.ref,i.return=o,o.child=i)}if(g=i.child,(i.lanes&m)===0){var w=g.memoizedProps;if(u=u.compare,u=u!==null?u:kl,u(w,d)&&i.ref===o.ref)return is(i,o,m)}return o.flags|=1,i=Fs(g,d),i.ref=o.ref,i.return=o,o.child=i}function Ky(i,o,u,d,m){if(i!==null){var g=i.memoizedProps;if(kl(g,d)&&i.ref===o.ref)if(rr=!1,o.pendingProps=d=g,(i.lanes&m)!==0)(i.flags&131072)!==0&&(rr=!0);else return o.lanes=i.lanes,is(i,o,m)}return Nf(i,o,u,d,m)}function Xy(i,o,u){var d=o.pendingProps,m=d.children,g=i!==null?i.memoizedState:null;if(d.mode==="hidden")if((o.mode&1)===0)o.memoizedState={baseLanes:0,cachePool:null,transitions:null},kt(Fa,gr),gr|=u;else{if((u&1073741824)===0)return i=g!==null?g.baseLanes|u:u,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:i,cachePool:null,transitions:null},o.updateQueue=null,kt(Fa,gr),gr|=i,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},d=g!==null?g.baseLanes:u,kt(Fa,gr),gr|=d}else g!==null?(d=g.baseLanes|u,o.memoizedState=null):d=u,kt(Fa,gr),gr|=d;return Wn(i,o,m,u),o.child}function Yy(i,o){var u=o.ref;(i===null&&u!==null||i!==null&&i.ref!==u)&&(o.flags|=512,o.flags|=2097152)}function Nf(i,o,u,d,m){var g=nr(u)?Po:On.current;return g=Na(o,g),xa(o,m),u=Ef(i,o,u,d,g,m),d=vf(),i!==null&&!rr?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~m,is(i,o,m)):(Vt&&d&&tf(o),o.flags|=1,Wn(i,o,u,m),o.child)}function Qy(i,o,u,d,m){if(nr(u)){var g=!0;Ec(o)}else g=!1;if(xa(o,m),o.stateNode===null)Mc(i,o),Fy(o,u,d),Af(o,u,d,m),d=!0;else if(i===null){var w=o.stateNode,O=o.memoizedProps;w.props=O;var F=w.context,Y=u.contextType;typeof Y=="object"&&Y!==null?Y=kr(Y):(Y=nr(u)?Po:On.current,Y=Na(o,Y));var ae=u.getDerivedStateFromProps,le=typeof ae=="function"||typeof w.getSnapshotBeforeUpdate=="function";le||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(O!==d||F!==Y)&&By(o,w,d,Y),Ds=!1;var se=o.memoizedState;w.state=se,Cc(o,d,w,m),F=o.memoizedState,O!==d||se!==F||tr.current||Ds?(typeof ae=="function"&&(Rf(o,u,ae,d),F=o.memoizedState),(O=Ds||Uy(o,u,O,d,se,F,Y))?(le||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(o.flags|=4194308)):(typeof w.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=d,o.memoizedState=F),w.props=d,w.state=F,w.context=Y,d=O):(typeof w.componentDidMount=="function"&&(o.flags|=4194308),d=!1)}else{w=o.stateNode,fy(i,o),O=o.memoizedProps,Y=o.type===o.elementType?O:Xr(o.type,O),w.props=Y,le=o.pendingProps,se=w.context,F=u.contextType,typeof F=="object"&&F!==null?F=kr(F):(F=nr(u)?Po:On.current,F=Na(o,F));var ve=u.getDerivedStateFromProps;(ae=typeof ve=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(O!==le||se!==F)&&By(o,w,d,F),Ds=!1,se=o.memoizedState,w.state=se,Cc(o,d,w,m);var Pe=o.memoizedState;O!==le||se!==Pe||tr.current||Ds?(typeof ve=="function"&&(Rf(o,u,ve,d),Pe=o.memoizedState),(Y=Ds||Uy(o,u,Y,d,se,Pe,F)||!1)?(ae||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(d,Pe,F),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(d,Pe,F)),typeof w.componentDidUpdate=="function"&&(o.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof w.componentDidUpdate!="function"||O===i.memoizedProps&&se===i.memoizedState||(o.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||O===i.memoizedProps&&se===i.memoizedState||(o.flags|=1024),o.memoizedProps=d,o.memoizedState=Pe),w.props=d,w.state=Pe,w.context=F,d=Y):(typeof w.componentDidUpdate!="function"||O===i.memoizedProps&&se===i.memoizedState||(o.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||O===i.memoizedProps&&se===i.memoizedState||(o.flags|=1024),d=!1)}return kf(i,o,u,d,g,m)}function kf(i,o,u,d,m,g){Yy(i,o);var w=(o.flags&128)!==0;if(!d&&!w)return m&&ny(o,u,!1),is(i,o,g);d=o.stateNode,bI.current=o;var O=w&&typeof u.getDerivedStateFromError!="function"?null:d.render();return o.flags|=1,i!==null&&w?(o.child=Oa(o,i.child,null,g),o.child=Oa(o,null,O,g)):Wn(i,o,O,g),o.memoizedState=d.state,m&&ny(o,u,!0),o.child}function Jy(i){var o=i.stateNode;o.pendingContext?ey(i,o.pendingContext,o.pendingContext!==o.context):o.context&&ey(i,o.context,!1),ff(i,o.containerInfo)}function Zy(i,o,u,d,m){return Da(),of(m),o.flags|=256,Wn(i,o,u,d),o.child}var bf={dehydrated:null,treeContext:null,retryLane:0};function Df(i){return{baseLanes:i,cachePool:null,transitions:null}}function e_(i,o,u){var d=o.pendingProps,m=Bt.current,g=!1,w=(o.flags&128)!==0,O;if((O=w)||(O=i!==null&&i.memoizedState===null?!1:(m&2)!==0),O?(g=!0,o.flags&=-129):(i===null||i.memoizedState!==null)&&(m|=1),kt(Bt,m&1),i===null)return sf(o),i=o.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?((o.mode&1)===0?o.lanes=1:i.data==="$!"?o.lanes=8:o.lanes=1073741824,null):(w=d.children,i=d.fallback,g?(d=o.mode,g=o.child,w={mode:"hidden",children:w},(d&1)===0&&g!==null?(g.childLanes=0,g.pendingProps=w):g=Xc(w,d,0,null),i=Mo(i,d,u,null),g.return=o,i.return=o,g.sibling=i,o.child=g,o.child.memoizedState=Df(u),o.memoizedState=bf,i):Of(o,w));if(m=i.memoizedState,m!==null&&(O=m.dehydrated,O!==null))return DI(i,o,w,d,O,m,u);if(g){g=d.fallback,w=o.mode,m=i.child,O=m.sibling;var F={mode:"hidden",children:d.children};return(w&1)===0&&o.child!==m?(d=o.child,d.childLanes=0,d.pendingProps=F,o.deletions=null):(d=Fs(m,F),d.subtreeFlags=m.subtreeFlags&14680064),O!==null?g=Fs(O,g):(g=Mo(g,w,u,null),g.flags|=2),g.return=o,d.return=o,d.sibling=g,o.child=d,d=g,g=o.child,w=i.child.memoizedState,w=w===null?Df(u):{baseLanes:w.baseLanes|u,cachePool:null,transitions:w.transitions},g.memoizedState=w,g.childLanes=i.childLanes&~u,o.memoizedState=bf,d}return g=i.child,i=g.sibling,d=Fs(g,{mode:"visible",children:d.children}),(o.mode&1)===0&&(d.lanes=u),d.return=o,d.sibling=null,i!==null&&(u=o.deletions,u===null?(o.deletions=[i],o.flags|=16):u.push(i)),o.child=d,o.memoizedState=null,d}function Of(i,o){return o=Xc({mode:"visible",children:o},i.mode,0,null),o.return=i,i.child=o}function Vc(i,o,u,d){return d!==null&&of(d),Oa(o,i.child,null,u),i=Of(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function DI(i,o,u,d,m,g,w){if(u)return o.flags&256?(o.flags&=-257,d=Pf(Error(t(422))),Vc(i,o,w,d)):o.memoizedState!==null?(o.child=i.child,o.flags|=128,null):(g=d.fallback,m=o.mode,d=Xc({mode:"visible",children:d.children},m,0,null),g=Mo(g,m,w,null),g.flags|=2,d.return=o,g.return=o,d.sibling=g,o.child=d,(o.mode&1)!==0&&Oa(o,i.child,null,w),o.child.memoizedState=Df(w),o.memoizedState=bf,g);if((o.mode&1)===0)return Vc(i,o,w,null);if(m.data==="$!"){if(d=m.nextSibling&&m.nextSibling.dataset,d)var O=d.dgst;return d=O,g=Error(t(419)),d=Pf(g,d,void 0),Vc(i,o,w,d)}if(O=(w&i.childLanes)!==0,rr||O){if(d=mn,d!==null){switch(w&-w){case 4:m=2;break;case 16:m=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:m=32;break;case 536870912:m=268435456;break;default:m=0}m=(m&(d.suspendedLanes|w))!==0?0:m,m!==0&&m!==g.retryLane&&(g.retryLane=m,ns(i,m),Jr(d,i,m,-1))}return Xf(),d=Pf(Error(t(421))),Vc(i,o,w,d)}return m.data==="$?"?(o.flags|=128,o.child=i.child,o=WI.bind(null,i),m._reactRetry=o,null):(i=g.treeContext,mr=Cs(m.nextSibling),pr=o,Vt=!0,Kr=null,i!==null&&(Cr[Nr++]=es,Cr[Nr++]=ts,Cr[Nr++]=Co,es=i.id,ts=i.overflow,Co=o),o=Of(o,d.children),o.flags|=4096,o)}function t_(i,o,u){i.lanes|=o;var d=i.alternate;d!==null&&(d.lanes|=o),cf(i.return,o,u)}function Lf(i,o,u,d,m){var g=i.memoizedState;g===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:d,tail:u,tailMode:m}:(g.isBackwards=o,g.rendering=null,g.renderingStartTime=0,g.last=d,g.tail=u,g.tailMode=m)}function n_(i,o,u){var d=o.pendingProps,m=d.revealOrder,g=d.tail;if(Wn(i,o,d.children,u),d=Bt.current,(d&2)!==0)d=d&1|2,o.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&t_(i,u,o);else if(i.tag===19)t_(i,u,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break e;for(;i.sibling===null;){if(i.return===null||i.return===o)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}d&=1}if(kt(Bt,d),(o.mode&1)===0)o.memoizedState=null;else switch(m){case"forwards":for(u=o.child,m=null;u!==null;)i=u.alternate,i!==null&&Nc(i)===null&&(m=u),u=u.sibling;u=m,u===null?(m=o.child,o.child=null):(m=u.sibling,u.sibling=null),Lf(o,!1,m,u,g);break;case"backwards":for(u=null,m=o.child,o.child=null;m!==null;){if(i=m.alternate,i!==null&&Nc(i)===null){o.child=m;break}i=m.sibling,m.sibling=u,u=m,m=i}Lf(o,!0,u,null,g);break;case"together":Lf(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function Mc(i,o){(o.mode&1)===0&&i!==null&&(i.alternate=null,o.alternate=null,o.flags|=2)}function is(i,o,u){if(i!==null&&(o.dependencies=i.dependencies),Oo|=o.lanes,(u&o.childLanes)===0)return null;if(i!==null&&o.child!==i.child)throw Error(t(153));if(o.child!==null){for(i=o.child,u=Fs(i,i.pendingProps),o.child=u,u.return=o;i.sibling!==null;)i=i.sibling,u=u.sibling=Fs(i,i.pendingProps),u.return=o;u.sibling=null}return o.child}function OI(i,o,u){switch(o.tag){case 3:Jy(o),Da();break;case 5:gy(o);break;case 1:nr(o.type)&&Ec(o);break;case 4:ff(o,o.stateNode.containerInfo);break;case 10:var d=o.type._context,m=o.memoizedProps.value;kt(Rc,d._currentValue),d._currentValue=m;break;case 13:if(d=o.memoizedState,d!==null)return d.dehydrated!==null?(kt(Bt,Bt.current&1),o.flags|=128,null):(u&o.child.childLanes)!==0?e_(i,o,u):(kt(Bt,Bt.current&1),i=is(i,o,u),i!==null?i.sibling:null);kt(Bt,Bt.current&1);break;case 19:if(d=(u&o.childLanes)!==0,(i.flags&128)!==0){if(d)return n_(i,o,u);o.flags|=128}if(m=o.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),kt(Bt,Bt.current),d)break;return null;case 22:case 23:return o.lanes=0,Xy(i,o,u)}return is(i,o,u)}var r_,xf,i_,s_;r_=function(i,o){for(var u=o.child;u!==null;){if(u.tag===5||u.tag===6)i.appendChild(u.stateNode);else if(u.tag!==4&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return;u=u.return}u.sibling.return=u.return,u=u.sibling}},xf=function(){},i_=function(i,o,u,d){var m=i.memoizedProps;if(m!==d){i=o.stateNode,bo(Ai.current);var g=null;switch(u){case"input":m=Fi(i,m),d=Fi(i,d),g=[];break;case"select":m=ue({},m,{value:void 0}),d=ue({},d,{value:void 0}),g=[];break;case"textarea":m=po(i,m),d=po(i,d),g=[];break;default:typeof m.onClick!="function"&&typeof d.onClick=="function"&&(i.onclick=gc)}Jn(u,d);var w;u=null;for(Y in m)if(!d.hasOwnProperty(Y)&&m.hasOwnProperty(Y)&&m[Y]!=null)if(Y==="style"){var O=m[Y];for(w in O)O.hasOwnProperty(w)&&(u||(u={}),u[w]="")}else Y!=="dangerouslySetInnerHTML"&&Y!=="children"&&Y!=="suppressContentEditableWarning"&&Y!=="suppressHydrationWarning"&&Y!=="autoFocus"&&(s.hasOwnProperty(Y)?g||(g=[]):(g=g||[]).push(Y,null));for(Y in d){var F=d[Y];if(O=m!=null?m[Y]:void 0,d.hasOwnProperty(Y)&&F!==O&&(F!=null||O!=null))if(Y==="style")if(O){for(w in O)!O.hasOwnProperty(w)||F&&F.hasOwnProperty(w)||(u||(u={}),u[w]="");for(w in F)F.hasOwnProperty(w)&&O[w]!==F[w]&&(u||(u={}),u[w]=F[w])}else u||(g||(g=[]),g.push(Y,u)),u=F;else Y==="dangerouslySetInnerHTML"?(F=F?F.__html:void 0,O=O?O.__html:void 0,F!=null&&O!==F&&(g=g||[]).push(Y,F)):Y==="children"?typeof F!="string"&&typeof F!="number"||(g=g||[]).push(Y,""+F):Y!=="suppressContentEditableWarning"&&Y!=="suppressHydrationWarning"&&(s.hasOwnProperty(Y)?(F!=null&&Y==="onScroll"&&Ot("scroll",i),g||O===F||(g=[])):(g=g||[]).push(Y,F))}u&&(g=g||[]).push("style",u);var Y=g;(o.updateQueue=Y)&&(o.flags|=4)}},s_=function(i,o,u,d){u!==d&&(o.flags|=4)};function Wl(i,o){if(!Vt)switch(i.tailMode){case"hidden":o=i.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?i.tail=null:u.sibling=null;break;case"collapsed":u=i.tail;for(var d=null;u!==null;)u.alternate!==null&&(d=u),u=u.sibling;d===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:d.sibling=null}}function xn(i){var o=i.alternate!==null&&i.alternate.child===i.child,u=0,d=0;if(o)for(var m=i.child;m!==null;)u|=m.lanes|m.childLanes,d|=m.subtreeFlags&14680064,d|=m.flags&14680064,m.return=i,m=m.sibling;else for(m=i.child;m!==null;)u|=m.lanes|m.childLanes,d|=m.subtreeFlags,d|=m.flags,m.return=i,m=m.sibling;return i.subtreeFlags|=d,i.childLanes=u,o}function LI(i,o,u){var d=o.pendingProps;switch(nf(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xn(o),null;case 1:return nr(o.type)&&_c(),xn(o),null;case 3:return d=o.stateNode,Va(),Lt(tr),Lt(On),gf(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(i===null||i.child===null)&&(Sc(o)?o.flags|=4:i===null||i.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,Kr!==null&&(qf(Kr),Kr=null))),xf(i,o),xn(o),null;case 5:pf(o);var m=bo(Bl.current);if(u=o.type,i!==null&&o.stateNode!=null)i_(i,o,u,d,m),i.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!d){if(o.stateNode===null)throw Error(t(166));return xn(o),null}if(i=bo(Ai.current),Sc(o)){d=o.stateNode,u=o.type;var g=o.memoizedProps;switch(d[Ri]=o,d[xl]=g,i=(o.mode&1)!==0,u){case"dialog":Ot("cancel",d),Ot("close",d);break;case"iframe":case"object":case"embed":Ot("load",d);break;case"video":case"audio":for(m=0;m<Dl.length;m++)Ot(Dl[m],d);break;case"source":Ot("error",d);break;case"img":case"image":case"link":Ot("error",d),Ot("load",d);break;case"details":Ot("toggle",d);break;case"input":ca(d,g),Ot("invalid",d);break;case"select":d._wrapperState={wasMultiple:!!g.multiple},Ot("invalid",d);break;case"textarea":mo(d,g),Ot("invalid",d)}Jn(u,g),m=null;for(var w in g)if(g.hasOwnProperty(w)){var O=g[w];w==="children"?typeof O=="string"?d.textContent!==O&&(g.suppressHydrationWarning!==!0&&mc(d.textContent,O,i),m=["children",O]):typeof O=="number"&&d.textContent!==""+O&&(g.suppressHydrationWarning!==!0&&mc(d.textContent,O,i),m=["children",""+O]):s.hasOwnProperty(w)&&O!=null&&w==="onScroll"&&Ot("scroll",d)}switch(u){case"input":Ir(d),fo(d,g,!0);break;case"textarea":Ir(d),Yn(d);break;case"select":case"option":break;default:typeof g.onClick=="function"&&(d.onclick=gc)}d=m,o.updateQueue=d,d!==null&&(o.flags|=4)}else{w=m.nodeType===9?m:m.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=Es(u)),i==="http://www.w3.org/1999/xhtml"?u==="script"?(i=w.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof d.is=="string"?i=w.createElement(u,{is:d.is}):(i=w.createElement(u),u==="select"&&(w=i,d.multiple?w.multiple=!0:d.size&&(w.size=d.size))):i=w.createElementNS(i,u),i[Ri]=o,i[xl]=d,r_(i,o,!1,!1),o.stateNode=i;e:{switch(w=ji(u,d),u){case"dialog":Ot("cancel",i),Ot("close",i),m=d;break;case"iframe":case"object":case"embed":Ot("load",i),m=d;break;case"video":case"audio":for(m=0;m<Dl.length;m++)Ot(Dl[m],i);m=d;break;case"source":Ot("error",i),m=d;break;case"img":case"image":case"link":Ot("error",i),Ot("load",i),m=d;break;case"details":Ot("toggle",i),m=d;break;case"input":ca(i,d),m=Fi(i,d),Ot("invalid",i);break;case"option":m=d;break;case"select":i._wrapperState={wasMultiple:!!d.multiple},m=ue({},d,{value:void 0}),Ot("invalid",i);break;case"textarea":mo(i,d),m=po(i,d),Ot("invalid",i);break;default:m=d}Jn(u,m),O=m;for(g in O)if(O.hasOwnProperty(g)){var F=O[g];g==="style"?kn(i,F):g==="dangerouslySetInnerHTML"?(F=F?F.__html:void 0,F!=null&&Qn(i,F)):g==="children"?typeof F=="string"?(u!=="textarea"||F!=="")&&ui(i,F):typeof F=="number"&&ui(i,""+F):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(s.hasOwnProperty(g)?F!=null&&g==="onScroll"&&Ot("scroll",i):F!=null&&Z(i,g,F,w))}switch(u){case"input":Ir(i),fo(i,d,!1);break;case"textarea":Ir(i),Yn(i);break;case"option":d.value!=null&&i.setAttribute("value",""+$e(d.value));break;case"select":i.multiple=!!d.multiple,g=d.value,g!=null?ur(i,!!d.multiple,g,!1):d.defaultValue!=null&&ur(i,!!d.multiple,d.defaultValue,!0);break;default:typeof m.onClick=="function"&&(i.onclick=gc)}switch(u){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}}d&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return xn(o),null;case 6:if(i&&o.stateNode!=null)s_(i,o,i.memoizedProps,d);else{if(typeof d!="string"&&o.stateNode===null)throw Error(t(166));if(u=bo(Bl.current),bo(Ai.current),Sc(o)){if(d=o.stateNode,u=o.memoizedProps,d[Ri]=o,(g=d.nodeValue!==u)&&(i=pr,i!==null))switch(i.tag){case 3:mc(d.nodeValue,u,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&mc(d.nodeValue,u,(i.mode&1)!==0)}g&&(o.flags|=4)}else d=(u.nodeType===9?u:u.ownerDocument).createTextNode(d),d[Ri]=o,o.stateNode=d}return xn(o),null;case 13:if(Lt(Bt),d=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(Vt&&mr!==null&&(o.mode&1)!==0&&(o.flags&128)===0)ly(),Da(),o.flags|=98560,g=!1;else if(g=Sc(o),d!==null&&d.dehydrated!==null){if(i===null){if(!g)throw Error(t(318));if(g=o.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(t(317));g[Ri]=o}else Da(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;xn(o),g=!1}else Kr!==null&&(qf(Kr),Kr=null),g=!0;if(!g)return o.flags&65536?o:null}return(o.flags&128)!==0?(o.lanes=u,o):(d=d!==null,d!==(i!==null&&i.memoizedState!==null)&&d&&(o.child.flags|=8192,(o.mode&1)!==0&&(i===null||(Bt.current&1)!==0?cn===0&&(cn=3):Xf())),o.updateQueue!==null&&(o.flags|=4),xn(o),null);case 4:return Va(),xf(i,o),i===null&&Ol(o.stateNode.containerInfo),xn(o),null;case 10:return uf(o.type._context),xn(o),null;case 17:return nr(o.type)&&_c(),xn(o),null;case 19:if(Lt(Bt),g=o.memoizedState,g===null)return xn(o),null;if(d=(o.flags&128)!==0,w=g.rendering,w===null)if(d)Wl(g,!1);else{if(cn!==0||i!==null&&(i.flags&128)!==0)for(i=o.child;i!==null;){if(w=Nc(i),w!==null){for(o.flags|=128,Wl(g,!1),d=w.updateQueue,d!==null&&(o.updateQueue=d,o.flags|=4),o.subtreeFlags=0,d=u,u=o.child;u!==null;)g=u,i=d,g.flags&=14680066,w=g.alternate,w===null?(g.childLanes=0,g.lanes=i,g.child=null,g.subtreeFlags=0,g.memoizedProps=null,g.memoizedState=null,g.updateQueue=null,g.dependencies=null,g.stateNode=null):(g.childLanes=w.childLanes,g.lanes=w.lanes,g.child=w.child,g.subtreeFlags=0,g.deletions=null,g.memoizedProps=w.memoizedProps,g.memoizedState=w.memoizedState,g.updateQueue=w.updateQueue,g.type=w.type,i=w.dependencies,g.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),u=u.sibling;return kt(Bt,Bt.current&1|2),o.child}i=i.sibling}g.tail!==null&&Et()>Ba&&(o.flags|=128,d=!0,Wl(g,!1),o.lanes=4194304)}else{if(!d)if(i=Nc(w),i!==null){if(o.flags|=128,d=!0,u=i.updateQueue,u!==null&&(o.updateQueue=u,o.flags|=4),Wl(g,!0),g.tail===null&&g.tailMode==="hidden"&&!w.alternate&&!Vt)return xn(o),null}else 2*Et()-g.renderingStartTime>Ba&&u!==1073741824&&(o.flags|=128,d=!0,Wl(g,!1),o.lanes=4194304);g.isBackwards?(w.sibling=o.child,o.child=w):(u=g.last,u!==null?u.sibling=w:o.child=w,g.last=w)}return g.tail!==null?(o=g.tail,g.rendering=o,g.tail=o.sibling,g.renderingStartTime=Et(),o.sibling=null,u=Bt.current,kt(Bt,d?u&1|2:u&1),o):(xn(o),null);case 22:case 23:return Kf(),d=o.memoizedState!==null,i!==null&&i.memoizedState!==null!==d&&(o.flags|=8192),d&&(o.mode&1)!==0?(gr&1073741824)!==0&&(xn(o),o.subtreeFlags&6&&(o.flags|=8192)):xn(o),null;case 24:return null;case 25:return null}throw Error(t(156,o.tag))}function xI(i,o){switch(nf(o),o.tag){case 1:return nr(o.type)&&_c(),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return Va(),Lt(tr),Lt(On),gf(),i=o.flags,(i&65536)!==0&&(i&128)===0?(o.flags=i&-65537|128,o):null;case 5:return pf(o),null;case 13:if(Lt(Bt),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(t(340));Da()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return Lt(Bt),null;case 4:return Va(),null;case 10:return uf(o.type._context),null;case 22:case 23:return Kf(),null;case 24:return null;default:return null}}var Uc=!1,Vn=!1,VI=typeof WeakSet=="function"?WeakSet:Set,Ae=null;function Ua(i,o){var u=i.ref;if(u!==null)if(typeof u=="function")try{u(null)}catch(d){Kt(i,o,d)}else u.current=null}function Vf(i,o,u){try{u()}catch(d){Kt(i,o,d)}}var o_=!1;function MI(i,o){if($h=Xi,i=Ug(),Fh(i)){if("selectionStart"in i)var u={start:i.selectionStart,end:i.selectionEnd};else e:{u=(u=i.ownerDocument)&&u.defaultView||window;var d=u.getSelection&&u.getSelection();if(d&&d.rangeCount!==0){u=d.anchorNode;var m=d.anchorOffset,g=d.focusNode;d=d.focusOffset;try{u.nodeType,g.nodeType}catch{u=null;break e}var w=0,O=-1,F=-1,Y=0,ae=0,le=i,se=null;t:for(;;){for(var ve;le!==u||m!==0&&le.nodeType!==3||(O=w+m),le!==g||d!==0&&le.nodeType!==3||(F=w+d),le.nodeType===3&&(w+=le.nodeValue.length),(ve=le.firstChild)!==null;)se=le,le=ve;for(;;){if(le===i)break t;if(se===u&&++Y===m&&(O=w),se===g&&++ae===d&&(F=w),(ve=le.nextSibling)!==null)break;le=se,se=le.parentNode}le=ve}u=O===-1||F===-1?null:{start:O,end:F}}else u=null}u=u||{start:0,end:0}}else u=null;for(Kh={focusedElem:i,selectionRange:u},Xi=!1,Ae=o;Ae!==null;)if(o=Ae,i=o.child,(o.subtreeFlags&1028)!==0&&i!==null)i.return=o,Ae=i;else for(;Ae!==null;){o=Ae;try{var Pe=o.alternate;if((o.flags&1024)!==0)switch(o.tag){case 0:case 11:case 15:break;case 1:if(Pe!==null){var Ce=Pe.memoizedProps,Jt=Pe.memoizedState,W=o.stateNode,B=W.getSnapshotBeforeUpdate(o.elementType===o.type?Ce:Xr(o.type,Ce),Jt);W.__reactInternalSnapshotBeforeUpdate=B}break;case 3:var X=o.stateNode.containerInfo;X.nodeType===1?X.textContent="":X.nodeType===9&&X.documentElement&&X.removeChild(X.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(de){Kt(o,o.return,de)}if(i=o.sibling,i!==null){i.return=o.return,Ae=i;break}Ae=o.return}return Pe=o_,o_=!1,Pe}function ql(i,o,u){var d=o.updateQueue;if(d=d!==null?d.lastEffect:null,d!==null){var m=d=d.next;do{if((m.tag&i)===i){var g=m.destroy;m.destroy=void 0,g!==void 0&&Vf(o,u,g)}m=m.next}while(m!==d)}}function Fc(i,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var u=o=o.next;do{if((u.tag&i)===i){var d=u.create;u.destroy=d()}u=u.next}while(u!==o)}}function Mf(i){var o=i.ref;if(o!==null){var u=i.stateNode;switch(i.tag){case 5:i=u;break;default:i=u}typeof o=="function"?o(i):o.current=i}}function a_(i){var o=i.alternate;o!==null&&(i.alternate=null,a_(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&(delete o[Ri],delete o[xl],delete o[Jh],delete o[EI],delete o[vI])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function l_(i){return i.tag===5||i.tag===3||i.tag===4}function u_(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||l_(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Uf(i,o,u){var d=i.tag;if(d===5||d===6)i=i.stateNode,o?u.nodeType===8?u.parentNode.insertBefore(i,o):u.insertBefore(i,o):(u.nodeType===8?(o=u.parentNode,o.insertBefore(i,u)):(o=u,o.appendChild(i)),u=u._reactRootContainer,u!=null||o.onclick!==null||(o.onclick=gc));else if(d!==4&&(i=i.child,i!==null))for(Uf(i,o,u),i=i.sibling;i!==null;)Uf(i,o,u),i=i.sibling}function Ff(i,o,u){var d=i.tag;if(d===5||d===6)i=i.stateNode,o?u.insertBefore(i,o):u.appendChild(i);else if(d!==4&&(i=i.child,i!==null))for(Ff(i,o,u),i=i.sibling;i!==null;)Ff(i,o,u),i=i.sibling}var In=null,Yr=!1;function Ls(i,o,u){for(u=u.child;u!==null;)c_(i,o,u),u=u.sibling}function c_(i,o,u){if(fn&&typeof fn.onCommitFiberUnmount=="function")try{fn.onCommitFiberUnmount(Pr,u)}catch{}switch(u.tag){case 5:Vn||Ua(u,o);case 6:var d=In,m=Yr;In=null,Ls(i,o,u),In=d,Yr=m,In!==null&&(Yr?(i=In,u=u.stateNode,i.nodeType===8?i.parentNode.removeChild(u):i.removeChild(u)):In.removeChild(u.stateNode));break;case 18:In!==null&&(Yr?(i=In,u=u.stateNode,i.nodeType===8?Qh(i.parentNode,u):i.nodeType===1&&Qh(i,u),Is(i)):Qh(In,u.stateNode));break;case 4:d=In,m=Yr,In=u.stateNode.containerInfo,Yr=!0,Ls(i,o,u),In=d,Yr=m;break;case 0:case 11:case 14:case 15:if(!Vn&&(d=u.updateQueue,d!==null&&(d=d.lastEffect,d!==null))){m=d=d.next;do{var g=m,w=g.destroy;g=g.tag,w!==void 0&&((g&2)!==0||(g&4)!==0)&&Vf(u,o,w),m=m.next}while(m!==d)}Ls(i,o,u);break;case 1:if(!Vn&&(Ua(u,o),d=u.stateNode,typeof d.componentWillUnmount=="function"))try{d.props=u.memoizedProps,d.state=u.memoizedState,d.componentWillUnmount()}catch(O){Kt(u,o,O)}Ls(i,o,u);break;case 21:Ls(i,o,u);break;case 22:u.mode&1?(Vn=(d=Vn)||u.memoizedState!==null,Ls(i,o,u),Vn=d):Ls(i,o,u);break;default:Ls(i,o,u)}}function d_(i){var o=i.updateQueue;if(o!==null){i.updateQueue=null;var u=i.stateNode;u===null&&(u=i.stateNode=new VI),o.forEach(function(d){var m=qI.bind(null,i,d);u.has(d)||(u.add(d),d.then(m,m))})}}function Qr(i,o){var u=o.deletions;if(u!==null)for(var d=0;d<u.length;d++){var m=u[d];try{var g=i,w=o,O=w;e:for(;O!==null;){switch(O.tag){case 5:In=O.stateNode,Yr=!1;break e;case 3:In=O.stateNode.containerInfo,Yr=!0;break e;case 4:In=O.stateNode.containerInfo,Yr=!0;break e}O=O.return}if(In===null)throw Error(t(160));c_(g,w,m),In=null,Yr=!1;var F=m.alternate;F!==null&&(F.return=null),m.return=null}catch(Y){Kt(m,o,Y)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)h_(o,i),o=o.sibling}function h_(i,o){var u=i.alternate,d=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(Qr(o,i),Ci(i),d&4){try{ql(3,i,i.return),Fc(3,i)}catch(Ce){Kt(i,i.return,Ce)}try{ql(5,i,i.return)}catch(Ce){Kt(i,i.return,Ce)}}break;case 1:Qr(o,i),Ci(i),d&512&&u!==null&&Ua(u,u.return);break;case 5:if(Qr(o,i),Ci(i),d&512&&u!==null&&Ua(u,u.return),i.flags&32){var m=i.stateNode;try{ui(m,"")}catch(Ce){Kt(i,i.return,Ce)}}if(d&4&&(m=i.stateNode,m!=null)){var g=i.memoizedProps,w=u!==null?u.memoizedProps:g,O=i.type,F=i.updateQueue;if(i.updateQueue=null,F!==null)try{O==="input"&&g.type==="radio"&&g.name!=null&&Xn(m,g),ji(O,w);var Y=ji(O,g);for(w=0;w<F.length;w+=2){var ae=F[w],le=F[w+1];ae==="style"?kn(m,le):ae==="dangerouslySetInnerHTML"?Qn(m,le):ae==="children"?ui(m,le):Z(m,ae,le,Y)}switch(O){case"input":Bi(m,g);break;case"textarea":Rr(m,g);break;case"select":var se=m._wrapperState.wasMultiple;m._wrapperState.wasMultiple=!!g.multiple;var ve=g.value;ve!=null?ur(m,!!g.multiple,ve,!1):se!==!!g.multiple&&(g.defaultValue!=null?ur(m,!!g.multiple,g.defaultValue,!0):ur(m,!!g.multiple,g.multiple?[]:"",!1))}m[xl]=g}catch(Ce){Kt(i,i.return,Ce)}}break;case 6:if(Qr(o,i),Ci(i),d&4){if(i.stateNode===null)throw Error(t(162));m=i.stateNode,g=i.memoizedProps;try{m.nodeValue=g}catch(Ce){Kt(i,i.return,Ce)}}break;case 3:if(Qr(o,i),Ci(i),d&4&&u!==null&&u.memoizedState.isDehydrated)try{Is(o.containerInfo)}catch(Ce){Kt(i,i.return,Ce)}break;case 4:Qr(o,i),Ci(i);break;case 13:Qr(o,i),Ci(i),m=i.child,m.flags&8192&&(g=m.memoizedState!==null,m.stateNode.isHidden=g,!g||m.alternate!==null&&m.alternate.memoizedState!==null||(zf=Et())),d&4&&d_(i);break;case 22:if(ae=u!==null&&u.memoizedState!==null,i.mode&1?(Vn=(Y=Vn)||ae,Qr(o,i),Vn=Y):Qr(o,i),Ci(i),d&8192){if(Y=i.memoizedState!==null,(i.stateNode.isHidden=Y)&&!ae&&(i.mode&1)!==0)for(Ae=i,ae=i.child;ae!==null;){for(le=Ae=ae;Ae!==null;){switch(se=Ae,ve=se.child,se.tag){case 0:case 11:case 14:case 15:ql(4,se,se.return);break;case 1:Ua(se,se.return);var Pe=se.stateNode;if(typeof Pe.componentWillUnmount=="function"){d=se,u=se.return;try{o=d,Pe.props=o.memoizedProps,Pe.state=o.memoizedState,Pe.componentWillUnmount()}catch(Ce){Kt(d,u,Ce)}}break;case 5:Ua(se,se.return);break;case 22:if(se.memoizedState!==null){m_(le);continue}}ve!==null?(ve.return=se,Ae=ve):m_(le)}ae=ae.sibling}e:for(ae=null,le=i;;){if(le.tag===5){if(ae===null){ae=le;try{m=le.stateNode,Y?(g=m.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none"):(O=le.stateNode,F=le.memoizedProps.style,w=F!=null&&F.hasOwnProperty("display")?F.display:null,O.style.display=di("display",w))}catch(Ce){Kt(i,i.return,Ce)}}}else if(le.tag===6){if(ae===null)try{le.stateNode.nodeValue=Y?"":le.memoizedProps}catch(Ce){Kt(i,i.return,Ce)}}else if((le.tag!==22&&le.tag!==23||le.memoizedState===null||le===i)&&le.child!==null){le.child.return=le,le=le.child;continue}if(le===i)break e;for(;le.sibling===null;){if(le.return===null||le.return===i)break e;ae===le&&(ae=null),le=le.return}ae===le&&(ae=null),le.sibling.return=le.return,le=le.sibling}}break;case 19:Qr(o,i),Ci(i),d&4&&d_(i);break;case 21:break;default:Qr(o,i),Ci(i)}}function Ci(i){var o=i.flags;if(o&2){try{e:{for(var u=i.return;u!==null;){if(l_(u)){var d=u;break e}u=u.return}throw Error(t(160))}switch(d.tag){case 5:var m=d.stateNode;d.flags&32&&(ui(m,""),d.flags&=-33);var g=u_(i);Ff(i,g,m);break;case 3:case 4:var w=d.stateNode.containerInfo,O=u_(i);Uf(i,O,w);break;default:throw Error(t(161))}}catch(F){Kt(i,i.return,F)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function UI(i,o,u){Ae=i,f_(i)}function f_(i,o,u){for(var d=(i.mode&1)!==0;Ae!==null;){var m=Ae,g=m.child;if(m.tag===22&&d){var w=m.memoizedState!==null||Uc;if(!w){var O=m.alternate,F=O!==null&&O.memoizedState!==null||Vn;O=Uc;var Y=Vn;if(Uc=w,(Vn=F)&&!Y)for(Ae=m;Ae!==null;)w=Ae,F=w.child,w.tag===22&&w.memoizedState!==null?g_(m):F!==null?(F.return=w,Ae=F):g_(m);for(;g!==null;)Ae=g,f_(g),g=g.sibling;Ae=m,Uc=O,Vn=Y}p_(i)}else(m.subtreeFlags&8772)!==0&&g!==null?(g.return=m,Ae=g):p_(i)}}function p_(i){for(;Ae!==null;){var o=Ae;if((o.flags&8772)!==0){var u=o.alternate;try{if((o.flags&8772)!==0)switch(o.tag){case 0:case 11:case 15:Vn||Fc(5,o);break;case 1:var d=o.stateNode;if(o.flags&4&&!Vn)if(u===null)d.componentDidMount();else{var m=o.elementType===o.type?u.memoizedProps:Xr(o.type,u.memoizedProps);d.componentDidUpdate(m,u.memoizedState,d.__reactInternalSnapshotBeforeUpdate)}var g=o.updateQueue;g!==null&&my(o,g,d);break;case 3:var w=o.updateQueue;if(w!==null){if(u=null,o.child!==null)switch(o.child.tag){case 5:u=o.child.stateNode;break;case 1:u=o.child.stateNode}my(o,w,u)}break;case 5:var O=o.stateNode;if(u===null&&o.flags&4){u=O;var F=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":F.autoFocus&&u.focus();break;case"img":F.src&&(u.src=F.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var Y=o.alternate;if(Y!==null){var ae=Y.memoizedState;if(ae!==null){var le=ae.dehydrated;le!==null&&Is(le)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Vn||o.flags&512&&Mf(o)}catch(se){Kt(o,o.return,se)}}if(o===i){Ae=null;break}if(u=o.sibling,u!==null){u.return=o.return,Ae=u;break}Ae=o.return}}function m_(i){for(;Ae!==null;){var o=Ae;if(o===i){Ae=null;break}var u=o.sibling;if(u!==null){u.return=o.return,Ae=u;break}Ae=o.return}}function g_(i){for(;Ae!==null;){var o=Ae;try{switch(o.tag){case 0:case 11:case 15:var u=o.return;try{Fc(4,o)}catch(F){Kt(o,u,F)}break;case 1:var d=o.stateNode;if(typeof d.componentDidMount=="function"){var m=o.return;try{d.componentDidMount()}catch(F){Kt(o,m,F)}}var g=o.return;try{Mf(o)}catch(F){Kt(o,g,F)}break;case 5:var w=o.return;try{Mf(o)}catch(F){Kt(o,w,F)}}}catch(F){Kt(o,o.return,F)}if(o===i){Ae=null;break}var O=o.sibling;if(O!==null){O.return=o.return,Ae=O;break}Ae=o.return}}var FI=Math.ceil,Bc=oe.ReactCurrentDispatcher,Bf=oe.ReactCurrentOwner,Dr=oe.ReactCurrentBatchConfig,Tt=0,mn=null,nn=null,Rn=0,gr=0,Fa=Ns(0),cn=0,$l=null,Oo=0,jc=0,jf=0,Kl=null,ir=null,zf=0,Ba=1/0,ss=null,zc=!1,Gf=null,xs=null,Gc=!1,Vs=null,Hc=0,Xl=0,Hf=null,Wc=-1,qc=0;function qn(){return(Tt&6)!==0?Et():Wc!==-1?Wc:Wc=Et()}function Ms(i){return(i.mode&1)===0?1:(Tt&2)!==0&&Rn!==0?Rn&-Rn:wI.transition!==null?(qc===0&&(qc=gl()),qc):(i=pt,i!==0||(i=window.event,i=i===void 0?16:ma(i.type)),i)}function Jr(i,o,u,d){if(50<Xl)throw Xl=0,Hf=null,Error(t(185));To(i,u,d),((Tt&2)===0||i!==mn)&&(i===mn&&((Tt&2)===0&&(jc|=u),cn===4&&Us(i,Rn)),sr(i,d),u===1&&Tt===0&&(o.mode&1)===0&&(Ba=Et()+500,vc&&bs()))}function sr(i,o){var u=i.callbackNode;vo(i,o);var d=qi(i,i===mn?Rn:0);if(d===0)u!==null&&qt(u),i.callbackNode=null,i.callbackPriority=0;else if(o=d&-d,i.callbackPriority!==o){if(u!=null&&qt(u),o===1)i.tag===0?TI(__.bind(null,i)):ry(__.bind(null,i)),yI(function(){(Tt&6)===0&&bs()}),u=null;else{switch(mi(d)){case 1:u=Gn;break;case 4:u=bn;break;case 16:u=Gr;break;case 536870912:u=er;break;default:u=Gr}u=A_(u,y_.bind(null,i))}i.callbackPriority=o,i.callbackNode=u}}function y_(i,o){if(Wc=-1,qc=0,(Tt&6)!==0)throw Error(t(327));var u=i.callbackNode;if(ja()&&i.callbackNode!==u)return null;var d=qi(i,i===mn?Rn:0);if(d===0)return null;if((d&30)!==0||(d&i.expiredLanes)!==0||o)o=$c(i,d);else{o=d;var m=Tt;Tt|=2;var g=v_();(mn!==i||Rn!==o)&&(ss=null,Ba=Et()+500,xo(i,o));do try{zI();break}catch(O){E_(i,O)}while(!0);lf(),Bc.current=g,Tt=m,nn!==null?o=0:(mn=null,Rn=0,o=cn)}if(o!==0){if(o===2&&(m=ml(i),m!==0&&(d=m,o=Wf(i,m))),o===1)throw u=$l,xo(i,0),Us(i,d),sr(i,Et()),u;if(o===6)Us(i,d);else{if(m=i.current.alternate,(d&30)===0&&!BI(m)&&(o=$c(i,d),o===2&&(g=ml(i),g!==0&&(d=g,o=Wf(i,g))),o===1))throw u=$l,xo(i,0),Us(i,d),sr(i,Et()),u;switch(i.finishedWork=m,i.finishedLanes=d,o){case 0:case 1:throw Error(t(345));case 2:Vo(i,ir,ss);break;case 3:if(Us(i,d),(d&130023424)===d&&(o=zf+500-Et(),10<o)){if(qi(i,0)!==0)break;if(m=i.suspendedLanes,(m&d)!==d){qn(),i.pingedLanes|=i.suspendedLanes&m;break}i.timeoutHandle=Yh(Vo.bind(null,i,ir,ss),o);break}Vo(i,ir,ss);break;case 4:if(Us(i,d),(d&4194240)===d)break;for(o=i.eventTimes,m=-1;0<d;){var w=31-It(d);g=1<<w,w=o[w],w>m&&(m=w),d&=~g}if(d=m,d=Et()-d,d=(120>d?120:480>d?480:1080>d?1080:1920>d?1920:3e3>d?3e3:4320>d?4320:1960*FI(d/1960))-d,10<d){i.timeoutHandle=Yh(Vo.bind(null,i,ir,ss),d);break}Vo(i,ir,ss);break;case 5:Vo(i,ir,ss);break;default:throw Error(t(329))}}}return sr(i,Et()),i.callbackNode===u?y_.bind(null,i):null}function Wf(i,o){var u=Kl;return i.current.memoizedState.isDehydrated&&(xo(i,o).flags|=256),i=$c(i,o),i!==2&&(o=ir,ir=u,o!==null&&qf(o)),i}function qf(i){ir===null?ir=i:ir.push.apply(ir,i)}function BI(i){for(var o=i;;){if(o.flags&16384){var u=o.updateQueue;if(u!==null&&(u=u.stores,u!==null))for(var d=0;d<u.length;d++){var m=u[d],g=m.getSnapshot;m=m.value;try{if(!$r(g(),m))return!1}catch{return!1}}}if(u=o.child,o.subtreeFlags&16384&&u!==null)u.return=o,o=u;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Us(i,o){for(o&=~jf,o&=~jc,i.suspendedLanes|=o,i.pingedLanes&=~o,i=i.expirationTimes;0<o;){var u=31-It(o),d=1<<u;i[u]=-1,o&=~d}}function __(i){if((Tt&6)!==0)throw Error(t(327));ja();var o=qi(i,0);if((o&1)===0)return sr(i,Et()),null;var u=$c(i,o);if(i.tag!==0&&u===2){var d=ml(i);d!==0&&(o=d,u=Wf(i,d))}if(u===1)throw u=$l,xo(i,0),Us(i,o),sr(i,Et()),u;if(u===6)throw Error(t(345));return i.finishedWork=i.current.alternate,i.finishedLanes=o,Vo(i,ir,ss),sr(i,Et()),null}function $f(i,o){var u=Tt;Tt|=1;try{return i(o)}finally{Tt=u,Tt===0&&(Ba=Et()+500,vc&&bs())}}function Lo(i){Vs!==null&&Vs.tag===0&&(Tt&6)===0&&ja();var o=Tt;Tt|=1;var u=Dr.transition,d=pt;try{if(Dr.transition=null,pt=1,i)return i()}finally{pt=d,Dr.transition=u,Tt=o,(Tt&6)===0&&bs()}}function Kf(){gr=Fa.current,Lt(Fa)}function xo(i,o){i.finishedWork=null,i.finishedLanes=0;var u=i.timeoutHandle;if(u!==-1&&(i.timeoutHandle=-1,gI(u)),nn!==null)for(u=nn.return;u!==null;){var d=u;switch(nf(d),d.tag){case 1:d=d.type.childContextTypes,d!=null&&_c();break;case 3:Va(),Lt(tr),Lt(On),gf();break;case 5:pf(d);break;case 4:Va();break;case 13:Lt(Bt);break;case 19:Lt(Bt);break;case 10:uf(d.type._context);break;case 22:case 23:Kf()}u=u.return}if(mn=i,nn=i=Fs(i.current,null),Rn=gr=o,cn=0,$l=null,jf=jc=Oo=0,ir=Kl=null,ko!==null){for(o=0;o<ko.length;o++)if(u=ko[o],d=u.interleaved,d!==null){u.interleaved=null;var m=d.next,g=u.pending;if(g!==null){var w=g.next;g.next=m,d.next=w}u.pending=d}ko=null}return i}function E_(i,o){do{var u=nn;try{if(lf(),kc.current=Lc,bc){for(var d=jt.memoizedState;d!==null;){var m=d.queue;m!==null&&(m.pending=null),d=d.next}bc=!1}if(Do=0,pn=un=jt=null,jl=!1,zl=0,Bf.current=null,u===null||u.return===null){cn=1,$l=o,nn=null;break}e:{var g=i,w=u.return,O=u,F=o;if(o=Rn,O.flags|=32768,F!==null&&typeof F=="object"&&typeof F.then=="function"){var Y=F,ae=O,le=ae.tag;if((ae.mode&1)===0&&(le===0||le===11||le===15)){var se=ae.alternate;se?(ae.updateQueue=se.updateQueue,ae.memoizedState=se.memoizedState,ae.lanes=se.lanes):(ae.updateQueue=null,ae.memoizedState=null)}var ve=Hy(w);if(ve!==null){ve.flags&=-257,Wy(ve,w,O,g,o),ve.mode&1&&Gy(g,Y,o),o=ve,F=Y;var Pe=o.updateQueue;if(Pe===null){var Ce=new Set;Ce.add(F),o.updateQueue=Ce}else Pe.add(F);break e}else{if((o&1)===0){Gy(g,Y,o),Xf();break e}F=Error(t(426))}}else if(Vt&&O.mode&1){var Jt=Hy(w);if(Jt!==null){(Jt.flags&65536)===0&&(Jt.flags|=256),Wy(Jt,w,O,g,o),of(Ma(F,O));break e}}g=F=Ma(F,O),cn!==4&&(cn=2),Kl===null?Kl=[g]:Kl.push(g),g=w;do{switch(g.tag){case 3:g.flags|=65536,o&=-o,g.lanes|=o;var W=jy(g,F,o);py(g,W);break e;case 1:O=F;var B=g.type,X=g.stateNode;if((g.flags&128)===0&&(typeof B.getDerivedStateFromError=="function"||X!==null&&typeof X.componentDidCatch=="function"&&(xs===null||!xs.has(X)))){g.flags|=65536,o&=-o,g.lanes|=o;var de=zy(g,O,o);py(g,de);break e}}g=g.return}while(g!==null)}w_(u)}catch(Oe){o=Oe,nn===u&&u!==null&&(nn=u=u.return);continue}break}while(!0)}function v_(){var i=Bc.current;return Bc.current=Lc,i===null?Lc:i}function Xf(){(cn===0||cn===3||cn===2)&&(cn=4),mn===null||(Oo&268435455)===0&&(jc&268435455)===0||Us(mn,Rn)}function $c(i,o){var u=Tt;Tt|=2;var d=v_();(mn!==i||Rn!==o)&&(ss=null,xo(i,o));do try{jI();break}catch(m){E_(i,m)}while(!0);if(lf(),Tt=u,Bc.current=d,nn!==null)throw Error(t(261));return mn=null,Rn=0,cn}function jI(){for(;nn!==null;)T_(nn)}function zI(){for(;nn!==null&&!lt();)T_(nn)}function T_(i){var o=R_(i.alternate,i,gr);i.memoizedProps=i.pendingProps,o===null?w_(i):nn=o,Bf.current=null}function w_(i){var o=i;do{var u=o.alternate;if(i=o.return,(o.flags&32768)===0){if(u=LI(u,o,gr),u!==null){nn=u;return}}else{if(u=xI(u,o),u!==null){u.flags&=32767,nn=u;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{cn=6,nn=null;return}}if(o=o.sibling,o!==null){nn=o;return}nn=o=i}while(o!==null);cn===0&&(cn=5)}function Vo(i,o,u){var d=pt,m=Dr.transition;try{Dr.transition=null,pt=1,GI(i,o,u,d)}finally{Dr.transition=m,pt=d}return null}function GI(i,o,u,d){do ja();while(Vs!==null);if((Tt&6)!==0)throw Error(t(327));u=i.finishedWork;var m=i.finishedLanes;if(u===null)return null;if(i.finishedWork=null,i.finishedLanes=0,u===i.current)throw Error(t(177));i.callbackNode=null,i.callbackPriority=0;var g=u.lanes|u.childLanes;if(Lh(i,g),i===mn&&(nn=mn=null,Rn=0),(u.subtreeFlags&2064)===0&&(u.flags&2064)===0||Gc||(Gc=!0,A_(Gr,function(){return ja(),null})),g=(u.flags&15990)!==0,(u.subtreeFlags&15990)!==0||g){g=Dr.transition,Dr.transition=null;var w=pt;pt=1;var O=Tt;Tt|=4,Bf.current=null,MI(i,u),h_(u,i),uI(Kh),Xi=!!$h,Kh=$h=null,i.current=u,UI(u),$t(),Tt=O,pt=w,Dr.transition=g}else i.current=u;if(Gc&&(Gc=!1,Vs=i,Hc=m),g=i.pendingLanes,g===0&&(xs=null),ot(u.stateNode),sr(i,Et()),o!==null)for(d=i.onRecoverableError,u=0;u<o.length;u++)m=o[u],d(m.value,{componentStack:m.stack,digest:m.digest});if(zc)throw zc=!1,i=Gf,Gf=null,i;return(Hc&1)!==0&&i.tag!==0&&ja(),g=i.pendingLanes,(g&1)!==0?i===Hf?Xl++:(Xl=0,Hf=i):Xl=0,bs(),null}function ja(){if(Vs!==null){var i=mi(Hc),o=Dr.transition,u=pt;try{if(Dr.transition=null,pt=16>i?16:i,Vs===null)var d=!1;else{if(i=Vs,Vs=null,Hc=0,(Tt&6)!==0)throw Error(t(331));var m=Tt;for(Tt|=4,Ae=i.current;Ae!==null;){var g=Ae,w=g.child;if((Ae.flags&16)!==0){var O=g.deletions;if(O!==null){for(var F=0;F<O.length;F++){var Y=O[F];for(Ae=Y;Ae!==null;){var ae=Ae;switch(ae.tag){case 0:case 11:case 15:ql(8,ae,g)}var le=ae.child;if(le!==null)le.return=ae,Ae=le;else for(;Ae!==null;){ae=Ae;var se=ae.sibling,ve=ae.return;if(a_(ae),ae===Y){Ae=null;break}if(se!==null){se.return=ve,Ae=se;break}Ae=ve}}}var Pe=g.alternate;if(Pe!==null){var Ce=Pe.child;if(Ce!==null){Pe.child=null;do{var Jt=Ce.sibling;Ce.sibling=null,Ce=Jt}while(Ce!==null)}}Ae=g}}if((g.subtreeFlags&2064)!==0&&w!==null)w.return=g,Ae=w;else e:for(;Ae!==null;){if(g=Ae,(g.flags&2048)!==0)switch(g.tag){case 0:case 11:case 15:ql(9,g,g.return)}var W=g.sibling;if(W!==null){W.return=g.return,Ae=W;break e}Ae=g.return}}var B=i.current;for(Ae=B;Ae!==null;){w=Ae;var X=w.child;if((w.subtreeFlags&2064)!==0&&X!==null)X.return=w,Ae=X;else e:for(w=B;Ae!==null;){if(O=Ae,(O.flags&2048)!==0)try{switch(O.tag){case 0:case 11:case 15:Fc(9,O)}}catch(Oe){Kt(O,O.return,Oe)}if(O===w){Ae=null;break e}var de=O.sibling;if(de!==null){de.return=O.return,Ae=de;break e}Ae=O.return}}if(Tt=m,bs(),fn&&typeof fn.onPostCommitFiberRoot=="function")try{fn.onPostCommitFiberRoot(Pr,i)}catch{}d=!0}return d}finally{pt=u,Dr.transition=o}}return!1}function S_(i,o,u){o=Ma(u,o),o=jy(i,o,1),i=Os(i,o,1),o=qn(),i!==null&&(To(i,1,o),sr(i,o))}function Kt(i,o,u){if(i.tag===3)S_(i,i,u);else for(;o!==null;){if(o.tag===3){S_(o,i,u);break}else if(o.tag===1){var d=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(xs===null||!xs.has(d))){i=Ma(u,i),i=zy(o,i,1),o=Os(o,i,1),i=qn(),o!==null&&(To(o,1,i),sr(o,i));break}}o=o.return}}function HI(i,o,u){var d=i.pingCache;d!==null&&d.delete(o),o=qn(),i.pingedLanes|=i.suspendedLanes&u,mn===i&&(Rn&u)===u&&(cn===4||cn===3&&(Rn&130023424)===Rn&&500>Et()-zf?xo(i,0):jf|=u),sr(i,o)}function I_(i,o){o===0&&((i.mode&1)===0?o=1:(o=Wr,Wr<<=1,(Wr&130023424)===0&&(Wr=4194304)));var u=qn();i=ns(i,o),i!==null&&(To(i,o,u),sr(i,u))}function WI(i){var o=i.memoizedState,u=0;o!==null&&(u=o.retryLane),I_(i,u)}function qI(i,o){var u=0;switch(i.tag){case 13:var d=i.stateNode,m=i.memoizedState;m!==null&&(u=m.retryLane);break;case 19:d=i.stateNode;break;default:throw Error(t(314))}d!==null&&d.delete(o),I_(i,u)}var R_;R_=function(i,o,u){if(i!==null)if(i.memoizedProps!==o.pendingProps||tr.current)rr=!0;else{if((i.lanes&u)===0&&(o.flags&128)===0)return rr=!1,OI(i,o,u);rr=(i.flags&131072)!==0}else rr=!1,Vt&&(o.flags&1048576)!==0&&iy(o,wc,o.index);switch(o.lanes=0,o.tag){case 2:var d=o.type;Mc(i,o),i=o.pendingProps;var m=Na(o,On.current);xa(o,u),m=Ef(null,o,d,i,m,u);var g=vf();return o.flags|=1,typeof m=="object"&&m!==null&&typeof m.render=="function"&&m.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,nr(d)?(g=!0,Ec(o)):g=!1,o.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,hf(o),m.updater=xc,o.stateNode=m,m._reactInternals=o,Af(o,d,i,u),o=kf(null,o,d,!0,g,u)):(o.tag=0,Vt&&g&&tf(o),Wn(null,o,m,u),o=o.child),o;case 16:d=o.elementType;e:{switch(Mc(i,o),i=o.pendingProps,m=d._init,d=m(d._payload),o.type=d,m=o.tag=KI(d),i=Xr(d,i),m){case 0:o=Nf(null,o,d,i,u);break e;case 1:o=Qy(null,o,d,i,u);break e;case 11:o=qy(null,o,d,i,u);break e;case 14:o=$y(null,o,d,Xr(d.type,i),u);break e}throw Error(t(306,d,""))}return o;case 0:return d=o.type,m=o.pendingProps,m=o.elementType===d?m:Xr(d,m),Nf(i,o,d,m,u);case 1:return d=o.type,m=o.pendingProps,m=o.elementType===d?m:Xr(d,m),Qy(i,o,d,m,u);case 3:e:{if(Jy(o),i===null)throw Error(t(387));d=o.pendingProps,g=o.memoizedState,m=g.element,fy(i,o),Cc(o,d,null,u);var w=o.memoizedState;if(d=w.element,g.isDehydrated)if(g={element:d,isDehydrated:!1,cache:w.cache,pendingSuspenseBoundaries:w.pendingSuspenseBoundaries,transitions:w.transitions},o.updateQueue.baseState=g,o.memoizedState=g,o.flags&256){m=Ma(Error(t(423)),o),o=Zy(i,o,d,u,m);break e}else if(d!==m){m=Ma(Error(t(424)),o),o=Zy(i,o,d,u,m);break e}else for(mr=Cs(o.stateNode.containerInfo.firstChild),pr=o,Vt=!0,Kr=null,u=dy(o,null,d,u),o.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(Da(),d===m){o=is(i,o,u);break e}Wn(i,o,d,u)}o=o.child}return o;case 5:return gy(o),i===null&&sf(o),d=o.type,m=o.pendingProps,g=i!==null?i.memoizedProps:null,w=m.children,Xh(d,m)?w=null:g!==null&&Xh(d,g)&&(o.flags|=32),Yy(i,o),Wn(i,o,w,u),o.child;case 6:return i===null&&sf(o),null;case 13:return e_(i,o,u);case 4:return ff(o,o.stateNode.containerInfo),d=o.pendingProps,i===null?o.child=Oa(o,null,d,u):Wn(i,o,d,u),o.child;case 11:return d=o.type,m=o.pendingProps,m=o.elementType===d?m:Xr(d,m),qy(i,o,d,m,u);case 7:return Wn(i,o,o.pendingProps,u),o.child;case 8:return Wn(i,o,o.pendingProps.children,u),o.child;case 12:return Wn(i,o,o.pendingProps.children,u),o.child;case 10:e:{if(d=o.type._context,m=o.pendingProps,g=o.memoizedProps,w=m.value,kt(Rc,d._currentValue),d._currentValue=w,g!==null)if($r(g.value,w)){if(g.children===m.children&&!tr.current){o=is(i,o,u);break e}}else for(g=o.child,g!==null&&(g.return=o);g!==null;){var O=g.dependencies;if(O!==null){w=g.child;for(var F=O.firstContext;F!==null;){if(F.context===d){if(g.tag===1){F=rs(-1,u&-u),F.tag=2;var Y=g.updateQueue;if(Y!==null){Y=Y.shared;var ae=Y.pending;ae===null?F.next=F:(F.next=ae.next,ae.next=F),Y.pending=F}}g.lanes|=u,F=g.alternate,F!==null&&(F.lanes|=u),cf(g.return,u,o),O.lanes|=u;break}F=F.next}}else if(g.tag===10)w=g.type===o.type?null:g.child;else if(g.tag===18){if(w=g.return,w===null)throw Error(t(341));w.lanes|=u,O=w.alternate,O!==null&&(O.lanes|=u),cf(w,u,o),w=g.sibling}else w=g.child;if(w!==null)w.return=g;else for(w=g;w!==null;){if(w===o){w=null;break}if(g=w.sibling,g!==null){g.return=w.return,w=g;break}w=w.return}g=w}Wn(i,o,m.children,u),o=o.child}return o;case 9:return m=o.type,d=o.pendingProps.children,xa(o,u),m=kr(m),d=d(m),o.flags|=1,Wn(i,o,d,u),o.child;case 14:return d=o.type,m=Xr(d,o.pendingProps),m=Xr(d.type,m),$y(i,o,d,m,u);case 15:return Ky(i,o,o.type,o.pendingProps,u);case 17:return d=o.type,m=o.pendingProps,m=o.elementType===d?m:Xr(d,m),Mc(i,o),o.tag=1,nr(d)?(i=!0,Ec(o)):i=!1,xa(o,u),Fy(o,d,m),Af(o,d,m,u),kf(null,o,d,!0,i,u);case 19:return n_(i,o,u);case 22:return Xy(i,o,u)}throw Error(t(156,o.tag))};function A_(i,o){return xt(i,o)}function $I(i,o,u,d){this.tag=i,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Or(i,o,u,d){return new $I(i,o,u,d)}function Yf(i){return i=i.prototype,!(!i||!i.isReactComponent)}function KI(i){if(typeof i=="function")return Yf(i)?1:0;if(i!=null){if(i=i.$$typeof,i===G)return 11;if(i===ft)return 14}return 2}function Fs(i,o){var u=i.alternate;return u===null?(u=Or(i.tag,o,i.key,i.mode),u.elementType=i.elementType,u.type=i.type,u.stateNode=i.stateNode,u.alternate=i,i.alternate=u):(u.pendingProps=o,u.type=i.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=i.flags&14680064,u.childLanes=i.childLanes,u.lanes=i.lanes,u.child=i.child,u.memoizedProps=i.memoizedProps,u.memoizedState=i.memoizedState,u.updateQueue=i.updateQueue,o=i.dependencies,u.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},u.sibling=i.sibling,u.index=i.index,u.ref=i.ref,u}function Kc(i,o,u,d,m,g){var w=2;if(d=i,typeof i=="function")Yf(i)&&(w=1);else if(typeof i=="string")w=5;else e:switch(i){case I:return Mo(u.children,m,g,o);case A:w=8,m|=8;break;case N:return i=Or(12,u,o,m|2),i.elementType=N,i.lanes=g,i;case D:return i=Or(13,u,o,m),i.elementType=D,i.lanes=g,i;case We:return i=Or(19,u,o,m),i.elementType=We,i.lanes=g,i;case Ge:return Xc(u,m,g,o);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case V:w=10;break e;case M:w=9;break e;case G:w=11;break e;case ft:w=14;break e;case Xe:w=16,d=null;break e}throw Error(t(130,i==null?i:typeof i,""))}return o=Or(w,u,o,m),o.elementType=i,o.type=d,o.lanes=g,o}function Mo(i,o,u,d){return i=Or(7,i,d,o),i.lanes=u,i}function Xc(i,o,u,d){return i=Or(22,i,d,o),i.elementType=Ge,i.lanes=u,i.stateNode={isHidden:!1},i}function Qf(i,o,u){return i=Or(6,i,null,o),i.lanes=u,i}function Jf(i,o,u){return o=Or(4,i.children!==null?i.children:[],i.key,o),o.lanes=u,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}function XI(i,o,u,d,m){this.tag=o,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yl(0),this.expirationTimes=yl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yl(0),this.identifierPrefix=d,this.onRecoverableError=m,this.mutableSourceEagerHydrationData=null}function Zf(i,o,u,d,m,g,w,O,F){return i=new XI(i,o,u,O,F),o===1?(o=1,g===!0&&(o|=8)):o=0,g=Or(3,null,null,o),i.current=g,g.stateNode=i,g.memoizedState={element:d,isDehydrated:u,cache:null,transitions:null,pendingSuspenseBoundaries:null},hf(g),i}function YI(i,o,u){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:me,key:d==null?null:""+d,children:i,containerInfo:o,implementation:u}}function P_(i){if(!i)return ks;i=i._reactInternals;e:{if(Re(i)!==i||i.tag!==1)throw Error(t(170));var o=i;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(nr(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(t(171))}if(i.tag===1){var u=i.type;if(nr(u))return ty(i,u,o)}return o}function C_(i,o,u,d,m,g,w,O,F){return i=Zf(u,d,!0,i,m,g,w,O,F),i.context=P_(null),u=i.current,d=qn(),m=Ms(u),g=rs(d,m),g.callback=o??null,Os(u,g,m),i.current.lanes=m,To(i,m,d),sr(i,d),i}function Yc(i,o,u,d){var m=o.current,g=qn(),w=Ms(m);return u=P_(u),o.context===null?o.context=u:o.pendingContext=u,o=rs(g,w),o.payload={element:i},d=d===void 0?null:d,d!==null&&(o.callback=d),i=Os(m,o,w),i!==null&&(Jr(i,m,w,g),Pc(i,m,w)),w}function Qc(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function N_(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var u=i.retryLane;i.retryLane=u!==0&&u<o?u:o}}function ep(i,o){N_(i,o),(i=i.alternate)&&N_(i,o)}function QI(){return null}var k_=typeof reportError=="function"?reportError:function(i){console.error(i)};function tp(i){this._internalRoot=i}Jc.prototype.render=tp.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(t(409));Yc(i,o,null,null)},Jc.prototype.unmount=tp.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;Lo(function(){Yc(null,i,null,null)}),o[Ji]=null}};function Jc(i){this._internalRoot=i}Jc.prototype.unstable_scheduleHydration=function(i){if(i){var o=Tl();i={blockedOn:null,target:i,priority:o};for(var u=0;u<cr.length&&o!==0&&o<cr[u].priority;u++);cr.splice(u,0,i),u===0&&fa(i)}};function np(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function Zc(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function b_(){}function JI(i,o,u,d,m){if(m){if(typeof d=="function"){var g=d;d=function(){var Y=Qc(w);g.call(Y)}}var w=C_(o,d,i,0,null,!1,!1,"",b_);return i._reactRootContainer=w,i[Ji]=w.current,Ol(i.nodeType===8?i.parentNode:i),Lo(),w}for(;m=i.lastChild;)i.removeChild(m);if(typeof d=="function"){var O=d;d=function(){var Y=Qc(F);O.call(Y)}}var F=Zf(i,0,!1,null,null,!1,!1,"",b_);return i._reactRootContainer=F,i[Ji]=F.current,Ol(i.nodeType===8?i.parentNode:i),Lo(function(){Yc(o,F,u,d)}),F}function ed(i,o,u,d,m){var g=u._reactRootContainer;if(g){var w=g;if(typeof m=="function"){var O=m;m=function(){var F=Qc(w);O.call(F)}}Yc(o,w,i,m)}else w=JI(u,o,i,m,d);return Qc(w)}El=function(i){switch(i.tag){case 3:var o=i.stateNode;if(o.current.memoizedState.isDehydrated){var u=vt(o.pendingLanes);u!==0&&(_l(o,u|1),sr(o,Et()),(Tt&6)===0&&(Ba=Et()+500,bs()))}break;case 13:Lo(function(){var d=ns(i,1);if(d!==null){var m=qn();Jr(d,i,1,m)}}),ep(i,1)}},da=function(i){if(i.tag===13){var o=ns(i,134217728);if(o!==null){var u=qn();Jr(o,i,134217728,u)}ep(i,134217728)}},vl=function(i){if(i.tag===13){var o=Ms(i),u=ns(i,o);if(u!==null){var d=qn();Jr(u,i,o,d)}ep(i,o)}},Tl=function(){return pt},wl=function(i,o){var u=pt;try{return pt=i,o()}finally{pt=u}},Zn=function(i,o,u){switch(o){case"input":if(Bi(i,u),o=u.name,u.type==="radio"&&o!=null){for(u=i;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<u.length;o++){var d=u[o];if(d!==i&&d.form===i.form){var m=yc(d);if(!m)throw Error(t(90));Wt(d),Bi(d,m)}}}break;case"textarea":Rr(i,u);break;case"select":o=u.value,o!=null&&ur(i,!!u.multiple,o,!1)}},yo=$f,Gi=Lo;var ZI={usingClientEntryPoint:!1,Events:[Vl,Pa,yc,zr,fi,$f]},Yl={findFiberByHostInstance:Ao,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},eR={bundleType:Yl.bundleType,version:Yl.version,rendererPackageName:Yl.rendererPackageName,rendererConfig:Yl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:oe.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=it(i),i===null?null:i.stateNode},findFiberByHostInstance:Yl.findFiberByHostInstance||QI,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var td=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!td.isDisabled&&td.supportsFiber)try{Pr=td.inject(eR),fn=td}catch{}}return or.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ZI,or.createPortal=function(i,o){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!np(o))throw Error(t(200));return YI(i,o,null,u)},or.createRoot=function(i,o){if(!np(i))throw Error(t(299));var u=!1,d="",m=k_;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(d=o.identifierPrefix),o.onRecoverableError!==void 0&&(m=o.onRecoverableError)),o=Zf(i,1,!1,null,null,u,!1,d,m),i[Ji]=o.current,Ol(i.nodeType===8?i.parentNode:i),new tp(o)},or.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(t(188)):(i=Object.keys(i).join(","),Error(t(268,i)));return i=it(o),i=i===null?null:i.stateNode,i},or.flushSync=function(i){return Lo(i)},or.hydrate=function(i,o,u){if(!Zc(o))throw Error(t(200));return ed(null,i,o,!0,u)},or.hydrateRoot=function(i,o,u){if(!np(i))throw Error(t(405));var d=u!=null&&u.hydratedSources||null,m=!1,g="",w=k_;if(u!=null&&(u.unstable_strictMode===!0&&(m=!0),u.identifierPrefix!==void 0&&(g=u.identifierPrefix),u.onRecoverableError!==void 0&&(w=u.onRecoverableError)),o=C_(o,null,i,1,u??null,m,!1,g,w),i[Ji]=o.current,Ol(i),d)for(i=0;i<d.length;i++)u=d[i],m=u._getVersion,m=m(u._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[u,m]:o.mutableSourceEagerHydrationData.push(u,m);return new Jc(o)},or.render=function(i,o,u){if(!Zc(o))throw Error(t(200));return ed(null,i,o,!1,u)},or.unmountComponentAtNode=function(i){if(!Zc(i))throw Error(t(40));return i._reactRootContainer?(Lo(function(){ed(null,null,i,!1,function(){i._reactRootContainer=null,i[Ji]=null})}),!0):!1},or.unstable_batchedUpdates=$f,or.unstable_renderSubtreeIntoContainer=function(i,o,u,d){if(!Zc(u))throw Error(t(200));if(i==null||i._reactInternals===void 0)throw Error(t(38));return ed(i,o,u,!1,d)},or.version="18.3.1-next-f1338f8080-20240426",or}var F_;function uT(){if(F_)return sp.exports;F_=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),sp.exports=uR(),sp.exports}var B_;function cR(){if(B_)return nd;B_=1;var n=uT();return nd.createRoot=n.createRoot,nd.hydrateRoot=n.hydrateRoot,nd}var dR=cR();const hR=aT(dR);/**
 * react-router v7.11.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var cT=n=>{throw TypeError(n)},fR=(n,e,t)=>e.has(n)||cT("Cannot "+t),lp=(n,e,t)=>(fR(n,e,"read from private field"),t?t.call(n):e.get(n)),pR=(n,e,t)=>e.has(n)?cT("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),j_="popstate";function mR(n={}){function e(r,s){let{pathname:a,search:l,hash:h}=r.location;return Tu("",{pathname:a,search:l,hash:h},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(r,s){return typeof s=="string"?s:Li(s)}return yR(e,t,null,n)}function st(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Gt(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function gR(){return Math.random().toString(36).substring(2,10)}function z_(n,e){return{usr:n.state,key:n.key,idx:e}}function Tu(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?uo(e):e,state:t,key:e&&e.key||r||gR()}}function Li({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function uo(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function yR(n,e,t,r={}){let{window:s=document.defaultView,v5Compat:a=!1}=r,l=s.history,h="POP",f=null,p=_();p==null&&(p=0,l.replaceState({...l.state,idx:p},""));function _(){return(l.state||{idx:null}).idx}function E(){h="POP";let L=_(),z=L==null?null:L-p;p=L,f&&f({action:h,location:U.location,delta:z})}function T(L,z){h="PUSH";let $=Tu(U.location,L,z);p=_()+1;let Z=z_($,p),oe=U.createHref($);try{l.pushState(Z,"",oe)}catch(we){if(we instanceof DOMException&&we.name==="DataCloneError")throw we;s.location.assign(oe)}a&&f&&f({action:h,location:U.location,delta:1})}function S(L,z){h="REPLACE";let $=Tu(U.location,L,z);p=_();let Z=z_($,p),oe=U.createHref($);l.replaceState(Z,"",oe),a&&f&&f({action:h,location:U.location,delta:0})}function C(L){return dT(L)}let U={get action(){return h},get location(){return n(s,l)},listen(L){if(f)throw new Error("A history only accepts one active listener");return s.addEventListener(j_,E),f=L,()=>{s.removeEventListener(j_,E),f=null}},createHref(L){return e(s,L)},createURL:C,encodeLocation(L){let z=C(L);return{pathname:z.pathname,search:z.search,hash:z.hash}},push:T,replace:S,go(L){return l.go(L)}};return U}function dT(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),st(t,"No window.location.(origin|href) available to create URL");let r=typeof n=="string"?n:Li(n);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=t+r),new URL(r,t)}var ru,G_=class{constructor(n){if(pR(this,ru,new Map),n)for(let[e,t]of n)this.set(e,t)}get(n){if(lp(this,ru).has(n))return lp(this,ru).get(n);if(n.defaultValue!==void 0)return n.defaultValue;throw new Error("No value found for context")}set(n,e){lp(this,ru).set(n,e)}};ru=new WeakMap;var _R=new Set(["lazy","caseSensitive","path","id","index","children"]);function ER(n){return _R.has(n)}var vR=new Set(["lazy","caseSensitive","path","id","index","middleware","children"]);function TR(n){return vR.has(n)}function wR(n){return n.index===!0}function wu(n,e,t=[],r={},s=!1){return n.map((a,l)=>{let h=[...t,String(l)],f=typeof a.id=="string"?a.id:h.join("-");if(st(a.index!==!0||!a.children,"Cannot specify children on an index route"),st(s||!r[f],`Found a route id collision on id "${f}".  Route id's must be globally unique within Data Router usages`),wR(a)){let p={...a,id:f};return r[f]=H_(p,e(p)),p}else{let p={...a,id:f,children:void 0};return r[f]=H_(p,e(p)),a.children&&(p.children=wu(a.children,e,h,r,s)),p}})}function H_(n,e){return Object.assign(n,{...e,...typeof e.lazy=="object"&&e.lazy!=null?{lazy:{...n.lazy,...e.lazy}}:{}})}function zs(n,e,t="/"){return iu(n,e,t,!1)}function iu(n,e,t,r){let s=typeof e=="string"?uo(e):e,a=Mr(s.pathname||"/",t);if(a==null)return null;let l=hT(n);IR(l);let h=null;for(let f=0;h==null&&f<l.length;++f){let p=xR(a);h=OR(l[f],p,r)}return h}function SR(n,e){let{route:t,pathname:r,params:s}=n;return{id:t.id,pathname:r,params:s,data:e[t.id],loaderData:e[t.id],handle:t.handle}}function hT(n,e=[],t=[],r="",s=!1){let a=(l,h,f=s,p)=>{let _={relativePath:p===void 0?l.path||"":p,caseSensitive:l.caseSensitive===!0,childrenIndex:h,route:l};if(_.relativePath.startsWith("/")){if(!_.relativePath.startsWith(r)&&f)return;st(_.relativePath.startsWith(r),`Absolute route path "${_.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),_.relativePath=_.relativePath.slice(r.length)}let E=ki([r,_.relativePath]),T=t.concat(_);l.children&&l.children.length>0&&(st(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${E}".`),hT(l.children,e,T,E,f)),!(l.path==null&&!l.index)&&e.push({path:E,score:bR(E,l.index),routesMeta:T})};return n.forEach((l,h)=>{var f;if(l.path===""||!((f=l.path)!=null&&f.includes("?")))a(l,h);else for(let p of fT(l.path))a(l,h,!0,p)}),e}function fT(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,s=t.endsWith("?"),a=t.replace(/\?$/,"");if(r.length===0)return s?[a,""]:[a];let l=fT(r.join("/")),h=[];return h.push(...l.map(f=>f===""?a:[a,f].join("/"))),s&&h.push(...l),h.map(f=>n.startsWith("/")&&f===""?"/":f)}function IR(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:DR(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var RR=/^:[\w-]+$/,AR=3,PR=2,CR=1,NR=10,kR=-2,W_=n=>n==="*";function bR(n,e){let t=n.split("/"),r=t.length;return t.some(W_)&&(r+=kR),e&&(r+=PR),t.filter(s=>!W_(s)).reduce((s,a)=>s+(RR.test(a)?AR:a===""?CR:NR),r)}function DR(n,e){return n.length===e.length&&n.slice(0,-1).every((r,s)=>r===e[s])?n[n.length-1]-e[e.length-1]:0}function OR(n,e,t=!1){let{routesMeta:r}=n,s={},a="/",l=[];for(let h=0;h<r.length;++h){let f=r[h],p=h===r.length-1,_=a==="/"?e:e.slice(a.length)||"/",E=Pd({path:f.relativePath,caseSensitive:f.caseSensitive,end:p},_),T=f.route;if(!E&&p&&t&&!r[r.length-1].route.index&&(E=Pd({path:f.relativePath,caseSensitive:f.caseSensitive,end:!1},_)),!E)return null;Object.assign(s,E.params),l.push({params:s,pathname:ki([a,E.pathname]),pathnameBase:UR(ki([a,E.pathnameBase])),route:T}),E.pathnameBase!=="/"&&(a=ki([a,E.pathnameBase]))}return l}function Pd(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=LR(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let a=s[0],l=a.replace(/(.)\/+$/,"$1"),h=s.slice(1);return{params:r.reduce((p,{paramName:_,isOptional:E},T)=>{if(_==="*"){let C=h[T]||"";l=a.slice(0,a.length-C.length).replace(/(.)\/+$/,"$1")}const S=h[T];return E&&!S?p[_]=void 0:p[_]=(S||"").replace(/%2F/g,"/"),p},{}),pathname:a,pathnameBase:l,pattern:n}}function LR(n,e=!1,t=!0){Gt(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,h,f)=>(r.push({paramName:h,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(r.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function xR(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Gt(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Mr(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function VR({basename:n,pathname:e}){return e==="/"?n:ki([n,e])}var pT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Jd=n=>pT.test(n);function MR(n,e="/"){let{pathname:t,search:r="",hash:s=""}=typeof n=="string"?uo(n):n,a;if(t)if(Jd(t))a=t;else{if(t.includes("//")){let l=t;t=t.replace(/\/\/+/g,"/"),Gt(!1,`Pathnames cannot have embedded double slashes - normalizing ${l} -> ${t}`)}t.startsWith("/")?a=q_(t.substring(1),"/"):a=q_(t,e)}else a=e;return{pathname:a,search:FR(r),hash:BR(s)}}function q_(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function up(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function mT(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Zd(n){let e=mT(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function eh(n,e,t,r=!1){let s;typeof n=="string"?s=uo(n):(s={...n},st(!s.pathname||!s.pathname.includes("?"),up("?","pathname","search",s)),st(!s.pathname||!s.pathname.includes("#"),up("#","pathname","hash",s)),st(!s.search||!s.search.includes("#"),up("#","search","hash",s)));let a=n===""||s.pathname==="",l=a?"/":s.pathname,h;if(l==null)h=t;else{let E=e.length-1;if(!r&&l.startsWith("..")){let T=l.split("/");for(;T[0]==="..";)T.shift(),E-=1;s.pathname=T.join("/")}h=E>=0?e[E]:"/"}let f=MR(s,h),p=l&&l!=="/"&&l.endsWith("/"),_=(a||l===".")&&t.endsWith("/");return!f.pathname.endsWith("/")&&(p||_)&&(f.pathname+="/"),f}var ki=n=>n.join("/").replace(/\/\/+/g,"/"),UR=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),FR=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,BR=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n,Lu=class{constructor(n,e,t,r=!1){this.status=n,this.statusText=e||"",this.internal=r,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function Su(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}function xu(n){return n.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var gT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function yT(n,e){let t=n;if(typeof t!="string"||!pT.test(t))return{absoluteURL:void 0,isExternal:!1,to:t};let r=t,s=!1;if(gT)try{let a=new URL(window.location.href),l=t.startsWith("//")?new URL(a.protocol+t):new URL(t),h=Mr(l.pathname,e);l.origin===a.origin&&h!=null?t=h+l.search+l.hash:s=!0}catch{Gt(!1,`<Link to="${t}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:r,isExternal:s,to:t}}var Ks=Symbol("Uninstrumented");function jR(n,e){let t={lazy:[],"lazy.loader":[],"lazy.action":[],"lazy.middleware":[],middleware:[],loader:[],action:[]};n.forEach(s=>s({id:e.id,index:e.index,path:e.path,instrument(a){let l=Object.keys(t);for(let h of l)a[h]&&t[h].push(a[h])}}));let r={};if(typeof e.lazy=="function"&&t.lazy.length>0){let s=$a(t.lazy,e.lazy,()=>{});s&&(r.lazy=s)}if(typeof e.lazy=="object"){let s=e.lazy;["middleware","loader","action"].forEach(a=>{let l=s[a],h=t[`lazy.${a}`];if(typeof l=="function"&&h.length>0){let f=$a(h,l,()=>{});f&&(r.lazy=Object.assign(r.lazy||{},{[a]:f}))}})}return["loader","action"].forEach(s=>{let a=e[s];if(typeof a=="function"&&t[s].length>0){let l=a[Ks]??a,h=$a(t[s],l,(...f)=>$_(f[0]));h&&(h[Ks]=l,r[s]=h)}}),e.middleware&&e.middleware.length>0&&t.middleware.length>0&&(r.middleware=e.middleware.map(s=>{let a=s[Ks]??s,l=$a(t.middleware,a,(...h)=>$_(h[0]));return l?(l[Ks]=a,l):s})),r}function zR(n,e){let t={navigate:[],fetch:[]};if(e.forEach(r=>r({instrument(s){let a=Object.keys(s);for(let l of a)s[l]&&t[l].push(s[l])}})),t.navigate.length>0){let r=n.navigate[Ks]??n.navigate,s=$a(t.navigate,r,(...a)=>{let[l,h]=a;return{to:typeof l=="number"||typeof l=="string"?l:l?Li(l):".",...K_(n,h??{})}});s&&(s[Ks]=r,n.navigate=s)}if(t.fetch.length>0){let r=n.fetch[Ks]??n.fetch,s=$a(t.fetch,r,(...a)=>{let[l,,h,f]=a;return{href:h??".",fetcherKey:l,...K_(n,f??{})}});s&&(s[Ks]=r,n.fetch=s)}return n}function $a(n,e,t){return n.length===0?null:async(...r)=>{let s=await _T(n,t(...r),()=>e(...r),n.length-1);if(s.type==="error")throw s.value;return s.value}}async function _T(n,e,t,r){let s=n[r],a;if(s){let l,h=async()=>(l?console.error("You cannot call instrumented handlers more than once"):l=_T(n,e,t,r-1),a=await l,st(a,"Expected a result"),a.type==="error"&&a.value instanceof Error?{status:"error",error:a.value}:{status:"success",error:void 0});try{await s(h,e)}catch(f){console.error("An instrumentation function threw an error:",f)}l||await h(),await l}else try{a={type:"success",value:await t()}}catch(l){a={type:"error",value:l}}return a||{type:"error",value:new Error("No result assigned in instrumentation chain.")}}function $_(n){let{request:e,context:t,params:r,unstable_pattern:s}=n;return{request:GR(e),params:{...r},unstable_pattern:s,context:HR(t)}}function K_(n,e){return{currentUrl:Li(n.state.location),..."formMethod"in e?{formMethod:e.formMethod}:{},..."formEncType"in e?{formEncType:e.formEncType}:{},..."formData"in e?{formData:e.formData}:{},..."body"in e?{body:e.body}:{}}}function GR(n){return{method:n.method,url:n.url,headers:{get:(...e)=>n.headers.get(...e)}}}function HR(n){if(qR(n)){let e={...n};return Object.freeze(e),e}else return{get:e=>n.get(e)}}var WR=Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function qR(n){if(n===null||typeof n!="object")return!1;const e=Object.getPrototypeOf(n);return e===Object.prototype||e===null||Object.getOwnPropertyNames(e).sort().join("\0")===WR}var ET=["POST","PUT","PATCH","DELETE"],$R=new Set(ET),KR=["GET",...ET],XR=new Set(KR),vT=new Set([301,302,303,307,308]),YR=new Set([307,308]),cp={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},QR={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Jl={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},JR=n=>({hasErrorBoundary:!!n.hasErrorBoundary}),TT="remix-router-transitions",wT=Symbol("ResetLoaderData");function ZR(n){const e=n.window?n.window:typeof window<"u"?window:void 0,t=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u";st(n.routes.length>0,"You must provide a non-empty routes array to createRouter");let r=n.hydrationRouteProperties||[],s=n.mapRouteProperties||JR,a=s;if(n.unstable_instrumentations){let x=n.unstable_instrumentations;a=H=>({...s(H),...jR(x.map(K=>K.route).filter(Boolean),H)})}let l={},h=wu(n.routes,a,void 0,l),f,p=n.basename||"/";p.startsWith("/")||(p=`/${p}`);let _=n.dataStrategy||iA,E={...n.future},T=null,S=new Set,C=null,U=null,L=null,z=n.hydrationData!=null,$=zs(h,n.history.location,p),Z=!1,oe=null,we;if($==null&&!n.patchRoutesOnNavigation){let x=xr(404,{pathname:n.history.location.pathname}),{matches:H,route:K}=rd(h);we=!0,$=H,oe={[K.id]:x}}else if($&&!n.hydrationData&&Gi($,h,n.history.location.pathname).active&&($=null),$)if($.some(x=>x.route.lazy))we=!1;else if(!$.some(x=>cm(x.route)))we=!0;else{let x=n.hydrationData?n.hydrationData.loaderData:null,H=n.hydrationData?n.hydrationData.errors:null;if(H){let K=$.findIndex(re=>H[re.route.id]!==void 0);we=$.slice(0,K+1).every(re=>!bp(re.route,x,H))}else we=$.every(K=>!bp(K.route,x,H))}else{we=!1,$=[];let x=Gi(null,h,n.history.location.pathname);x.active&&x.matches&&(Z=!0,$=x.matches)}let me,I={historyAction:n.history.action,location:n.history.location,matches:$,initialized:we,navigation:cp,restoreScrollPosition:n.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:n.hydrationData&&n.hydrationData.loaderData||{},actionData:n.hydrationData&&n.hydrationData.actionData||null,errors:n.hydrationData&&n.hydrationData.errors||oe,fetchers:new Map,blockers:new Map},A="POP",N=null,V=!1,M,G=!1,D=new Map,We=null,ft=!1,Xe=!1,Ge=new Set,ie=new Map,_e=0,ue=-1,j=new Map,te=new Set,be=new Map,De=new Map,xe=new Set,ze=new Map,rt,$e=null;function _t(){if(T=n.history.listen(({action:x,location:H,delta:K})=>{if(rt){rt(),rt=void 0;return}Gt(ze.size===0||K!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let re=Ar({currentLocation:I.location,nextLocation:H,historyAction:x});if(re&&K!=null){let ce=new Promise(Te=>{rt=Te});n.history.go(K*-1),Zn(re,{state:"blocked",location:H,proceed(){Zn(re,{state:"proceeding",proceed:void 0,reset:void 0,location:H}),ce.then(()=>n.history.go(K))},reset(){let Te=new Map(I.blockers);Te.set(re,Jl),Wt({blockers:Te})}}),N==null||N.resolve(),N=null;return}return Xn(x,H)}),t){wA(e,D);let x=()=>SA(e,D);e.addEventListener("pagehide",x),We=()=>e.removeEventListener("pagehide",x)}return I.initialized||Xn("POP",I.location,{initialHydration:!0}),me}function ln(){T&&T(),We&&We(),S.clear(),M&&M.abort(),I.fetchers.forEach((x,H)=>vs(H)),I.blockers.forEach((x,H)=>zi(H))}function Ir(x){return S.add(x),()=>S.delete(x)}function Wt(x,H={}){x.matches&&(x.matches=x.matches.map(ce=>{let Te=l[ce.route.id],Ve=ce.route;return Ve.element!==Te.element||Ve.errorElement!==Te.errorElement||Ve.hydrateFallbackElement!==Te.hydrateFallbackElement?{...ce,route:Te}:ce})),I={...I,...x};let K=[],re=[];I.fetchers.forEach((ce,Te)=>{ce.state==="idle"&&(xe.has(Te)?K.push(Te):re.push(Te))}),xe.forEach(ce=>{!I.fetchers.has(ce)&&!ie.has(ce)&&K.push(ce)}),[...S].forEach(ce=>ce(I,{deletedFetchers:K,newErrors:x.errors??null,viewTransitionOpts:H.viewTransitionOpts,flushSync:H.flushSync===!0})),K.forEach(ce=>vs(ce)),re.forEach(ce=>I.fetchers.delete(ce))}function jn(x,H,{flushSync:K}={}){var qe,ke;let re=I.actionData!=null&&I.navigation.formMethod!=null&&Un(I.navigation.formMethod)&&I.navigation.state==="loading"&&((qe=x.state)==null?void 0:qe._isRedirect)!==!0,ce;H.actionData?Object.keys(H.actionData).length>0?ce=H.actionData:ce=null:re?ce=I.actionData:ce=null;let Te=H.loaderData?iE(I.loaderData,H.loaderData,H.matches||[],H.errors):I.loaderData,Ve=I.blockers;Ve.size>0&&(Ve=new Map(Ve),Ve.forEach((Ye,it)=>Ve.set(it,Jl)));let Ee=ft?!1:yo(x,H.matches||I.matches),Se=V===!0||I.navigation.formMethod!=null&&Un(I.navigation.formMethod)&&((ke=x.state)==null?void 0:ke._isRedirect)!==!0;f&&(h=f,f=void 0),ft||A==="POP"||(A==="PUSH"?n.history.push(x,x.state):A==="REPLACE"&&n.history.replace(x,x.state));let Re;if(A==="POP"){let Ye=D.get(I.location.pathname);Ye&&Ye.has(x.pathname)?Re={currentLocation:I.location,nextLocation:x}:D.has(x.pathname)&&(Re={currentLocation:x,nextLocation:I.location})}else if(G){let Ye=D.get(I.location.pathname);Ye?Ye.add(x.pathname):(Ye=new Set([x.pathname]),D.set(I.location.pathname,Ye)),Re={currentLocation:I.location,nextLocation:x}}Wt({...H,actionData:ce,loaderData:Te,historyAction:A,location:x,initialized:!0,navigation:cp,revalidation:"idle",restoreScrollPosition:Ee,preventScrollReset:Se,blockers:Ve},{viewTransitionOpts:Re,flushSync:K===!0}),A="POP",V=!1,G=!1,ft=!1,Xe=!1,N==null||N.resolve(),N=null,$e==null||$e.resolve(),$e=null}async function Fi(x,H){if(N==null||N.resolve(),N=null,typeof x=="number"){N||(N=lE());let it=N.promise;return n.history.go(x),it}let K=kp(I.location,I.matches,p,x,H==null?void 0:H.fromRouteId,H==null?void 0:H.relative),{path:re,submission:ce,error:Te}=X_(!1,K,H),Ve=I.location,Ee=Tu(I.location,re,H&&H.state);Ee={...Ee,...n.history.encodeLocation(Ee)};let Se=H&&H.replace!=null?H.replace:void 0,Re="PUSH";Se===!0?Re="REPLACE":Se===!1||ce!=null&&Un(ce.formMethod)&&ce.formAction===I.location.pathname+I.location.search&&(Re="REPLACE");let qe=H&&"preventScrollReset"in H?H.preventScrollReset===!0:void 0,ke=(H&&H.flushSync)===!0,Ye=Ar({currentLocation:Ve,nextLocation:Ee,historyAction:Re});if(Ye){Zn(Ye,{state:"blocked",location:Ee,proceed(){Zn(Ye,{state:"proceeding",proceed:void 0,reset:void 0,location:Ee}),Fi(x,H)},reset(){let it=new Map(I.blockers);it.set(Ye,Jl),Wt({blockers:it})}});return}await Xn(Re,Ee,{submission:ce,pendingError:Te,preventScrollReset:qe,replace:H&&H.replace,enableViewTransition:H&&H.viewTransition,flushSync:ke,callSiteDefaultShouldRevalidate:H&&H.unstable_defaultShouldRevalidate})}function ca(){$e||($e=lE()),li(),Wt({revalidation:"loading"});let x=$e.promise;return I.navigation.state==="submitting"?x:I.navigation.state==="idle"?(Xn(I.historyAction,I.location,{startUninterruptedRevalidation:!0}),x):(Xn(A||I.historyAction,I.navigation.location,{overrideNavigation:I.navigation,enableViewTransition:G===!0}),x)}async function Xn(x,H,K){M&&M.abort(),M=null,A=x,ft=(K&&K.startUninterruptedRevalidation)===!0,fi(I.location,I.matches),V=(K&&K.preventScrollReset)===!0,G=(K&&K.enableViewTransition)===!0;let re=f||h,ce=K&&K.overrideNavigation,Te=K!=null&&K.initialHydration&&I.matches&&I.matches.length>0&&!Z?I.matches:zs(re,H,p),Ve=(K&&K.flushSync)===!0;if(Te&&I.initialized&&!Xe&&hA(I.location,H)&&!(K&&K.submission&&Un(K.submission.formMethod))){jn(H,{matches:Te},{flushSync:Ve});return}let Ee=Gi(Te,re,H.pathname);if(Ee.active&&Ee.matches&&(Te=Ee.matches),!Te){let{error:xt,notFoundMatches:qt,route:lt}=Nt(H.pathname);jn(H,{matches:qt,loaderData:{},errors:{[lt.id]:xt}},{flushSync:Ve});return}M=new AbortController;let Se=za(n.history,H,M.signal,K&&K.submission),Re=n.getContext?await n.getContext():new G_,qe;if(K&&K.pendingError)qe=[Gs(Te).route.id,{type:"error",error:K.pendingError}];else if(K&&K.submission&&Un(K.submission.formMethod)){let xt=await Bi(Se,H,K.submission,Te,Re,Ee.active,K&&K.initialHydration===!0,{replace:K.replace,flushSync:Ve});if(xt.shortCircuited)return;if(xt.pendingActionResult){let[qt,lt]=xt.pendingActionResult;if(yr(lt)&&Su(lt.error)&&lt.error.status===404){M=null,jn(H,{matches:xt.matches,loaderData:{},errors:{[qt]:lt.error}});return}}Te=xt.matches||Te,qe=xt.pendingActionResult,ce=dp(H,K.submission),Ve=!1,Ee.active=!1,Se=za(n.history,Se.url,Se.signal)}let{shortCircuited:ke,matches:Ye,loaderData:it,errors:Dt}=await fo(Se,H,Te,Re,Ee.active,ce,K&&K.submission,K&&K.fetcherSubmission,K&&K.replace,K&&K.initialHydration===!0,Ve,qe,K&&K.callSiteDefaultShouldRevalidate);ke||(M=null,jn(H,{matches:Ye||Te,...sE(qe),loaderData:it,errors:Dt}))}async function Bi(x,H,K,re,ce,Te,Ve,Ee={}){li();let Se=vA(H,K);if(Wt({navigation:Se},{flushSync:Ee.flushSync===!0}),Te){let ke=await zn(re,H.pathname,x.signal);if(ke.type==="aborted")return{shortCircuited:!0};if(ke.type==="error"){if(ke.partialMatches.length===0){let{matches:it,route:Dt}=rd(h);return{matches:it,pendingActionResult:[Dt.id,{type:"error",error:ke.error}]}}let Ye=Gs(ke.partialMatches).route.id;return{matches:ke.partialMatches,pendingActionResult:[Ye,{type:"error",error:ke.error}]}}else if(ke.matches)re=ke.matches;else{let{notFoundMatches:Ye,error:it,route:Dt}=Nt(H.pathname);return{matches:Ye,pendingActionResult:[Dt.id,{type:"error",error:it}]}}}let Re,qe=md(re,H);if(!qe.route.action&&!qe.route.lazy)Re={type:"error",error:xr(405,{method:x.method,pathname:H.pathname,routeId:qe.route.id})};else{let ke=Ka(a,l,x,re,qe,Ve?[]:r,ce),Ye=await Yn(x,ke,ce,null);if(Re=Ye[qe.route.id],!Re){for(let it of re)if(Ye[it.route.id]){Re=Ye[it.route.id];break}}if(x.signal.aborted)return{shortCircuited:!0}}if(jo(Re)){let ke;return Ee&&Ee.replace!=null?ke=Ee.replace:ke=tE(Re.response.headers.get("Location"),new URL(x.url),p)===I.location.pathname+I.location.search,await Rr(x,Re,!0,{submission:K,replace:ke}),{shortCircuited:!0}}if(yr(Re)){let ke=Gs(re,qe.route.id);return(Ee&&Ee.replace)!==!0&&(A="PUSH"),{matches:re,pendingActionResult:[ke.route.id,Re,qe.route.id]}}return{matches:re,pendingActionResult:[qe.route.id,Re]}}async function fo(x,H,K,re,ce,Te,Ve,Ee,Se,Re,qe,ke,Ye){let it=Te||dp(H,Ve),Dt=Ve||Ee||aE(it),xt=!ft&&!Re;if(ce){if(xt){let It=Ut(ke);Wt({navigation:it,...It!==void 0?{actionData:It}:{}},{flushSync:qe})}let ot=await zn(K,H.pathname,x.signal);if(ot.type==="aborted")return{shortCircuited:!0};if(ot.type==="error"){if(ot.partialMatches.length===0){let{matches:Tn,route:en}=rd(h);return{matches:Tn,loaderData:{},errors:{[en.id]:ot.error}}}let It=Gs(ot.partialMatches).route.id;return{matches:ot.partialMatches,loaderData:{},errors:{[It]:ot.error}}}else if(ot.matches)K=ot.matches;else{let{error:It,notFoundMatches:Tn,route:en}=Nt(H.pathname);return{matches:Tn,loaderData:{},errors:{[en.id]:It}}}}let qt=f||h,{dsMatches:lt,revalidatingFetchers:$t}=Y_(x,re,a,l,n.history,I,K,Dt,H,Re?[]:r,Re===!0,Xe,Ge,xe,be,te,qt,p,n.patchRoutesOnNavigation!=null,ke,Ye);if(ue=++_e,!n.dataStrategy&&!lt.some(ot=>ot.shouldLoad)&&!lt.some(ot=>ot.route.middleware&&ot.route.middleware.length>0)&&$t.length===0){let ot=Jn();return jn(H,{matches:K,loaderData:{},errors:ke&&yr(ke[1])?{[ke[0]]:ke[1].error}:null,...sE(ke),...ot?{fetchers:new Map(I.fetchers)}:{}},{flushSync:qe}),{shortCircuited:!0}}if(xt){let ot={};if(!ce){ot.navigation=it;let It=Ut(ke);It!==void 0&&(ot.actionData=It)}$t.length>0&&(ot.fetchers=Ft($t)),Wt(ot,{flushSync:qe})}$t.forEach(ot=>{kn(ot.key),ot.controller&&ie.set(ot.key,ot.controller)});let Et=()=>$t.forEach(ot=>kn(ot.key));M&&M.signal.addEventListener("abort",Et);let{loaderResults:Wi,fetcherResults:Gn}=await Es(lt,$t,x,re);if(x.signal.aborted)return{shortCircuited:!0};M&&M.signal.removeEventListener("abort",Et),$t.forEach(ot=>ie.delete(ot.key));let bn=id(Wi);if(bn)return await Rr(x,bn.result,!0,{replace:Se}),{shortCircuited:!0};if(bn=id(Gn),bn)return te.add(bn.key),await Rr(x,bn.result,!0,{replace:Se}),{shortCircuited:!0};let{loaderData:Gr,errors:Hr}=rE(I,K,Wi,ke,$t,Gn);Re&&I.errors&&(Hr={...I.errors,...Hr});let er=Jn(),Pr=ji(ue),fn=er||Pr||$t.length>0;return{matches:K,loaderData:Gr,errors:Hr,...fn?{fetchers:new Map(I.fetchers)}:{}}}function Ut(x){if(x&&!yr(x[1]))return{[x[0]]:x[1].data};if(I.actionData)return Object.keys(I.actionData).length===0?null:I.actionData}function Ft(x){return x.forEach(H=>{let K=I.fetchers.get(H.key),re=Zl(void 0,K?K.data:void 0);I.fetchers.set(H.key,re)}),new Map(I.fetchers)}async function ur(x,H,K,re){kn(x);let ce=(re&&re.flushSync)===!0,Te=f||h,Ve=kp(I.location,I.matches,p,K,H,re==null?void 0:re.relative),Ee=zs(Te,Ve,p),Se=Gi(Ee,Te,Ve);if(Se.active&&Se.matches&&(Ee=Se.matches),!Ee){Qn(x,H,xr(404,{pathname:Ve}),{flushSync:ce});return}let{path:Re,submission:qe,error:ke}=X_(!0,Ve,re);if(ke){Qn(x,H,ke,{flushSync:ce});return}let Ye=n.getContext?await n.getContext():new G_,it=(re&&re.preventScrollReset)===!0;if(qe&&Un(qe.formMethod)){await po(x,H,Re,Ee,Ye,Se.active,ce,it,qe,re&&re.unstable_defaultShouldRevalidate);return}be.set(x,{routeId:H,path:Re}),await mo(x,H,Re,Ee,Ye,Se.active,ce,it,qe)}async function po(x,H,K,re,ce,Te,Ve,Ee,Se,Re){li(),be.delete(x);let qe=I.fetchers.get(x);hn(x,TA(Se,qe),{flushSync:Ve});let ke=new AbortController,Ye=za(n.history,K,ke.signal,Se);if(Te){let Rt=await zn(re,new URL(Ye.url).pathname,Ye.signal,x);if(Rt.type==="aborted")return;if(Rt.type==="error"){Qn(x,H,Rt.error,{flushSync:Ve});return}else if(Rt.matches)re=Rt.matches;else{Qn(x,H,xr(404,{pathname:K}),{flushSync:Ve});return}}let it=md(re,K);if(!it.route.action&&!it.route.lazy){let Rt=xr(405,{method:Se.formMethod,pathname:K,routeId:H});Qn(x,H,Rt,{flushSync:Ve});return}ie.set(x,ke);let Dt=_e,xt=Ka(a,l,Ye,re,it,r,ce),qt=await Yn(Ye,xt,ce,x),lt=qt[it.route.id];if(!lt){for(let Rt of xt)if(qt[Rt.route.id]){lt=qt[Rt.route.id];break}}if(Ye.signal.aborted){ie.get(x)===ke&&ie.delete(x);return}if(xe.has(x)){if(jo(lt)||yr(lt)){hn(x,os(void 0));return}}else{if(jo(lt))if(ie.delete(x),ue>Dt){hn(x,os(void 0));return}else return te.add(x),hn(x,Zl(Se)),Rr(Ye,lt,!1,{fetcherSubmission:Se,preventScrollReset:Ee});if(yr(lt)){Qn(x,H,lt.error);return}}let $t=I.navigation.location||I.location,Et=za(n.history,$t,ke.signal),Wi=f||h,Gn=I.navigation.state!=="idle"?zs(Wi,I.navigation.location,p):I.matches;st(Gn,"Didn't find any matches after fetcher action");let bn=++_e;j.set(x,bn);let Gr=Zl(Se,lt.data);I.fetchers.set(x,Gr);let{dsMatches:Hr,revalidatingFetchers:er}=Y_(Et,ce,a,l,n.history,I,Gn,Se,$t,r,!1,Xe,Ge,xe,be,te,Wi,p,n.patchRoutesOnNavigation!=null,[it.route.id,lt],Re);er.filter(Rt=>Rt.key!==x).forEach(Rt=>{let Hn=Rt.key,Wr=I.fetchers.get(Hn),vt=Zl(void 0,Wr?Wr.data:void 0);I.fetchers.set(Hn,vt),kn(Hn),Rt.controller&&ie.set(Hn,Rt.controller)}),Wt({fetchers:new Map(I.fetchers)});let Pr=()=>er.forEach(Rt=>kn(Rt.key));ke.signal.addEventListener("abort",Pr);let{loaderResults:fn,fetcherResults:ot}=await Es(Hr,er,Et,ce);if(ke.signal.aborted)return;if(ke.signal.removeEventListener("abort",Pr),j.delete(x),ie.delete(x),er.forEach(Rt=>ie.delete(Rt.key)),I.fetchers.has(x)){let Rt=os(lt.data);I.fetchers.set(x,Rt)}let It=id(fn);if(It)return Rr(Et,It.result,!1,{preventScrollReset:Ee});if(It=id(ot),It)return te.add(It.key),Rr(Et,It.result,!1,{preventScrollReset:Ee});let{loaderData:Tn,errors:en}=rE(I,Gn,fn,void 0,er,ot);ji(bn),I.navigation.state==="loading"&&bn>ue?(st(A,"Expected pending action"),M&&M.abort(),jn(I.navigation.location,{matches:Gn,loaderData:Tn,errors:en,fetchers:new Map(I.fetchers)})):(Wt({errors:en,loaderData:iE(I.loaderData,Tn,Gn,en),fetchers:new Map(I.fetchers)}),Xe=!1)}async function mo(x,H,K,re,ce,Te,Ve,Ee,Se){let Re=I.fetchers.get(x);hn(x,Zl(Se,Re?Re.data:void 0),{flushSync:Ve});let qe=new AbortController,ke=za(n.history,K,qe.signal);if(Te){let lt=await zn(re,new URL(ke.url).pathname,ke.signal,x);if(lt.type==="aborted")return;if(lt.type==="error"){Qn(x,H,lt.error,{flushSync:Ve});return}else if(lt.matches)re=lt.matches;else{Qn(x,H,xr(404,{pathname:K}),{flushSync:Ve});return}}let Ye=md(re,K);ie.set(x,qe);let it=_e,Dt=Ka(a,l,ke,re,Ye,r,ce),qt=(await Yn(ke,Dt,ce,x))[Ye.route.id];if(ie.get(x)===qe&&ie.delete(x),!ke.signal.aborted){if(xe.has(x)){hn(x,os(void 0));return}if(jo(qt))if(ue>it){hn(x,os(void 0));return}else{te.add(x),await Rr(ke,qt,!1,{preventScrollReset:Ee});return}if(yr(qt)){Qn(x,H,qt.error);return}hn(x,os(qt.data))}}async function Rr(x,H,K,{submission:re,fetcherSubmission:ce,preventScrollReset:Te,replace:Ve}={}){K||(N==null||N.resolve(),N=null),H.response.headers.has("X-Remix-Revalidate")&&(Xe=!0);let Ee=H.response.headers.get("Location");st(Ee,"Expected a Location header on the redirect Response"),Ee=tE(Ee,new URL(x.url),p);let Se=Tu(I.location,Ee,{_isRedirect:!0});if(t){let Dt=!1;if(H.response.headers.has("X-Remix-Reload-Document"))Dt=!0;else if(Jd(Ee)){const xt=dT(Ee,!0);Dt=xt.origin!==e.location.origin||Mr(xt.pathname,p)==null}if(Dt){Ve?e.location.replace(Ee):e.location.assign(Ee);return}}M=null;let Re=Ve===!0||H.response.headers.has("X-Remix-Replace")?"REPLACE":"PUSH",{formMethod:qe,formAction:ke,formEncType:Ye}=I.navigation;!re&&!ce&&qe&&ke&&Ye&&(re=aE(I.navigation));let it=re||ce;if(YR.has(H.response.status)&&it&&Un(it.formMethod))await Xn(Re,Se,{submission:{...it,formAction:Ee},preventScrollReset:Te||V,enableViewTransition:K?G:void 0});else{let Dt=dp(Se,re);await Xn(Re,Se,{overrideNavigation:Dt,fetcherSubmission:ce,preventScrollReset:Te||V,enableViewTransition:K?G:void 0})}}async function Yn(x,H,K,re){var Ve;let ce,Te={};try{ce=await oA(_,x,H,re,K,!1)}catch(Ee){return H.filter(Se=>Se.shouldLoad).forEach(Se=>{Te[Se.route.id]={type:"error",error:Ee}}),Te}if(x.signal.aborted)return Te;if(!Un(x.method))for(let Ee of H){if(((Ve=ce[Ee.route.id])==null?void 0:Ve.type)==="error")break;!ce.hasOwnProperty(Ee.route.id)&&!I.loaderData.hasOwnProperty(Ee.route.id)&&(!I.errors||!I.errors.hasOwnProperty(Ee.route.id))&&Ee.shouldCallHandler()&&(ce[Ee.route.id]={type:"error",result:new Error(`No result returned from dataStrategy for route ${Ee.route.id}`)})}for(let[Ee,Se]of Object.entries(ce))if(gA(Se)){let Re=Se.result;Te[Ee]={type:"redirect",response:cA(Re,x,Ee,H,p)}}else Te[Ee]=await uA(Se);return Te}async function Es(x,H,K,re){let ce=Yn(K,x,re,null),Te=Promise.all(H.map(async Se=>{if(Se.matches&&Se.match&&Se.request&&Se.controller){let qe=(await Yn(Se.request,Se.matches,re,Se.key))[Se.match.route.id];return{[Se.key]:qe}}else return Promise.resolve({[Se.key]:{type:"error",error:xr(404,{pathname:Se.path})}})})),Ve=await ce,Ee=(await Te).reduce((Se,Re)=>Object.assign(Se,Re),{});return{loaderResults:Ve,fetcherResults:Ee}}function li(){Xe=!0,be.forEach((x,H)=>{ie.has(H)&&Ge.add(H),kn(H)})}function hn(x,H,K={}){I.fetchers.set(x,H),Wt({fetchers:new Map(I.fetchers)},{flushSync:(K&&K.flushSync)===!0})}function Qn(x,H,K,re={}){let ce=Gs(I.matches,H);vs(x),Wt({errors:{[ce.route.id]:K},fetchers:new Map(I.fetchers)},{flushSync:(re&&re.flushSync)===!0})}function ui(x){return De.set(x,(De.get(x)||0)+1),xe.has(x)&&xe.delete(x),I.fetchers.get(x)||QR}function ci(x,H){kn(x,H==null?void 0:H.reason),hn(x,os(null))}function vs(x){let H=I.fetchers.get(x);ie.has(x)&&!(H&&H.state==="loading"&&j.has(x))&&kn(x),be.delete(x),j.delete(x),te.delete(x),xe.delete(x),Ge.delete(x),I.fetchers.delete(x)}function di(x){let H=(De.get(x)||0)-1;H<=0?(De.delete(x),xe.add(x)):De.set(x,H),Wt({fetchers:new Map(I.fetchers)})}function kn(x,H){let K=ie.get(x);K&&(K.abort(H),ie.delete(x))}function Ts(x){for(let H of x){let K=ui(H),re=os(K.data);I.fetchers.set(H,re)}}function Jn(){let x=[],H=!1;for(let K of te){let re=I.fetchers.get(K);st(re,`Expected fetcher: ${K}`),re.state==="loading"&&(te.delete(K),x.push(K),H=!0)}return Ts(x),H}function ji(x){let H=[];for(let[K,re]of j)if(re<x){let ce=I.fetchers.get(K);st(ce,`Expected fetcher: ${K}`),ce.state==="loading"&&(kn(K),j.delete(K),H.push(K))}return Ts(H),H.length>0}function hi(x,H){let K=I.blockers.get(x)||Jl;return ze.get(x)!==H&&ze.set(x,H),K}function zi(x){I.blockers.delete(x),ze.delete(x)}function Zn(x,H){let K=I.blockers.get(x)||Jl;st(K.state==="unblocked"&&H.state==="blocked"||K.state==="blocked"&&H.state==="blocked"||K.state==="blocked"&&H.state==="proceeding"||K.state==="blocked"&&H.state==="unblocked"||K.state==="proceeding"&&H.state==="unblocked",`Invalid blocker state transition: ${K.state} -> ${H.state}`);let re=new Map(I.blockers);re.set(x,H),Wt({blockers:re})}function Ar({currentLocation:x,nextLocation:H,historyAction:K}){if(ze.size===0)return;ze.size>1&&Gt(!1,"A router only supports one blocker at a time");let re=Array.from(ze.entries()),[ce,Te]=re[re.length-1],Ve=I.blockers.get(ce);if(!(Ve&&Ve.state==="proceeding")&&Te({currentLocation:x,nextLocation:H,historyAction:K}))return ce}function Nt(x){let H=xr(404,{pathname:x}),K=f||h,{matches:re,route:ce}=rd(K);return{notFoundMatches:re,route:ce,error:H}}function go(x,H,K){if(C=x,L=H,U=K||null,!z&&I.navigation===cp){z=!0;let re=yo(I.location,I.matches);re!=null&&Wt({restoreScrollPosition:re})}return()=>{C=null,L=null,U=null}}function zr(x,H){return U&&U(x,H.map(re=>SR(re,I.loaderData)))||x.key}function fi(x,H){if(C&&L){let K=zr(x,H);C[K]=L()}}function yo(x,H){if(C){let K=zr(x,H),re=C[K];if(typeof re=="number")return re}return null}function Gi(x,H,K){if(n.patchRoutesOnNavigation)if(x){if(Object.keys(x[0].params).length>0)return{active:!0,matches:iu(H,K,p,!0)}}else return{active:!0,matches:iu(H,K,p,!0)||[]};return{active:!1,matches:null}}async function zn(x,H,K,re){if(!n.patchRoutesOnNavigation)return{type:"success",matches:x};let ce=x;for(;;){let Te=f==null,Ve=f||h,Ee=l;try{await n.patchRoutesOnNavigation({signal:K,path:H,matches:ce,fetcherKey:re,patch:(qe,ke)=>{K.aborted||Q_(qe,ke,Ve,Ee,a,!1)}})}catch(qe){return{type:"error",error:qe,partialMatches:ce}}finally{Te&&!K.aborted&&(h=[...h])}if(K.aborted)return{type:"aborted"};let Se=zs(Ve,H,p),Re=null;if(Se){if(Object.keys(Se[0].params).length===0)return{type:"success",matches:Se};if(Re=iu(Ve,H,p,!0),!(Re&&ce.length<Re.length&&_o(ce,Re.slice(0,ce.length))))return{type:"success",matches:Se}}if(Re||(Re=iu(Ve,H,p,!0)),!Re||_o(ce,Re))return{type:"success",matches:null};ce=Re}}function _o(x,H){return x.length===H.length&&x.every((K,re)=>K.route.id===H[re].route.id)}function Hi(x){l={},f=wu(x,a,void 0,l)}function pi(x,H,K=!1){let re=f==null;Q_(x,H,f||h,l,a,K),re&&(h=[...h],Wt({}))}return me={get basename(){return p},get future(){return E},get state(){return I},get routes(){return h},get window(){return e},initialize:_t,subscribe:Ir,enableScrollRestoration:go,navigate:Fi,fetch:ur,revalidate:ca,createHref:x=>n.history.createHref(x),encodeLocation:x=>n.history.encodeLocation(x),getFetcher:ui,resetFetcher:ci,deleteFetcher:di,dispose:ln,getBlocker:hi,deleteBlocker:zi,patchRoutes:pi,_internalFetchControllers:ie,_internalSetRoutes:Hi,_internalSetStateDoNotUseOrYouWillBreakYourApp(x){Wt(x)}},n.unstable_instrumentations&&(me=zR(me,n.unstable_instrumentations.map(x=>x.router).filter(Boolean))),me}function eA(n){return n!=null&&("formData"in n&&n.formData!=null||"body"in n&&n.body!==void 0)}function kp(n,e,t,r,s,a){let l,h;if(s){l=[];for(let p of e)if(l.push(p),p.route.id===s){h=p;break}}else l=e,h=e[e.length-1];let f=eh(r||".",Zd(l),Mr(n.pathname,t)||n.pathname,a==="path");if(r==null&&(f.search=n.search,f.hash=n.hash),(r==null||r===""||r===".")&&h){let p=hm(f.search);if(h.route.index&&!p)f.search=f.search?f.search.replace(/^\?/,"?index&"):"?index";else if(!h.route.index&&p){let _=new URLSearchParams(f.search),E=_.getAll("index");_.delete("index"),E.filter(S=>S).forEach(S=>_.append("index",S));let T=_.toString();f.search=T?`?${T}`:""}}return t!=="/"&&(f.pathname=VR({basename:t,pathname:f.pathname})),Li(f)}function X_(n,e,t){if(!t||!eA(t))return{path:e};if(t.formMethod&&!EA(t.formMethod))return{path:e,error:xr(405,{method:t.formMethod})};let r=()=>({path:e,error:xr(400,{type:"invalid-body"})}),a=(t.formMethod||"get").toUpperCase(),l=CT(e);if(t.body!==void 0){if(t.formEncType==="text/plain"){if(!Un(a))return r();let E=typeof t.body=="string"?t.body:t.body instanceof FormData||t.body instanceof URLSearchParams?Array.from(t.body.entries()).reduce((T,[S,C])=>`${T}${S}=${C}
`,""):String(t.body);return{path:e,submission:{formMethod:a,formAction:l,formEncType:t.formEncType,formData:void 0,json:void 0,text:E}}}else if(t.formEncType==="application/json"){if(!Un(a))return r();try{let E=typeof t.body=="string"?JSON.parse(t.body):t.body;return{path:e,submission:{formMethod:a,formAction:l,formEncType:t.formEncType,formData:void 0,json:E,text:void 0}}}catch{return r()}}}st(typeof FormData=="function","FormData is not available in this environment");let h,f;if(t.formData)h=Op(t.formData),f=t.formData;else if(t.body instanceof FormData)h=Op(t.body),f=t.body;else if(t.body instanceof URLSearchParams)h=t.body,f=nE(h);else if(t.body==null)h=new URLSearchParams,f=new FormData;else try{h=new URLSearchParams(t.body),f=nE(h)}catch{return r()}let p={formMethod:a,formAction:l,formEncType:t&&t.formEncType||"application/x-www-form-urlencoded",formData:f,json:void 0,text:void 0};if(Un(p.formMethod))return{path:e,submission:p};let _=uo(e);return n&&_.search&&hm(_.search)&&h.append("index",""),_.search=`?${h}`,{path:Li(_),submission:p}}function Y_(n,e,t,r,s,a,l,h,f,p,_,E,T,S,C,U,L,z,$,Z,oe){var ft;let we=Z?yr(Z[1])?Z[1].error:Z[1].data:void 0,me=s.createURL(a.location),I=s.createURL(f),A;if(_&&a.errors){let Xe=Object.keys(a.errors)[0];A=l.findIndex(Ge=>Ge.route.id===Xe)}else if(Z&&yr(Z[1])){let Xe=Z[0];A=l.findIndex(Ge=>Ge.route.id===Xe)-1}let N=Z?Z[1].statusCode:void 0,V=N&&N>=400,M={currentUrl:me,currentParams:((ft=a.matches[0])==null?void 0:ft.params)||{},nextUrl:I,nextParams:l[0].params,...h,actionResult:we,actionStatus:N},G=xu(l),D=l.map((Xe,Ge)=>{let{route:ie}=Xe,_e=null;if(A!=null&&Ge>A?_e=!1:ie.lazy?_e=!0:cm(ie)?_?_e=bp(ie,a.loaderData,a.errors):tA(a.loaderData,a.matches[Ge],Xe)&&(_e=!0):_e=!1,_e!==null)return Dp(t,r,n,G,Xe,p,e,_e);let ue=!1;typeof oe=="boolean"?ue=oe:V?ue=!1:(E||me.pathname+me.search===I.pathname+I.search||me.search!==I.search||nA(a.matches[Ge],Xe))&&(ue=!0);let j={...M,defaultShouldRevalidate:ue},te=du(Xe,j);return Dp(t,r,n,G,Xe,p,e,te,j,oe)}),We=[];return C.forEach((Xe,Ge)=>{if(_||!l.some(xe=>xe.route.id===Xe.routeId)||S.has(Ge))return;let ie=a.fetchers.get(Ge),_e=ie&&ie.state!=="idle"&&ie.data===void 0,ue=zs(L,Xe.path,z);if(!ue){if($&&_e)return;We.push({key:Ge,routeId:Xe.routeId,path:Xe.path,matches:null,match:null,request:null,controller:null});return}if(U.has(Ge))return;let j=md(ue,Xe.path),te=new AbortController,be=za(s,Xe.path,te.signal),De=null;if(T.has(Ge))T.delete(Ge),De=Ka(t,r,be,ue,j,p,e);else if(_e)E&&(De=Ka(t,r,be,ue,j,p,e));else{let xe;typeof oe=="boolean"?xe=oe:V?xe=!1:xe=E;let ze={...M,defaultShouldRevalidate:xe};du(j,ze)&&(De=Ka(t,r,be,ue,j,p,e,ze))}De&&We.push({key:Ge,routeId:Xe.routeId,path:Xe.path,matches:De,match:j,request:be,controller:te})}),{dsMatches:D,revalidatingFetchers:We}}function cm(n){return n.loader!=null||n.middleware!=null&&n.middleware.length>0}function bp(n,e,t){if(n.lazy)return!0;if(!cm(n))return!1;let r=e!=null&&n.id in e,s=t!=null&&t[n.id]!==void 0;return!r&&s?!1:typeof n.loader=="function"&&n.loader.hydrate===!0?!0:!r&&!s}function tA(n,e,t){let r=!e||t.route.id!==e.route.id,s=!n.hasOwnProperty(t.route.id);return r||s}function nA(n,e){let t=n.route.path;return n.pathname!==e.pathname||t!=null&&t.endsWith("*")&&n.params["*"]!==e.params["*"]}function du(n,e){if(n.route.shouldRevalidate){let t=n.route.shouldRevalidate(e);if(typeof t=="boolean")return t}return e.defaultShouldRevalidate}function Q_(n,e,t,r,s,a){let l;if(n){let p=r[n];st(p,`No route found to patch children into: routeId = ${n}`),p.children||(p.children=[]),l=p.children}else l=t;let h=[],f=[];if(e.forEach(p=>{let _=l.find(E=>ST(p,E));_?f.push({existingRoute:_,newRoute:p}):h.push(p)}),h.length>0){let p=wu(h,s,[n||"_","patch",String((l==null?void 0:l.length)||"0")],r);l.push(...p)}if(a&&f.length>0)for(let p=0;p<f.length;p++){let{existingRoute:_,newRoute:E}=f[p],T=_,[S]=wu([E],s,[],{},!0);Object.assign(T,{element:S.element?S.element:T.element,errorElement:S.errorElement?S.errorElement:T.errorElement,hydrateFallbackElement:S.hydrateFallbackElement?S.hydrateFallbackElement:T.hydrateFallbackElement})}}function ST(n,e){return"id"in n&&"id"in e&&n.id===e.id?!0:n.index===e.index&&n.path===e.path&&n.caseSensitive===e.caseSensitive?(!n.children||n.children.length===0)&&(!e.children||e.children.length===0)?!0:n.children.every((t,r)=>{var s;return(s=e.children)==null?void 0:s.some(a=>ST(t,a))}):!1}var J_=new WeakMap,IT=({key:n,route:e,manifest:t,mapRouteProperties:r})=>{let s=t[e.id];if(st(s,"No route found in manifest"),!s.lazy||typeof s.lazy!="object")return;let a=s.lazy[n];if(!a)return;let l=J_.get(s);l||(l={},J_.set(s,l));let h=l[n];if(h)return h;let f=(async()=>{let p=ER(n),E=s[n]!==void 0&&n!=="hasErrorBoundary";if(p)Gt(!p,"Route property "+n+" is not a supported lazy route property. This property will be ignored."),l[n]=Promise.resolve();else if(E)Gt(!1,`Route "${s.id}" has a static property "${n}" defined. The lazy property will be ignored.`);else{let T=await a();T!=null&&(Object.assign(s,{[n]:T}),Object.assign(s,r(s)))}typeof s.lazy=="object"&&(s.lazy[n]=void 0,Object.values(s.lazy).every(T=>T===void 0)&&(s.lazy=void 0))})();return l[n]=f,f},Z_=new WeakMap;function rA(n,e,t,r,s){let a=t[n.id];if(st(a,"No route found in manifest"),!n.lazy)return{lazyRoutePromise:void 0,lazyHandlerPromise:void 0};if(typeof n.lazy=="function"){let _=Z_.get(a);if(_)return{lazyRoutePromise:_,lazyHandlerPromise:_};let E=(async()=>{st(typeof n.lazy=="function","No lazy route function found");let T=await n.lazy(),S={};for(let C in T){let U=T[C];if(U===void 0)continue;let L=TR(C),$=a[C]!==void 0&&C!=="hasErrorBoundary";L?Gt(!L,"Route property "+C+" is not a supported property to be returned from a lazy route function. This property will be ignored."):$?Gt(!$,`Route "${a.id}" has a static property "${C}" defined but its lazy function is also returning a value for this property. The lazy route property "${C}" will be ignored.`):S[C]=U}Object.assign(a,S),Object.assign(a,{...r(a),lazy:void 0})})();return Z_.set(a,E),E.catch(()=>{}),{lazyRoutePromise:E,lazyHandlerPromise:E}}let l=Object.keys(n.lazy),h=[],f;for(let _ of l){if(s&&s.includes(_))continue;let E=IT({key:_,route:n,manifest:t,mapRouteProperties:r});E&&(h.push(E),_===e&&(f=E))}let p=h.length>0?Promise.all(h).then(()=>{}):void 0;return p==null||p.catch(()=>{}),f==null||f.catch(()=>{}),{lazyRoutePromise:p,lazyHandlerPromise:f}}async function eE(n){let e=n.matches.filter(s=>s.shouldLoad),t={};return(await Promise.all(e.map(s=>s.resolve()))).forEach((s,a)=>{t[e[a].route.id]=s}),t}async function iA(n){return n.matches.some(e=>e.route.middleware)?RT(n,()=>eE(n)):eE(n)}function RT(n,e){return sA(n,e,r=>{if(_A(r))throw r;return r},pA,t);function t(r,s,a){if(a)return Promise.resolve(Object.assign(a.value,{[s]:{type:"error",result:r}}));{let{matches:l}=n,h=Math.min(Math.max(l.findIndex(p=>p.route.id===s),0),Math.max(l.findIndex(p=>p.shouldCallHandler()),0)),f=Gs(l,l[h].route.id).route.id;return Promise.resolve({[f]:{type:"error",result:r}})}}}async function sA(n,e,t,r,s){let{matches:a,request:l,params:h,context:f,unstable_pattern:p}=n,_=a.flatMap(T=>T.route.middleware?T.route.middleware.map(S=>[T.route.id,S]):[]);return await AT({request:l,params:h,context:f,unstable_pattern:p},_,e,t,r,s)}async function AT(n,e,t,r,s,a,l=0){let{request:h}=n;if(h.signal.aborted)throw h.signal.reason??new Error(`Request aborted: ${h.method} ${h.url}`);let f=e[l];if(!f)return await t();let[p,_]=f,E,T=async()=>{if(E)throw new Error("You may only call `next()` once per middleware");try{return E={value:await AT(n,e,t,r,s,a,l+1)},E.value}catch(S){return E={value:await a(S,p,E)},E.value}};try{let S=await _(n,T),C=S!=null?r(S):void 0;return s(C)?C:E?C??E.value:(E={value:await T()},E.value)}catch(S){return await a(S,p,E)}}function PT(n,e,t,r,s){let a=IT({key:"middleware",route:r.route,manifest:e,mapRouteProperties:n}),l=rA(r.route,Un(t.method)?"action":"loader",e,n,s);return{middleware:a,route:l.lazyRoutePromise,handler:l.lazyHandlerPromise}}function Dp(n,e,t,r,s,a,l,h,f=null,p){let _=!1,E=PT(n,e,t,s,a);return{...s,_lazyPromises:E,shouldLoad:h,shouldRevalidateArgs:f,shouldCallHandler(T){return _=!0,f?typeof p=="boolean"?du(s,{...f,defaultShouldRevalidate:p}):typeof T=="boolean"?du(s,{...f,defaultShouldRevalidate:T}):du(s,f):h},resolve(T){let{lazy:S,loader:C,middleware:U}=s.route,L=_||h||T&&!Un(t.method)&&(S||C),z=U&&U.length>0&&!C&&!S;return L&&(Un(t.method)||!z)?aA({request:t,unstable_pattern:r,match:s,lazyHandlerPromise:E==null?void 0:E.handler,lazyRoutePromise:E==null?void 0:E.route,handlerOverride:T,scopedContext:l}):Promise.resolve({type:"data",result:void 0})}}}function Ka(n,e,t,r,s,a,l,h=null){return r.map(f=>f.route.id!==s.route.id?{...f,shouldLoad:!1,shouldRevalidateArgs:h,shouldCallHandler:()=>!1,_lazyPromises:PT(n,e,t,f,a),resolve:()=>Promise.resolve({type:"data",result:void 0})}:Dp(n,e,t,xu(r),f,a,l,!0,h))}async function oA(n,e,t,r,s,a){t.some(p=>{var _;return(_=p._lazyPromises)==null?void 0:_.middleware})&&await Promise.all(t.map(p=>{var _;return(_=p._lazyPromises)==null?void 0:_.middleware}));let l={request:e,unstable_pattern:xu(t),params:t[0].params,context:s,matches:t},f=await n({...l,fetcherKey:r,runClientMiddleware:p=>{let _=l;return RT(_,()=>p({..._,fetcherKey:r,runClientMiddleware:()=>{throw new Error("Cannot call `runClientMiddleware()` from within an `runClientMiddleware` handler")}}))}});try{await Promise.all(t.flatMap(p=>{var _,E;return[(_=p._lazyPromises)==null?void 0:_.handler,(E=p._lazyPromises)==null?void 0:E.route]}))}catch{}return f}async function aA({request:n,unstable_pattern:e,match:t,lazyHandlerPromise:r,lazyRoutePromise:s,handlerOverride:a,scopedContext:l}){let h,f,p=Un(n.method),_=p?"action":"loader",E=T=>{let S,C=new Promise((z,$)=>S=$);f=()=>S(),n.signal.addEventListener("abort",f);let U=z=>typeof T!="function"?Promise.reject(new Error(`You cannot call the handler for a route which defines a boolean "${_}" [routeId: ${t.route.id}]`)):T({request:n,unstable_pattern:e,params:t.params,context:l},...z!==void 0?[z]:[]),L=(async()=>{try{return{type:"data",result:await(a?a($=>U($)):U())}}catch(z){return{type:"error",result:z}}})();return Promise.race([L,C])};try{let T=p?t.route.action:t.route.loader;if(r||s)if(T){let S,[C]=await Promise.all([E(T).catch(U=>{S=U}),r,s]);if(S!==void 0)throw S;h=C}else{await r;let S=p?t.route.action:t.route.loader;if(S)[h]=await Promise.all([E(S),s]);else if(_==="action"){let C=new URL(n.url),U=C.pathname+C.search;throw xr(405,{method:n.method,pathname:U,routeId:t.route.id})}else return{type:"data",result:void 0}}else if(T)h=await E(T);else{let S=new URL(n.url),C=S.pathname+S.search;throw xr(404,{pathname:C})}}catch(T){return{type:"error",result:T}}finally{f&&n.signal.removeEventListener("abort",f)}return h}async function lA(n){let e=n.headers.get("Content-Type");return e&&/\bapplication\/json\b/.test(e)?n.body==null?null:n.json():n.text()}async function uA(n){var r,s,a,l,h;let{result:e,type:t}=n;if(dm(e)){let f;try{f=await lA(e)}catch(p){return{type:"error",error:p}}return t==="error"?{type:"error",error:new Lu(e.status,e.statusText,f),statusCode:e.status,headers:e.headers}:{type:"data",data:f,statusCode:e.status,headers:e.headers}}return t==="error"?oE(e)?e.data instanceof Error?{type:"error",error:e.data,statusCode:(r=e.init)==null?void 0:r.status,headers:(s=e.init)!=null&&s.headers?new Headers(e.init.headers):void 0}:{type:"error",error:fA(e),statusCode:Su(e)?e.status:void 0,headers:(a=e.init)!=null&&a.headers?new Headers(e.init.headers):void 0}:{type:"error",error:e,statusCode:Su(e)?e.status:void 0}:oE(e)?{type:"data",data:e.data,statusCode:(l=e.init)==null?void 0:l.status,headers:(h=e.init)!=null&&h.headers?new Headers(e.init.headers):void 0}:{type:"data",data:e}}function cA(n,e,t,r,s){let a=n.headers.get("Location");if(st(a,"Redirects returned/thrown from loaders/actions must have a Location header"),!Jd(a)){let l=r.slice(0,r.findIndex(h=>h.route.id===t)+1);a=kp(new URL(e.url),l,s,a),n.headers.set("Location",a)}return n}function tE(n,e,t){if(Jd(n)){let r=n,s=r.startsWith("//")?new URL(e.protocol+r):new URL(r),a=Mr(s.pathname,t)!=null;if(s.origin===e.origin&&a)return s.pathname+s.search+s.hash}return n}function za(n,e,t,r){let s=n.createURL(CT(e)).toString(),a={signal:t};if(r&&Un(r.formMethod)){let{formMethod:l,formEncType:h}=r;a.method=l.toUpperCase(),h==="application/json"?(a.headers=new Headers({"Content-Type":h}),a.body=JSON.stringify(r.json)):h==="text/plain"?a.body=r.text:h==="application/x-www-form-urlencoded"&&r.formData?a.body=Op(r.formData):a.body=r.formData}return new Request(s,a)}function Op(n){let e=new URLSearchParams;for(let[t,r]of n.entries())e.append(t,typeof r=="string"?r:r.name);return e}function nE(n){let e=new FormData;for(let[t,r]of n.entries())e.append(t,r);return e}function dA(n,e,t,r=!1,s=!1){let a={},l=null,h,f=!1,p={},_=t&&yr(t[1])?t[1].error:void 0;return n.forEach(E=>{if(!(E.route.id in e))return;let T=E.route.id,S=e[T];if(st(!jo(S),"Cannot handle redirect results in processLoaderData"),yr(S)){let C=S.error;if(_!==void 0&&(C=_,_=void 0),l=l||{},s)l[T]=C;else{let U=Gs(n,T);l[U.route.id]==null&&(l[U.route.id]=C)}r||(a[T]=wT),f||(f=!0,h=Su(S.error)?S.error.status:500),S.headers&&(p[T]=S.headers)}else a[T]=S.data,S.statusCode&&S.statusCode!==200&&!f&&(h=S.statusCode),S.headers&&(p[T]=S.headers)}),_!==void 0&&t&&(l={[t[0]]:_},t[2]&&(a[t[2]]=void 0)),{loaderData:a,errors:l,statusCode:h||200,loaderHeaders:p}}function rE(n,e,t,r,s,a){let{loaderData:l,errors:h}=dA(e,t,r);return s.filter(f=>!f.matches||f.matches.some(p=>p.shouldLoad)).forEach(f=>{let{key:p,match:_,controller:E}=f;if(E&&E.signal.aborted)return;let T=a[p];if(st(T,"Did not find corresponding fetcher result"),yr(T)){let S=Gs(n.matches,_==null?void 0:_.route.id);h&&h[S.route.id]||(h={...h,[S.route.id]:T.error}),n.fetchers.delete(p)}else if(jo(T))st(!1,"Unhandled fetcher revalidation redirect");else{let S=os(T.data);n.fetchers.set(p,S)}}),{loaderData:l,errors:h}}function iE(n,e,t,r){let s=Object.entries(e).filter(([,a])=>a!==wT).reduce((a,[l,h])=>(a[l]=h,a),{});for(let a of t){let l=a.route.id;if(!e.hasOwnProperty(l)&&n.hasOwnProperty(l)&&a.route.loader&&(s[l]=n[l]),r&&r.hasOwnProperty(l))break}return s}function sE(n){return n?yr(n[1])?{actionData:{}}:{actionData:{[n[0]]:n[1].data}}:{}}function Gs(n,e){return(e?n.slice(0,n.findIndex(r=>r.route.id===e)+1):[...n]).reverse().find(r=>r.route.hasErrorBoundary===!0)||n[0]}function rd(n){let e=n.length===1?n[0]:n.find(t=>t.index||!t.path||t.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function xr(n,{pathname:e,routeId:t,method:r,type:s,message:a}={}){let l="Unknown Server Error",h="Unknown @remix-run/router error";return n===400?(l="Bad Request",r&&e&&t?h=`You made a ${r} request to "${e}" but did not provide a \`loader\` for route "${t}", so there is no way to handle the request.`:s==="invalid-body"&&(h="Unable to encode submission body")):n===403?(l="Forbidden",h=`Route "${t}" does not match URL "${e}"`):n===404?(l="Not Found",h=`No route matches URL "${e}"`):n===405&&(l="Method Not Allowed",r&&e&&t?h=`You made a ${r.toUpperCase()} request to "${e}" but did not provide an \`action\` for route "${t}", so there is no way to handle the request.`:r&&(h=`Invalid request method "${r.toUpperCase()}"`)),new Lu(n||500,l,new Error(h),!0)}function id(n){let e=Object.entries(n);for(let t=e.length-1;t>=0;t--){let[r,s]=e[t];if(jo(s))return{key:r,result:s}}}function CT(n){let e=typeof n=="string"?uo(n):n;return Li({...e,hash:""})}function hA(n,e){return n.pathname!==e.pathname||n.search!==e.search?!1:n.hash===""?e.hash!=="":n.hash===e.hash?!0:e.hash!==""}function fA(n){var e,t;return new Lu(((e=n.init)==null?void 0:e.status)??500,((t=n.init)==null?void 0:t.statusText)??"Internal Server Error",n.data)}function pA(n){return n!=null&&typeof n=="object"&&Object.entries(n).every(([e,t])=>typeof e=="string"&&mA(t))}function mA(n){return n!=null&&typeof n=="object"&&"type"in n&&"result"in n&&(n.type==="data"||n.type==="error")}function gA(n){return dm(n.result)&&vT.has(n.result.status)}function yr(n){return n.type==="error"}function jo(n){return(n&&n.type)==="redirect"}function oE(n){return typeof n=="object"&&n!=null&&"type"in n&&"data"in n&&"init"in n&&n.type==="DataWithResponseInit"}function dm(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.headers=="object"&&typeof n.body<"u"}function yA(n){return vT.has(n)}function _A(n){return dm(n)&&yA(n.status)&&n.headers.has("Location")}function EA(n){return XR.has(n.toUpperCase())}function Un(n){return $R.has(n.toUpperCase())}function hm(n){return new URLSearchParams(n).getAll("index").some(e=>e==="")}function md(n,e){let t=typeof e=="string"?uo(e).search:e.search;if(n[n.length-1].route.index&&hm(t||""))return n[n.length-1];let r=mT(n);return r[r.length-1]}function aE(n){let{formMethod:e,formAction:t,formEncType:r,text:s,formData:a,json:l}=n;if(!(!e||!t||!r)){if(s!=null)return{formMethod:e,formAction:t,formEncType:r,formData:void 0,json:void 0,text:s};if(a!=null)return{formMethod:e,formAction:t,formEncType:r,formData:a,json:void 0,text:void 0};if(l!==void 0)return{formMethod:e,formAction:t,formEncType:r,formData:void 0,json:l,text:void 0}}}function dp(n,e){return e?{state:"loading",location:n,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:n,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function vA(n,e){return{state:"submitting",location:n,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function Zl(n,e){return n?{state:"loading",formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function TA(n,e){return{state:"submitting",formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text,data:e?e.data:void 0}}function os(n){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:n}}function wA(n,e){try{let t=n.sessionStorage.getItem(TT);if(t){let r=JSON.parse(t);for(let[s,a]of Object.entries(r||{}))a&&Array.isArray(a)&&e.set(s,new Set(a||[]))}}catch{}}function SA(n,e){if(e.size>0){let t={};for(let[r,s]of e)t[r]=[...s];try{n.sessionStorage.setItem(TT,JSON.stringify(t))}catch(r){Gt(!1,`Failed to save applied view transitions in sessionStorage (${r}).`)}}}function lE(){let n,e,t=new Promise((r,s)=>{n=async a=>{r(a);try{await t}catch{}},e=async a=>{s(a);try{await t}catch{}}});return{promise:t,resolve:n,reject:e}}var na=b.createContext(null);na.displayName="DataRouter";var Vu=b.createContext(null);Vu.displayName="DataRouterState";var NT=b.createContext(!1);function IA(){return b.useContext(NT)}var fm=b.createContext({isTransitioning:!1});fm.displayName="ViewTransition";var kT=b.createContext(new Map);kT.displayName="Fetchers";var RA=b.createContext(null);RA.displayName="Await";var Sr=b.createContext(null);Sr.displayName="Navigation";var th=b.createContext(null);th.displayName="Location";var Fr=b.createContext({outlet:null,matches:[],isDataRoute:!1});Fr.displayName="Route";var pm=b.createContext(null);pm.displayName="RouteError";var bT="REACT_ROUTER_ERROR",AA="REDIRECT",PA="ROUTE_ERROR_RESPONSE";function CA(n){if(n.startsWith(`${bT}:${AA}:{`))try{let e=JSON.parse(n.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function NA(n){if(n.startsWith(`${bT}:${PA}:{`))try{let e=JSON.parse(n.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new Lu(e.status,e.statusText,e.data)}catch{}}function kA(n,{relative:e}={}){st(ol(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=b.useContext(Sr),{hash:s,pathname:a,search:l}=Mu(n,{relative:e}),h=a;return t!=="/"&&(h=a==="/"?t:ki([t,a])),r.createHref({pathname:h,search:l,hash:s})}function ol(){return b.useContext(th)!=null}function Vi(){return st(ol(),"useLocation() may be used only in the context of a <Router> component."),b.useContext(th).location}var DT="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function OT(n){b.useContext(Sr).static||b.useLayoutEffect(n)}function mm(){let{isDataRoute:n}=b.useContext(Fr);return n?WA():bA()}function bA(){st(ol(),"useNavigate() may be used only in the context of a <Router> component.");let n=b.useContext(na),{basename:e,navigator:t}=b.useContext(Sr),{matches:r}=b.useContext(Fr),{pathname:s}=Vi(),a=JSON.stringify(Zd(r)),l=b.useRef(!1);return OT(()=>{l.current=!0}),b.useCallback((f,p={})=>{if(Gt(l.current,DT),!l.current)return;if(typeof f=="number"){t.go(f);return}let _=eh(f,JSON.parse(a),s,p.relative==="path");n==null&&e!=="/"&&(_.pathname=_.pathname==="/"?e:ki([e,_.pathname])),(p.replace?t.replace:t.push)(_,p.state,p)},[e,t,a,s,n])}var DA=b.createContext(null);function OA(n){let e=b.useContext(Fr).outlet;return b.useMemo(()=>e&&b.createElement(DA.Provider,{value:n},e),[e,n])}function iV(){let{matches:n}=b.useContext(Fr),e=n[n.length-1];return e?e.params:{}}function Mu(n,{relative:e}={}){let{matches:t}=b.useContext(Fr),{pathname:r}=Vi(),s=JSON.stringify(Zd(t));return b.useMemo(()=>eh(n,JSON.parse(s),r,e==="path"),[n,s,r,e])}function LA(n,e,t,r,s){st(ol(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=b.useContext(Sr),{matches:l}=b.useContext(Fr),h=l[l.length-1],f=h?h.params:{},p=h?h.pathname:"/",_=h?h.pathnameBase:"/",E=h&&h.route;{let $=E&&E.path||"";xT(p,!E||$.endsWith("*")||$.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${$}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${$}"> to <Route path="${$==="/"?"*":`${$}/*`}">.`)}let T=Vi(),S;S=T;let C=S.pathname||"/",U=C;if(_!=="/"){let $=_.replace(/^\//,"").split("/");U="/"+C.replace(/^\//,"").split("/").slice($.length).join("/")}let L=zs(n,{pathname:U});return Gt(E||L!=null,`No routes matched location "${S.pathname}${S.search}${S.hash}" `),Gt(L==null||L[L.length-1].route.element!==void 0||L[L.length-1].route.Component!==void 0||L[L.length-1].route.lazy!==void 0,`Matched leaf route at location "${S.pathname}${S.search}${S.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),FA(L&&L.map($=>Object.assign({},$,{params:Object.assign({},f,$.params),pathname:ki([_,a.encodeLocation?a.encodeLocation($.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:$.pathname]),pathnameBase:$.pathnameBase==="/"?_:ki([_,a.encodeLocation?a.encodeLocation($.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:$.pathnameBase])})),l,t,r,s)}function xA(){let n=HA(),e=Su(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},l=null;return console.error("Error handled by React Router default ErrorBoundary:",n),l=b.createElement(b.Fragment,null,b.createElement("p",null," Hey developer "),b.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",b.createElement("code",{style:a},"ErrorBoundary")," or"," ",b.createElement("code",{style:a},"errorElement")," prop on your route.")),b.createElement(b.Fragment,null,b.createElement("h2",null,"Unexpected Application Error!"),b.createElement("h3",{style:{fontStyle:"italic"}},e),t?b.createElement("pre",{style:s},t):null,l)}var VA=b.createElement(xA,null),LT=class extends b.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.onError?this.props.onError(n,e):console.error("React Router caught the following error during render",n)}render(){let n=this.state.error;if(this.context&&typeof n=="object"&&n&&"digest"in n&&typeof n.digest=="string"){const t=NA(n.digest);t&&(n=t)}let e=n!==void 0?b.createElement(Fr.Provider,{value:this.props.routeContext},b.createElement(pm.Provider,{value:n,children:this.props.component})):this.props.children;return this.context?b.createElement(MA,{error:n},e):e}};LT.contextType=NT;var hp=new WeakMap;function MA({children:n,error:e}){let{basename:t}=b.useContext(Sr);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let r=CA(e.digest);if(r){let s=hp.get(e);if(s)throw s;let a=yT(r.location,t);if(gT&&!hp.get(e))if(a.isExternal||r.reloadDocument)window.location.href=a.absoluteURL||a.to;else{const l=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(a.to,{replace:r.replace}));throw hp.set(e,l),l}return b.createElement("meta",{httpEquiv:"refresh",content:`0;url=${a.absoluteURL||a.to}`})}}return n}function UA({routeContext:n,match:e,children:t}){let r=b.useContext(na);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),b.createElement(Fr.Provider,{value:n},t)}function FA(n,e=[],t=null,r=null,s=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let a=n,l=t==null?void 0:t.errors;if(l!=null){let _=a.findIndex(E=>E.route.id&&(l==null?void 0:l[E.route.id])!==void 0);st(_>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),a=a.slice(0,Math.min(a.length,_+1))}let h=!1,f=-1;if(t)for(let _=0;_<a.length;_++){let E=a[_];if((E.route.HydrateFallback||E.route.hydrateFallbackElement)&&(f=_),E.route.id){let{loaderData:T,errors:S}=t,C=E.route.loader&&!T.hasOwnProperty(E.route.id)&&(!S||S[E.route.id]===void 0);if(E.route.lazy||C){h=!0,f>=0?a=a.slice(0,f+1):a=[a[0]];break}}}let p=t&&r?(_,E)=>{var T,S;r(_,{location:t.location,params:((S=(T=t.matches)==null?void 0:T[0])==null?void 0:S.params)??{},unstable_pattern:xu(t.matches),errorInfo:E})}:void 0;return a.reduceRight((_,E,T)=>{let S,C=!1,U=null,L=null;t&&(S=l&&E.route.id?l[E.route.id]:void 0,U=E.route.errorElement||VA,h&&(f<0&&T===0?(xT("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),C=!0,L=null):f===T&&(C=!0,L=E.route.hydrateFallbackElement||null)));let z=e.concat(a.slice(0,T+1)),$=()=>{let Z;return S?Z=U:C?Z=L:E.route.Component?Z=b.createElement(E.route.Component,null):E.route.element?Z=E.route.element:Z=_,b.createElement(UA,{match:E,routeContext:{outlet:_,matches:z,isDataRoute:t!=null},children:Z})};return t&&(E.route.ErrorBoundary||E.route.errorElement||T===0)?b.createElement(LT,{location:t.location,revalidation:t.revalidation,component:U,error:S,children:$(),routeContext:{outlet:null,matches:z,isDataRoute:!0},onError:p}):$()},null)}function gm(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function BA(n){let e=b.useContext(na);return st(e,gm(n)),e}function jA(n){let e=b.useContext(Vu);return st(e,gm(n)),e}function zA(n){let e=b.useContext(Fr);return st(e,gm(n)),e}function ym(n){let e=zA(n),t=e.matches[e.matches.length-1];return st(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function GA(){return ym("useRouteId")}function HA(){var r;let n=b.useContext(pm),e=jA("useRouteError"),t=ym("useRouteError");return n!==void 0?n:(r=e.errors)==null?void 0:r[t]}function WA(){let{router:n}=BA("useNavigate"),e=ym("useNavigate"),t=b.useRef(!1);return OT(()=>{t.current=!0}),b.useCallback(async(s,a={})=>{Gt(t.current,DT),t.current&&(typeof s=="number"?await n.navigate(s):await n.navigate(s,{fromRouteId:e,...a}))},[n,e])}var uE={};function xT(n,e,t){!e&&!uE[n]&&(uE[n]=!0,Gt(!1,t))}var cE={};function dE(n,e){!n&&!cE[e]&&(cE[e]=!0,console.warn(e))}var qA="useOptimistic",hE=oR[qA],$A=()=>{};function KA(n){return hE?hE(n):[n,$A]}function XA(n){let e={hasErrorBoundary:n.hasErrorBoundary||n.ErrorBoundary!=null||n.errorElement!=null};return n.Component&&(n.element&&Gt(!1,"You should not include both `Component` and `element` on your route - `Component` will be used."),Object.assign(e,{element:b.createElement(n.Component),Component:void 0})),n.HydrateFallback&&(n.hydrateFallbackElement&&Gt(!1,"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - `HydrateFallback` will be used."),Object.assign(e,{hydrateFallbackElement:b.createElement(n.HydrateFallback),HydrateFallback:void 0})),n.ErrorBoundary&&(n.errorElement&&Gt(!1,"You should not include both `ErrorBoundary` and `errorElement` on your route - `ErrorBoundary` will be used."),Object.assign(e,{errorElement:b.createElement(n.ErrorBoundary),ErrorBoundary:void 0})),e}var YA=["HydrateFallback","hydrateFallbackElement"],QA=class{constructor(){this.status="pending",this.promise=new Promise((e,t)=>{this.resolve=r=>{this.status==="pending"&&(this.status="resolved",e(r))},this.reject=r=>{this.status==="pending"&&(this.status="rejected",t(r))}})}};function JA({router:n,flushSync:e,onError:t,unstable_useTransitions:r}){r=IA()||r;let[a,l]=b.useState(n.state),[h,f]=KA(a),[p,_]=b.useState(),[E,T]=b.useState({isTransitioning:!1}),[S,C]=b.useState(),[U,L]=b.useState(),[z,$]=b.useState(),Z=b.useRef(new Map),oe=b.useCallback((A,{deletedFetchers:N,newErrors:V,flushSync:M,viewTransitionOpts:G})=>{V&&t&&Object.values(V).forEach(We=>{var ft;return t(We,{location:A.location,params:((ft=A.matches[0])==null?void 0:ft.params)??{},unstable_pattern:xu(A.matches)})}),A.fetchers.forEach((We,ft)=>{We.data!==void 0&&Z.current.set(ft,We.data)}),N.forEach(We=>Z.current.delete(We)),dE(M===!1||e!=null,'You provided the `flushSync` option to a router update, but you are not using the `<RouterProvider>` from `react-router/dom` so `ReactDOM.flushSync()` is unavailable.  Please update your app to `import { RouterProvider } from "react-router/dom"` and ensure you have `react-dom` installed as a dependency to use the `flushSync` option.');let D=n.window!=null&&n.window.document!=null&&typeof n.window.document.startViewTransition=="function";if(dE(G==null||D,"You provided the `viewTransition` option to a router update, but you do not appear to be running in a DOM environment as `window.startViewTransition` is not available."),!G||!D){e&&M?e(()=>l(A)):r===!1?l(A):b.startTransition(()=>{r===!0&&f(We=>fE(We,A)),l(A)});return}if(e&&M){e(()=>{U&&(S==null||S.resolve(),U.skipTransition()),T({isTransitioning:!0,flushSync:!0,currentLocation:G.currentLocation,nextLocation:G.nextLocation})});let We=n.window.document.startViewTransition(()=>{e(()=>l(A))});We.finished.finally(()=>{e(()=>{C(void 0),L(void 0),_(void 0),T({isTransitioning:!1})})}),e(()=>L(We));return}U?(S==null||S.resolve(),U.skipTransition(),$({state:A,currentLocation:G.currentLocation,nextLocation:G.nextLocation})):(_(A),T({isTransitioning:!0,flushSync:!1,currentLocation:G.currentLocation,nextLocation:G.nextLocation}))},[n.window,e,U,S,r,f,t]);b.useLayoutEffect(()=>n.subscribe(oe),[n,oe]),b.useEffect(()=>{E.isTransitioning&&!E.flushSync&&C(new QA)},[E]),b.useEffect(()=>{if(S&&p&&n.window){let A=p,N=S.promise,V=n.window.document.startViewTransition(async()=>{r===!1?l(A):b.startTransition(()=>{r===!0&&f(M=>fE(M,A)),l(A)}),await N});V.finished.finally(()=>{C(void 0),L(void 0),_(void 0),T({isTransitioning:!1})}),L(V)}},[p,S,n.window,r,f]),b.useEffect(()=>{S&&p&&h.location.key===p.location.key&&S.resolve()},[S,U,h.location,p]),b.useEffect(()=>{!E.isTransitioning&&z&&(_(z.state),T({isTransitioning:!0,flushSync:!1,currentLocation:z.currentLocation,nextLocation:z.nextLocation}),$(void 0))},[E.isTransitioning,z]);let we=b.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:A=>n.navigate(A),push:(A,N,V)=>n.navigate(A,{state:N,preventScrollReset:V==null?void 0:V.preventScrollReset}),replace:(A,N,V)=>n.navigate(A,{replace:!0,state:N,preventScrollReset:V==null?void 0:V.preventScrollReset})}),[n]),me=n.basename||"/",I=b.useMemo(()=>({router:n,navigator:we,static:!1,basename:me,onError:t}),[n,we,me,t]);return b.createElement(b.Fragment,null,b.createElement(na.Provider,{value:I},b.createElement(Vu.Provider,{value:h},b.createElement(kT.Provider,{value:Z.current},b.createElement(fm.Provider,{value:E},b.createElement(tP,{basename:me,location:h.location,navigationType:h.historyAction,navigator:we,unstable_useTransitions:r},b.createElement(ZA,{routes:n.routes,future:n.future,state:h,onError:t})))))),null)}function fE(n,e){return{...n,navigation:e.navigation.state!=="idle"?e.navigation:n.navigation,revalidation:e.revalidation!=="idle"?e.revalidation:n.revalidation,actionData:e.navigation.state!=="submitting"?e.actionData:n.actionData,fetchers:e.fetchers}}var ZA=b.memo(eP);function eP({routes:n,future:e,state:t,onError:r}){return LA(n,void 0,t,r,e)}function _r({to:n,replace:e,state:t,relative:r}){st(ol(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=b.useContext(Sr);Gt(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=b.useContext(Fr),{pathname:l}=Vi(),h=mm(),f=eh(n,Zd(a),l,r==="path"),p=JSON.stringify(f);return b.useEffect(()=>{h(JSON.parse(p),{replace:e,state:t,relative:r})},[h,p,r,e,t]),null}function oV(n){return OA(n.context)}function tP({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:s,static:a=!1,unstable_useTransitions:l}){st(!ol(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let h=n.replace(/^\/*/,"/"),f=b.useMemo(()=>({basename:h,navigator:s,static:a,unstable_useTransitions:l,future:{}}),[h,s,a,l]);typeof t=="string"&&(t=uo(t));let{pathname:p="/",search:_="",hash:E="",state:T=null,key:S="default"}=t,C=b.useMemo(()=>{let U=Mr(p,h);return U==null?null:{location:{pathname:U,search:_,hash:E,state:T,key:S},navigationType:r}},[h,p,_,E,T,S,r]);return Gt(C!=null,`<Router basename="${h}"> is not able to match the URL "${p}${_}${E}" because it does not start with the basename, so the <Router> won't render anything.`),C==null?null:b.createElement(Sr.Provider,{value:f},b.createElement(th.Provider,{children:e,value:C}))}var gd="get",yd="application/x-www-form-urlencoded";function nh(n){return typeof HTMLElement<"u"&&n instanceof HTMLElement}function nP(n){return nh(n)&&n.tagName.toLowerCase()==="button"}function rP(n){return nh(n)&&n.tagName.toLowerCase()==="form"}function iP(n){return nh(n)&&n.tagName.toLowerCase()==="input"}function sP(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function oP(n,e){return n.button===0&&(!e||e==="_self")&&!sP(n)}function Lp(n=""){return new URLSearchParams(typeof n=="string"||Array.isArray(n)||n instanceof URLSearchParams?n:Object.keys(n).reduce((e,t)=>{let r=n[t];return e.concat(Array.isArray(r)?r.map(s=>[t,s]):[[t,r]])},[]))}function aP(n,e){let t=Lp(n);return e&&e.forEach((r,s)=>{t.has(s)||e.getAll(s).forEach(a=>{t.append(s,a)})}),t}var sd=null;function lP(){if(sd===null)try{new FormData(document.createElement("form"),0),sd=!1}catch{sd=!0}return sd}var uP=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function fp(n){return n!=null&&!uP.has(n)?(Gt(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${yd}"`),null):n}function cP(n,e){let t,r,s,a,l;if(rP(n)){let h=n.getAttribute("action");r=h?Mr(h,e):null,t=n.getAttribute("method")||gd,s=fp(n.getAttribute("enctype"))||yd,a=new FormData(n)}else if(nP(n)||iP(n)&&(n.type==="submit"||n.type==="image")){let h=n.form;if(h==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let f=n.getAttribute("formaction")||h.getAttribute("action");if(r=f?Mr(f,e):null,t=n.getAttribute("formmethod")||h.getAttribute("method")||gd,s=fp(n.getAttribute("formenctype"))||fp(h.getAttribute("enctype"))||yd,a=new FormData(h,n),!lP()){let{name:p,type:_,value:E}=n;if(_==="image"){let T=p?`${p}.`:"";a.append(`${T}x`,"0"),a.append(`${T}y`,"0")}else p&&a.append(p,E)}}else{if(nh(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=gd,r=null,s=yd,l=n}return a&&s==="text/plain"&&(l=a,a=void 0),{action:r,method:t.toLowerCase(),encType:s,formData:a,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function _m(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function dP(n,e,t){let r=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return r.pathname==="/"?r.pathname=`_root.${t}`:e&&Mr(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${t}`,r}async function hP(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function fP(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function pP(n,e,t){let r=await Promise.all(n.map(async s=>{let a=e.routes[s.route.id];if(a){let l=await hP(a,t);return l.links?l.links():[]}return[]}));return _P(r.flat(1).filter(fP).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function pE(n,e,t,r,s,a){let l=(f,p)=>t[p]?f.route.id!==t[p].route.id:!0,h=(f,p)=>{var _;return t[p].pathname!==f.pathname||((_=t[p].route.path)==null?void 0:_.endsWith("*"))&&t[p].params["*"]!==f.params["*"]};return a==="assets"?e.filter((f,p)=>l(f,p)||h(f,p)):a==="data"?e.filter((f,p)=>{var E;let _=r.routes[f.route.id];if(!_||!_.hasLoader)return!1;if(l(f,p)||h(f,p))return!0;if(f.route.shouldRevalidate){let T=f.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((E=t[0])==null?void 0:E.params)||{},nextUrl:new URL(n,window.origin),nextParams:f.params,defaultShouldRevalidate:!0});if(typeof T=="boolean")return T}return!0}):[]}function mP(n,e,{includeHydrateFallback:t}={}){return gP(n.map(r=>{let s=e.routes[r.route.id];if(!s)return[];let a=[s.module];return s.clientActionModule&&(a=a.concat(s.clientActionModule)),s.clientLoaderModule&&(a=a.concat(s.clientLoaderModule)),t&&s.hydrateFallbackModule&&(a=a.concat(s.hydrateFallbackModule)),s.imports&&(a=a.concat(s.imports)),a}).flat(1))}function gP(n){return[...new Set(n)]}function yP(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function _P(n,e){let t=new Set;return new Set(e),n.reduce((r,s)=>{let a=JSON.stringify(yP(s));return t.has(a)||(t.add(a),r.push({key:a,link:s})),r},[])}function VT(){let n=b.useContext(na);return _m(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function EP(){let n=b.useContext(Vu);return _m(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var Em=b.createContext(void 0);Em.displayName="FrameworkContext";function MT(){let n=b.useContext(Em);return _m(n,"You must render this element inside a <HydratedRouter> element"),n}function vP(n,e){let t=b.useContext(Em),[r,s]=b.useState(!1),[a,l]=b.useState(!1),{onFocus:h,onBlur:f,onMouseEnter:p,onMouseLeave:_,onTouchStart:E}=e,T=b.useRef(null);b.useEffect(()=>{if(n==="render"&&l(!0),n==="viewport"){let U=z=>{z.forEach($=>{l($.isIntersecting)})},L=new IntersectionObserver(U,{threshold:.5});return T.current&&L.observe(T.current),()=>{L.disconnect()}}},[n]),b.useEffect(()=>{if(r){let U=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(U)}}},[r]);let S=()=>{s(!0)},C=()=>{s(!1),l(!1)};return t?n!=="intent"?[a,T,{}]:[a,T,{onFocus:eu(h,S),onBlur:eu(f,C),onMouseEnter:eu(p,S),onMouseLeave:eu(_,C),onTouchStart:eu(E,S)}]:[!1,T,{}]}function eu(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function TP({page:n,...e}){let{router:t}=VT(),r=b.useMemo(()=>zs(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?b.createElement(SP,{page:n,matches:r,...e}):null}function wP(n){let{manifest:e,routeModules:t}=MT(),[r,s]=b.useState([]);return b.useEffect(()=>{let a=!1;return pP(n,e,t).then(l=>{a||s(l)}),()=>{a=!0}},[n,e,t]),r}function SP({page:n,matches:e,...t}){let r=Vi(),{manifest:s,routeModules:a}=MT(),{basename:l}=VT(),{loaderData:h,matches:f}=EP(),p=b.useMemo(()=>pE(n,e,f,s,r,"data"),[n,e,f,s,r]),_=b.useMemo(()=>pE(n,e,f,s,r,"assets"),[n,e,f,s,r]),E=b.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let C=new Set,U=!1;if(e.forEach(z=>{var Z;let $=s.routes[z.route.id];!$||!$.hasLoader||(!p.some(oe=>oe.route.id===z.route.id)&&z.route.id in h&&((Z=a[z.route.id])!=null&&Z.shouldRevalidate)||$.hasClientLoader?U=!0:C.add(z.route.id))}),C.size===0)return[];let L=dP(n,l,"data");return U&&C.size>0&&L.searchParams.set("_routes",e.filter(z=>C.has(z.route.id)).map(z=>z.route.id).join(",")),[L.pathname+L.search]},[l,h,r,s,p,e,n,a]),T=b.useMemo(()=>mP(_,s),[_,s]),S=wP(_);return b.createElement(b.Fragment,null,E.map(C=>b.createElement("link",{key:C,rel:"prefetch",as:"fetch",href:C,...t})),T.map(C=>b.createElement("link",{key:C,rel:"modulepreload",href:C,...t})),S.map(({key:C,link:U})=>b.createElement("link",{key:C,nonce:t.nonce,...U})))}function IP(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var RP=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{RP&&(window.__reactRouterVersion="7.11.0")}catch{}function AP(n,e){return ZR({basename:e==null?void 0:e.basename,getContext:e==null?void 0:e.getContext,future:e==null?void 0:e.future,history:mR({window:e==null?void 0:e.window}),hydrationData:PP(),routes:n,mapRouteProperties:XA,hydrationRouteProperties:YA,dataStrategy:e==null?void 0:e.dataStrategy,patchRoutesOnNavigation:e==null?void 0:e.patchRoutesOnNavigation,window:e==null?void 0:e.window,unstable_instrumentations:e==null?void 0:e.unstable_instrumentations}).initialize()}function PP(){let n=window==null?void 0:window.__staticRouterHydrationData;return n&&n.errors&&(n={...n,errors:CP(n.errors)}),n}function CP(n){if(!n)return null;let e=Object.entries(n),t={};for(let[r,s]of e)if(s&&s.__type==="RouteErrorResponse")t[r]=new Lu(s.status,s.statusText,s.data,s.internal===!0);else if(s&&s.__type==="Error"){if(s.__subType){let a=window[s.__subType];if(typeof a=="function")try{let l=new a(s.message);l.stack="",t[r]=l}catch{}}if(t[r]==null){let a=new Error(s.message);a.stack="",t[r]=a}}else t[r]=s;return t}var UT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,FT=b.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:s,reloadDocument:a,replace:l,state:h,target:f,to:p,preventScrollReset:_,viewTransition:E,unstable_defaultShouldRevalidate:T,...S},C){let{basename:U,unstable_useTransitions:L}=b.useContext(Sr),z=typeof p=="string"&&UT.test(p),$=yT(p,U);p=$.to;let Z=kA(p,{relative:s}),[oe,we,me]=vP(r,S),I=DP(p,{replace:l,state:h,target:f,preventScrollReset:_,relative:s,viewTransition:E,unstable_defaultShouldRevalidate:T,unstable_useTransitions:L});function A(V){e&&e(V),V.defaultPrevented||I(V)}let N=b.createElement("a",{...S,...me,href:$.absoluteURL||Z,onClick:$.isExternal||a?e:A,ref:IP(C,we),target:f,"data-discover":!z&&t==="render"?"true":void 0});return oe&&!z?b.createElement(b.Fragment,null,N,b.createElement(TP,{page:Z})):N});FT.displayName="Link";var NP=b.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:s=!1,style:a,to:l,viewTransition:h,children:f,...p},_){let E=Mu(l,{relative:p.relative}),T=Vi(),S=b.useContext(Vu),{navigator:C,basename:U}=b.useContext(Sr),L=S!=null&&MP(E)&&h===!0,z=C.encodeLocation?C.encodeLocation(E).pathname:E.pathname,$=T.pathname,Z=S&&S.navigation&&S.navigation.location?S.navigation.location.pathname:null;t||($=$.toLowerCase(),Z=Z?Z.toLowerCase():null,z=z.toLowerCase()),Z&&U&&(Z=Mr(Z,U)||Z);const oe=z!=="/"&&z.endsWith("/")?z.length-1:z.length;let we=$===z||!s&&$.startsWith(z)&&$.charAt(oe)==="/",me=Z!=null&&(Z===z||!s&&Z.startsWith(z)&&Z.charAt(z.length)==="/"),I={isActive:we,isPending:me,isTransitioning:L},A=we?e:void 0,N;typeof r=="function"?N=r(I):N=[r,we?"active":null,me?"pending":null,L?"transitioning":null].filter(Boolean).join(" ");let V=typeof a=="function"?a(I):a;return b.createElement(FT,{...p,"aria-current":A,className:N,ref:_,style:V,to:l,viewTransition:h},typeof f=="function"?f(I):f)});NP.displayName="NavLink";var kP=b.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:s,state:a,method:l=gd,action:h,onSubmit:f,relative:p,preventScrollReset:_,viewTransition:E,unstable_defaultShouldRevalidate:T,...S},C)=>{let{unstable_useTransitions:U}=b.useContext(Sr),L=xP(),z=VP(h,{relative:p}),$=l.toLowerCase()==="get"?"get":"post",Z=typeof h=="string"&&UT.test(h),oe=we=>{if(f&&f(we),we.defaultPrevented)return;we.preventDefault();let me=we.nativeEvent.submitter,I=(me==null?void 0:me.getAttribute("formmethod"))||l,A=()=>L(me||we.currentTarget,{fetcherKey:e,method:I,navigate:t,replace:s,state:a,relative:p,preventScrollReset:_,viewTransition:E,unstable_defaultShouldRevalidate:T});U&&t!==!1?b.startTransition(()=>A()):A()};return b.createElement("form",{ref:C,method:$,action:z,onSubmit:r?f:oe,...S,"data-discover":!Z&&n==="render"?"true":void 0})});kP.displayName="Form";function bP(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function BT(n){let e=b.useContext(na);return st(e,bP(n)),e}function DP(n,{target:e,replace:t,state:r,preventScrollReset:s,relative:a,viewTransition:l,unstable_defaultShouldRevalidate:h,unstable_useTransitions:f}={}){let p=mm(),_=Vi(),E=Mu(n,{relative:a});return b.useCallback(T=>{if(oP(T,e)){T.preventDefault();let S=t!==void 0?t:Li(_)===Li(E),C=()=>p(n,{replace:S,state:r,preventScrollReset:s,relative:a,viewTransition:l,unstable_defaultShouldRevalidate:h});f?b.startTransition(()=>C()):C()}},[_,p,E,t,r,e,n,s,a,l,h,f])}function aV(n){Gt(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=b.useRef(Lp(n)),t=b.useRef(!1),r=Vi(),s=b.useMemo(()=>aP(r.search,t.current?null:e.current),[r.search]),a=mm(),l=b.useCallback((h,f)=>{const p=Lp(typeof h=="function"?h(new URLSearchParams(s)):h);t.current=!0,a("?"+p,f)},[a,s]);return[s,l]}var OP=0,LP=()=>`__${String(++OP)}__`;function xP(){let{router:n}=BT("useSubmit"),{basename:e}=b.useContext(Sr),t=GA(),r=n.fetch,s=n.navigate;return b.useCallback(async(a,l={})=>{let{action:h,method:f,encType:p,formData:_,body:E}=cP(a,e);if(l.navigate===!1){let T=l.fetcherKey||LP();await r(T,t,l.action||h,{unstable_defaultShouldRevalidate:l.unstable_defaultShouldRevalidate,preventScrollReset:l.preventScrollReset,formData:_,body:E,formMethod:l.method||f,formEncType:l.encType||p,flushSync:l.flushSync})}else await s(l.action||h,{unstable_defaultShouldRevalidate:l.unstable_defaultShouldRevalidate,preventScrollReset:l.preventScrollReset,formData:_,body:E,formMethod:l.method||f,formEncType:l.encType||p,replace:l.replace,state:l.state,fromRouteId:t,flushSync:l.flushSync,viewTransition:l.viewTransition})},[r,s,e,t])}function VP(n,{relative:e}={}){let{basename:t}=b.useContext(Sr),r=b.useContext(Fr);st(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),a={...Mu(n||".",{relative:e})},l=Vi();if(n==null){a.search=l.search;let h=new URLSearchParams(a.search),f=h.getAll("index");if(f.some(_=>_==="")){h.delete("index"),f.filter(E=>E).forEach(E=>h.append("index",E));let _=h.toString();a.search=_?`?${_}`:""}}return(!n||n===".")&&s.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(a.pathname=a.pathname==="/"?t:ki([t,a.pathname])),Li(a)}function MP(n,{relative:e}={}){let t=b.useContext(fm);st(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=BT("useViewTransitionState"),s=Mu(n,{relative:e});if(!t.isTransitioning)return!1;let a=Mr(t.currentLocation.pathname,r)||t.currentLocation.pathname,l=Mr(t.nextLocation.pathname,r)||t.nextLocation.pathname;return Pd(s.pathname,l)!=null||Pd(s.pathname,a)!=null}var UP=uT();function FP(n){return b.createElement(JA,{flushSync:UP.flushSync,...n})}const BP=()=>{};var mE={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jT=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let s=n.charCodeAt(r);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},jP=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const s=n[t++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const a=n[t++];e[r++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){const a=n[t++],l=n[t++],h=n[t++],f=((s&7)<<18|(a&63)<<12|(l&63)<<6|h&63)-65536;e[r++]=String.fromCharCode(55296+(f>>10)),e[r++]=String.fromCharCode(56320+(f&1023))}else{const a=n[t++],l=n[t++];e[r++]=String.fromCharCode((s&15)<<12|(a&63)<<6|l&63)}}return e.join("")},zT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<n.length;s+=3){const a=n[s],l=s+1<n.length,h=l?n[s+1]:0,f=s+2<n.length,p=f?n[s+2]:0,_=a>>2,E=(a&3)<<4|h>>4;let T=(h&15)<<2|p>>6,S=p&63;f||(S=64,l||(T=64)),r.push(t[_],t[E],t[T],t[S])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(jT(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):jP(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<n.length;){const a=t[n.charAt(s++)],h=s<n.length?t[n.charAt(s)]:0;++s;const p=s<n.length?t[n.charAt(s)]:64;++s;const E=s<n.length?t[n.charAt(s)]:64;if(++s,a==null||h==null||p==null||E==null)throw new zP;const T=a<<2|h>>4;if(r.push(T),p!==64){const S=h<<4&240|p>>2;if(r.push(S),E!==64){const C=p<<6&192|E;r.push(C)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class zP extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const GP=function(n){const e=jT(n);return zT.encodeByteArray(e,!0)},Cd=function(n){return GP(n).replace(/\./g,"")},GT=function(n){try{return zT.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HP(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WP=()=>HP().__FIREBASE_DEFAULTS__,qP=()=>{if(typeof process>"u"||typeof mE>"u")return;const n=mE.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},$P=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&GT(n[1]);return e&&JSON.parse(e)},rh=()=>{try{return BP()||WP()||qP()||$P()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},HT=n=>{var e,t;return(t=(e=rh())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},vm=n=>{const e=HT(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},WT=()=>{var n;return(n=rh())==null?void 0:n.config},qT=n=>{var e;return(e=rh())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KP{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ys(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function ih(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $T(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",s=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Cd(JSON.stringify(t)),Cd(JSON.stringify(l)),""].join(".")}const hu={};function XP(){const n={prod:[],emulator:[]};for(const e of Object.keys(hu))hu[e]?n.emulator.push(e):n.prod.push(e);return n}function YP(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let gE=!1;function sh(n,e){if(typeof window>"u"||typeof document>"u"||!ys(window.location.host)||hu[n]===e||hu[n]||gE)return;hu[n]=e;function t(T){return`__firebase__banner__${T}`}const r="__firebase__banner",a=XP().prod.length>0;function l(){const T=document.getElementById(r);T&&T.remove()}function h(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function f(T,S){T.setAttribute("width","24"),T.setAttribute("id",S),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function p(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{gE=!0,l()},T}function _(T,S){T.setAttribute("id",S),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function E(){const T=YP(r),S=t("text"),C=document.getElementById(S)||document.createElement("span"),U=t("learnmore"),L=document.getElementById(U)||document.createElement("a"),z=t("preprendIcon"),$=document.getElementById(z)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const Z=T.element;h(Z),_(L,U);const oe=p();f($,z),Z.append($,C,L,oe),document.body.appendChild(Z)}a?(C.innerText="Preview backend disconnected.",$.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):($.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,C.innerText="Preview backend running in this workspace."),C.setAttribute("id",S)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function QP(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Bn())}function JP(){var e;const n=(e=rh())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function ZP(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function eC(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function tC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function nC(){const n=Bn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function rC(){return!JP()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function iC(){try{return typeof indexedDB=="object"}catch{return!1}}function sC(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var a;e(((a=s.error)==null?void 0:a.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oC="FirebaseError";class Mi extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=oC,Object.setPrototypeOf(this,Mi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Uu.prototype.create)}}class Uu{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},s=`${this.service}/${e}`,a=this.errors[e],l=a?aC(a,r):"Error",h=`${this.serviceName}: ${l} (${s}).`;return new Mi(s,h,r)}}function aC(n,e){return n.replace(lC,(t,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const lC=/\{\$([^}]+)}/g;function uC(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Ko(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const s of t){if(!r.includes(s))return!1;const a=n[s],l=e[s];if(yE(a)&&yE(l)){if(!Ko(a,l))return!1}else if(a!==l)return!1}for(const s of r)if(!t.includes(s))return!1;return!0}function yE(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fu(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function su(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,a]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(a)}}),e}function ou(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function cC(n,e){const t=new dC(n,e);return t.subscribe.bind(t)}class dC{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let s;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");hC(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:r},s.next===void 0&&(s.next=pp),s.error===void 0&&(s.error=pp),s.complete===void 0&&(s.complete=pp);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function hC(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function pp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yt(n){return n&&n._delegate?n._delegate:n}class hs{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fC{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new KP;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(mC(e))try{this.getOrInitializeService({instanceIdentifier:Fo})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:s});r.resolve(a)}catch{}}}}clearInstance(e=Fo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Fo){return this.instances.has(e)}getOptions(e=Fo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[a,l]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(a);r===h&&l.resolve(s)}return s}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const a=this.instances.get(r);return a&&e(a,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const s of r)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:pC(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Fo){return this.component?this.component.multipleInstances?e:Fo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function pC(n){return n===Fo?void 0:n}function mC(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gC{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new fC(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ut;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(ut||(ut={}));const yC={debug:ut.DEBUG,verbose:ut.VERBOSE,info:ut.INFO,warn:ut.WARN,error:ut.ERROR,silent:ut.SILENT},_C=ut.INFO,EC={[ut.DEBUG]:"log",[ut.VERBOSE]:"log",[ut.INFO]:"info",[ut.WARN]:"warn",[ut.ERROR]:"error"},vC=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),s=EC[e];if(s)console[s](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Tm{constructor(e){this.name=e,this._logLevel=_C,this._logHandler=vC,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ut))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?yC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ut.DEBUG,...e),this._logHandler(this,ut.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ut.VERBOSE,...e),this._logHandler(this,ut.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ut.INFO,...e),this._logHandler(this,ut.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ut.WARN,...e),this._logHandler(this,ut.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ut.ERROR,...e),this._logHandler(this,ut.ERROR,...e)}}const TC=(n,e)=>e.some(t=>n instanceof t);let _E,EE;function wC(){return _E||(_E=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function SC(){return EE||(EE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const KT=new WeakMap,xp=new WeakMap,XT=new WeakMap,mp=new WeakMap,wm=new WeakMap;function IC(n){const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("success",a),n.removeEventListener("error",l)},a=()=>{t(Qs(n.result)),s()},l=()=>{r(n.error),s()};n.addEventListener("success",a),n.addEventListener("error",l)});return e.then(t=>{t instanceof IDBCursor&&KT.set(t,n)}).catch(()=>{}),wm.set(e,n),e}function RC(n){if(xp.has(n))return;const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",l),n.removeEventListener("abort",l)},a=()=>{t(),s()},l=()=>{r(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",a),n.addEventListener("error",l),n.addEventListener("abort",l)});xp.set(n,e)}let Vp={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return xp.get(n);if(e==="objectStoreNames")return n.objectStoreNames||XT.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Qs(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function AC(n){Vp=n(Vp)}function PC(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(gp(this),e,...t);return XT.set(r,e.sort?e.sort():[e]),Qs(r)}:SC().includes(n)?function(...e){return n.apply(gp(this),e),Qs(KT.get(this))}:function(...e){return Qs(n.apply(gp(this),e))}}function CC(n){return typeof n=="function"?PC(n):(n instanceof IDBTransaction&&RC(n),TC(n,wC())?new Proxy(n,Vp):n)}function Qs(n){if(n instanceof IDBRequest)return IC(n);if(mp.has(n))return mp.get(n);const e=CC(n);return e!==n&&(mp.set(n,e),wm.set(e,n)),e}const gp=n=>wm.get(n);function NC(n,e,{blocked:t,upgrade:r,blocking:s,terminated:a}={}){const l=indexedDB.open(n,e),h=Qs(l);return r&&l.addEventListener("upgradeneeded",f=>{r(Qs(l.result),f.oldVersion,f.newVersion,Qs(l.transaction),f)}),t&&l.addEventListener("blocked",f=>t(f.oldVersion,f.newVersion,f)),h.then(f=>{a&&f.addEventListener("close",()=>a()),s&&f.addEventListener("versionchange",p=>s(p.oldVersion,p.newVersion,p))}).catch(()=>{}),h}const kC=["get","getKey","getAll","getAllKeys","count"],bC=["put","add","delete","clear"],yp=new Map;function vE(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(yp.get(e))return yp.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,s=bC.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(s||kC.includes(t)))return;const a=async function(l,...h){const f=this.transaction(l,s?"readwrite":"readonly");let p=f.store;return r&&(p=p.index(h.shift())),(await Promise.all([p[t](...h),s&&f.done]))[0]};return yp.set(e,a),a}AC(n=>({...n,get:(e,t,r)=>vE(e,t)||n.get(e,t,r),has:(e,t)=>!!vE(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DC{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(OC(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function OC(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Mp="@firebase/app",TE="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fs=new Tm("@firebase/app"),LC="@firebase/app-compat",xC="@firebase/analytics-compat",VC="@firebase/analytics",MC="@firebase/app-check-compat",UC="@firebase/app-check",FC="@firebase/auth",BC="@firebase/auth-compat",jC="@firebase/database",zC="@firebase/data-connect",GC="@firebase/database-compat",HC="@firebase/functions",WC="@firebase/functions-compat",qC="@firebase/installations",$C="@firebase/installations-compat",KC="@firebase/messaging",XC="@firebase/messaging-compat",YC="@firebase/performance",QC="@firebase/performance-compat",JC="@firebase/remote-config",ZC="@firebase/remote-config-compat",e1="@firebase/storage",t1="@firebase/storage-compat",n1="@firebase/firestore",r1="@firebase/ai",i1="@firebase/firestore-compat",s1="firebase",o1="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Up="[DEFAULT]",a1={[Mp]:"fire-core",[LC]:"fire-core-compat",[VC]:"fire-analytics",[xC]:"fire-analytics-compat",[UC]:"fire-app-check",[MC]:"fire-app-check-compat",[FC]:"fire-auth",[BC]:"fire-auth-compat",[jC]:"fire-rtdb",[zC]:"fire-data-connect",[GC]:"fire-rtdb-compat",[HC]:"fire-fn",[WC]:"fire-fn-compat",[qC]:"fire-iid",[$C]:"fire-iid-compat",[KC]:"fire-fcm",[XC]:"fire-fcm-compat",[YC]:"fire-perf",[QC]:"fire-perf-compat",[JC]:"fire-rc",[ZC]:"fire-rc-compat",[e1]:"fire-gcs",[t1]:"fire-gcs-compat",[n1]:"fire-fst",[i1]:"fire-fst-compat",[r1]:"fire-vertex","fire-js":"fire-js",[s1]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xo=new Map,Fp=new Map,Bp=new Map;function wE(n,e){try{n.container.addComponent(e)}catch(t){fs.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function to(n){const e=n.name;if(Bp.has(e))return fs.debug(`There were multiple attempts to register component ${e}.`),!1;Bp.set(e,n);for(const t of Xo.values())wE(t,n);for(const t of Fp.values())wE(t,n);return!0}function Bu(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Pn(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l1={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Js=new Uu("app","Firebase",l1);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u1{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new hs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Js.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ra=o1;function YT(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r={name:Up,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw Js.create("bad-app-name",{appName:String(s)});if(t||(t=WT()),!t)throw Js.create("no-options");const a=Xo.get(s);if(a){if(Ko(t,a.options)&&Ko(r,a.config))return a;throw Js.create("duplicate-app",{appName:s})}const l=new gC(s);for(const f of Bp.values())l.addComponent(f);const h=new u1(t,r,l);return Xo.set(s,h),h}function oh(n=Up){const e=Xo.get(n);if(!e&&n===Up&&WT())return YT();if(!e)throw Js.create("no-app",{appName:n});return e}function lV(){return Array.from(Xo.values())}async function uV(n){let e=!1;const t=n.name;Xo.has(t)?(e=!0,Xo.delete(t)):Fp.has(t)&&n.decRefCount()<=0&&(Fp.delete(t),e=!0),e&&(await Promise.all(n.container.getProviders().map(r=>r.delete())),n.isDeleted=!0)}function Vr(n,e,t){let r=a1[n]??n;t&&(r+=`-${t}`);const s=r.match(/\s|\//),a=e.match(/\s|\//);if(s||a){const l=[`Unable to register library "${r}" with version "${e}":`];s&&l.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&a&&l.push("and"),a&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),fs.warn(l.join(" "));return}to(new hs(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c1="firebase-heartbeat-database",d1=1,Iu="firebase-heartbeat-store";let _p=null;function QT(){return _p||(_p=NC(c1,d1,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Iu)}catch(t){console.warn(t)}}}}).catch(n=>{throw Js.create("idb-open",{originalErrorMessage:n.message})})),_p}async function h1(n){try{const t=(await QT()).transaction(Iu),r=await t.objectStore(Iu).get(JT(n));return await t.done,r}catch(e){if(e instanceof Mi)fs.warn(e.message);else{const t=Js.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});fs.warn(t.message)}}}async function SE(n,e){try{const r=(await QT()).transaction(Iu,"readwrite");await r.objectStore(Iu).put(e,JT(n)),await r.done}catch(t){if(t instanceof Mi)fs.warn(t.message);else{const r=Js.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});fs.warn(r.message)}}}function JT(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f1=1024,p1=30;class m1{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new y1(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=IE();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(l=>l.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:s}),this._heartbeatsCache.heartbeats.length>p1){const l=_1(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){fs.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=IE(),{heartbeatsToSend:r,unsentEntries:s}=g1(this._heartbeatsCache.heartbeats),a=Cd(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return fs.warn(t),""}}}function IE(){return new Date().toISOString().substring(0,10)}function g1(n,e=f1){const t=[];let r=n.slice();for(const s of n){const a=t.find(l=>l.agent===s.agent);if(a){if(a.dates.push(s.date),RE(t)>e){a.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),RE(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class y1{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return iC()?sC().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await h1(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return SE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return SE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function RE(n){return Cd(JSON.stringify({version:2,heartbeats:n})).length}function _1(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E1(n){to(new hs("platform-logger",e=>new DC(e),"PRIVATE")),to(new hs("heartbeat",e=>new m1(e),"PRIVATE")),Vr(Mp,TE,n),Vr(Mp,TE,"esm2020"),Vr("fire-js","")}E1("");var v1="firebase",T1="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Vr(v1,T1,"app");function ZT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const w1=ZT,ew=new Uu("auth","Firebase",ZT());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nd=new Tm("@firebase/auth");function S1(n,...e){Nd.logLevel<=ut.WARN&&Nd.warn(`Auth (${ra}): ${n}`,...e)}function _d(n,...e){Nd.logLevel<=ut.ERROR&&Nd.error(`Auth (${ra}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wr(n,...e){throw Im(n,...e)}function ni(n,...e){return Im(n,...e)}function Sm(n,e,t){const r={...w1(),[e]:t};return new Uu("auth","Firebase",r).create(e,{appName:n.name})}function ri(n){return Sm(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function I1(n,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&wr(n,"argument-error"),Sm(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Im(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return ew.create(n,...e)}function Le(n,e,...t){if(!n)throw Im(e,...t)}function ls(n){const e="INTERNAL ASSERTION FAILED: "+n;throw _d(e),new Error(e)}function ps(n,e){n||ls(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kd(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function R1(){return AE()==="http:"||AE()==="https:"}function AE(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A1(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(R1()||eC()||"connection"in navigator)?navigator.onLine:!0}function P1(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ju{constructor(e,t){this.shortDelay=e,this.longDelay=t,ps(t>e,"Short delay should be less than long delay!"),this.isMobile=QP()||tC()}get(){return A1()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rm(n,e){ps(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tw{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ls("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ls("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ls("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C1={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N1=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],k1=new ju(3e4,6e4);function ai(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function Br(n,e,t,r,s={}){return nw(n,s,async()=>{let a={},l={};r&&(e==="GET"?l=r:a={body:JSON.stringify(r)});const h=Fu({key:n.config.apiKey,...l}).slice(1),f=await n._getAdditionalHeaders();f["Content-Type"]="application/json",n.languageCode&&(f["X-Firebase-Locale"]=n.languageCode);const p={method:e,headers:f,...a};return ZP()||(p.referrerPolicy="no-referrer"),n.emulatorConfig&&ys(n.emulatorConfig.host)&&(p.credentials="include"),tw.fetch()(await rw(n,n.config.apiHost,t,h),p)})}async function nw(n,e,t){n._canInitEmulator=!1;const r={...C1,...e};try{const s=new D1(n),a=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const l=await a.json();if("needConfirmation"in l)throw od(n,"account-exists-with-different-credential",l);if(a.ok&&!("errorMessage"in l))return l;{const h=a.ok?l.errorMessage:l.error.message,[f,p]=h.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw od(n,"credential-already-in-use",l);if(f==="EMAIL_EXISTS")throw od(n,"email-already-in-use",l);if(f==="USER_DISABLED")throw od(n,"user-disabled",l);const _=r[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw Sm(n,_,p);wr(n,_)}}catch(s){if(s instanceof Mi)throw s;wr(n,"network-request-failed",{message:String(s)})}}async function al(n,e,t,r,s={}){const a=await Br(n,e,t,r,s);return"mfaPendingCredential"in a&&wr(n,"multi-factor-auth-required",{_serverResponse:a}),a}async function rw(n,e,t,r){const s=`${e}${t}?${r}`,a=n,l=a.config.emulator?Rm(n.config,s):`${n.config.apiScheme}://${s}`;return N1.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(l).toString():l}function b1(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class D1{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(ni(this.auth,"network-request-failed")),k1.get())})}}function od(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const s=ni(n,e,r);return s.customData._tokenResponse=t,s}function PE(n){return n!==void 0&&n.enterprise!==void 0}class O1{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return b1(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function L1(n,e){return Br(n,"GET","/v2/recaptchaConfig",ai(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function x1(n,e){return Br(n,"POST","/v1/accounts:delete",e)}async function bd(n,e){return Br(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fu(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function V1(n,e=!1){const t=yt(n),r=await t.getIdToken(e),s=Am(r);Le(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const a=typeof s.firebase=="object"?s.firebase:void 0,l=a==null?void 0:a.sign_in_provider;return{claims:s,token:r,authTime:fu(Ep(s.auth_time)),issuedAtTime:fu(Ep(s.iat)),expirationTime:fu(Ep(s.exp)),signInProvider:l||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function Ep(n){return Number(n)*1e3}function Am(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return _d("JWT malformed, contained fewer than 3 sections"),null;try{const s=GT(t);return s?JSON.parse(s):(_d("Failed to decode base64 JWT payload"),null)}catch(s){return _d("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function CE(n){const e=Am(n);return Le(e,"internal-error"),Le(typeof e.exp<"u","internal-error"),Le(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yo(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Mi&&M1(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function M1({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U1{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jp{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=fu(this.lastLoginAt),this.creationTime=fu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dd(n){var E;const e=n.auth,t=await n.getIdToken(),r=await Yo(n,bd(e,{idToken:t}));Le(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];n._notifyReloadListener(s);const a=(E=s.providerUserInfo)!=null&&E.length?iw(s.providerUserInfo):[],l=B1(n.providerData,a),h=n.isAnonymous,f=!(n.email&&s.passwordHash)&&!(l!=null&&l.length),p=h?f:!1,_={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new jp(s.createdAt,s.lastLoginAt),isAnonymous:p};Object.assign(n,_)}async function F1(n){const e=yt(n);await Dd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function B1(n,e){return[...n.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function iw(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function j1(n,e){const t=await nw(n,{},async()=>{const r=Fu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:a}=n.config,l=await rw(n,s,"/v1/token",`key=${a}`),h=await n._getAdditionalHeaders();h["Content-Type"]="application/x-www-form-urlencoded";const f={method:"POST",headers:h,body:r};return n.emulatorConfig&&ys(n.emulatorConfig.host)&&(f.credentials="include"),tw.fetch()(l,f)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function z1(n,e){return Br(n,"POST","/v2/accounts:revokeToken",ai(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Le(e.idToken,"internal-error"),Le(typeof e.idToken<"u","internal-error"),Le(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):CE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Le(e.length!==0,"internal-error");const t=CE(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Le(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:s,expiresIn:a}=await j1(e,t);this.updateTokensAndExpiration(r,s,Number(a))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:s,expirationTime:a}=t,l=new Xa;return r&&(Le(typeof r=="string","internal-error",{appName:e}),l.refreshToken=r),s&&(Le(typeof s=="string","internal-error",{appName:e}),l.accessToken=s),a&&(Le(typeof a=="number","internal-error",{appName:e}),l.expirationTime=a),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Xa,this.toJSON())}_performRefresh(){return ls("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function js(n,e){Le(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Zr{constructor({uid:e,auth:t,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new U1(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new jp(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await Yo(this,this.stsTokenManager.getToken(this.auth,e));return Le(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return V1(this,e)}reload(){return F1(this)}_assign(e){this!==e&&(Le(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Zr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Le(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Dd(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Pn(this.auth.app))return Promise.reject(ri(this.auth));const e=await this.getIdToken();return await Yo(this,x1(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,s=t.email??void 0,a=t.phoneNumber??void 0,l=t.photoURL??void 0,h=t.tenantId??void 0,f=t._redirectEventId??void 0,p=t.createdAt??void 0,_=t.lastLoginAt??void 0,{uid:E,emailVerified:T,isAnonymous:S,providerData:C,stsTokenManager:U}=t;Le(E&&U,e,"internal-error");const L=Xa.fromJSON(this.name,U);Le(typeof E=="string",e,"internal-error"),js(r,e.name),js(s,e.name),Le(typeof T=="boolean",e,"internal-error"),Le(typeof S=="boolean",e,"internal-error"),js(a,e.name),js(l,e.name),js(h,e.name),js(f,e.name),js(p,e.name),js(_,e.name);const z=new Zr({uid:E,auth:e,email:s,emailVerified:T,displayName:r,isAnonymous:S,photoURL:l,phoneNumber:a,tenantId:h,stsTokenManager:L,createdAt:p,lastLoginAt:_});return C&&Array.isArray(C)&&(z.providerData=C.map($=>({...$}))),f&&(z._redirectEventId=f),z}static async _fromIdTokenResponse(e,t,r=!1){const s=new Xa;s.updateFromServerResponse(t);const a=new Zr({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Dd(a),a}static async _fromGetAccountInfoResponse(e,t,r){const s=t.users[0];Le(s.localId!==void 0,"internal-error");const a=s.providerUserInfo!==void 0?iw(s.providerUserInfo):[],l=!(s.email&&s.passwordHash)&&!(a!=null&&a.length),h=new Xa;h.updateFromIdToken(r);const f=new Zr({uid:s.localId,auth:e,stsTokenManager:h,isAnonymous:l}),p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new jp(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(a!=null&&a.length)};return Object.assign(f,p),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NE=new Map;function us(n){ps(n instanceof Function,"Expected a class definition");let e=NE.get(n);return e?(ps(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,NE.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}sw.type="NONE";const kE=sw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ed(n,e,t){return`firebase:${n}:${e}:${t}`}class Ya{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:s,name:a}=this.auth;this.fullUserKey=Ed(this.userKey,s.apiKey,a),this.fullPersistenceKey=Ed("persistence",s.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await bd(this.auth,{idToken:e}).catch(()=>{});return t?Zr._fromGetAccountInfoResponse(this.auth,t,e):null}return Zr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Ya(us(kE),e,r);const s=(await Promise.all(t.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let a=s[0]||us(kE);const l=Ed(r,e.config.apiKey,e.name);let h=null;for(const p of t)try{const _=await p._get(l);if(_){let E;if(typeof _=="string"){const T=await bd(e,{idToken:_}).catch(()=>{});if(!T)break;E=await Zr._fromGetAccountInfoResponse(e,T,_)}else E=Zr._fromJSON(e,_);p!==a&&(h=E),a=p;break}}catch{}const f=s.filter(p=>p._shouldAllowMigration);return!a._shouldAllowMigration||!f.length?new Ya(a,e,r):(a=f[0],h&&await a._set(l,h.toJSON()),await Promise.all(t.map(async p=>{if(p!==a)try{await p._remove(l)}catch{}})),new Ya(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bE(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(uw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(ow(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(dw(e))return"Blackberry";if(hw(e))return"Webos";if(aw(e))return"Safari";if((e.includes("chrome/")||lw(e))&&!e.includes("edge/"))return"Chrome";if(cw(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function ow(n=Bn()){return/firefox\//i.test(n)}function aw(n=Bn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function lw(n=Bn()){return/crios\//i.test(n)}function uw(n=Bn()){return/iemobile/i.test(n)}function cw(n=Bn()){return/android/i.test(n)}function dw(n=Bn()){return/blackberry/i.test(n)}function hw(n=Bn()){return/webos/i.test(n)}function Pm(n=Bn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function G1(n=Bn()){var e;return Pm(n)&&!!((e=window.navigator)!=null&&e.standalone)}function H1(){return nC()&&document.documentMode===10}function fw(n=Bn()){return Pm(n)||cw(n)||hw(n)||dw(n)||/windows phone/i.test(n)||uw(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pw(n,e=[]){let t;switch(n){case"Browser":t=bE(Bn());break;case"Worker":t=`${bE(Bn())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ra}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W1{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=a=>new Promise((l,h)=>{try{const f=e(a);l(f)}catch(f){h(f)}});r.onAbort=t,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function q1(n,e={}){return Br(n,"GET","/v2/passwordPolicy",ai(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $1=6;class K1{constructor(e){var r;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??$1,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,s,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X1{constructor(e,t,r,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new DE(this),this.idTokenSubscription=new DE(this),this.beforeStateQueue=new W1(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ew,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=us(t)),this._initializationPromise=this.queue(async()=>{var r,s,a;if(!this._deleted&&(this.persistenceManager=await Ya.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((a=this.currentUser)==null?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await bd(this,{idToken:e}),r=await Zr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var a;if(Pn(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(h,h))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(a=this.redirectUser)==null?void 0:a._redirectEventId,h=r==null?void 0:r._redirectEventId,f=await this.tryRedirectSignIn(e);(!l||l===h)&&(f!=null&&f.user)&&(r=f.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(l){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Le(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Dd(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=P1()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Pn(this.app))return Promise.reject(ri(this));const t=e?yt(e):null;return t&&Le(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Le(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Pn(this.app)?Promise.reject(ri(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Pn(this.app)?Promise.reject(ri(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(us(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await q1(this),t=new K1(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Uu("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await z1(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&us(e)||this._popupRedirectResolver;Le(t,this,"argument-error"),this.redirectPersistenceManager=await Ya.create(this,[us(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,s){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let l=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(Le(h,this,"internal-error"),h.then(()=>{l||a(this.currentUser)}),typeof t=="function"){const f=e.addObserver(t,r,s);return()=>{l=!0,f()}}else{const f=e.addObserver(t);return()=>{l=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Le(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=pw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var t;if(Pn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&S1(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function jr(n){return yt(n)}class DE{constructor(e){this.auth=e,this.observer=null,this.addObserver=cC(t=>this.observer=t)}get next(){return Le(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ah={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Y1(n){ah=n}function mw(n){return ah.loadJS(n)}function Q1(){return ah.recaptchaEnterpriseScript}function J1(){return ah.gapiScript}function Z1(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class eN{constructor(){this.enterprise=new tN}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class tN{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const nN="recaptcha-enterprise",gw="NO_RECAPTCHA";class rN{constructor(e){this.type=nN,this.auth=jr(e)}async verify(e="verify",t=!1){async function r(a){if(!t){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(l,h)=>{L1(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(f=>{if(f.recaptchaKey===void 0)h(new Error("recaptcha Enterprise site key undefined"));else{const p=new O1(f);return a.tenantId==null?a._agentRecaptchaConfig=p:a._tenantRecaptchaConfigs[a.tenantId]=p,l(p.siteKey)}}).catch(f=>{h(f)})})}function s(a,l,h){const f=window.grecaptcha;PE(f)?f.enterprise.ready(()=>{f.enterprise.execute(a,{action:e}).then(p=>{l(p)}).catch(()=>{l(gw)})}):h(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new eN().execute("siteKey",{action:"verify"}):new Promise((a,l)=>{r(this.auth).then(h=>{if(!t&&PE(window.grecaptcha))s(h,a,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let f=Q1();f.length!==0&&(f+=h),mw(f).then(()=>{s(h,a,l)}).catch(p=>{l(p)})}}).catch(h=>{l(h)})})}}async function OE(n,e,t,r=!1,s=!1){const a=new rN(n);let l;if(s)l=gw;else try{l=await a.verify(t)}catch{l=await a.verify(t,!0)}const h={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in h){const f=h.phoneEnrollmentInfo.phoneNumber,p=h.phoneEnrollmentInfo.recaptchaToken;Object.assign(h,{phoneEnrollmentInfo:{phoneNumber:f,recaptchaToken:p,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in h){const f=h.phoneSignInInfo.recaptchaToken;Object.assign(h,{phoneSignInInfo:{recaptchaToken:f,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return h}return r?Object.assign(h,{captchaResp:l}):Object.assign(h,{captchaResponse:l}),Object.assign(h,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(h,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),h}async function Ru(n,e,t,r,s){var a;if((a=n._getRecaptchaConfig())!=null&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await OE(n,e,t,t==="getOobCode");return r(n,l)}else return r(n,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const h=await OE(n,e,t,t==="getOobCode");return r(n,h)}else return Promise.reject(l)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iN(n,e){const t=Bu(n,"auth");if(t.isInitialized()){const s=t.getImmediate(),a=t.getOptions();if(Ko(a,e??{}))return s;wr(s,"already-initialized")}return t.initialize({options:e})}function sN(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(us);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function oN(n,e,t){const r=jr(n);Le(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,a=yw(e),{host:l,port:h}=aN(e),f=h===null?"":`:${h}`,p={url:`${a}//${l}${f}/`},_=Object.freeze({host:l,port:h,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){Le(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Le(Ko(p,r.config.emulator)&&Ko(_,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=p,r.emulatorConfig=_,r.settings.appVerificationDisabledForTesting=!0,ys(l)?(ih(`${a}//${l}${f}`),sh("Auth",!0)):lN()}function yw(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function aN(n){const e=yw(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const a=s[1];return{host:a,port:LE(r.substr(a.length+1))}}else{const[a,l]=r.split(":");return{host:a,port:LE(l)}}}function LE(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function lN(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cm{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ls("not implemented")}_getIdTokenResponse(e){return ls("not implemented")}_linkToIdToken(e,t){return ls("not implemented")}_getReauthenticationResolver(e){return ls("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _w(n,e){return Br(n,"POST","/v1/accounts:resetPassword",ai(n,e))}async function uN(n,e){return Br(n,"POST","/v1/accounts:update",e)}async function cN(n,e){return Br(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dN(n,e){return al(n,"POST","/v1/accounts:signInWithPassword",ai(n,e))}async function Ew(n,e){return Br(n,"POST","/v1/accounts:sendOobCode",ai(n,e))}async function hN(n,e){return Ew(n,e)}async function fN(n,e){return Ew(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pN(n,e){return al(n,"POST","/v1/accounts:signInWithEmailLink",ai(n,e))}async function mN(n,e){return al(n,"POST","/v1/accounts:signInWithEmailLink",ai(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Au extends Cm{constructor(e,t,r,s=null){super("password",r),this._email=e,this._password=t,this._tenantId=s}static _fromEmailAndPassword(e,t){return new Au(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new Au(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ru(e,t,"signInWithPassword",dN);case"emailLink":return pN(e,{email:this._email,oobCode:this._password});default:wr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ru(e,r,"signUpPassword",cN);case"emailLink":return mN(e,{idToken:t,email:this._email,oobCode:this._password});default:wr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qa(n,e){return al(n,"POST","/v1/accounts:signInWithIdp",ai(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gN="http://localhost";class Qo extends Cm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Qo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):wr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...a}=t;if(!r||!s)return null;const l=new Qo(r,s);return l.idToken=a.idToken||void 0,l.accessToken=a.accessToken||void 0,l.secret=a.secret,l.nonce=a.nonce,l.pendingToken=a.pendingToken||null,l}_getIdTokenResponse(e){const t=this.buildRequest();return Qa(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Qa(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Qa(e,t)}buildRequest(){const e={requestUri:gN,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Fu(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yN(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function _N(n){const e=su(ou(n)).link,t=e?su(ou(e)).deep_link_id:null,r=su(ou(n)).deep_link_id;return(r?su(ou(r)).link:null)||r||t||e||n}class lh{constructor(e){const t=su(ou(e)),r=t.apiKey??null,s=t.oobCode??null,a=yN(t.mode??null);Le(r&&s&&a,"argument-error"),this.apiKey=r,this.operation=a,this.code=s,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=_N(e);try{return new lh(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{constructor(){this.providerId=ia.PROVIDER_ID}static credential(e,t){return Au._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=lh.parseLink(t);return Le(r,"argument-error"),Au._fromEmailAndCode(e,r.code,r.tenantId)}}ia.PROVIDER_ID="password";ia.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ia.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nm{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zu extends Nm{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs extends zu{constructor(){super("facebook.com")}static credential(e){return Qo._fromParams({providerId:Hs.PROVIDER_ID,signInMethod:Hs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Hs.credentialFromTaggedObject(e)}static credentialFromError(e){return Hs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Hs.credential(e.oauthAccessToken)}catch{return null}}}Hs.FACEBOOK_SIGN_IN_METHOD="facebook.com";Hs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as extends zu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Qo._fromParams({providerId:as.PROVIDER_ID,signInMethod:as.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return as.credentialFromTaggedObject(e)}static credentialFromError(e){return as.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return as.credential(t,r)}catch{return null}}}as.GOOGLE_SIGN_IN_METHOD="google.com";as.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws extends zu{constructor(){super("github.com")}static credential(e){return Qo._fromParams({providerId:Ws.PROVIDER_ID,signInMethod:Ws.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ws.credentialFromTaggedObject(e)}static credentialFromError(e){return Ws.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ws.credential(e.oauthAccessToken)}catch{return null}}}Ws.GITHUB_SIGN_IN_METHOD="github.com";Ws.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs extends zu{constructor(){super("twitter.com")}static credential(e,t){return Qo._fromParams({providerId:qs.PROVIDER_ID,signInMethod:qs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return qs.credentialFromTaggedObject(e)}static credentialFromError(e){return qs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return qs.credential(t,r)}catch{return null}}}qs.TWITTER_SIGN_IN_METHOD="twitter.com";qs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EN(n,e){return al(n,"POST","/v1/accounts:signUp",ai(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,s=!1){const a=await Zr._fromIdTokenResponse(e,r,s),l=xE(r);return new no({user:a,providerId:l,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const s=xE(r);return new no({user:e,providerId:s,_tokenResponse:r,operationType:t})}}function xE(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Od extends Mi{constructor(e,t,r,s){super(t.code,t.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Od.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,s){return new Od(e,t,r,s)}}function vw(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Od._fromErrorAndOperation(n,a,e,r):a})}async function vN(n,e,t=!1){const r=await Yo(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return no._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TN(n,e,t=!1){const{auth:r}=n;if(Pn(r.app))return Promise.reject(ri(r));const s="reauthenticate";try{const a=await Yo(n,vw(r,s,e,n),t);Le(a.idToken,r,"internal-error");const l=Am(a.idToken);Le(l,r,"internal-error");const{sub:h}=l;return Le(n.uid===h,r,"user-mismatch"),no._forOperation(n,s,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&wr(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tw(n,e,t=!1){if(Pn(n.app))return Promise.reject(ri(n));const r="signIn",s=await vw(n,r,e),a=await no._fromIdTokenResponse(n,r,s);return t||await n._updateCurrentUser(a.user),a}async function ww(n,e){return Tw(jr(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wN(n,e){return al(n,"POST","/v1/accounts:signInWithCustomToken",ai(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SN(n,e){if(Pn(n.app))return Promise.reject(ri(n));const t=jr(n),r=await wN(t,{token:e,returnSecureToken:!0}),s=await no._fromIdTokenResponse(t,"signIn",r);return await t._updateCurrentUser(s.user),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class km{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?bm._fromServerResponse(e,t):"totpInfo"in t?Dm._fromServerResponse(e,t):wr(e,"internal-error")}}class bm extends km{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new bm(t)}}class Dm extends km{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new Dm(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sw(n,e,t){var r;Le(((r=t.url)==null?void 0:r.length)>0,n,"invalid-continue-uri"),Le(typeof t.dynamicLinkDomain>"u"||t.dynamicLinkDomain.length>0,n,"invalid-dynamic-link-domain"),Le(typeof t.linkDomain>"u"||t.linkDomain.length>0,n,"invalid-hosting-link-domain"),e.continueUrl=t.url,e.dynamicLinkDomain=t.dynamicLinkDomain,e.linkDomain=t.linkDomain,e.canHandleCodeInApp=t.handleCodeInApp,t.iOS&&(Le(t.iOS.bundleId.length>0,n,"missing-ios-bundle-id"),e.iOSBundleId=t.iOS.bundleId),t.android&&(Le(t.android.packageName.length>0,n,"missing-android-pkg-name"),e.androidInstallApp=t.android.installApp,e.androidMinimumVersionCode=t.android.minimumVersion,e.androidPackageName=t.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Om(n){const e=jr(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function IN(n,e,t){const r=jr(n),s={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};t&&Sw(r,s,t),await Ru(r,s,"getOobCode",hN)}async function cV(n,e,t){await _w(yt(n),{oobCode:e,newPassword:t}).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Om(n),r})}async function RN(n,e){const t=yt(n),r=await _w(t,{oobCode:e}),s=r.requestType;switch(Le(s,t,"internal-error"),s){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Le(r.newEmail,t,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Le(r.mfaInfo,t,"internal-error");default:Le(r.email,t,"internal-error")}let a=null;return r.mfaInfo&&(a=km._fromServerResponse(jr(t),r.mfaInfo)),{data:{email:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.newEmail:r.email)||null,previousEmail:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.email:r.newEmail)||null,multiFactorInfo:a},operation:s}}async function dV(n,e){const{data:t}=await RN(yt(n),e);return t.email}async function VE(n,e,t){if(Pn(n.app))return Promise.reject(ri(n));const r=jr(n),l=await Ru(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",EN).catch(f=>{throw f.code==="auth/password-does-not-meet-requirements"&&Om(n),f}),h=await no._fromIdTokenResponse(r,"signIn",l);return await r._updateCurrentUser(h.user),h}function vp(n,e,t){return Pn(n.app)?Promise.reject(ri(n)):ww(yt(n),ia.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Om(n),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AN(n,e,t){const r=jr(n),s={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function a(l,h){Le(h.handleCodeInApp,r,"argument-error"),h&&Sw(r,l,h)}a(s,t),await Ru(r,s,"getOobCode",fN)}function PN(n,e){const t=lh.parseLink(e);return(t==null?void 0:t.operation)==="EMAIL_SIGNIN"}async function CN(n,e,t){if(Pn(n.app))return Promise.reject(ri(n));const r=yt(n),s=ia.credentialWithLink(e,t||kd());return Le(s._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),ww(r,s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NN(n,e){return Br(n,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zp(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const r=yt(n),a={idToken:await r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},l=await Yo(r,NN(r.auth,a));r.displayName=l.displayName||null,r.photoURL=l.photoUrl||null;const h=r.providerData.find(({providerId:f})=>f==="password");h&&(h.displayName=r.displayName,h.photoURL=r.photoURL),await r._updateTokensIfNecessary(l)}function kN(n,e){return bN(yt(n),null,e)}async function bN(n,e,t){const{auth:r}=n,a={idToken:await n.getIdToken(),returnSecureToken:!0};t&&(a.password=t);const l=await Yo(n,uN(r,a));await n._updateTokensIfNecessary(l,!0)}function DN(n,e,t,r){return yt(n).onIdTokenChanged(e,t,r)}function ON(n,e,t){return yt(n).beforeAuthStateChanged(e,t)}function ME(n,e,t,r){return yt(n).onAuthStateChanged(e,t,r)}function LN(n){return yt(n).signOut()}const Ld="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iw{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Ld,"1"),this.storage.removeItem(Ld),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xN=1e3,VN=10;class Rw extends Iw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=fw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),s=this.localCache[t];r!==s&&e(t,s,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((l,h,f)=>{this.notifyListeners(l,f)});return}const r=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const l=this.storage.getItem(r);!t&&this.localCache[r]===l||this.notifyListeners(r,l)},a=this.storage.getItem(r);H1()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,VN):s()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},xN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Rw.type="LOCAL";const MN=Rw;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aw extends Iw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Aw.type="SESSION";const Pw=Aw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UN(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const r=new uh(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:s,data:a}=t.data,l=this.handlersMap[s];if(!(l!=null&&l.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const h=Array.from(l).map(async p=>p(t.origin,a)),f=await UN(h);t.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:f})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}uh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lm(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FN{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let a,l;return new Promise((h,f)=>{const p=Lm("",20);s.port1.start();const _=setTimeout(()=>{f(new Error("unsupported_event"))},r);l={messageChannel:s,onMessage(E){const T=E;if(T.data.eventId===p)switch(T.data.status){case"ack":clearTimeout(_),a=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),h(T.data.response);break;default:clearTimeout(_),clearTimeout(a),f(new Error("invalid_response"));break}}},this.handlers.add(l),s.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:p,data:t},[s.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bi(){return window}function BN(n){bi().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cw(){return typeof bi().WorkerGlobalScope<"u"&&typeof bi().importScripts=="function"}async function jN(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function zN(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function GN(){return Cw()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nw="firebaseLocalStorageDb",HN=1,xd="firebaseLocalStorage",kw="fbase_key";class Gu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function ch(n,e){return n.transaction([xd],e?"readwrite":"readonly").objectStore(xd)}function WN(){const n=indexedDB.deleteDatabase(Nw);return new Gu(n).toPromise()}function Gp(){const n=indexedDB.open(Nw,HN);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(xd,{keyPath:kw})}catch(s){t(s)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(xd)?e(r):(r.close(),await WN(),e(await Gp()))})})}async function UE(n,e,t){const r=ch(n,!0).put({[kw]:e,value:t});return new Gu(r).toPromise()}async function qN(n,e){const t=ch(n,!1).get(e),r=await new Gu(t).toPromise();return r===void 0?null:r.value}function FE(n,e){const t=ch(n,!0).delete(e);return new Gu(t).toPromise()}const $N=800,KN=3;class bw{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Gp(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>KN)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Cw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=uh._getInstance(GN()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,r;if(this.activeServiceWorker=await jN(),!this.activeServiceWorker)return;this.sender=new FN(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||zN()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Gp();return await UE(e,Ld,"1"),await FE(e,Ld),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>UE(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>qN(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>FE(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const a=ch(s,!1).getAll();return new Gu(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:a}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(a)&&(this.notifyListeners(s,a),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),$N)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}bw.type="LOCAL";const XN=bw;new ju(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dw(n,e){return e?us(e):(Le(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xm extends Cm{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Qa(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Qa(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Qa(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function YN(n){return Tw(n.auth,new xm(n),n.bypassAuthState)}function QN(n){const{auth:e,user:t}=n;return Le(t,e,"internal-error"),TN(t,new xm(n),n.bypassAuthState)}async function JN(n){const{auth:e,user:t}=n;return Le(t,e,"internal-error"),vN(t,new xm(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ow{constructor(e,t,r,s,a=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:s,tenantId:a,error:l,type:h}=e;if(l){this.reject(l);return}const f={auth:this.auth,requestUri:t,sessionId:r,tenantId:a||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(f))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return YN;case"linkViaPopup":case"linkViaRedirect":return JN;case"reauthViaPopup":case"reauthViaRedirect":return QN;default:wr(this.auth,"internal-error")}}resolve(e){ps(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ps(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZN=new ju(2e3,1e4);async function ek(n,e,t){if(Pn(n.app))return Promise.reject(ni(n,"operation-not-supported-in-this-environment"));const r=jr(n);I1(n,e,Nm);const s=Dw(r,t);return new zo(r,"signInViaPopup",e,s).executeNotNull()}class zo extends Ow{constructor(e,t,r,s,a){super(e,t,s,a),this.provider=r,this.authWindow=null,this.pollId=null,zo.currentPopupAction&&zo.currentPopupAction.cancel(),zo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Le(e,this.auth,"internal-error"),e}async onExecution(){ps(this.filter.length===1,"Popup operations only handle one event");const e=Lm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(ni(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(ni(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,zo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if((r=(t=this.authWindow)==null?void 0:t.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ni(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,ZN.get())};e()}}zo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tk="pendingRedirect",vd=new Map;class nk extends Ow{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=vd.get(this.auth._key());if(!e){try{const r=await rk(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}vd.set(this.auth._key(),e)}return this.bypassAuthState||vd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function rk(n,e){const t=ok(e),r=sk(n);if(!await r._isAvailable())return!1;const s=await r._get(t)==="true";return await r._remove(t),s}function ik(n,e){vd.set(n._key(),e)}function sk(n){return us(n._redirectPersistence)}function ok(n){return Ed(tk,n.config.apiKey,n.name)}async function ak(n,e,t=!1){if(Pn(n.app))return Promise.reject(ri(n));const r=jr(n),s=Dw(r,e),l=await new nk(r,s,t).execute();return l&&!t&&(delete l.user._redirectEventId,await r._persistUserIfCurrent(l.user),await r._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lk=600*1e3;class uk{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!ck(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!Lw(e)){const s=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";t.onError(ni(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=lk&&this.cachedEventUids.clear(),this.cachedEventUids.has(BE(e))}saveEventToCache(e){this.cachedEventUids.add(BE(e)),this.lastProcessedEventTime=Date.now()}}function BE(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function Lw({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function ck(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Lw(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dk(n,e={}){return Br(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hk=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,fk=/^https?/;async function pk(n){if(n.config.emulator)return;const{authorizedDomains:e}=await dk(n);for(const t of e)try{if(mk(t))return}catch{}wr(n,"unauthorized-domain")}function mk(n){const e=kd(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const l=new URL(n);return l.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&l.hostname===r}if(!fk.test(t))return!1;if(hk.test(n))return r===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gk=new ju(3e4,6e4);function jE(){const n=bi().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function yk(n){return new Promise((e,t)=>{var s,a,l;function r(){jE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{jE(),t(ni(n,"network-request-failed"))},timeout:gk.get()})}if((a=(s=bi().gapi)==null?void 0:s.iframes)!=null&&a.Iframe)e(gapi.iframes.getContext());else if((l=bi().gapi)!=null&&l.load)r();else{const h=Z1("iframefcb");return bi()[h]=()=>{gapi.load?r():t(ni(n,"network-request-failed"))},mw(`${J1()}?onload=${h}`).catch(f=>t(f))}}).catch(e=>{throw Td=null,e})}let Td=null;function _k(n){return Td=Td||yk(n),Td}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ek=new ju(5e3,15e3),vk="__/auth/iframe",Tk="emulator/auth/iframe",wk={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Sk=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ik(n){const e=n.config;Le(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Rm(e,Tk):`https://${n.config.authDomain}/${vk}`,r={apiKey:e.apiKey,appName:n.name,v:ra},s=Sk.get(n.config.apiHost);s&&(r.eid=s);const a=n._getFrameworks();return a.length&&(r.fw=a.join(",")),`${t}?${Fu(r).slice(1)}`}async function Rk(n){const e=await _k(n),t=bi().gapi;return Le(t,n,"internal-error"),e.open({where:document.body,url:Ik(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:wk,dontclear:!0},r=>new Promise(async(s,a)=>{await r.restyle({setHideOnLeave:!1});const l=ni(n,"network-request-failed"),h=bi().setTimeout(()=>{a(l)},Ek.get());function f(){bi().clearTimeout(h),s(r)}r.ping(f).then(f,()=>{a(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ak={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Pk=500,Ck=600,Nk="_blank",kk="http://localhost";class zE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function bk(n,e,t,r=Pk,s=Ck){const a=Math.max((window.screen.availHeight-s)/2,0).toString(),l=Math.max((window.screen.availWidth-r)/2,0).toString();let h="";const f={...Ak,width:r.toString(),height:s.toString(),top:a,left:l},p=Bn().toLowerCase();t&&(h=lw(p)?Nk:t),ow(p)&&(e=e||kk,f.scrollbars="yes");const _=Object.entries(f).reduce((T,[S,C])=>`${T}${S}=${C},`,"");if(G1(p)&&h!=="_self")return Dk(e||"",h),new zE(null);const E=window.open(e||"",h,_);Le(E,n,"popup-blocked");try{E.focus()}catch{}return new zE(E)}function Dk(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ok="__/auth/handler",Lk="emulator/auth/handler",xk=encodeURIComponent("fac");async function GE(n,e,t,r,s,a){Le(n.config.authDomain,n,"auth-domain-config-required"),Le(n.config.apiKey,n,"invalid-api-key");const l={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:ra,eventId:s};if(e instanceof Nm){e.setDefaultLanguage(n.languageCode),l.providerId=e.providerId||"",uC(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,E]of Object.entries({}))l[_]=E}if(e instanceof zu){const _=e.getScopes().filter(E=>E!=="");_.length>0&&(l.scopes=_.join(","))}n.tenantId&&(l.tid=n.tenantId);const h=l;for(const _ of Object.keys(h))h[_]===void 0&&delete h[_];const f=await n._getAppCheckToken(),p=f?`#${xk}=${encodeURIComponent(f)}`:"";return`${Vk(n)}?${Fu(h).slice(1)}${p}`}function Vk({config:n}){return n.emulator?Rm(n,Lk):`https://${n.authDomain}/${Ok}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tp="webStorageSupport";class Mk{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Pw,this._completeRedirectFn=ak,this._overrideRedirectResult=ik}async _openPopup(e,t,r,s){var l;ps((l=this.eventManagers[e._key()])==null?void 0:l.manager,"_initialize() not called before _openPopup()");const a=await GE(e,t,r,kd(),s);return bk(e,a,Lm())}async _openRedirect(e,t,r,s){await this._originValidation(e);const a=await GE(e,t,r,kd(),s);return BN(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:a}=this.eventManagers[t];return s?Promise.resolve(s):(ps(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await Rk(e),r=new uk(e);return t.register("authEvent",s=>(Le(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Tp,{type:Tp},s=>{var l;const a=(l=s==null?void 0:s[0])==null?void 0:l[Tp];a!==void 0&&t(!!a),wr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=pk(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return fw()||aw()||Pm()}}const Uk=Mk;var HE="@firebase/auth",WE="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fk{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Le(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bk(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function jk(n){to(new hs("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:l,authDomain:h}=r.options;Le(l&&!l.includes(":"),"invalid-api-key",{appName:r.name});const f={apiKey:l,authDomain:h,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:pw(n)},p=new X1(r,s,a,f);return sN(p,t),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),to(new hs("auth-internal",e=>{const t=jr(e.getProvider("auth").getImmediate());return(r=>new Fk(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Vr(HE,WE,Bk(n)),Vr(HE,WE,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zk=300,Gk=qT("authIdTokenMaxAge")||zk;let qE=null;const Hk=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>Gk)return;const s=t==null?void 0:t.token;qE!==s&&(qE=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function Wk(n=oh()){const e=Bu(n,"auth");if(e.isInitialized())return e.getImmediate();const t=iN(n,{popupRedirectResolver:Uk,persistence:[XN,MN,Pw]}),r=qT("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const l=Hk(a.toString());ON(t,l,()=>l(t.currentUser)),DN(t,h=>l(h))}}const s=HT("auth");return s&&oN(t,`http://${s}`),t}function qk(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}Y1({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=s=>{const a=ni("internal-error");a.customData=s,t(a)},r.type="text/javascript",r.charset="UTF-8",qk().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});jk("Browser");var $E=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Zs,xw;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,A){function N(){}N.prototype=A.prototype,I.F=A.prototype,I.prototype=new N,I.prototype.constructor=I,I.D=function(V,M,G){for(var D=Array(arguments.length-2),We=2;We<arguments.length;We++)D[We-2]=arguments[We];return A.prototype[M].apply(V,D)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(I,A,N){N||(N=0);const V=Array(16);if(typeof A=="string")for(var M=0;M<16;++M)V[M]=A.charCodeAt(N++)|A.charCodeAt(N++)<<8|A.charCodeAt(N++)<<16|A.charCodeAt(N++)<<24;else for(M=0;M<16;++M)V[M]=A[N++]|A[N++]<<8|A[N++]<<16|A[N++]<<24;A=I.g[0],N=I.g[1],M=I.g[2];let G=I.g[3],D;D=A+(G^N&(M^G))+V[0]+3614090360&4294967295,A=N+(D<<7&4294967295|D>>>25),D=G+(M^A&(N^M))+V[1]+3905402710&4294967295,G=A+(D<<12&4294967295|D>>>20),D=M+(N^G&(A^N))+V[2]+606105819&4294967295,M=G+(D<<17&4294967295|D>>>15),D=N+(A^M&(G^A))+V[3]+3250441966&4294967295,N=M+(D<<22&4294967295|D>>>10),D=A+(G^N&(M^G))+V[4]+4118548399&4294967295,A=N+(D<<7&4294967295|D>>>25),D=G+(M^A&(N^M))+V[5]+1200080426&4294967295,G=A+(D<<12&4294967295|D>>>20),D=M+(N^G&(A^N))+V[6]+2821735955&4294967295,M=G+(D<<17&4294967295|D>>>15),D=N+(A^M&(G^A))+V[7]+4249261313&4294967295,N=M+(D<<22&4294967295|D>>>10),D=A+(G^N&(M^G))+V[8]+1770035416&4294967295,A=N+(D<<7&4294967295|D>>>25),D=G+(M^A&(N^M))+V[9]+2336552879&4294967295,G=A+(D<<12&4294967295|D>>>20),D=M+(N^G&(A^N))+V[10]+4294925233&4294967295,M=G+(D<<17&4294967295|D>>>15),D=N+(A^M&(G^A))+V[11]+2304563134&4294967295,N=M+(D<<22&4294967295|D>>>10),D=A+(G^N&(M^G))+V[12]+1804603682&4294967295,A=N+(D<<7&4294967295|D>>>25),D=G+(M^A&(N^M))+V[13]+4254626195&4294967295,G=A+(D<<12&4294967295|D>>>20),D=M+(N^G&(A^N))+V[14]+2792965006&4294967295,M=G+(D<<17&4294967295|D>>>15),D=N+(A^M&(G^A))+V[15]+1236535329&4294967295,N=M+(D<<22&4294967295|D>>>10),D=A+(M^G&(N^M))+V[1]+4129170786&4294967295,A=N+(D<<5&4294967295|D>>>27),D=G+(N^M&(A^N))+V[6]+3225465664&4294967295,G=A+(D<<9&4294967295|D>>>23),D=M+(A^N&(G^A))+V[11]+643717713&4294967295,M=G+(D<<14&4294967295|D>>>18),D=N+(G^A&(M^G))+V[0]+3921069994&4294967295,N=M+(D<<20&4294967295|D>>>12),D=A+(M^G&(N^M))+V[5]+3593408605&4294967295,A=N+(D<<5&4294967295|D>>>27),D=G+(N^M&(A^N))+V[10]+38016083&4294967295,G=A+(D<<9&4294967295|D>>>23),D=M+(A^N&(G^A))+V[15]+3634488961&4294967295,M=G+(D<<14&4294967295|D>>>18),D=N+(G^A&(M^G))+V[4]+3889429448&4294967295,N=M+(D<<20&4294967295|D>>>12),D=A+(M^G&(N^M))+V[9]+568446438&4294967295,A=N+(D<<5&4294967295|D>>>27),D=G+(N^M&(A^N))+V[14]+3275163606&4294967295,G=A+(D<<9&4294967295|D>>>23),D=M+(A^N&(G^A))+V[3]+4107603335&4294967295,M=G+(D<<14&4294967295|D>>>18),D=N+(G^A&(M^G))+V[8]+1163531501&4294967295,N=M+(D<<20&4294967295|D>>>12),D=A+(M^G&(N^M))+V[13]+2850285829&4294967295,A=N+(D<<5&4294967295|D>>>27),D=G+(N^M&(A^N))+V[2]+4243563512&4294967295,G=A+(D<<9&4294967295|D>>>23),D=M+(A^N&(G^A))+V[7]+1735328473&4294967295,M=G+(D<<14&4294967295|D>>>18),D=N+(G^A&(M^G))+V[12]+2368359562&4294967295,N=M+(D<<20&4294967295|D>>>12),D=A+(N^M^G)+V[5]+4294588738&4294967295,A=N+(D<<4&4294967295|D>>>28),D=G+(A^N^M)+V[8]+2272392833&4294967295,G=A+(D<<11&4294967295|D>>>21),D=M+(G^A^N)+V[11]+1839030562&4294967295,M=G+(D<<16&4294967295|D>>>16),D=N+(M^G^A)+V[14]+4259657740&4294967295,N=M+(D<<23&4294967295|D>>>9),D=A+(N^M^G)+V[1]+2763975236&4294967295,A=N+(D<<4&4294967295|D>>>28),D=G+(A^N^M)+V[4]+1272893353&4294967295,G=A+(D<<11&4294967295|D>>>21),D=M+(G^A^N)+V[7]+4139469664&4294967295,M=G+(D<<16&4294967295|D>>>16),D=N+(M^G^A)+V[10]+3200236656&4294967295,N=M+(D<<23&4294967295|D>>>9),D=A+(N^M^G)+V[13]+681279174&4294967295,A=N+(D<<4&4294967295|D>>>28),D=G+(A^N^M)+V[0]+3936430074&4294967295,G=A+(D<<11&4294967295|D>>>21),D=M+(G^A^N)+V[3]+3572445317&4294967295,M=G+(D<<16&4294967295|D>>>16),D=N+(M^G^A)+V[6]+76029189&4294967295,N=M+(D<<23&4294967295|D>>>9),D=A+(N^M^G)+V[9]+3654602809&4294967295,A=N+(D<<4&4294967295|D>>>28),D=G+(A^N^M)+V[12]+3873151461&4294967295,G=A+(D<<11&4294967295|D>>>21),D=M+(G^A^N)+V[15]+530742520&4294967295,M=G+(D<<16&4294967295|D>>>16),D=N+(M^G^A)+V[2]+3299628645&4294967295,N=M+(D<<23&4294967295|D>>>9),D=A+(M^(N|~G))+V[0]+4096336452&4294967295,A=N+(D<<6&4294967295|D>>>26),D=G+(N^(A|~M))+V[7]+1126891415&4294967295,G=A+(D<<10&4294967295|D>>>22),D=M+(A^(G|~N))+V[14]+2878612391&4294967295,M=G+(D<<15&4294967295|D>>>17),D=N+(G^(M|~A))+V[5]+4237533241&4294967295,N=M+(D<<21&4294967295|D>>>11),D=A+(M^(N|~G))+V[12]+1700485571&4294967295,A=N+(D<<6&4294967295|D>>>26),D=G+(N^(A|~M))+V[3]+2399980690&4294967295,G=A+(D<<10&4294967295|D>>>22),D=M+(A^(G|~N))+V[10]+4293915773&4294967295,M=G+(D<<15&4294967295|D>>>17),D=N+(G^(M|~A))+V[1]+2240044497&4294967295,N=M+(D<<21&4294967295|D>>>11),D=A+(M^(N|~G))+V[8]+1873313359&4294967295,A=N+(D<<6&4294967295|D>>>26),D=G+(N^(A|~M))+V[15]+4264355552&4294967295,G=A+(D<<10&4294967295|D>>>22),D=M+(A^(G|~N))+V[6]+2734768916&4294967295,M=G+(D<<15&4294967295|D>>>17),D=N+(G^(M|~A))+V[13]+1309151649&4294967295,N=M+(D<<21&4294967295|D>>>11),D=A+(M^(N|~G))+V[4]+4149444226&4294967295,A=N+(D<<6&4294967295|D>>>26),D=G+(N^(A|~M))+V[11]+3174756917&4294967295,G=A+(D<<10&4294967295|D>>>22),D=M+(A^(G|~N))+V[2]+718787259&4294967295,M=G+(D<<15&4294967295|D>>>17),D=N+(G^(M|~A))+V[9]+3951481745&4294967295,I.g[0]=I.g[0]+A&4294967295,I.g[1]=I.g[1]+(M+(D<<21&4294967295|D>>>11))&4294967295,I.g[2]=I.g[2]+M&4294967295,I.g[3]=I.g[3]+G&4294967295}r.prototype.v=function(I,A){A===void 0&&(A=I.length);const N=A-this.blockSize,V=this.C;let M=this.h,G=0;for(;G<A;){if(M==0)for(;G<=N;)s(this,I,G),G+=this.blockSize;if(typeof I=="string"){for(;G<A;)if(V[M++]=I.charCodeAt(G++),M==this.blockSize){s(this,V),M=0;break}}else for(;G<A;)if(V[M++]=I[G++],M==this.blockSize){s(this,V),M=0;break}}this.h=M,this.o+=A},r.prototype.A=function(){var I=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);I[0]=128;for(var A=1;A<I.length-8;++A)I[A]=0;A=this.o*8;for(var N=I.length-8;N<I.length;++N)I[N]=A&255,A/=256;for(this.v(I),I=Array(16),A=0,N=0;N<4;++N)for(let V=0;V<32;V+=8)I[A++]=this.g[N]>>>V&255;return I};function a(I,A){var N=h;return Object.prototype.hasOwnProperty.call(N,I)?N[I]:N[I]=A(I)}function l(I,A){this.h=A;const N=[];let V=!0;for(let M=I.length-1;M>=0;M--){const G=I[M]|0;V&&G==A||(N[M]=G,V=!1)}this.g=N}var h={};function f(I){return-128<=I&&I<128?a(I,function(A){return new l([A|0],A<0?-1:0)}):new l([I|0],I<0?-1:0)}function p(I){if(isNaN(I)||!isFinite(I))return E;if(I<0)return L(p(-I));const A=[];let N=1;for(let V=0;I>=N;V++)A[V]=I/N|0,N*=4294967296;return new l(A,0)}function _(I,A){if(I.length==0)throw Error("number format error: empty string");if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(I.charAt(0)=="-")return L(_(I.substring(1),A));if(I.indexOf("-")>=0)throw Error('number format error: interior "-" character');const N=p(Math.pow(A,8));let V=E;for(let G=0;G<I.length;G+=8){var M=Math.min(8,I.length-G);const D=parseInt(I.substring(G,G+M),A);M<8?(M=p(Math.pow(A,M)),V=V.j(M).add(p(D))):(V=V.j(N),V=V.add(p(D)))}return V}var E=f(0),T=f(1),S=f(16777216);n=l.prototype,n.m=function(){if(U(this))return-L(this).m();let I=0,A=1;for(let N=0;N<this.g.length;N++){const V=this.i(N);I+=(V>=0?V:4294967296+V)*A,A*=4294967296}return I},n.toString=function(I){if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(C(this))return"0";if(U(this))return"-"+L(this).toString(I);const A=p(Math.pow(I,6));var N=this;let V="";for(;;){const M=oe(N,A).g;N=z(N,M.j(A));let G=((N.g.length>0?N.g[0]:N.h)>>>0).toString(I);if(N=M,C(N))return G+V;for(;G.length<6;)G="0"+G;V=G+V}},n.i=function(I){return I<0?0:I<this.g.length?this.g[I]:this.h};function C(I){if(I.h!=0)return!1;for(let A=0;A<I.g.length;A++)if(I.g[A]!=0)return!1;return!0}function U(I){return I.h==-1}n.l=function(I){return I=z(this,I),U(I)?-1:C(I)?0:1};function L(I){const A=I.g.length,N=[];for(let V=0;V<A;V++)N[V]=~I.g[V];return new l(N,~I.h).add(T)}n.abs=function(){return U(this)?L(this):this},n.add=function(I){const A=Math.max(this.g.length,I.g.length),N=[];let V=0;for(let M=0;M<=A;M++){let G=V+(this.i(M)&65535)+(I.i(M)&65535),D=(G>>>16)+(this.i(M)>>>16)+(I.i(M)>>>16);V=D>>>16,G&=65535,D&=65535,N[M]=D<<16|G}return new l(N,N[N.length-1]&-2147483648?-1:0)};function z(I,A){return I.add(L(A))}n.j=function(I){if(C(this)||C(I))return E;if(U(this))return U(I)?L(this).j(L(I)):L(L(this).j(I));if(U(I))return L(this.j(L(I)));if(this.l(S)<0&&I.l(S)<0)return p(this.m()*I.m());const A=this.g.length+I.g.length,N=[];for(var V=0;V<2*A;V++)N[V]=0;for(V=0;V<this.g.length;V++)for(let M=0;M<I.g.length;M++){const G=this.i(V)>>>16,D=this.i(V)&65535,We=I.i(M)>>>16,ft=I.i(M)&65535;N[2*V+2*M]+=D*ft,$(N,2*V+2*M),N[2*V+2*M+1]+=G*ft,$(N,2*V+2*M+1),N[2*V+2*M+1]+=D*We,$(N,2*V+2*M+1),N[2*V+2*M+2]+=G*We,$(N,2*V+2*M+2)}for(I=0;I<A;I++)N[I]=N[2*I+1]<<16|N[2*I];for(I=A;I<2*A;I++)N[I]=0;return new l(N,0)};function $(I,A){for(;(I[A]&65535)!=I[A];)I[A+1]+=I[A]>>>16,I[A]&=65535,A++}function Z(I,A){this.g=I,this.h=A}function oe(I,A){if(C(A))throw Error("division by zero");if(C(I))return new Z(E,E);if(U(I))return A=oe(L(I),A),new Z(L(A.g),L(A.h));if(U(A))return A=oe(I,L(A)),new Z(L(A.g),A.h);if(I.g.length>30){if(U(I)||U(A))throw Error("slowDivide_ only works with positive integers.");for(var N=T,V=A;V.l(I)<=0;)N=we(N),V=we(V);var M=me(N,1),G=me(V,1);for(V=me(V,2),N=me(N,2);!C(V);){var D=G.add(V);D.l(I)<=0&&(M=M.add(N),G=D),V=me(V,1),N=me(N,1)}return A=z(I,M.j(A)),new Z(M,A)}for(M=E;I.l(A)>=0;){for(N=Math.max(1,Math.floor(I.m()/A.m())),V=Math.ceil(Math.log(N)/Math.LN2),V=V<=48?1:Math.pow(2,V-48),G=p(N),D=G.j(A);U(D)||D.l(I)>0;)N-=V,G=p(N),D=G.j(A);C(G)&&(G=T),M=M.add(G),I=z(I,D)}return new Z(M,I)}n.B=function(I){return oe(this,I).h},n.and=function(I){const A=Math.max(this.g.length,I.g.length),N=[];for(let V=0;V<A;V++)N[V]=this.i(V)&I.i(V);return new l(N,this.h&I.h)},n.or=function(I){const A=Math.max(this.g.length,I.g.length),N=[];for(let V=0;V<A;V++)N[V]=this.i(V)|I.i(V);return new l(N,this.h|I.h)},n.xor=function(I){const A=Math.max(this.g.length,I.g.length),N=[];for(let V=0;V<A;V++)N[V]=this.i(V)^I.i(V);return new l(N,this.h^I.h)};function we(I){const A=I.g.length+1,N=[];for(let V=0;V<A;V++)N[V]=I.i(V)<<1|I.i(V-1)>>>31;return new l(N,I.h)}function me(I,A){const N=A>>5;A%=32;const V=I.g.length-N,M=[];for(let G=0;G<V;G++)M[G]=A>0?I.i(G+N)>>>A|I.i(G+N+1)<<32-A:I.i(G+N);return new l(M,I.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,xw=r,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.B,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=p,l.fromString=_,Zs=l}).apply(typeof $E<"u"?$E:typeof self<"u"?self:typeof window<"u"?window:{});var ad=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Vw,au,Mw,wd,Hp,Uw,Fw,Bw;(function(){var n,e=Object.defineProperty;function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof ad=="object"&&ad];for(var y=0;y<c.length;++y){var v=c[y];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var r=t(this);function s(c,y){if(y)e:{var v=r;c=c.split(".");for(var R=0;R<c.length-1;R++){var q=c[R];if(!(q in v))break e;v=v[q]}c=c[c.length-1],R=v[c],y=y(R),y!=R&&y!=null&&e(v,c,{configurable:!0,writable:!0,value:y})}}s("Symbol.dispose",function(c){return c||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(c){return c||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(c){return c||function(y){var v=[],R;for(R in y)Object.prototype.hasOwnProperty.call(y,R)&&v.push([R,y[R]]);return v}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},l=this||self;function h(c){var y=typeof c;return y=="object"&&c!=null||y=="function"}function f(c,y,v){return c.call.apply(c.bind,arguments)}function p(c,y,v){return p=f,p.apply(null,arguments)}function _(c,y){var v=Array.prototype.slice.call(arguments,1);return function(){var R=v.slice();return R.push.apply(R,arguments),c.apply(this,R)}}function E(c,y){function v(){}v.prototype=y.prototype,c.Z=y.prototype,c.prototype=new v,c.prototype.constructor=c,c.Ob=function(R,q,Q){for(var fe=Array(arguments.length-2),Ze=2;Ze<arguments.length;Ze++)fe[Ze-2]=arguments[Ze];return y.prototype[q].apply(R,fe)}}var T=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?c=>c&&AsyncContext.Snapshot.wrap(c):c=>c;function S(c){const y=c.length;if(y>0){const v=Array(y);for(let R=0;R<y;R++)v[R]=c[R];return v}return[]}function C(c,y){for(let R=1;R<arguments.length;R++){const q=arguments[R];var v=typeof q;if(v=v!="object"?v:q?Array.isArray(q)?"array":v:"null",v=="array"||v=="object"&&typeof q.length=="number"){v=c.length||0;const Q=q.length||0;c.length=v+Q;for(let fe=0;fe<Q;fe++)c[v+fe]=q[fe]}else c.push(q)}}class U{constructor(y,v){this.i=y,this.j=v,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function L(c){l.setTimeout(()=>{throw c},0)}function z(){var c=I;let y=null;return c.g&&(y=c.g,c.g=c.g.next,c.g||(c.h=null),y.next=null),y}class ${constructor(){this.h=this.g=null}add(y,v){const R=Z.get();R.set(y,v),this.h?this.h.next=R:this.g=R,this.h=R}}var Z=new U(()=>new oe,c=>c.reset());class oe{constructor(){this.next=this.g=this.h=null}set(y,v){this.h=y,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let we,me=!1,I=new $,A=()=>{const c=Promise.resolve(void 0);we=()=>{c.then(N)}};function N(){for(var c;c=z();){try{c.h.call(c.g)}catch(v){L(v)}var y=Z;y.j(c),y.h<100&&(y.h++,c.next=y.g,y.g=c)}me=!1}function V(){this.u=this.u,this.C=this.C}V.prototype.u=!1,V.prototype.dispose=function(){this.u||(this.u=!0,this.N())},V.prototype[Symbol.dispose]=function(){this.dispose()},V.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function M(c,y){this.type=c,this.g=this.target=y,this.defaultPrevented=!1}M.prototype.h=function(){this.defaultPrevented=!0};var G=(function(){if(!l.addEventListener||!Object.defineProperty)return!1;var c=!1,y=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const v=()=>{};l.addEventListener("test",v,y),l.removeEventListener("test",v,y)}catch{}return c})();function D(c){return/^[\s\xa0]*$/.test(c)}function We(c,y){M.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c&&this.init(c,y)}E(We,M),We.prototype.init=function(c,y){const v=this.type=c.type,R=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;this.target=c.target||c.srcElement,this.g=y,y=c.relatedTarget,y||(v=="mouseover"?y=c.fromElement:v=="mouseout"&&(y=c.toElement)),this.relatedTarget=y,R?(this.clientX=R.clientX!==void 0?R.clientX:R.pageX,this.clientY=R.clientY!==void 0?R.clientY:R.pageY,this.screenX=R.screenX||0,this.screenY=R.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=c.pointerType,this.state=c.state,this.i=c,c.defaultPrevented&&We.Z.h.call(this)},We.prototype.h=function(){We.Z.h.call(this);const c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var ft="closure_listenable_"+(Math.random()*1e6|0),Xe=0;function Ge(c,y,v,R,q){this.listener=c,this.proxy=null,this.src=y,this.type=v,this.capture=!!R,this.ha=q,this.key=++Xe,this.da=this.fa=!1}function ie(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function _e(c,y,v){for(const R in c)y.call(v,c[R],R,c)}function ue(c,y){for(const v in c)y.call(void 0,c[v],v,c)}function j(c){const y={};for(const v in c)y[v]=c[v];return y}const te="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function be(c,y){let v,R;for(let q=1;q<arguments.length;q++){R=arguments[q];for(v in R)c[v]=R[v];for(let Q=0;Q<te.length;Q++)v=te[Q],Object.prototype.hasOwnProperty.call(R,v)&&(c[v]=R[v])}}function De(c){this.src=c,this.g={},this.h=0}De.prototype.add=function(c,y,v,R,q){const Q=c.toString();c=this.g[Q],c||(c=this.g[Q]=[],this.h++);const fe=ze(c,y,R,q);return fe>-1?(y=c[fe],v||(y.fa=!1)):(y=new Ge(y,this.src,Q,!!R,q),y.fa=v,c.push(y)),y};function xe(c,y){const v=y.type;if(v in c.g){var R=c.g[v],q=Array.prototype.indexOf.call(R,y,void 0),Q;(Q=q>=0)&&Array.prototype.splice.call(R,q,1),Q&&(ie(y),c.g[v].length==0&&(delete c.g[v],c.h--))}}function ze(c,y,v,R){for(let q=0;q<c.length;++q){const Q=c[q];if(!Q.da&&Q.listener==y&&Q.capture==!!v&&Q.ha==R)return q}return-1}var rt="closure_lm_"+(Math.random()*1e6|0),$e={};function _t(c,y,v,R,q){if(Array.isArray(y)){for(let Q=0;Q<y.length;Q++)_t(c,y[Q],v,R,q);return null}return v=fo(v),c&&c[ft]?c.J(y,v,h(R)?!!R.capture:!1,q):ln(c,y,v,!1,R,q)}function ln(c,y,v,R,q,Q){if(!y)throw Error("Invalid event type");const fe=h(q)?!!q.capture:!!q;let Ze=Xn(c);if(Ze||(c[rt]=Ze=new De(c)),v=Ze.add(y,v,R,fe,Q),v.proxy)return v;if(R=Ir(),v.proxy=R,R.src=c,R.listener=v,c.addEventListener)G||(q=fe),q===void 0&&(q=!1),c.addEventListener(y.toString(),R,q);else if(c.attachEvent)c.attachEvent(Fi(y.toString()),R);else if(c.addListener&&c.removeListener)c.addListener(R);else throw Error("addEventListener and attachEvent are unavailable.");return v}function Ir(){function c(v){return y.call(c.src,c.listener,v)}const y=ca;return c}function Wt(c,y,v,R,q){if(Array.isArray(y))for(var Q=0;Q<y.length;Q++)Wt(c,y[Q],v,R,q);else R=h(R)?!!R.capture:!!R,v=fo(v),c&&c[ft]?(c=c.i,Q=String(y).toString(),Q in c.g&&(y=c.g[Q],v=ze(y,v,R,q),v>-1&&(ie(y[v]),Array.prototype.splice.call(y,v,1),y.length==0&&(delete c.g[Q],c.h--)))):c&&(c=Xn(c))&&(y=c.g[y.toString()],c=-1,y&&(c=ze(y,v,R,q)),(v=c>-1?y[c]:null)&&jn(v))}function jn(c){if(typeof c!="number"&&c&&!c.da){var y=c.src;if(y&&y[ft])xe(y.i,c);else{var v=c.type,R=c.proxy;y.removeEventListener?y.removeEventListener(v,R,c.capture):y.detachEvent?y.detachEvent(Fi(v),R):y.addListener&&y.removeListener&&y.removeListener(R),(v=Xn(y))?(xe(v,c),v.h==0&&(v.src=null,y[rt]=null)):ie(c)}}}function Fi(c){return c in $e?$e[c]:$e[c]="on"+c}function ca(c,y){if(c.da)c=!0;else{y=new We(y,this);const v=c.listener,R=c.ha||c.src;c.fa&&jn(c),c=v.call(R,y)}return c}function Xn(c){return c=c[rt],c instanceof De?c:null}var Bi="__closure_events_fn_"+(Math.random()*1e9>>>0);function fo(c){return typeof c=="function"?c:(c[Bi]||(c[Bi]=function(y){return c.handleEvent(y)}),c[Bi])}function Ut(){V.call(this),this.i=new De(this),this.M=this,this.G=null}E(Ut,V),Ut.prototype[ft]=!0,Ut.prototype.removeEventListener=function(c,y,v,R){Wt(this,c,y,v,R)};function Ft(c,y){var v,R=c.G;if(R)for(v=[];R;R=R.G)v.push(R);if(c=c.M,R=y.type||y,typeof y=="string")y=new M(y,c);else if(y instanceof M)y.target=y.target||c;else{var q=y;y=new M(R,c),be(y,q)}q=!0;let Q,fe;if(v)for(fe=v.length-1;fe>=0;fe--)Q=y.g=v[fe],q=ur(Q,R,!0,y)&&q;if(Q=y.g=c,q=ur(Q,R,!0,y)&&q,q=ur(Q,R,!1,y)&&q,v)for(fe=0;fe<v.length;fe++)Q=y.g=v[fe],q=ur(Q,R,!1,y)&&q}Ut.prototype.N=function(){if(Ut.Z.N.call(this),this.i){var c=this.i;for(const y in c.g){const v=c.g[y];for(let R=0;R<v.length;R++)ie(v[R]);delete c.g[y],c.h--}}this.G=null},Ut.prototype.J=function(c,y,v,R){return this.i.add(String(c),y,!1,v,R)},Ut.prototype.K=function(c,y,v,R){return this.i.add(String(c),y,!0,v,R)};function ur(c,y,v,R){if(y=c.i.g[String(y)],!y)return!0;y=y.concat();let q=!0;for(let Q=0;Q<y.length;++Q){const fe=y[Q];if(fe&&!fe.da&&fe.capture==v){const Ze=fe.listener,Qt=fe.ha||fe.src;fe.fa&&xe(c.i,fe),q=Ze.call(Qt,R)!==!1&&q}}return q&&!R.defaultPrevented}function po(c,y){if(typeof c!="function")if(c&&typeof c.handleEvent=="function")c=p(c.handleEvent,c);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:l.setTimeout(c,y||0)}function mo(c){c.g=po(()=>{c.g=null,c.i&&(c.i=!1,mo(c))},c.l);const y=c.h;c.h=null,c.m.apply(null,y)}class Rr extends V{constructor(y,v){super(),this.m=y,this.l=v,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:mo(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Yn(c){V.call(this),this.h=c,this.g={}}E(Yn,V);var Es=[];function li(c){_e(c.g,function(y,v){this.g.hasOwnProperty(v)&&jn(y)},c),c.g={}}Yn.prototype.N=function(){Yn.Z.N.call(this),li(this)},Yn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var hn=l.JSON.stringify,Qn=l.JSON.parse,ui=class{stringify(c){return l.JSON.stringify(c,void 0)}parse(c){return l.JSON.parse(c,void 0)}};function ci(){}function vs(){}var di={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function kn(){M.call(this,"d")}E(kn,M);function Ts(){M.call(this,"c")}E(Ts,M);var Jn={},ji=null;function hi(){return ji=ji||new Ut}Jn.Ia="serverreachability";function zi(c){M.call(this,Jn.Ia,c)}E(zi,M);function Zn(c){const y=hi();Ft(y,new zi(y))}Jn.STAT_EVENT="statevent";function Ar(c,y){M.call(this,Jn.STAT_EVENT,c),this.stat=y}E(Ar,M);function Nt(c){const y=hi();Ft(y,new Ar(y,c))}Jn.Ja="timingevent";function go(c,y){M.call(this,Jn.Ja,c),this.size=y}E(go,M);function zr(c,y){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){c()},y)}function fi(){this.g=!0}fi.prototype.ua=function(){this.g=!1};function yo(c,y,v,R,q,Q){c.info(function(){if(c.g)if(Q){var fe="",Ze=Q.split("&");for(let At=0;At<Ze.length;At++){var Qt=Ze[At].split("=");if(Qt.length>1){const tn=Qt[0];Qt=Qt[1];const fr=tn.split("_");fe=fr.length>=2&&fr[1]=="type"?fe+(tn+"="+Qt+"&"):fe+(tn+"=redacted&")}}}else fe=null;else fe=Q;return"XMLHTTP REQ ("+R+") [attempt "+q+"]: "+y+`
`+v+`
`+fe})}function Gi(c,y,v,R,q,Q,fe){c.info(function(){return"XMLHTTP RESP ("+R+") [ attempt "+q+"]: "+y+`
`+v+`
`+Q+" "+fe})}function zn(c,y,v,R){c.info(function(){return"XMLHTTP TEXT ("+y+"): "+Hi(c,v)+(R?" "+R:"")})}function _o(c,y){c.info(function(){return"TIMEOUT: "+y})}fi.prototype.info=function(){};function Hi(c,y){if(!c.g)return y;if(!y)return null;try{const Q=JSON.parse(y);if(Q){for(c=0;c<Q.length;c++)if(Array.isArray(Q[c])){var v=Q[c];if(!(v.length<2)){var R=v[1];if(Array.isArray(R)&&!(R.length<1)){var q=R[0];if(q!="noop"&&q!="stop"&&q!="close")for(let fe=1;fe<R.length;fe++)R[fe]=""}}}}return hn(Q)}catch{return y}}var pi={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},x={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},H;function K(){}E(K,ci),K.prototype.g=function(){return new XMLHttpRequest},H=new K;function re(c){return encodeURIComponent(String(c))}function ce(c){var y=1;c=c.split(":");const v=[];for(;y>0&&c.length;)v.push(c.shift()),y--;return c.length&&v.push(c.join(":")),v}function Te(c,y,v,R){this.j=c,this.i=y,this.l=v,this.S=R||1,this.V=new Yn(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ve}function Ve(){this.i=null,this.g="",this.h=!1}var Ee={},Se={};function Re(c,y,v){c.M=1,c.A=qi(en(y)),c.u=v,c.R=!0,qe(c,null)}function qe(c,y){c.F=Date.now(),Dt(c),c.B=en(c.A);var v=c.B,R=c.S;Array.isArray(R)||(R=[String(R)]),Tl(v.i,"t",R),c.C=0,v=c.j.L,c.h=new Ve,c.g=oc(c.j,v?y:null,!c.u),c.P>0&&(c.O=new Rr(p(c.Y,c,c.g),c.P)),y=c.V,v=c.g,R=c.ba;var q="readystatechange";Array.isArray(q)||(q&&(Es[0]=q.toString()),q=Es);for(let Q=0;Q<q.length;Q++){const fe=_t(v,q[Q],R||y.handleEvent,!1,y.h||y);if(!fe)break;y.g[fe.key]=fe}y=c.J?j(c.J):{},c.u?(c.v||(c.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.B,c.v,c.u,y)):(c.v="GET",c.g.ea(c.B,c.v,null,y)),Zn(),yo(c.i,c.v,c.B,c.l,c.S,c.u)}Te.prototype.ba=function(c){c=c.target;const y=this.O;y&&Ei(c)==3?y.j():this.Y(c)},Te.prototype.Y=function(c){try{if(c==this.g)e:{const Ze=Ei(this.g),Qt=this.g.ya(),At=this.g.ca();if(!(Ze<3)&&(Ze!=3||this.g&&(this.h.h||this.g.la()||ic(this.g)))){this.K||Ze!=4||Qt==7||(Qt==8||At<=0?Zn(3):Zn(2)),qt(this);var y=this.g.ca();this.X=y;var v=ke(this);if(this.o=y==200,Gi(this.i,this.v,this.B,this.l,this.S,Ze,y),this.o){if(this.U&&!this.L){t:{if(this.g){var R,q=this.g;if((R=q.g?q.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!D(R)){var Q=R;break t}}Q=null}if(c=Q)zn(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Et(this,c);else{this.o=!1,this.m=3,Nt(12),$t(this),lt(this);break e}}if(this.R){c=!0;let tn;for(;!this.K&&this.C<v.length;)if(tn=it(this,v),tn==Se){Ze==4&&(this.m=4,Nt(14),c=!1),zn(this.i,this.l,null,"[Incomplete Response]");break}else if(tn==Ee){this.m=4,Nt(15),zn(this.i,this.l,v,"[Invalid Chunk]"),c=!1;break}else zn(this.i,this.l,tn,null),Et(this,tn);if(Ye(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ze!=4||v.length!=0||this.h.h||(this.m=1,Nt(16),c=!1),this.o=this.o&&c,!c)zn(this.i,this.l,v,"[Invalid Chunked Response]"),$t(this),lt(this);else if(v.length>0&&!this.W){this.W=!0;var fe=this.j;fe.g==this&&fe.aa&&!fe.P&&(fe.j.info("Great, no buffering proxy detected. Bytes received: "+v.length),Io(fe),fe.P=!0,Nt(11))}}else zn(this.i,this.l,v,null),Et(this,v);Ze==4&&$t(this),this.o&&!this.K&&(Ze==4?_a(this.j,this):(this.o=!1,Dt(this)))}else Sl(this.g),y==400&&v.indexOf("Unknown SID")>0?(this.m=3,Nt(12)):(this.m=0,Nt(13)),$t(this),lt(this)}}}catch{}finally{}};function ke(c){if(!Ye(c))return c.g.la();const y=ic(c.g);if(y==="")return"";let v="";const R=y.length,q=Ei(c.g)==4;if(!c.h.i){if(typeof TextDecoder>"u")return $t(c),lt(c),"";c.h.i=new l.TextDecoder}for(let Q=0;Q<R;Q++)c.h.h=!0,v+=c.h.i.decode(y[Q],{stream:!(q&&Q==R-1)});return y.length=0,c.h.g+=v,c.C=0,c.h.g}function Ye(c){return c.g?c.v=="GET"&&c.M!=2&&c.j.Aa:!1}function it(c,y){var v=c.C,R=y.indexOf(`
`,v);return R==-1?Se:(v=Number(y.substring(v,R)),isNaN(v)?Ee:(R+=1,R+v>y.length?Se:(y=y.slice(R,R+v),c.C=R+v,y)))}Te.prototype.cancel=function(){this.K=!0,$t(this)};function Dt(c){c.T=Date.now()+c.H,xt(c,c.H)}function xt(c,y){if(c.D!=null)throw Error("WatchDog timer not null");c.D=zr(p(c.aa,c),y)}function qt(c){c.D&&(l.clearTimeout(c.D),c.D=null)}Te.prototype.aa=function(){this.D=null;const c=Date.now();c-this.T>=0?(_o(this.i,this.B),this.M!=2&&(Zn(),Nt(17)),$t(this),this.m=2,lt(this)):xt(this,this.T-c)};function lt(c){c.j.I==0||c.K||_a(c.j,c)}function $t(c){qt(c);var y=c.O;y&&typeof y.dispose=="function"&&y.dispose(),c.O=null,li(c.V),c.g&&(y=c.g,c.g=null,y.abort(),y.dispose())}function Et(c,y){try{var v=c.j;if(v.I!=0&&(v.g==c||Hr(v.h,c))){if(!c.L&&Hr(v.h,c)&&v.I==3){try{var R=v.Ba.g.parse(y)}catch{R=null}if(Array.isArray(R)&&R.length==3){var q=R;if(q[0]==0){e:if(!v.v){if(v.g)if(v.g.F+3e3<c.F)ya(v),dr(v);else break e;wi(v),Nt(18)}}else v.xa=q[1],0<v.xa-v.K&&q[2]<37500&&v.F&&v.A==0&&!v.C&&(v.C=zr(p(v.Va,v),6e3));Gr(v.h)<=1&&v.ta&&(v.ta=void 0)}else hr(v,11)}else if((c.L||v.g==c)&&ya(v),!D(y))for(q=v.Ba.g.parse(y),y=0;y<q.length;y++){let At=q[y];const tn=At[0];if(!(tn<=v.K))if(v.K=tn,At=At[1],v.I==2)if(At[0]=="c"){v.M=At[1],v.ba=At[2];const fr=At[3];fr!=null&&(v.ka=fr,v.j.info("VER="+v.ka));const Qi=At[4];Qi!=null&&(v.za=Qi,v.j.info("SVER="+v.za));const Si=At[5];Si!=null&&typeof Si=="number"&&Si>0&&(R=1.5*Si,v.O=R,v.j.info("backChannelRequestTimeoutMs_="+R)),R=v;const Ii=c.g;if(Ii){const Ta=Ii.g?Ii.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ta){var Q=R.h;Q.g||Ta.indexOf("spdy")==-1&&Ta.indexOf("quic")==-1&&Ta.indexOf("h2")==-1||(Q.j=Q.l,Q.g=new Set,Q.h&&(er(Q,Q.h),Q.h=null))}if(R.G){const Al=Ii.g?Ii.g.getResponseHeader("X-HTTP-Session-Id"):null;Al&&(R.wa=Al,vt(R.J,R.G,Al))}}v.I=3,v.l&&v.l.ra(),v.aa&&(v.T=Date.now()-c.F,v.j.info("Handshake RTT: "+v.T+"ms")),R=v;var fe=c;if(R.na=Rl(R,R.L?R.ba:null,R.W),fe.L){Pr(R.h,fe);var Ze=fe,Qt=R.O;Qt&&(Ze.H=Qt),Ze.D&&(qt(Ze),Dt(Ze)),R.g=fe}else Dn(R);v.i.length>0&&Yi(v)}else At[0]!="stop"&&At[0]!="close"||hr(v,7);else v.I==3&&(At[0]=="stop"||At[0]=="close"?At[0]=="stop"?hr(v,7):ma(v):At[0]!="noop"&&v.l&&v.l.qa(At),v.A=0)}}Zn(4)}catch{}}var Wi=class{constructor(c,y){this.g=c,this.map=y}};function Gn(c){this.l=c||10,l.PerformanceNavigationTiming?(c=l.performance.getEntriesByType("navigation"),c=c.length>0&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function bn(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Gr(c){return c.h?1:c.g?c.g.size:0}function Hr(c,y){return c.h?c.h==y:c.g?c.g.has(y):!1}function er(c,y){c.g?c.g.add(y):c.h=y}function Pr(c,y){c.h&&c.h==y?c.h=null:c.g&&c.g.has(y)&&c.g.delete(y)}Gn.prototype.cancel=function(){if(this.i=fn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function fn(c){if(c.h!=null)return c.i.concat(c.h.G);if(c.g!=null&&c.g.size!==0){let y=c.i;for(const v of c.g.values())y=y.concat(v.G);return y}return S(c.i)}var ot=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function It(c,y){if(c){c=c.split("&");for(let v=0;v<c.length;v++){const R=c[v].indexOf("=");let q,Q=null;R>=0?(q=c[v].substring(0,R),Q=c[v].substring(R+1)):q=c[v],y(q,Q?decodeURIComponent(Q.replace(/\+/g," ")):"")}}}function Tn(c){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;c instanceof Tn?(this.l=c.l,Rt(this,c.j),this.o=c.o,this.g=c.g,Hn(this,c.u),this.h=c.h,Wr(this,wl(c.i)),this.m=c.m):c&&(y=String(c).match(ot))?(this.l=!1,Rt(this,y[1]||"",!0),this.o=Eo(y[2]||""),this.g=Eo(y[3]||"",!0),Hn(this,y[4]),this.h=Eo(y[5]||"",!0),Wr(this,y[6]||"",!0),this.m=Eo(y[7]||"")):(this.l=!1,this.i=new pt(null,this.l))}Tn.prototype.toString=function(){const c=[];var y=this.j;y&&c.push(vo(y,gl,!0),":");var v=this.g;return(v||y=="file")&&(c.push("//"),(y=this.o)&&c.push(vo(y,gl,!0),"@"),c.push(re(v).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.u,v!=null&&c.push(":",String(v))),(v=this.h)&&(this.g&&v.charAt(0)!="/"&&c.push("/"),c.push(vo(v,v.charAt(0)=="/"?To:yl,!0))),(v=this.i.toString())&&c.push("?",v),(v=this.m)&&c.push("#",vo(v,_l)),c.join("")},Tn.prototype.resolve=function(c){const y=en(this);let v=!!c.j;v?Rt(y,c.j):v=!!c.o,v?y.o=c.o:v=!!c.g,v?y.g=c.g:v=c.u!=null;var R=c.h;if(v)Hn(y,c.u);else if(v=!!c.h){if(R.charAt(0)!="/")if(this.g&&!this.h)R="/"+R;else{var q=y.h.lastIndexOf("/");q!=-1&&(R=y.h.slice(0,q+1)+R)}if(q=R,q==".."||q==".")R="";else if(q.indexOf("./")!=-1||q.indexOf("/.")!=-1){R=q.lastIndexOf("/",0)==0,q=q.split("/");const Q=[];for(let fe=0;fe<q.length;){const Ze=q[fe++];Ze=="."?R&&fe==q.length&&Q.push(""):Ze==".."?((Q.length>1||Q.length==1&&Q[0]!="")&&Q.pop(),R&&fe==q.length&&Q.push("")):(Q.push(Ze),R=!0)}R=Q.join("/")}else R=q}return v?y.h=R:v=c.i.toString()!=="",v?Wr(y,wl(c.i)):v=!!c.m,v&&(y.m=c.m),y};function en(c){return new Tn(c)}function Rt(c,y,v){c.j=v?Eo(y,!0):y,c.j&&(c.j=c.j.replace(/:$/,""))}function Hn(c,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);c.u=y}else c.u=null}function Wr(c,y,v){y instanceof pt?(c.i=y,ha(c.i,c.l)):(v||(y=vo(y,Lh)),c.i=new pt(y,c.l))}function vt(c,y,v){c.i.set(y,v)}function qi(c){return vt(c,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),c}function Eo(c,y){return c?y?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function vo(c,y,v){return typeof c=="string"?(c=encodeURI(c).replace(y,ml),v&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function ml(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var gl=/[#\/\?@]/g,yl=/[#\?:]/g,To=/[#\?]/g,Lh=/[#\?@]/g,_l=/#/g;function pt(c,y){this.h=this.g=null,this.i=c||null,this.j=!!y}function mi(c){c.g||(c.g=new Map,c.h=0,c.i&&It(c.i,function(y,v){c.add(decodeURIComponent(y.replace(/\+/g," ")),v)}))}n=pt.prototype,n.add=function(c,y){mi(this),this.i=null,c=gi(this,c);let v=this.g.get(c);return v||this.g.set(c,v=[]),v.push(y),this.h+=1,this};function El(c,y){mi(c),y=gi(c,y),c.g.has(y)&&(c.i=null,c.h-=c.g.get(y).length,c.g.delete(y))}function da(c,y){return mi(c),y=gi(c,y),c.g.has(y)}n.forEach=function(c,y){mi(this),this.g.forEach(function(v,R){v.forEach(function(q){c.call(y,q,R,this)},this)},this)};function vl(c,y){mi(c);let v=[];if(typeof y=="string")da(c,y)&&(v=v.concat(c.g.get(gi(c,y))));else for(c=Array.from(c.g.values()),y=0;y<c.length;y++)v=v.concat(c[y]);return v}n.set=function(c,y){return mi(this),this.i=null,c=gi(this,c),da(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[y]),this.h+=1,this},n.get=function(c,y){return c?(c=vl(this,c),c.length>0?String(c[0]):y):y};function Tl(c,y,v){El(c,y),v.length>0&&(c.i=null,c.g.set(gi(c,y),S(v)),c.h+=v.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],y=Array.from(this.g.keys());for(let R=0;R<y.length;R++){var v=y[R];const q=re(v);v=vl(this,v);for(let Q=0;Q<v.length;Q++){let fe=q;v[Q]!==""&&(fe+="="+re(v[Q])),c.push(fe)}}return this.i=c.join("&")};function wl(c){const y=new pt;return y.i=c.i,c.g&&(y.g=new Map(c.g),y.h=c.h),y}function gi(c,y){return y=String(y),c.j&&(y=y.toLowerCase()),y}function ha(c,y){y&&!c.j&&(mi(c),c.i=null,c.g.forEach(function(v,R){const q=R.toLowerCase();R!=q&&(El(this,R),Tl(this,q,v))},c)),c.j=y}function yi(c,y){const v=new fi;if(l.Image){const R=new Image;R.onload=_(wn,v,"TestLoadImage: loaded",!0,y,R),R.onerror=_(wn,v,"TestLoadImage: error",!1,y,R),R.onabort=_(wn,v,"TestLoadImage: abort",!1,y,R),R.ontimeout=_(wn,v,"TestLoadImage: timeout",!1,y,R),l.setTimeout(function(){R.ontimeout&&R.ontimeout()},1e4),R.src=c}else y(!1)}function _i(c,y){const v=new fi,R=new AbortController,q=setTimeout(()=>{R.abort(),wn(v,"TestPingServer: timeout",!1,y)},1e4);fetch(c,{signal:R.signal}).then(Q=>{clearTimeout(q),Q.ok?wn(v,"TestPingServer: ok",!0,y):wn(v,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(q),wn(v,"TestPingServer: error",!1,y)})}function wn(c,y,v,R,q){try{q&&(q.onload=null,q.onerror=null,q.onabort=null,q.ontimeout=null),R(v)}catch{}}function wo(){this.g=new ui}function $i(c){this.i=c.Sb||null,this.h=c.ab||!1}E($i,ci),$i.prototype.g=function(){return new cr(this.i,this.h)};function cr(c,y){Ut.call(this),this.H=c,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(cr,Ut),n=cr.prototype,n.open=function(c,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=c,this.D=y,this.readyState=1,qr(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};c&&(y.body=c),(this.H||l).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ws(this)),this.readyState=0},n.Pa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,qr(this)),this.g&&(this.readyState=3,qr(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;tc(this)}else c.text().then(this.Oa.bind(this),this.ga.bind(this))};function tc(c){c.j.read().then(c.Ma.bind(c)).catch(c.ga.bind(c))}n.Ma=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var y=c.value?c.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!c.done}))&&(this.response=this.responseText+=y)}c.done?ws(this):qr(this),this.readyState==3&&tc(this)}},n.Oa=function(c){this.g&&(this.response=this.responseText=c,ws(this))},n.Na=function(c){this.g&&(this.response=c,ws(this))},n.ga=function(){this.g&&ws(this)};function ws(c){c.readyState=4,c.l=null,c.j=null,c.B=null,qr(c)}n.setRequestHeader=function(c,y){this.A.append(c,y)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],y=this.h.entries();for(var v=y.next();!v.done;)v=v.value,c.push(v[0]+": "+v[1]),v=y.next();return c.join(`\r
`)};function qr(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(cr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function nc(c){let y="";return _e(c,function(v,R){y+=R,y+=":",y+=v,y+=`\r
`}),y}function fa(c,y,v){e:{for(R in v){var R=!1;break e}R=!0}R||(v=nc(v),typeof c=="string"?v!=null&&re(v):vt(c,y,v))}function Ct(c){Ut.call(this),this.headers=new Map,this.L=c||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(Ct,Ut);var rc=/^https?$/i,xh=["POST","PUT"];n=Ct.prototype,n.Fa=function(c){this.H=c},n.ea=function(c,y,v,R){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);y=y?y.toUpperCase():"GET",this.D=c,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():H.g(),this.g.onreadystatechange=T(p(this.Ca,this));try{this.B=!0,this.g.open(y,String(c),!0),this.B=!1}catch(Q){Ss(this,Q);return}if(c=v||"",v=new Map(this.headers),R)if(Object.getPrototypeOf(R)===Object.prototype)for(var q in R)v.set(q,R[q]);else if(typeof R.keys=="function"&&typeof R.get=="function")for(const Q of R.keys())v.set(Q,R.get(Q));else throw Error("Unknown input type for opt_headers: "+String(R));R=Array.from(v.keys()).find(Q=>Q.toLowerCase()=="content-type"),q=l.FormData&&c instanceof l.FormData,!(Array.prototype.indexOf.call(xh,y,void 0)>=0)||R||q||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Q,fe]of v)this.g.setRequestHeader(Q,fe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(c),this.v=!1}catch(Q){Ss(this,Q)}};function Ss(c,y){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=y,c.o=5,Is(c),Xi(c)}function Is(c){c.A||(c.A=!0,Ft(c,"complete"),Ft(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=c||7,Ft(this,"complete"),Ft(this,"abort"),Xi(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Xi(this,!0)),Ct.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Ki(this):this.Xa())},n.Xa=function(){Ki(this)};function Ki(c){if(c.h&&typeof a<"u"){if(c.v&&Ei(c)==4)setTimeout(c.Ca.bind(c),0);else if(Ft(c,"readystatechange"),Ei(c)==4){c.h=!1;try{const Q=c.ca();e:switch(Q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var v;if(!(v=y)){var R;if(R=Q===0){let fe=String(c.D).match(ot)[1]||null;!fe&&l.self&&l.self.location&&(fe=l.self.location.protocol.slice(0,-1)),R=!rc.test(fe?fe.toLowerCase():"")}v=R}if(v)Ft(c,"complete"),Ft(c,"success");else{c.o=6;try{var q=Ei(c)>2?c.g.statusText:""}catch{q=""}c.l=q+" ["+c.ca()+"]",Is(c)}}finally{Xi(c)}}}}function Xi(c,y){if(c.g){c.m&&(clearTimeout(c.m),c.m=null);const v=c.g;c.g=null,y||Ft(c,"ready");try{v.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Ei(c){return c.g?c.g.readyState:0}n.ca=function(){try{return Ei(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(c){if(this.g){var y=this.g.responseText;return c&&y.indexOf(c)==0&&(y=y.substring(c.length)),Qn(y)}};function ic(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.F){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Sl(c){const y={};c=(c.g&&Ei(c)>=2&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let R=0;R<c.length;R++){if(D(c[R]))continue;var v=ce(c[R]);const q=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const Q=y[q]||[];y[q]=Q,Q.push(v)}ue(y,function(R){return R.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function vi(c,y,v){return v&&v.internalChannelParams&&v.internalChannelParams[c]||y}function pa(c){this.za=0,this.i=[],this.j=new fi,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=vi("failFast",!1,c),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=vi("baseRetryDelayMs",5e3,c),this.Za=vi("retryDelaySeedMs",1e4,c),this.Ta=vi("forwardChannelMaxRetries",2,c),this.va=vi("forwardChannelRequestTimeoutMs",2e4,c),this.ma=c&&c.xmlHttpFactory||void 0,this.Ua=c&&c.Rb||void 0,this.Aa=c&&c.useFetchStreams||!1,this.O=void 0,this.L=c&&c.supportsCrossDomainXhr||!1,this.M="",this.h=new Gn(c&&c.concurrentRequestLimit),this.Ba=new wo,this.S=c&&c.fastHandshake||!1,this.R=c&&c.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=c&&c.Pb||!1,c&&c.ua&&this.j.ua(),c&&c.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&c&&c.detectBufferingProxy||!1,this.ia=void 0,c&&c.longPollingTimeout&&c.longPollingTimeout>0&&(this.ia=c.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=pa.prototype,n.ka=8,n.I=1,n.connect=function(c,y,v,R){Nt(0),this.W=c,this.H=y||{},v&&R!==void 0&&(this.H.OSID=v,this.H.OAID=R),this.F=this.X,this.J=Rl(this,null,this.W),Yi(this)};function ma(c){if(ga(c),c.I==3){var y=c.V++,v=en(c.J);if(vt(v,"SID",c.M),vt(v,"RID",y),vt(v,"TYPE","terminate"),Ti(c,v),y=new Te(c,c.j,y),y.M=2,y.A=qi(en(v)),v=!1,l.navigator&&l.navigator.sendBeacon)try{v=l.navigator.sendBeacon(y.A.toString(),"")}catch{}!v&&l.Image&&(new Image().src=y.A,v=!0),v||(y.g=oc(y.j,null),y.g.ea(y.A)),y.F=Date.now(),Dt(y)}Ro(c)}function dr(c){c.g&&(Io(c),c.g.cancel(),c.g=null)}function ga(c){dr(c),c.v&&(l.clearTimeout(c.v),c.v=null),ya(c),c.h.cancel(),c.m&&(typeof c.m=="number"&&l.clearTimeout(c.m),c.m=null)}function Yi(c){if(!bn(c.h)&&!c.m){c.m=!0;var y=c.Ea;we||A(),me||(we(),me=!0),I.add(y,c),c.D=0}}function sc(c,y){return Gr(c.h)>=c.h.j-(c.m?1:0)?!1:c.m?(c.i=y.G.concat(c.i),!0):c.I==1||c.I==2||c.D>=(c.Sa?0:c.Ta)?!1:(c.m=zr(p(c.Ea,c,y),Ea(c,c.D)),c.D++,!0)}n.Ea=function(c){if(this.m)if(this.m=null,this.I==1){if(!c){this.V=Math.floor(Math.random()*1e5),c=this.V++;const q=new Te(this,this.j,c);let Q=this.o;if(this.U&&(Q?(Q=j(Q),be(Q,this.U)):Q=this.U),this.u!==null||this.R||(q.J=Q,Q=null),this.S)e:{for(var y=0,v=0;v<this.i.length;v++){t:{var R=this.i[v];if("__data__"in R.map&&(R=R.map.__data__,typeof R=="string")){R=R.length;break t}R=void 0}if(R===void 0)break;if(y+=R,y>4096){y=v;break e}if(y===4096||v===this.i.length-1){y=v+1;break e}}y=1e3}else y=1e3;y=Il(this,q,y),v=en(this.J),vt(v,"RID",c),vt(v,"CVER",22),this.G&&vt(v,"X-HTTP-Session-Id",this.G),Ti(this,v),Q&&(this.R?y="headers="+re(nc(Q))+"&"+y:this.u&&fa(v,this.u,Q)),er(this.h,q),this.Ra&&vt(v,"TYPE","init"),this.S?(vt(v,"$req",y),vt(v,"SID","null"),q.U=!0,Re(q,v,null)):Re(q,v,y),this.I=2}}else this.I==3&&(c?So(this,c):this.i.length==0||bn(this.h)||So(this))};function So(c,y){var v;y?v=y.l:v=c.V++;const R=en(c.J);vt(R,"SID",c.M),vt(R,"RID",v),vt(R,"AID",c.K),Ti(c,R),c.u&&c.o&&fa(R,c.u,c.o),v=new Te(c,c.j,v,c.D+1),c.u===null&&(v.J=c.o),y&&(c.i=y.G.concat(c.i)),y=Il(c,v,1e3),v.H=Math.round(c.va*.5)+Math.round(c.va*.5*Math.random()),er(c.h,v),Re(v,R,y)}function Ti(c,y){c.H&&_e(c.H,function(v,R){vt(y,R,v)}),c.l&&_e({},function(v,R){vt(y,R,v)})}function Il(c,y,v){v=Math.min(c.i.length,v);const R=c.l?p(c.l.Ka,c.l,c):null;e:{var q=c.i;let Ze=-1;for(;;){const Qt=["count="+v];Ze==-1?v>0?(Ze=q[0].g,Qt.push("ofs="+Ze)):Ze=0:Qt.push("ofs="+Ze);let At=!0;for(let tn=0;tn<v;tn++){var Q=q[tn].g;const fr=q[tn].map;if(Q-=Ze,Q<0)Ze=Math.max(0,q[tn].g-100),At=!1;else try{Q="req"+Q+"_"||"";try{var fe=fr instanceof Map?fr:Object.entries(fr);for(const[Qi,Si]of fe){let Ii=Si;h(Si)&&(Ii=hn(Si)),Qt.push(Q+Qi+"="+encodeURIComponent(Ii))}}catch(Qi){throw Qt.push(Q+"type="+encodeURIComponent("_badmap")),Qi}}catch{R&&R(fr)}}if(At){fe=Qt.join("&");break e}}fe=void 0}return c=c.i.splice(0,v),y.G=c,fe}function Dn(c){if(!c.g&&!c.v){c.Y=1;var y=c.Da;we||A(),me||(we(),me=!0),I.add(y,c),c.A=0}}function wi(c){return c.g||c.v||c.A>=3?!1:(c.Y++,c.v=zr(p(c.Da,c),Ea(c,c.A)),c.A++,!0)}n.Da=function(){if(this.v=null,Rs(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var c=4*this.T;this.j.info("BP detection timer enabled: "+c),this.B=zr(p(this.Wa,this),c)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Nt(10),dr(this),Rs(this))};function Io(c){c.B!=null&&(l.clearTimeout(c.B),c.B=null)}function Rs(c){c.g=new Te(c,c.j,"rpc",c.Y),c.u===null&&(c.g.J=c.o),c.g.P=0;var y=en(c.na);vt(y,"RID","rpc"),vt(y,"SID",c.M),vt(y,"AID",c.K),vt(y,"CI",c.F?"0":"1"),!c.F&&c.ia&&vt(y,"TO",c.ia),vt(y,"TYPE","xmlhttp"),Ti(c,y),c.u&&c.o&&fa(y,c.u,c.o),c.O&&(c.g.H=c.O);var v=c.g;c=c.ba,v.M=1,v.A=qi(en(y)),v.u=null,v.R=!0,qe(v,c)}n.Va=function(){this.C!=null&&(this.C=null,dr(this),wi(this),Nt(19))};function ya(c){c.C!=null&&(l.clearTimeout(c.C),c.C=null)}function _a(c,y){var v=null;if(c.g==y){ya(c),Io(c),c.g=null;var R=2}else if(Hr(c.h,y))v=y.G,Pr(c.h,y),R=1;else return;if(c.I!=0){if(y.o)if(R==1){v=y.u?y.u.length:0,y=Date.now()-y.F;var q=c.D;R=hi(),Ft(R,new go(R,v)),Yi(c)}else Dn(c);else if(q=y.m,q==3||q==0&&y.X>0||!(R==1&&sc(c,y)||R==2&&wi(c)))switch(v&&v.length>0&&(y=c.h,y.i=y.i.concat(v)),q){case 1:hr(c,5);break;case 4:hr(c,10);break;case 3:hr(c,6);break;default:hr(c,2)}}}function Ea(c,y){let v=c.Qa+Math.floor(Math.random()*c.Za);return c.isActive()||(v*=2),v*y}function hr(c,y){if(c.j.info("Error code "+y),y==2){var v=p(c.bb,c),R=c.Ua;const q=!R;R=new Tn(R||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Rt(R,"https"),qi(R),q?yi(R.toString(),v):_i(R.toString(),v)}else Nt(2);c.I=0,c.l&&c.l.pa(y),Ro(c),ga(c)}n.bb=function(c){c?(this.j.info("Successfully pinged google.com"),Nt(2)):(this.j.info("Failed to ping google.com"),Nt(1))};function Ro(c){if(c.I=0,c.ja=[],c.l){const y=fn(c.h);(y.length!=0||c.i.length!=0)&&(C(c.ja,y),C(c.ja,c.i),c.h.i.length=0,S(c.i),c.i.length=0),c.l.oa()}}function Rl(c,y,v){var R=v instanceof Tn?en(v):new Tn(v);if(R.g!="")y&&(R.g=y+"."+R.g),Hn(R,R.u);else{var q=l.location;R=q.protocol,y=y?y+"."+q.hostname:q.hostname,q=+q.port;const Q=new Tn(null);R&&Rt(Q,R),y&&(Q.g=y),q&&Hn(Q,q),v&&(Q.h=v),R=Q}return v=c.G,y=c.wa,v&&y&&vt(R,v,y),vt(R,"VER",c.ka),Ti(c,R),R}function oc(c,y,v){if(y&&!c.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=c.Aa&&!c.ma?new Ct(new $i({ab:v})):new Ct(c.ma),y.Fa(c.L),y}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function ac(){}n=ac.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function va(){}va.prototype.g=function(c,y){return new Sn(c,y)};function Sn(c,y){Ut.call(this),this.g=new pa(y),this.l=c,this.h=y&&y.messageUrlParams||null,c=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(c?c["X-WebChannel-Content-Type"]=y.messageContentType:c={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(c?c["X-WebChannel-Client-Profile"]=y.sa:c={"X-WebChannel-Client-Profile":y.sa}),this.g.U=c,(c=y&&y.Qb)&&!D(c)&&(this.g.u=c),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!D(y)&&(this.g.G=y,c=this.h,c!==null&&y in c&&(c=this.h,y in c&&delete c[y])),this.j=new As(this)}E(Sn,Ut),Sn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Sn.prototype.close=function(){ma(this.g)},Sn.prototype.o=function(c){var y=this.g;if(typeof c=="string"){var v={};v.__data__=c,c=v}else this.v&&(v={},v.__data__=hn(c),c=v);y.i.push(new Wi(y.Ya++,c)),y.I==3&&Yi(y)},Sn.prototype.N=function(){this.g.l=null,delete this.j,ma(this.g),delete this.g,Sn.Z.N.call(this)};function lc(c){kn.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var y=c.__sm__;if(y){e:{for(const v in y){c=v;break e}c=void 0}(this.i=c)&&(c=this.i,y=y!==null&&c in y?y[c]:void 0),this.data=y}else this.data=c}E(lc,kn);function uc(){Ts.call(this),this.status=1}E(uc,Ts);function As(c){this.g=c}E(As,ac),As.prototype.ra=function(){Ft(this.g,"a")},As.prototype.qa=function(c){Ft(this.g,new lc(c))},As.prototype.pa=function(c){Ft(this.g,new uc)},As.prototype.oa=function(){Ft(this.g,"b")},va.prototype.createWebChannel=va.prototype.g,Sn.prototype.send=Sn.prototype.o,Sn.prototype.open=Sn.prototype.m,Sn.prototype.close=Sn.prototype.close,Bw=function(){return new va},Fw=function(){return hi()},Uw=Jn,Hp={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},pi.NO_ERROR=0,pi.TIMEOUT=8,pi.HTTP_ERROR=6,wd=pi,x.COMPLETE="complete",Mw=x,vs.EventType=di,di.OPEN="a",di.CLOSE="b",di.ERROR="c",di.MESSAGE="d",Ut.prototype.listen=Ut.prototype.J,au=vs,Ct.prototype.listenOnce=Ct.prototype.K,Ct.prototype.getLastError=Ct.prototype.Ha,Ct.prototype.getLastErrorCode=Ct.prototype.ya,Ct.prototype.getStatus=Ct.prototype.ca,Ct.prototype.getResponseJson=Ct.prototype.La,Ct.prototype.getResponseText=Ct.prototype.la,Ct.prototype.send=Ct.prototype.ea,Ct.prototype.setWithCredentials=Ct.prototype.Fa,Vw=Ct}).apply(typeof ad<"u"?ad:typeof self<"u"?self:typeof window<"u"?window:{});const KE="@firebase/firestore",XE="4.9.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Fn.UNAUTHENTICATED=new Fn(null),Fn.GOOGLE_CREDENTIALS=new Fn("google-credentials-uid"),Fn.FIRST_PARTY=new Fn("first-party-uid"),Fn.MOCK_USER=new Fn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ll="12.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jo=new Tm("@firebase/firestore");function Ga(){return Jo.logLevel}function Ie(n,...e){if(Jo.logLevel<=ut.DEBUG){const t=e.map(Vm);Jo.debug(`Firestore (${ll}): ${n}`,...t)}}function ms(n,...e){if(Jo.logLevel<=ut.ERROR){const t=e.map(Vm);Jo.error(`Firestore (${ll}): ${n}`,...t)}}function Zo(n,...e){if(Jo.logLevel<=ut.WARN){const t=e.map(Vm);Jo.warn(`Firestore (${ll}): ${n}`,...t)}}function Vm(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fe(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,jw(n,r,t)}function jw(n,e,t){let r=`FIRESTORE (${ll}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw ms(r),new Error(r)}function gt(n,e,t,r){let s="Unexpected state";typeof t=="string"?s=t:r=t,n||jw(e,s,r)}function Qe(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ee={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class pe extends Mi{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zw{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Gw{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Fn.UNAUTHENTICATED)))}shutdown(){}}class $k{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class Kk{constructor(e){this.t=e,this.currentUser=Fn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){gt(this.o===void 0,42304);let r=this.i;const s=f=>this.i!==r?(r=this.i,t(f)):Promise.resolve();let a=new Di;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Di,e.enqueueRetryable((()=>s(this.currentUser)))};const l=()=>{const f=a;e.enqueueRetryable((async()=>{await f.promise,await s(this.currentUser)}))},h=f=>{Ie("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit((f=>h(f))),setTimeout((()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?h(f):(Ie("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Di)}}),0),l()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(Ie("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(gt(typeof r.accessToken=="string",31837,{l:r}),new zw(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return gt(e===null||typeof e=="string",2055,{h:e}),new Fn(e)}}class Xk{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=Fn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Yk{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new Xk(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Fn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class YE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Qk{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Pn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){gt(this.o===void 0,3512);const r=a=>{a.error!=null&&Ie("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const l=a.token!==this.m;return this.m=a.token,Ie("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>r(a)))};const s=a=>{Ie("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>s(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?s(a):Ie("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new YE(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(gt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new YE(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jk(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dh{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=Jk(40);for(let a=0;a<s.length;++a)r.length<20&&s[a]<t&&(r+=e.charAt(s[a]%62))}return r}}function dt(n,e){return n<e?-1:n>e?1:0}function Wp(n,e){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++){const s=n.charAt(r),a=e.charAt(r);if(s!==a)return wp(s)===wp(a)?dt(s,a):wp(s)?1:-1}return dt(n.length,e.length)}const Zk=55296,eb=57343;function wp(n){const e=n.charCodeAt(0);return e>=Zk&&e<=eb}function Za(n,e,t){return n.length===e.length&&n.every(((r,s)=>t(r,e[s])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QE="__name__";class Ni{constructor(e,t,r){t===void 0?t=0:t>e.length&&Fe(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Fe(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Ni.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ni?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const a=Ni.compareSegments(e.get(s),t.get(s));if(a!==0)return a}return dt(e.length,t.length)}static compareSegments(e,t){const r=Ni.isNumericId(e),s=Ni.isNumericId(t);return r&&!s?-1:!r&&s?1:r&&s?Ni.extractNumericId(e).compare(Ni.extractNumericId(t)):Wp(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Zs.fromString(e.substring(4,e.length-2))}}class Pt extends Ni{construct(e,t,r){return new Pt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new pe(ee.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((s=>s.length>0)))}return new Pt(t)}static emptyPath(){return new Pt([])}}const tb=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class En extends Ni{construct(e,t,r){return new En(e,t,r)}static isValidIdentifier(e){return tb.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),En.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===QE}static keyField(){return new En([QE])}static fromServerFormat(e){const t=[];let r="",s=0;const a=()=>{if(r.length===0)throw new pe(ee.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;s<e.length;){const h=e[s];if(h==="\\"){if(s+1===e.length)throw new pe(ee.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[s+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new pe(ee.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=f,s+=2}else h==="`"?(l=!l,s++):h!=="."||l?(r+=h,s++):(a(),s++)}if(a(),l)throw new pe(ee.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new En(t)}static emptyPath(){return new En([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me{constructor(e){this.path=e}static fromPath(e){return new Me(Pt.fromString(e))}static fromName(e){return new Me(Pt.fromString(e).popFirst(5))}static empty(){return new Me(Pt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Pt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Pt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Me(new Pt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hw(n,e,t){if(!t)throw new pe(ee.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Ww(n,e,t,r){if(e===!0&&r===!0)throw new pe(ee.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function JE(n){if(!Me.isDocumentKey(n))throw new pe(ee.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function ZE(n){if(Me.isDocumentKey(n))throw new pe(ee.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function qw(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function hh(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Fe(12329,{type:typeof n})}function Nn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new pe(ee.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=hh(n);throw new pe(ee.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function nb(n,e){if(e<=0)throw new pe(ee.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function an(n,e){const t={typeString:n};return e&&(t.value=e),t}function Hu(n,e){if(!qw(n))throw new pe(ee.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const s=e[r].typeString,a="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const l=n[r];if(s&&typeof l!==s){t=`JSON field '${r}' must be a ${s}.`;break}if(a!==void 0&&l!==a.value){t=`Expected '${r}' field to equal '${a.value}'`;break}}if(t)throw new pe(ee.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ev=-62135596800,tv=1e6;class bt{static now(){return bt.fromMillis(Date.now())}static fromDate(e){return bt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*tv);return new bt(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new pe(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new pe(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<ev)throw new pe(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new pe(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/tv}_compareTo(e){return this.seconds===e.seconds?dt(this.nanoseconds,e.nanoseconds):dt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:bt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Hu(e,bt._jsonSchema))return new bt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-ev;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}bt._jsonSchemaVersion="firestore/timestamp/1.0",bt._jsonSchema={type:an("string",bt._jsonSchemaVersion),seconds:an("number"),nanoseconds:an("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class He{static fromTimestamp(e){return new He(e)}static min(){return new He(new bt(0,0))}static max(){return new He(new bt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pu=-1;function rb(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=He.fromTimestamp(r===1e9?new bt(t+1,0):new bt(t,r));return new ro(s,Me.empty(),e)}function ib(n){return new ro(n.readTime,n.key,Pu)}class ro{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new ro(He.min(),Me.empty(),Pu)}static max(){return new ro(He.max(),Me.empty(),Pu)}}function sb(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Me.comparator(n.documentKey,e.documentKey),t!==0?t:dt(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ob="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ab{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ul(n){if(n.code!==ee.FAILED_PRECONDITION||n.message!==ob)throw n;Ie("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Fe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ne(((r,s)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,s)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,s)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ne?t:ne.resolve(t)}catch(t){return ne.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ne.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ne.reject(t)}static resolve(e){return new ne(((t,r)=>{t(e)}))}static reject(e){return new ne(((t,r)=>{r(e)}))}static waitFor(e){return new ne(((t,r)=>{let s=0,a=0,l=!1;e.forEach((h=>{++s,h.next((()=>{++a,l&&a===s&&t()}),(f=>r(f)))})),l=!0,a===s&&t()}))}static or(e){let t=ne.resolve(!1);for(const r of e)t=t.next((s=>s?ne.resolve(s):r()));return t}static forEach(e,t){const r=[];return e.forEach(((s,a)=>{r.push(t.call(this,s,a))})),this.waitFor(r)}static mapArray(e,t){return new ne(((r,s)=>{const a=e.length,l=new Array(a);let h=0;for(let f=0;f<a;f++){const p=f;t(e[p]).next((_=>{l[p]=_,++h,h===a&&r(l)}),(_=>s(_)))}}))}static doWhile(e,t){return new ne(((r,s)=>{const a=()=>{e()===!0?t().next((()=>{a()}),s):r()};a()}))}}function lb(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function cl(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fh{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}fh.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mm=-1;function Wu(n){return n==null}function Vd(n){return n===0&&1/n==-1/0}function ub(n){return typeof n=="number"&&Number.isInteger(n)&&!Vd(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $w="";function cb(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=nv(e)),e=db(n.get(t),e);return nv(e)}function db(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const a=n.charAt(s);switch(a){case"\0":t+="";break;case $w:t+="";break;default:t+=a}}return t}function nv(n){return n+$w+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rv(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function co(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Kw(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e,t){this.comparator=e,this.root=t||An.EMPTY}insert(e,t){return new Ht(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,An.BLACK,null,null))}remove(e){return new Ht(this.comparator,this.root.remove(e,this.comparator).copy(null,null,An.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ld(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ld(this.root,e,this.comparator,!1)}getReverseIterator(){return new ld(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ld(this.root,e,this.comparator,!0)}}class ld{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&s&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class An{constructor(e,t,r,s,a){this.key=e,this.value=t,this.color=r??An.RED,this.left=s??An.EMPTY,this.right=a??An.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,a){return new An(e??this.key,t??this.value,r??this.color,s??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const a=r(e,s.key);return s=a<0?s.copy(null,null,null,s.left.insert(e,t,r),null):a===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return An.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return An.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,An.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,An.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Fe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Fe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Fe(27949);return e+(this.isRed()?0:1)}}An.EMPTY=null,An.RED=!0,An.BLACK=!1;An.EMPTY=new class{constructor(){this.size=0}get key(){throw Fe(57766)}get value(){throw Fe(16141)}get color(){throw Fe(16727)}get left(){throw Fe(29726)}get right(){throw Fe(36894)}copy(e,t,r,s,a){return this}insert(e,t,r){return new An(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e){this.comparator=e,this.data=new Ht(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new iv(this.data.getIterator())}getIteratorFrom(e){return new iv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof dn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,a=r.getNext().key;if(this.comparator(s,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new dn(this.comparator);return t.data=e,t}}class iv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er{constructor(e){this.fields=e,e.sort(En.comparator)}static empty(){return new Er([])}unionWith(e){let t=new dn(En.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Er(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Za(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new Xw("Invalid base64 string: "+a):a}})(e);return new vn(t)}static fromUint8Array(e){const t=(function(s){let a="";for(let l=0;l<s.length;++l)a+=String.fromCharCode(s[l]);return a})(e);return new vn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return dt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}vn.EMPTY_BYTE_STRING=new vn("");const hb=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function io(n){if(gt(!!n,39018),typeof n=="string"){let e=0;const t=hb.exec(n);if(gt(!!t,46558,{timestamp:n}),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Zt(n.seconds),nanos:Zt(n.nanos)}}function Zt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function so(n){return typeof n=="string"?vn.fromBase64String(n):vn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yw="server_timestamp",Qw="__type__",Jw="__previous_value__",Zw="__local_write_time__";function Um(n){var t,r;return((r=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[Qw])==null?void 0:r.stringValue)===Yw}function ph(n){const e=n.mapValue.fields[Jw];return Um(e)?ph(e):e}function Cu(n){const e=io(n.mapValue.fields[Zw].timestampValue);return new bt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fb{constructor(e,t,r,s,a,l,h,f,p,_){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=a,this.forceLongPolling=l,this.autoDetectLongPolling=h,this.longPollingOptions=f,this.useFetchStreams=p,this.isUsingEmulator=_}}const Md="(default)";class el{constructor(e,t){this.projectId=e,this.database=t||Md}static empty(){return new el("","")}get isDefaultDatabase(){return this.database===Md}isEqual(e){return e instanceof el&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e0="__type__",pb="__max__",ud={mapValue:{}},t0="__vector__",Ud="value";function oo(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Um(n)?4:gb(n)?9007199254740991:mb(n)?10:11:Fe(28295,{value:n})}function xi(n,e){if(n===e)return!0;const t=oo(n);if(t!==oo(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Cu(n).isEqual(Cu(e));case 3:return(function(s,a){if(typeof s.timestampValue=="string"&&typeof a.timestampValue=="string"&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const l=io(s.timestampValue),h=io(a.timestampValue);return l.seconds===h.seconds&&l.nanos===h.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(s,a){return so(s.bytesValue).isEqual(so(a.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(s,a){return Zt(s.geoPointValue.latitude)===Zt(a.geoPointValue.latitude)&&Zt(s.geoPointValue.longitude)===Zt(a.geoPointValue.longitude)})(n,e);case 2:return(function(s,a){if("integerValue"in s&&"integerValue"in a)return Zt(s.integerValue)===Zt(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const l=Zt(s.doubleValue),h=Zt(a.doubleValue);return l===h?Vd(l)===Vd(h):isNaN(l)&&isNaN(h)}return!1})(n,e);case 9:return Za(n.arrayValue.values||[],e.arrayValue.values||[],xi);case 10:case 11:return(function(s,a){const l=s.mapValue.fields||{},h=a.mapValue.fields||{};if(rv(l)!==rv(h))return!1;for(const f in l)if(l.hasOwnProperty(f)&&(h[f]===void 0||!xi(l[f],h[f])))return!1;return!0})(n,e);default:return Fe(52216,{left:n})}}function Nu(n,e){return(n.values||[]).find((t=>xi(t,e)))!==void 0}function tl(n,e){if(n===e)return 0;const t=oo(n),r=oo(e);if(t!==r)return dt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return dt(n.booleanValue,e.booleanValue);case 2:return(function(a,l){const h=Zt(a.integerValue||a.doubleValue),f=Zt(l.integerValue||l.doubleValue);return h<f?-1:h>f?1:h===f?0:isNaN(h)?isNaN(f)?0:-1:1})(n,e);case 3:return sv(n.timestampValue,e.timestampValue);case 4:return sv(Cu(n),Cu(e));case 5:return Wp(n.stringValue,e.stringValue);case 6:return(function(a,l){const h=so(a),f=so(l);return h.compareTo(f)})(n.bytesValue,e.bytesValue);case 7:return(function(a,l){const h=a.split("/"),f=l.split("/");for(let p=0;p<h.length&&p<f.length;p++){const _=dt(h[p],f[p]);if(_!==0)return _}return dt(h.length,f.length)})(n.referenceValue,e.referenceValue);case 8:return(function(a,l){const h=dt(Zt(a.latitude),Zt(l.latitude));return h!==0?h:dt(Zt(a.longitude),Zt(l.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return ov(n.arrayValue,e.arrayValue);case 10:return(function(a,l){var T,S,C,U;const h=a.fields||{},f=l.fields||{},p=(T=h[Ud])==null?void 0:T.arrayValue,_=(S=f[Ud])==null?void 0:S.arrayValue,E=dt(((C=p==null?void 0:p.values)==null?void 0:C.length)||0,((U=_==null?void 0:_.values)==null?void 0:U.length)||0);return E!==0?E:ov(p,_)})(n.mapValue,e.mapValue);case 11:return(function(a,l){if(a===ud.mapValue&&l===ud.mapValue)return 0;if(a===ud.mapValue)return 1;if(l===ud.mapValue)return-1;const h=a.fields||{},f=Object.keys(h),p=l.fields||{},_=Object.keys(p);f.sort(),_.sort();for(let E=0;E<f.length&&E<_.length;++E){const T=Wp(f[E],_[E]);if(T!==0)return T;const S=tl(h[f[E]],p[_[E]]);if(S!==0)return S}return dt(f.length,_.length)})(n.mapValue,e.mapValue);default:throw Fe(23264,{he:t})}}function sv(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return dt(n,e);const t=io(n),r=io(e),s=dt(t.seconds,r.seconds);return s!==0?s:dt(t.nanos,r.nanos)}function ov(n,e){const t=n.values||[],r=e.values||[];for(let s=0;s<t.length&&s<r.length;++s){const a=tl(t[s],r[s]);if(a)return a}return dt(t.length,r.length)}function nl(n){return qp(n)}function qp(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=io(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return so(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Me.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",s=!0;for(const a of t.values||[])s?s=!1:r+=",",r+=qp(a);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let s="{",a=!0;for(const l of r)a?a=!1:s+=",",s+=`${l}:${qp(t.fields[l])}`;return s+"}"})(n.mapValue):Fe(61005,{value:n})}function Sd(n){switch(oo(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=ph(n);return e?16+Sd(e):16;case 5:return 2*n.stringValue.length;case 6:return so(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((s,a)=>s+Sd(a)),0)})(n.arrayValue);case 10:case 11:return(function(r){let s=0;return co(r.fields,((a,l)=>{s+=a.length+Sd(l)})),s})(n.mapValue);default:throw Fe(13486,{value:n})}}function av(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function $p(n){return!!n&&"integerValue"in n}function Fm(n){return!!n&&"arrayValue"in n}function lv(n){return!!n&&"nullValue"in n}function uv(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Id(n){return!!n&&"mapValue"in n}function mb(n){var t,r;return((r=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[e0])==null?void 0:r.stringValue)===t0}function pu(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return co(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=pu(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=pu(n.arrayValue.values[t]);return e}return{...n}}function gb(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===pb}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(e){this.value=e}static empty(){return new Kn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Id(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=pu(t)}setAll(e){let t=En.emptyPath(),r={},s=[];e.forEach(((l,h)=>{if(!t.isImmediateParentOf(h)){const f=this.getFieldsMap(t);this.applyChanges(f,r,s),r={},s=[],t=h.popLast()}l?r[h.lastSegment()]=pu(l):s.push(h.lastSegment())}));const a=this.getFieldsMap(t);this.applyChanges(a,r,s)}delete(e){const t=this.field(e.popLast());Id(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return xi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];Id(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){co(t,((s,a)=>e[s]=a));for(const s of r)delete e[s]}clone(){return new Kn(pu(this.value))}}function n0(n){const e=[];return co(n.fields,((t,r)=>{const s=new En([t]);if(Id(r)){const a=n0(r.mapValue).fields;if(a.length===0)e.push(s);else for(const l of a)e.push(s.child(l))}else e.push(s)})),new Er(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(e,t,r,s,a,l,h){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.createTime=a,this.data=l,this.documentState=h}static newInvalidDocument(e){return new _n(e,0,He.min(),He.min(),He.min(),Kn.empty(),0)}static newFoundDocument(e,t,r,s){return new _n(e,1,t,He.min(),r,s,0)}static newNoDocument(e,t){return new _n(e,2,t,He.min(),He.min(),Kn.empty(),0)}static newUnknownDocument(e,t){return new _n(e,3,t,He.min(),He.min(),Kn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(He.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Kn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Kn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=He.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof _n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new _n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fd{constructor(e,t){this.position=e,this.inclusive=t}}function cv(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const a=e[s],l=n.position[s];if(a.field.isKeyField()?r=Me.comparator(Me.fromName(l.referenceValue),t.key):r=tl(l,t.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function dv(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!xi(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ku{constructor(e,t="asc"){this.field=e,this.dir=t}}function yb(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r0{}class sn extends r0{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new Eb(e,t,r):t==="array-contains"?new wb(e,r):t==="in"?new Sb(e,r):t==="not-in"?new Ib(e,r):t==="array-contains-any"?new Rb(e,r):new sn(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new vb(e,r):new Tb(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(tl(t,this.value)):t!==null&&oo(this.value)===oo(t)&&this.matchesComparison(tl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Fe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class oi extends r0{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new oi(e,t)}matches(e){return i0(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function i0(n){return n.op==="and"}function s0(n){return _b(n)&&i0(n)}function _b(n){for(const e of n.filters)if(e instanceof oi)return!1;return!0}function Kp(n){if(n instanceof sn)return n.field.canonicalString()+n.op.toString()+nl(n.value);if(s0(n))return n.filters.map((e=>Kp(e))).join(",");{const e=n.filters.map((t=>Kp(t))).join(",");return`${n.op}(${e})`}}function o0(n,e){return n instanceof sn?(function(r,s){return s instanceof sn&&r.op===s.op&&r.field.isEqual(s.field)&&xi(r.value,s.value)})(n,e):n instanceof oi?(function(r,s){return s instanceof oi&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce(((a,l,h)=>a&&o0(l,s.filters[h])),!0):!1})(n,e):void Fe(19439)}function a0(n){return n instanceof sn?(function(t){return`${t.field.canonicalString()} ${t.op} ${nl(t.value)}`})(n):n instanceof oi?(function(t){return t.op.toString()+" {"+t.getFilters().map(a0).join(" ,")+"}"})(n):"Filter"}class Eb extends sn{constructor(e,t,r){super(e,t,r),this.key=Me.fromName(r.referenceValue)}matches(e){const t=Me.comparator(e.key,this.key);return this.matchesComparison(t)}}class vb extends sn{constructor(e,t){super(e,"in",t),this.keys=l0("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class Tb extends sn{constructor(e,t){super(e,"not-in",t),this.keys=l0("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function l0(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((r=>Me.fromName(r.referenceValue)))}class wb extends sn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Fm(t)&&Nu(t.arrayValue,this.value)}}class Sb extends sn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Nu(this.value.arrayValue,t)}}class Ib extends sn{constructor(e,t){super(e,"not-in",t)}matches(e){if(Nu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Nu(this.value.arrayValue,t)}}class Rb extends sn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Fm(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>Nu(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ab{constructor(e,t=null,r=[],s=[],a=null,l=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=a,this.startAt=l,this.endAt=h,this.Te=null}}function hv(n,e=null,t=[],r=[],s=null,a=null,l=null){return new Ab(n,e,t,r,s,a,l)}function Bm(n){const e=Qe(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>Kp(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(a){return a.field.canonicalString()+a.dir})(r))).join(","),Wu(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>nl(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>nl(r))).join(",")),e.Te=t}return e.Te}function jm(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!yb(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!o0(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!dv(n.startAt,e.startAt)&&dv(n.endAt,e.endAt)}function Xp(n){return Me.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl{constructor(e,t=null,r=[],s=[],a=null,l="F",h=null,f=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=a,this.limitType=l,this.startAt=h,this.endAt=f,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Pb(n,e,t,r,s,a,l,h){return new dl(n,e,t,r,s,a,l,h)}function mh(n){return new dl(n)}function fv(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function u0(n){return n.collectionGroup!==null}function mu(n){const e=Qe(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),t.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let h=new dn(En.comparator);return l.filters.forEach((f=>{f.getFlattenedFilters().forEach((p=>{p.isInequality()&&(h=h.add(p.field))}))})),h})(e).forEach((a=>{t.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new ku(a,r))})),t.has(En.keyField().canonicalString())||e.Ie.push(new ku(En.keyField(),r))}return e.Ie}function Oi(n){const e=Qe(n);return e.Ee||(e.Ee=Cb(e,mu(n))),e.Ee}function Cb(n,e){if(n.limitType==="F")return hv(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((s=>{const a=s.dir==="desc"?"asc":"desc";return new ku(s.field,a)}));const t=n.endAt?new Fd(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Fd(n.startAt.position,n.startAt.inclusive):null;return hv(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Yp(n,e){const t=n.filters.concat([e]);return new dl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Bd(n,e,t){return new dl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function gh(n,e){return jm(Oi(n),Oi(e))&&n.limitType===e.limitType}function c0(n){return`${Bm(Oi(n))}|lt:${n.limitType}`}function Ha(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((s=>a0(s))).join(", ")}]`),Wu(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((s=>(function(l){return`${l.field.canonicalString()} (${l.dir})`})(s))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((s=>nl(s))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((s=>nl(s))).join(",")),`Target(${r})`})(Oi(n))}; limitType=${n.limitType})`}function yh(n,e){return e.isFoundDocument()&&(function(r,s){const a=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):Me.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)})(n,e)&&(function(r,s){for(const a of mu(r))if(!a.field.isKeyField()&&s.data.field(a.field)===null)return!1;return!0})(n,e)&&(function(r,s){for(const a of r.filters)if(!a.matches(s))return!1;return!0})(n,e)&&(function(r,s){return!(r.startAt&&!(function(l,h,f){const p=cv(l,h,f);return l.inclusive?p<=0:p<0})(r.startAt,mu(r),s)||r.endAt&&!(function(l,h,f){const p=cv(l,h,f);return l.inclusive?p>=0:p>0})(r.endAt,mu(r),s))})(n,e)}function Nb(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function d0(n){return(e,t)=>{let r=!1;for(const s of mu(n)){const a=kb(s,e,t);if(a!==0)return a;r=r||s.field.isKeyField()}return 0}}function kb(n,e,t){const r=n.field.isKeyField()?Me.comparator(e.key,t.key):(function(a,l,h){const f=l.data.field(a),p=h.data.field(a);return f!==null&&p!==null?tl(f,p):Fe(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Fe(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[s,a]of r)if(this.equalsFn(s,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return void(s[a]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){co(this.inner,((t,r)=>{for(const[s,a]of r)e(s,a)}))}isEmpty(){return Kw(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bb=new Ht(Me.comparator);function gs(){return bb}const h0=new Ht(Me.comparator);function lu(...n){let e=h0;for(const t of n)e=e.insert(t.key,t);return e}function f0(n){let e=h0;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function Go(){return gu()}function p0(){return gu()}function gu(){return new sa((n=>n.toString()),((n,e)=>n.isEqual(e)))}const Db=new Ht(Me.comparator),Ob=new dn(Me.comparator);function ht(...n){let e=Ob;for(const t of n)e=e.add(t);return e}const Lb=new dn(dt);function xb(){return Lb}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zm(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Vd(e)?"-0":e}}function m0(n){return{integerValue:""+n}}function g0(n,e){return ub(e)?m0(e):zm(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _h{constructor(){this._=void 0}}function Vb(n,e,t){return n instanceof jd?(function(s,a){const l={fields:{[Qw]:{stringValue:Yw},[Zw]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&Um(a)&&(a=ph(a)),a&&(l.fields[Jw]=a),{mapValue:l}})(t,e):n instanceof bu?_0(n,e):n instanceof Du?E0(n,e):(function(s,a){const l=y0(s,a),h=pv(l)+pv(s.Ae);return $p(l)&&$p(s.Ae)?m0(h):zm(s.serializer,h)})(n,e)}function Mb(n,e,t){return n instanceof bu?_0(n,e):n instanceof Du?E0(n,e):t}function y0(n,e){return n instanceof Ou?(function(r){return $p(r)||(function(a){return!!a&&"doubleValue"in a})(r)})(e)?e:{integerValue:0}:null}class jd extends _h{}class bu extends _h{constructor(e){super(),this.elements=e}}function _0(n,e){const t=v0(e);for(const r of n.elements)t.some((s=>xi(s,r)))||t.push(r);return{arrayValue:{values:t}}}class Du extends _h{constructor(e){super(),this.elements=e}}function E0(n,e){let t=v0(e);for(const r of n.elements)t=t.filter((s=>!xi(s,r)));return{arrayValue:{values:t}}}class Ou extends _h{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function pv(n){return Zt(n.integerValue||n.doubleValue)}function v0(n){return Fm(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ub{constructor(e,t){this.field=e,this.transform=t}}function Fb(n,e){return n.field.isEqual(e.field)&&(function(r,s){return r instanceof bu&&s instanceof bu||r instanceof Du&&s instanceof Du?Za(r.elements,s.elements,xi):r instanceof Ou&&s instanceof Ou?xi(r.Ae,s.Ae):r instanceof jd&&s instanceof jd})(n.transform,e.transform)}class Bb{constructor(e,t){this.version=e,this.transformResults=t}}class on{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new on}static exists(e){return new on(void 0,e)}static updateTime(e){return new on(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Rd(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Eh{}function T0(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new $u(n.key,on.none()):new qu(n.key,n.data,on.none());{const t=n.data,r=Kn.empty();let s=new dn(En.comparator);for(let a of e.fields)if(!s.has(a)){let l=t.field(a);l===null&&a.length>1&&(a=a.popLast(),l=t.field(a)),l===null?r.delete(a):r.set(a,l),s=s.add(a)}return new ho(n.key,r,new Er(s.toArray()),on.none())}}function jb(n,e,t){n instanceof qu?(function(s,a,l){const h=s.value.clone(),f=gv(s.fieldTransforms,a,l.transformResults);h.setAll(f),a.convertToFoundDocument(l.version,h).setHasCommittedMutations()})(n,e,t):n instanceof ho?(function(s,a,l){if(!Rd(s.precondition,a))return void a.convertToUnknownDocument(l.version);const h=gv(s.fieldTransforms,a,l.transformResults),f=a.data;f.setAll(w0(s)),f.setAll(h),a.convertToFoundDocument(l.version,f).setHasCommittedMutations()})(n,e,t):(function(s,a,l){a.convertToNoDocument(l.version).setHasCommittedMutations()})(0,e,t)}function yu(n,e,t,r){return n instanceof qu?(function(a,l,h,f){if(!Rd(a.precondition,l))return h;const p=a.value.clone(),_=yv(a.fieldTransforms,f,l);return p.setAll(_),l.convertToFoundDocument(l.version,p).setHasLocalMutations(),null})(n,e,t,r):n instanceof ho?(function(a,l,h,f){if(!Rd(a.precondition,l))return h;const p=yv(a.fieldTransforms,f,l),_=l.data;return _.setAll(w0(a)),_.setAll(p),l.convertToFoundDocument(l.version,_).setHasLocalMutations(),h===null?null:h.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((E=>E.field)))})(n,e,t,r):(function(a,l,h){return Rd(a.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):h})(n,e,t)}function zb(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),a=y0(r.transform,s||null);a!=null&&(t===null&&(t=Kn.empty()),t.set(r.field,a))}return t||null}function mv(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Za(r,s,((a,l)=>Fb(a,l)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class qu extends Eh{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class ho extends Eh{constructor(e,t,r,s,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function w0(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function gv(n,e,t){const r=new Map;gt(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let s=0;s<t.length;s++){const a=n[s],l=a.transform,h=e.data.field(a.field);r.set(a.field,Mb(l,h,t[s]))}return r}function yv(n,e,t){const r=new Map;for(const s of n){const a=s.transform,l=t.data.field(s.field);r.set(s.field,Vb(a,l,e))}return r}class $u extends Eh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class S0 extends Eh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gb{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const a=this.mutations[s];a.key.isEqual(e.key)&&jb(a,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=yu(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=yu(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=p0();return this.mutations.forEach((s=>{const a=e.get(s.key),l=a.overlayedDocument;let h=this.applyToLocalView(l,a.mutatedFields);h=t.has(s.key)?null:h;const f=T0(l,h);f!==null&&r.set(s.key,f),l.isValidDocument()||l.convertToNoDocument(He.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),ht())}isEqual(e){return this.batchId===e.batchId&&Za(this.mutations,e.mutations,((t,r)=>mv(t,r)))&&Za(this.baseMutations,e.baseMutations,((t,r)=>mv(t,r)))}}class Gm{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){gt(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=(function(){return Db})();const a=e.mutations;for(let l=0;l<a.length;l++)s=s.insert(a[l].key,r[l].version);return new Gm(e,t,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hb{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wb{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rn,mt;function I0(n){switch(n){case ee.OK:return Fe(64938);case ee.CANCELLED:case ee.UNKNOWN:case ee.DEADLINE_EXCEEDED:case ee.RESOURCE_EXHAUSTED:case ee.INTERNAL:case ee.UNAVAILABLE:case ee.UNAUTHENTICATED:return!1;case ee.INVALID_ARGUMENT:case ee.NOT_FOUND:case ee.ALREADY_EXISTS:case ee.PERMISSION_DENIED:case ee.FAILED_PRECONDITION:case ee.ABORTED:case ee.OUT_OF_RANGE:case ee.UNIMPLEMENTED:case ee.DATA_LOSS:return!0;default:return Fe(15467,{code:n})}}function R0(n){if(n===void 0)return ms("GRPC error has no .code"),ee.UNKNOWN;switch(n){case rn.OK:return ee.OK;case rn.CANCELLED:return ee.CANCELLED;case rn.UNKNOWN:return ee.UNKNOWN;case rn.DEADLINE_EXCEEDED:return ee.DEADLINE_EXCEEDED;case rn.RESOURCE_EXHAUSTED:return ee.RESOURCE_EXHAUSTED;case rn.INTERNAL:return ee.INTERNAL;case rn.UNAVAILABLE:return ee.UNAVAILABLE;case rn.UNAUTHENTICATED:return ee.UNAUTHENTICATED;case rn.INVALID_ARGUMENT:return ee.INVALID_ARGUMENT;case rn.NOT_FOUND:return ee.NOT_FOUND;case rn.ALREADY_EXISTS:return ee.ALREADY_EXISTS;case rn.PERMISSION_DENIED:return ee.PERMISSION_DENIED;case rn.FAILED_PRECONDITION:return ee.FAILED_PRECONDITION;case rn.ABORTED:return ee.ABORTED;case rn.OUT_OF_RANGE:return ee.OUT_OF_RANGE;case rn.UNIMPLEMENTED:return ee.UNIMPLEMENTED;case rn.DATA_LOSS:return ee.DATA_LOSS;default:return Fe(39323,{code:n})}}(mt=rn||(rn={}))[mt.OK=0]="OK",mt[mt.CANCELLED=1]="CANCELLED",mt[mt.UNKNOWN=2]="UNKNOWN",mt[mt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",mt[mt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",mt[mt.NOT_FOUND=5]="NOT_FOUND",mt[mt.ALREADY_EXISTS=6]="ALREADY_EXISTS",mt[mt.PERMISSION_DENIED=7]="PERMISSION_DENIED",mt[mt.UNAUTHENTICATED=16]="UNAUTHENTICATED",mt[mt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",mt[mt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",mt[mt.ABORTED=10]="ABORTED",mt[mt.OUT_OF_RANGE=11]="OUT_OF_RANGE",mt[mt.UNIMPLEMENTED=12]="UNIMPLEMENTED",mt[mt.INTERNAL=13]="INTERNAL",mt[mt.UNAVAILABLE=14]="UNAVAILABLE",mt[mt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qb(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $b=new Zs([4294967295,4294967295],0);function _v(n){const e=qb().encode(n),t=new xw;return t.update(e),new Uint8Array(t.digest())}function Ev(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Zs([t,r],0),new Zs([s,a],0)]}class Hm{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new uu(`Invalid padding: ${t}`);if(r<0)throw new uu(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new uu(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new uu(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Zs.fromNumber(this.ge)}ye(e,t,r){let s=e.add(t.multiply(Zs.fromNumber(r)));return s.compare($b)===1&&(s=new Zs([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=_v(e),[r,s]=Ev(t);for(let a=0;a<this.hashCount;a++){const l=this.ye(r,s,a);if(!this.we(l))return!1}return!0}static create(e,t,r){const s=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),l=new Hm(a,s,t);return r.forEach((h=>l.insert(h))),l}insert(e){if(this.ge===0)return;const t=_v(e),[r,s]=Ev(t);for(let a=0;a<this.hashCount;a++){const l=this.ye(r,s,a);this.Se(l)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class uu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vh{constructor(e,t,r,s,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,Ku.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new vh(He.min(),s,new Ht(dt),gs(),ht())}}class Ku{constructor(e,t,r,s,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Ku(r,t,ht(),ht(),ht())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ad{constructor(e,t,r,s){this.be=e,this.removedTargetIds=t,this.key=r,this.De=s}}class A0{constructor(e,t){this.targetId=e,this.Ce=t}}class P0{constructor(e,t,r=vn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class vv{constructor(){this.ve=0,this.Fe=Tv(),this.Me=vn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ht(),t=ht(),r=ht();return this.Fe.forEach(((s,a)=>{switch(a){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:Fe(38017,{changeType:a})}})),new Ku(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=Tv()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,gt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class Kb{constructor(e){this.Ge=e,this.ze=new Map,this.je=gs(),this.Je=cd(),this.He=cd(),this.Ye=new Ht(dt)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:Fe(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,s)=>{this.rt(s)&&t(s)}))}st(e){const t=e.targetId,r=e.Ce.count,s=this.ot(t);if(s){const a=s.target;if(Xp(a))if(r===0){const l=new Me(a.path);this.et(t,l,_n.newNoDocument(l,He.min()))}else gt(r===1,20013,{expectedCount:r});else{const l=this._t(t);if(l!==r){const h=this.ut(e),f=h?this.ct(h,e,l):1;if(f!==0){this.it(t);const p=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,p)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:a=0}=t;let l,h;try{l=so(r).toUint8Array()}catch(f){if(f instanceof Xw)return Zo("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{h=new Hm(l,s,a)}catch(f){return Zo(f instanceof uu?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return h.ge===0?null:h}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let s=0;return r.forEach((a=>{const l=this.Ge.ht(),h=`projects/${l.projectId}/databases/${l.database}/documents/${a.path.canonicalString()}`;e.mightContain(h)||(this.et(t,a,null),s++)})),s}Tt(e){const t=new Map;this.ze.forEach(((a,l)=>{const h=this.ot(l);if(h){if(a.current&&Xp(h.target)){const f=new Me(h.target.path);this.It(f).has(l)||this.Et(l,f)||this.et(l,f,_n.newNoDocument(f,e))}a.Be&&(t.set(l,a.ke()),a.qe())}}));let r=ht();this.He.forEach(((a,l)=>{let h=!0;l.forEachWhile((f=>{const p=this.ot(f);return!p||p.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)})),h&&(r=r.add(a))})),this.je.forEach(((a,l)=>l.setReadTime(e)));const s=new vh(e,t,this.Ye,this.je,r);return this.je=gs(),this.Je=cd(),this.He=cd(),this.Ye=new Ht(dt),s}Xe(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,t)?s.Qe(t,1):s.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new vv,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new dn(dt),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new dn(dt),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||Ie("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new vv),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function cd(){return new Ht(Me.comparator)}function Tv(){return new Ht(Me.comparator)}const Xb={asc:"ASCENDING",desc:"DESCENDING"},Yb={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Qb={and:"AND",or:"OR"};class Jb{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Qp(n,e){return n.useProto3Json||Wu(e)?e:{value:e}}function zd(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function C0(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Zb(n,e){return zd(n,e.toTimestamp())}function Tr(n){return gt(!!n,49232),He.fromTimestamp((function(t){const r=io(t);return new bt(r.seconds,r.nanos)})(n))}function Wm(n,e){return Jp(n,e).canonicalString()}function Jp(n,e){const t=(function(s){return new Pt(["projects",s.projectId,"databases",s.database])})(n).child("documents");return e===void 0?t:t.child(e)}function N0(n){const e=Pt.fromString(n);return gt(x0(e),10190,{key:e.toString()}),e}function Gd(n,e){return Wm(n.databaseId,e.path)}function _u(n,e){const t=N0(e);if(t.get(1)!==n.databaseId.projectId)throw new pe(ee.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new pe(ee.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Me(b0(t))}function k0(n,e){return Wm(n.databaseId,e)}function eD(n){const e=N0(n);return e.length===4?Pt.emptyPath():b0(e)}function Zp(n){return new Pt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function b0(n){return gt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function wv(n,e,t){return{name:Gd(n,e),fields:t.value.mapValue.fields}}function tD(n,e){return"found"in e?(function(r,s){gt(!!s.found,43571),s.found.name,s.found.updateTime;const a=_u(r,s.found.name),l=Tr(s.found.updateTime),h=s.found.createTime?Tr(s.found.createTime):He.min(),f=new Kn({mapValue:{fields:s.found.fields}});return _n.newFoundDocument(a,l,h,f)})(n,e):"missing"in e?(function(r,s){gt(!!s.missing,3894),gt(!!s.readTime,22933);const a=_u(r,s.missing),l=Tr(s.readTime);return _n.newNoDocument(a,l)})(n,e):Fe(7234,{result:e})}function nD(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:Fe(39313,{state:p})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],a=(function(p,_){return p.useProto3Json?(gt(_===void 0||typeof _=="string",58123),vn.fromBase64String(_||"")):(gt(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),vn.fromUint8Array(_||new Uint8Array))})(n,e.targetChange.resumeToken),l=e.targetChange.cause,h=l&&(function(p){const _=p.code===void 0?ee.UNKNOWN:R0(p.code);return new pe(_,p.message||"")})(l);t=new P0(r,s,a,h||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=_u(n,r.document.name),a=Tr(r.document.updateTime),l=r.document.createTime?Tr(r.document.createTime):He.min(),h=new Kn({mapValue:{fields:r.document.fields}}),f=_n.newFoundDocument(s,a,l,h),p=r.targetIds||[],_=r.removedTargetIds||[];t=new Ad(p,_,f.key,f)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=_u(n,r.document),a=r.readTime?Tr(r.readTime):He.min(),l=_n.newNoDocument(s,a),h=r.removedTargetIds||[];t=new Ad([],h,l.key,l)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=_u(n,r.document),a=r.removedTargetIds||[];t=new Ad([],a,s,null)}else{if(!("filter"in e))return Fe(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:a}=r,l=new Wb(s,a),h=r.targetId;t=new A0(h,l)}}return t}function D0(n,e){let t;if(e instanceof qu)t={update:wv(n,e.key,e.value)};else if(e instanceof $u)t={delete:Gd(n,e.key)};else if(e instanceof ho)t={update:wv(n,e.key,e.data),updateMask:dD(e.fieldMask)};else{if(!(e instanceof S0))return Fe(16599,{Vt:e.type});t={verify:Gd(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(a,l){const h=l.transform;if(h instanceof jd)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof bu)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof Du)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof Ou)return{fieldPath:l.field.canonicalString(),increment:h.Ae};throw Fe(20930,{transform:l.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(s,a){return a.updateTime!==void 0?{updateTime:Zb(s,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Fe(27497)})(n,e.precondition)),t}function rD(n,e){return n&&n.length>0?(gt(e!==void 0,14353),n.map((t=>(function(s,a){let l=s.updateTime?Tr(s.updateTime):Tr(a);return l.isEqual(He.min())&&(l=Tr(a)),new Bb(l,s.transformResults||[])})(t,e)))):[]}function iD(n,e){return{documents:[k0(n,e.path)]}}function sD(n,e){const t={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=k0(n,s);const a=(function(p){if(p.length!==0)return L0(oi.create(p,"and"))})(e.filters);a&&(t.structuredQuery.where=a);const l=(function(p){if(p.length!==0)return p.map((_=>(function(T){return{field:Wa(T.field),direction:lD(T.dir)}})(_)))})(e.orderBy);l&&(t.structuredQuery.orderBy=l);const h=Qp(n,e.limit);return h!==null&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(e.endAt)),{ft:t,parent:s}}function oD(n){let e=eD(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){gt(r===1,65062);const _=t.from[0];_.allDescendants?s=_.collectionId:e=e.child(_.collectionId)}let a=[];t.where&&(a=(function(E){const T=O0(E);return T instanceof oi&&s0(T)?T.getFilters():[T]})(t.where));let l=[];t.orderBy&&(l=(function(E){return E.map((T=>(function(C){return new ku(qa(C.field),(function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(C.direction))})(T)))})(t.orderBy));let h=null;t.limit&&(h=(function(E){let T;return T=typeof E=="object"?E.value:E,Wu(T)?null:T})(t.limit));let f=null;t.startAt&&(f=(function(E){const T=!!E.before,S=E.values||[];return new Fd(S,T)})(t.startAt));let p=null;return t.endAt&&(p=(function(E){const T=!E.before,S=E.values||[];return new Fd(S,T)})(t.endAt)),Pb(e,s,l,a,h,"F",f,p)}function aD(n,e){const t=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Fe(28987,{purpose:s})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function O0(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=qa(t.unaryFilter.field);return sn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=qa(t.unaryFilter.field);return sn.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=qa(t.unaryFilter.field);return sn.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=qa(t.unaryFilter.field);return sn.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Fe(61313);default:return Fe(60726)}})(n):n.fieldFilter!==void 0?(function(t){return sn.create(qa(t.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Fe(58110);default:return Fe(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return oi.create(t.compositeFilter.filters.map((r=>O0(r))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Fe(1026)}})(t.compositeFilter.op))})(n):Fe(30097,{filter:n})}function lD(n){return Xb[n]}function uD(n){return Yb[n]}function cD(n){return Qb[n]}function Wa(n){return{fieldPath:n.canonicalString()}}function qa(n){return En.fromServerFormat(n.fieldPath)}function L0(n){return n instanceof sn?(function(t){if(t.op==="=="){if(uv(t.value))return{unaryFilter:{field:Wa(t.field),op:"IS_NAN"}};if(lv(t.value))return{unaryFilter:{field:Wa(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(uv(t.value))return{unaryFilter:{field:Wa(t.field),op:"IS_NOT_NAN"}};if(lv(t.value))return{unaryFilter:{field:Wa(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Wa(t.field),op:uD(t.op),value:t.value}}})(n):n instanceof oi?(function(t){const r=t.getFilters().map((s=>L0(s)));return r.length===1?r[0]:{compositeFilter:{op:cD(t.op),filters:r}}})(n):Fe(54877,{filter:n})}function dD(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function x0(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs{constructor(e,t,r,s,a=He.min(),l=He.min(),h=vn.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=h,this.expectedCount=f}withSequenceNumber(e){return new Xs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Xs(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Xs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Xs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hD{constructor(e){this.yt=e}}function fD(n){const e=oD({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Bd(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pD{constructor(){this.Cn=new mD}addToCollectionParentIndex(e,t){return this.Cn.add(t),ne.resolve()}getCollectionParents(e,t){return ne.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return ne.resolve()}deleteFieldIndex(e,t){return ne.resolve()}deleteAllFieldIndexes(e){return ne.resolve()}createTargetIndexes(e,t){return ne.resolve()}getDocumentsMatchingTarget(e,t){return ne.resolve(null)}getIndexType(e,t){return ne.resolve(0)}getFieldIndexes(e,t){return ne.resolve([])}getNextCollectionGroupToUpdate(e){return ne.resolve(null)}getMinOffset(e,t){return ne.resolve(ro.min())}getMinOffsetFromCollectionGroup(e,t){return ne.resolve(ro.min())}updateCollectionGroup(e,t,r){return ne.resolve()}updateIndexEntries(e,t){return ne.resolve()}}class mD{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new dn(Pt.comparator),a=!s.has(r);return this.index[t]=s.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new dn(Pt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},V0=41943040;class ar{static withCacheSize(e){return new ar(e,ar.DEFAULT_COLLECTION_PERCENTILE,ar.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ar.DEFAULT_COLLECTION_PERCENTILE=10,ar.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ar.DEFAULT=new ar(V0,ar.DEFAULT_COLLECTION_PERCENTILE,ar.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ar.DISABLED=new ar(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rl{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new rl(0)}static cr(){return new rl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iv="LruGarbageCollector",gD=1048576;function Rv([n,e],[t,r]){const s=dt(n,t);return s===0?dt(e,r):s}class yD{constructor(e){this.Ir=e,this.buffer=new dn(Rv),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Rv(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class _D{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Ie(Iv,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){cl(t)?Ie(Iv,"Ignoring IndexedDB error during garbage collection: ",t):await ul(t)}await this.Vr(3e5)}))}}class ED{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return ne.resolve(fh.ce);const r=new yD(t);return this.mr.forEachTarget(e,(s=>r.Ar(s.sequenceNumber))).next((()=>this.mr.pr(e,(s=>r.Ar(s))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Ie("LruGarbageCollector","Garbage collection skipped; disabled"),ne.resolve(Sv)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(Ie("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Sv):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,s,a,l,h,f,p;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(Ie("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),s=this.params.maximumSequenceNumbersToCollect):s=E,l=Date.now(),this.nthSequenceNumber(e,s)))).next((E=>(r=E,h=Date.now(),this.removeTargets(e,r,t)))).next((E=>(a=E,f=Date.now(),this.removeOrphanedDocuments(e,r)))).next((E=>(p=Date.now(),Ga()<=ut.DEBUG&&Ie("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-_}ms
	Determined least recently used ${s} in `+(h-l)+`ms
	Removed ${a} targets in `+(f-h)+`ms
	Removed ${E} documents in `+(p-f)+`ms
Total Duration: ${p-_}ms`),ne.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:a,documentsRemoved:E}))))}}function vD(n,e){return new ED(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TD{constructor(){this.changes=new sa((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,_n.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?ne.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wD{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SD{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((s=>(r=s,this.remoteDocumentCache.getEntry(e,t)))).next((s=>(r!==null&&yu(r.mutation,s,Er.empty(),bt.now()),s)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,ht()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=ht()){const s=Go();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,r).next((a=>{let l=lu();return a.forEach(((h,f)=>{l=l.insert(h,f.overlayedDocument)})),l}))))}getOverlayedDocuments(e,t){const r=Go();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,ht())))}populateOverlays(e,t,r){const s=[];return r.forEach((a=>{t.has(a)||s.push(a)})),this.documentOverlayCache.getOverlays(e,s).next((a=>{a.forEach(((l,h)=>{t.set(l,h)}))}))}computeViews(e,t,r,s){let a=gs();const l=gu(),h=(function(){return gu()})();return t.forEach(((f,p)=>{const _=r.get(p.key);s.has(p.key)&&(_===void 0||_.mutation instanceof ho)?a=a.insert(p.key,p):_!==void 0?(l.set(p.key,_.mutation.getFieldMask()),yu(_.mutation,p,_.mutation.getFieldMask(),bt.now())):l.set(p.key,Er.empty())})),this.recalculateAndSaveOverlays(e,a).next((f=>(f.forEach(((p,_)=>l.set(p,_))),t.forEach(((p,_)=>h.set(p,new wD(_,l.get(p)??null)))),h)))}recalculateAndSaveOverlays(e,t){const r=gu();let s=new Ht(((l,h)=>l-h)),a=ht();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((l=>{for(const h of l)h.keys().forEach((f=>{const p=t.get(f);if(p===null)return;let _=r.get(f)||Er.empty();_=h.applyToLocalView(p,_),r.set(f,_);const E=(s.get(h.batchId)||ht()).add(f);s=s.insert(h.batchId,E)}))})).next((()=>{const l=[],h=s.getReverseIterator();for(;h.hasNext();){const f=h.getNext(),p=f.key,_=f.value,E=p0();_.forEach((T=>{if(!a.has(T)){const S=T0(t.get(T),r.get(T));S!==null&&E.set(T,S),a=a.add(T)}})),l.push(this.documentOverlayCache.saveOverlays(e,p,E))}return ne.waitFor(l)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,s){return(function(l){return Me.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):u0(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,s):this.getDocumentsMatchingCollectionQuery(e,t,r,s)}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next((a=>{const l=s-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-a.size):ne.resolve(Go());let h=Pu,f=a;return l.next((p=>ne.forEach(p,((_,E)=>(h<E.largestBatchId&&(h=E.largestBatchId),a.get(_)?ne.resolve():this.remoteDocumentCache.getEntry(e,_).next((T=>{f=f.insert(_,T)}))))).next((()=>this.populateOverlays(e,p,a))).next((()=>this.computeViews(e,f,p,ht()))).next((_=>({batchId:h,changes:f0(_)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Me(t)).next((r=>{let s=lu();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,s){const a=t.collectionGroup;let l=lu();return this.indexManager.getCollectionParents(e,a).next((h=>ne.forEach(h,(f=>{const p=(function(E,T){return new dl(T,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(t,f.child(a));return this.getDocumentsMatchingCollectionQuery(e,p,r,s).next((_=>{_.forEach(((E,T)=>{l=l.insert(E,T)}))}))})).next((()=>l))))}getDocumentsMatchingCollectionQuery(e,t,r,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((l=>(a=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,a,s)))).next((l=>{a.forEach(((f,p)=>{const _=p.getKey();l.get(_)===null&&(l=l.insert(_,_n.newInvalidDocument(_)))}));let h=lu();return l.forEach(((f,p)=>{const _=a.get(f);_!==void 0&&yu(_.mutation,p,Er.empty(),bt.now()),yh(t,p)&&(h=h.insert(f,p))})),h}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ID{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return ne.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(s){return{id:s.id,version:s.version,createTime:Tr(s.createTime)}})(t)),ne.resolve()}getNamedQuery(e,t){return ne.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(s){return{name:s.name,query:fD(s.bundledQuery),readTime:Tr(s.readTime)}})(t)),ne.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RD{constructor(){this.overlays=new Ht(Me.comparator),this.qr=new Map}getOverlay(e,t){return ne.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Go();return ne.forEach(t,(s=>this.getOverlay(e,s).next((a=>{a!==null&&r.set(s,a)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((s,a)=>{this.St(e,t,a)})),ne.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach((a=>this.overlays=this.overlays.remove(a))),this.qr.delete(r)),ne.resolve()}getOverlaysForCollection(e,t,r){const s=Go(),a=t.length+1,l=new Me(t.child("")),h=this.overlays.getIteratorFrom(l);for(;h.hasNext();){const f=h.getNext().value,p=f.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===a&&f.largestBatchId>r&&s.set(f.getKey(),f)}return ne.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let a=new Ht(((p,_)=>p-_));const l=this.overlays.getIterator();for(;l.hasNext();){const p=l.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>r){let _=a.get(p.largestBatchId);_===null&&(_=Go(),a=a.insert(p.largestBatchId,_)),_.set(p.getKey(),p)}}const h=Go(),f=a.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach(((p,_)=>h.set(p,_))),!(h.size()>=s)););return ne.resolve(h)}St(e,t,r){const s=this.overlays.get(r.key);if(s!==null){const l=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new Hb(t,r));let a=this.qr.get(t);a===void 0&&(a=ht(),this.qr.set(t,a)),this.qr.set(t,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AD{constructor(){this.sessionToken=vn.EMPTY_BYTE_STRING}getSessionToken(e){return ne.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ne.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qm{constructor(){this.Qr=new dn(yn.$r),this.Ur=new dn(yn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const r=new yn(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Gr(new yn(e,t))}zr(e,t){e.forEach((r=>this.removeReference(r,t)))}jr(e){const t=new Me(new Pt([])),r=new yn(t,e),s=new yn(t,e+1),a=[];return this.Ur.forEachInRange([r,s],(l=>{this.Gr(l),a.push(l.key)})),a}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Me(new Pt([])),r=new yn(t,e),s=new yn(t,e+1);let a=ht();return this.Ur.forEachInRange([r,s],(l=>{a=a.add(l.key)})),a}containsKey(e){const t=new yn(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class yn{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Me.comparator(e.key,t.key)||dt(e.Yr,t.Yr)}static Kr(e,t){return dt(e.Yr,t.Yr)||Me.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PD{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new dn(yn.$r)}checkEmpty(e){return ne.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,s){const a=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new Gb(a,t,r,s);this.mutationQueue.push(l);for(const h of s)this.Zr=this.Zr.add(new yn(h.key,a)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return ne.resolve(l)}lookupMutationBatch(e,t){return ne.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=this.ei(r),a=s<0?0:s;return ne.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return ne.resolve(this.mutationQueue.length===0?Mm:this.tr-1)}getAllMutationBatches(e){return ne.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new yn(t,0),s=new yn(t,Number.POSITIVE_INFINITY),a=[];return this.Zr.forEachInRange([r,s],(l=>{const h=this.Xr(l.Yr);a.push(h)})),ne.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new dn(dt);return t.forEach((s=>{const a=new yn(s,0),l=new yn(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([a,l],(h=>{r=r.add(h.Yr)}))})),ne.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let a=r;Me.isDocumentKey(a)||(a=a.child(""));const l=new yn(new Me(a),0);let h=new dn(dt);return this.Zr.forEachWhile((f=>{const p=f.key.path;return!!r.isPrefixOf(p)&&(p.length===s&&(h=h.add(f.Yr)),!0)}),l),ne.resolve(this.ti(h))}ti(e){const t=[];return e.forEach((r=>{const s=this.Xr(r);s!==null&&t.push(s)})),t}removeMutationBatch(e,t){gt(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return ne.forEach(t.mutations,(s=>{const a=new yn(s.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,t){const r=new yn(t,0),s=this.Zr.firstAfterOrEqual(r);return ne.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,ne.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CD{constructor(e){this.ri=e,this.docs=(function(){return new Ht(Me.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),a=s?s.size:0,l=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ne.resolve(r?r.document.mutableCopy():_n.newInvalidDocument(t))}getEntries(e,t){let r=gs();return t.forEach((s=>{const a=this.docs.get(s);r=r.insert(s,a?a.document.mutableCopy():_n.newInvalidDocument(s))})),ne.resolve(r)}getDocumentsMatchingQuery(e,t,r,s){let a=gs();const l=t.path,h=new Me(l.child("__id-9223372036854775808__")),f=this.docs.getIteratorFrom(h);for(;f.hasNext();){const{key:p,value:{document:_}}=f.getNext();if(!l.isPrefixOf(p.path))break;p.path.length>l.length+1||sb(ib(_),r)<=0||(s.has(_.key)||yh(t,_))&&(a=a.insert(_.key,_.mutableCopy()))}return ne.resolve(a)}getAllFromCollectionGroup(e,t,r,s){Fe(9500)}ii(e,t){return ne.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new ND(this)}getSize(e){return ne.resolve(this.size)}}class ND extends TD{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,s)=>{s.isValidDocument()?t.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)})),ne.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kD{constructor(e){this.persistence=e,this.si=new sa((t=>Bm(t)),jm),this.lastRemoteSnapshotVersion=He.min(),this.highestTargetId=0,this.oi=0,this._i=new qm,this.targetCount=0,this.ai=rl.ur()}forEachTarget(e,t){return this.si.forEach(((r,s)=>t(s))),ne.resolve()}getLastRemoteSnapshotVersion(e){return ne.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ne.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ne.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),ne.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new rl(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,ne.resolve()}updateTargetData(e,t){return this.Pr(t),ne.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,ne.resolve()}removeTargets(e,t,r){let s=0;const a=[];return this.si.forEach(((l,h)=>{h.sequenceNumber<=t&&r.get(h.targetId)===null&&(this.si.delete(l),a.push(this.removeMatchingKeysForTargetId(e,h.targetId)),s++)})),ne.waitFor(a).next((()=>s))}getTargetCount(e){return ne.resolve(this.targetCount)}getTargetData(e,t){const r=this.si.get(t)||null;return ne.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),ne.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);const s=this.persistence.referenceDelegate,a=[];return s&&t.forEach((l=>{a.push(s.markPotentiallyOrphaned(e,l))})),ne.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),ne.resolve()}getMatchingKeysForTargetId(e,t){const r=this._i.Hr(t);return ne.resolve(r)}containsKey(e,t){return ne.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M0{constructor(e,t){this.ui={},this.overlays={},this.ci=new fh(0),this.li=!1,this.li=!0,this.hi=new AD,this.referenceDelegate=e(this),this.Pi=new kD(this),this.indexManager=new pD,this.remoteDocumentCache=(function(s){return new CD(s)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new hD(t),this.Ii=new ID(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new RD,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new PD(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){Ie("MemoryPersistence","Starting transaction:",e);const s=new bD(this.ci.next());return this.referenceDelegate.Ei(),r(s).next((a=>this.referenceDelegate.di(s).next((()=>a)))).toPromise().then((a=>(s.raiseOnCommittedEvent(),a)))}Ai(e,t){return ne.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,t))))}}class bD extends ab{constructor(e){super(),this.currentSequenceNumber=e}}class $m{constructor(e){this.persistence=e,this.Ri=new qm,this.Vi=null}static mi(e){return new $m(e)}get fi(){if(this.Vi)return this.Vi;throw Fe(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),ne.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),ne.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),ne.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((s=>this.fi.add(s.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((s=>{s.forEach((a=>this.fi.add(a.toString())))})).next((()=>r.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ne.forEach(this.fi,(r=>{const s=Me.fromPath(r);return this.gi(e,s).next((a=>{a||t.removeEntry(s,He.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return ne.or([()=>ne.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Hd{constructor(e,t){this.persistence=e,this.pi=new sa((r=>cb(r.path)),((r,s)=>r.isEqual(s))),this.garbageCollector=vD(this,t)}static mi(e,t){return new Hd(e,t)}Ei(){}di(e){return ne.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((s=>r+s))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}pr(e,t){return ne.forEach(this.pi,((r,s)=>this.br(e,r,s).next((a=>a?ne.resolve():t(s)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const s=this.persistence.getRemoteDocumentCache(),a=s.newChangeBuffer();return s.ii(e,(l=>this.br(e,l,t).next((h=>{h||(r++,a.removeEntry(l,He.min()))})))).next((()=>a.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),ne.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),ne.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),ne.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),ne.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Sd(e.data.value)),t}br(e,t,r){return ne.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.pi.get(t);return ne.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Km{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=s}static As(e,t){let r=ht(),s=ht();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:s=s.add(a.doc.key)}return new Km(e,t.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DD{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OD{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return rC()?8:lb(Bn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,s){const a={result:null};return this.ys(e,t).next((l=>{a.result=l})).next((()=>{if(!a.result)return this.ws(e,t,s,r).next((l=>{a.result=l}))})).next((()=>{if(a.result)return;const l=new DD;return this.Ss(e,t,l).next((h=>{if(a.result=h,this.Vs)return this.bs(e,t,l,h.size)}))})).next((()=>a.result))}bs(e,t,r,s){return r.documentReadCount<this.fs?(Ga()<=ut.DEBUG&&Ie("QueryEngine","SDK will not create cache indexes for query:",Ha(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ne.resolve()):(Ga()<=ut.DEBUG&&Ie("QueryEngine","Query:",Ha(t),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(Ga()<=ut.DEBUG&&Ie("QueryEngine","The SDK decides to create cache indexes for query:",Ha(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Oi(t))):ne.resolve())}ys(e,t){if(fv(t))return ne.resolve(null);let r=Oi(t);return this.indexManager.getIndexType(e,r).next((s=>s===0?null:(t.limit!==null&&s===1&&(t=Bd(t,null,"F"),r=Oi(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((a=>{const l=ht(...a);return this.ps.getDocuments(e,l).next((h=>this.indexManager.getMinOffset(e,r).next((f=>{const p=this.Ds(t,h);return this.Cs(t,p,l,f.readTime)?this.ys(e,Bd(t,null,"F")):this.vs(e,p,t,f)}))))})))))}ws(e,t,r,s){return fv(t)||s.isEqual(He.min())?ne.resolve(null):this.ps.getDocuments(e,r).next((a=>{const l=this.Ds(t,a);return this.Cs(t,l,r,s)?ne.resolve(null):(Ga()<=ut.DEBUG&&Ie("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Ha(t)),this.vs(e,l,t,rb(s,Pu)).next((h=>h)))}))}Ds(e,t){let r=new dn(d0(e));return t.forEach(((s,a)=>{yh(e,a)&&(r=r.add(a))})),r}Cs(e,t,r,s){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(s)>0)}Ss(e,t,r){return Ga()<=ut.DEBUG&&Ie("QueryEngine","Using full collection scan to execute query:",Ha(t)),this.ps.getDocumentsMatchingQuery(e,t,ro.min(),r)}vs(e,t,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next((a=>(t.forEach((l=>{a=a.insert(l.key,l)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xm="LocalStore",LD=3e8;class xD{constructor(e,t,r,s){this.persistence=e,this.Fs=t,this.serializer=s,this.Ms=new Ht(dt),this.xs=new sa((a=>Bm(a)),jm),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new SD(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function VD(n,e,t,r){return new xD(n,e,t,r)}async function U0(n,e){const t=Qe(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next((a=>(s=a,t.Bs(e),t.mutationQueue.getAllMutationBatches(r)))).next((a=>{const l=[],h=[];let f=ht();for(const p of s){l.push(p.batchId);for(const _ of p.mutations)f=f.add(_.key)}for(const p of a){h.push(p.batchId);for(const _ of p.mutations)f=f.add(_.key)}return t.localDocuments.getDocuments(r,f).next((p=>({Ls:p,removedBatchIds:l,addedBatchIds:h})))}))}))}function MD(n,e){const t=Qe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const s=e.batch.keys(),a=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(h,f,p,_){const E=p.batch,T=E.keys();let S=ne.resolve();return T.forEach((C=>{S=S.next((()=>_.getEntry(f,C))).next((U=>{const L=p.docVersions.get(C);gt(L!==null,48541),U.version.compareTo(L)<0&&(E.applyToRemoteDocument(U,p),U.isValidDocument()&&(U.setReadTime(p.commitVersion),_.addEntry(U)))}))})),S.next((()=>h.mutationQueue.removeMutationBatch(f,E)))})(t,r,e,a).next((()=>a.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(h){let f=ht();for(let p=0;p<h.mutationResults.length;++p)h.mutationResults[p].transformResults.length>0&&(f=f.add(h.batch.mutations[p].key));return f})(e)))).next((()=>t.localDocuments.getDocuments(r,s)))}))}function F0(n){const e=Qe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function UD(n,e){const t=Qe(n),r=e.snapshotVersion;let s=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const l=t.Ns.newChangeBuffer({trackRemovals:!0});s=t.Ms;const h=[];e.targetChanges.forEach(((_,E)=>{const T=s.get(E);if(!T)return;h.push(t.Pi.removeMatchingKeys(a,_.removedDocuments,E).next((()=>t.Pi.addMatchingKeys(a,_.addedDocuments,E))));let S=T.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(E)!==null?S=S.withResumeToken(vn.EMPTY_BYTE_STRING,He.min()).withLastLimboFreeSnapshotVersion(He.min()):_.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(_.resumeToken,r)),s=s.insert(E,S),(function(U,L,z){return U.resumeToken.approximateByteSize()===0||L.snapshotVersion.toMicroseconds()-U.snapshotVersion.toMicroseconds()>=LD?!0:z.addedDocuments.size+z.modifiedDocuments.size+z.removedDocuments.size>0})(T,S,_)&&h.push(t.Pi.updateTargetData(a,S))}));let f=gs(),p=ht();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(a,_))})),h.push(FD(a,l,e.documentUpdates).next((_=>{f=_.ks,p=_.qs}))),!r.isEqual(He.min())){const _=t.Pi.getLastRemoteSnapshotVersion(a).next((E=>t.Pi.setTargetsMetadata(a,a.currentSequenceNumber,r)));h.push(_)}return ne.waitFor(h).next((()=>l.apply(a))).next((()=>t.localDocuments.getLocalViewOfDocuments(a,f,p))).next((()=>f))})).then((a=>(t.Ms=s,a)))}function FD(n,e,t){let r=ht(),s=ht();return t.forEach((a=>r=r.add(a))),e.getEntries(n,r).next((a=>{let l=gs();return t.forEach(((h,f)=>{const p=a.get(h);f.isFoundDocument()!==p.isFoundDocument()&&(s=s.add(h)),f.isNoDocument()&&f.version.isEqual(He.min())?(e.removeEntry(h,f.readTime),l=l.insert(h,f)):!p.isValidDocument()||f.version.compareTo(p.version)>0||f.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(f),l=l.insert(h,f)):Ie(Xm,"Ignoring outdated watch update for ",h,". Current version:",p.version," Watch version:",f.version)})),{ks:l,qs:s}}))}function BD(n,e){const t=Qe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=Mm),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function jD(n,e){const t=Qe(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let s;return t.Pi.getTargetData(r,e).next((a=>a?(s=a,ne.resolve(s)):t.Pi.allocateTargetId(r).next((l=>(s=new Xs(e,l,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,s).next((()=>s)))))))})).then((r=>{const s=t.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r}))}async function em(n,e,t){const r=Qe(n),s=r.Ms.get(e),a=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",a,(l=>r.persistence.referenceDelegate.removeTarget(l,s)))}catch(l){if(!cl(l))throw l;Ie(Xm,`Failed to update sequence numbers for target ${e}: ${l}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function Av(n,e,t){const r=Qe(n);let s=He.min(),a=ht();return r.persistence.runTransaction("Execute query","readwrite",(l=>(function(f,p,_){const E=Qe(f),T=E.xs.get(_);return T!==void 0?ne.resolve(E.Ms.get(T)):E.Pi.getTargetData(p,_)})(r,l,Oi(e)).next((h=>{if(h)return s=h.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(l,h.targetId).next((f=>{a=f}))})).next((()=>r.Fs.getDocumentsMatchingQuery(l,e,t?s:He.min(),t?a:ht()))).next((h=>(zD(r,Nb(e),h),{documents:h,Qs:a})))))}function zD(n,e,t){let r=n.Os.get(e)||He.min();t.forEach(((s,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)})),n.Os.set(e,r)}class Pv{constructor(){this.activeTargetIds=xb()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class GD{constructor(){this.Mo=new Pv,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Pv,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HD{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cv="ConnectivityMonitor";class Nv{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Ie(Cv,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Ie(Cv,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dd=null;function tm(){return dd===null?dd=(function(){return 268435456+Math.round(2147483648*Math.random())})():dd++,"0x"+dd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sp="RestConnection",WD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class qD{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===Md?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,t,r,s,a){const l=tm(),h=this.zo(e,t.toUriEncodedString());Ie(Sp,`Sending RPC '${e}' ${l}:`,h,r);const f={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(f,s,a);const{host:p}=new URL(h),_=ys(p);return this.Jo(e,h,f,r,_).then((E=>(Ie(Sp,`Received RPC '${e}' ${l}: `,E),E)),(E=>{throw Zo(Sp,`RPC '${e}' ${l} failed with error: `,E,"url: ",h,"request:",r),E}))}Ho(e,t,r,s,a,l){return this.Go(e,t,r,s,a)}jo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ll})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((s,a)=>e[a]=s)),r&&r.headers.forEach(((s,a)=>e[a]=s))}zo(e,t){const r=WD[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $D{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mn="WebChannelConnection";class KD extends qD{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,s,a){const l=tm();return new Promise(((h,f)=>{const p=new Vw;p.setWithCredentials(!0),p.listenOnce(Mw.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case wd.NO_ERROR:const E=p.getResponseJson();Ie(Mn,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(E)),h(E);break;case wd.TIMEOUT:Ie(Mn,`RPC '${e}' ${l} timed out`),f(new pe(ee.DEADLINE_EXCEEDED,"Request time out"));break;case wd.HTTP_ERROR:const T=p.getStatus();if(Ie(Mn,`RPC '${e}' ${l} failed with status:`,T,"response text:",p.getResponseText()),T>0){let S=p.getResponseJson();Array.isArray(S)&&(S=S[0]);const C=S==null?void 0:S.error;if(C&&C.status&&C.message){const U=(function(z){const $=z.toLowerCase().replace(/_/g,"-");return Object.values(ee).indexOf($)>=0?$:ee.UNKNOWN})(C.status);f(new pe(U,C.message))}else f(new pe(ee.UNKNOWN,"Server responded with status "+p.getStatus()))}else f(new pe(ee.UNAVAILABLE,"Connection failed."));break;default:Fe(9055,{l_:e,streamId:l,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{Ie(Mn,`RPC '${e}' ${l} completed.`)}}));const _=JSON.stringify(s);Ie(Mn,`RPC '${e}' ${l} sending request:`,s),p.send(t,"POST",_,r,15)}))}T_(e,t,r){const s=tm(),a=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=Bw(),h=Fw(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(f.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(f.useFetchStreams=!0),this.jo(f.initMessageHeaders,t,r),f.encodeInitMessageHeaders=!0;const _=a.join("");Ie(Mn,`Creating RPC '${e}' stream ${s}: ${_}`,f);const E=l.createWebChannel(_,f);this.I_(E);let T=!1,S=!1;const C=new $D({Yo:L=>{S?Ie(Mn,`Not sending because RPC '${e}' stream ${s} is closed:`,L):(T||(Ie(Mn,`Opening RPC '${e}' stream ${s} transport.`),E.open(),T=!0),Ie(Mn,`RPC '${e}' stream ${s} sending:`,L),E.send(L))},Zo:()=>E.close()}),U=(L,z,$)=>{L.listen(z,(Z=>{try{$(Z)}catch(oe){setTimeout((()=>{throw oe}),0)}}))};return U(E,au.EventType.OPEN,(()=>{S||(Ie(Mn,`RPC '${e}' stream ${s} transport opened.`),C.o_())})),U(E,au.EventType.CLOSE,(()=>{S||(S=!0,Ie(Mn,`RPC '${e}' stream ${s} transport closed`),C.a_(),this.E_(E))})),U(E,au.EventType.ERROR,(L=>{S||(S=!0,Zo(Mn,`RPC '${e}' stream ${s} transport errored. Name:`,L.name,"Message:",L.message),C.a_(new pe(ee.UNAVAILABLE,"The operation could not be completed")))})),U(E,au.EventType.MESSAGE,(L=>{var z;if(!S){const $=L.data[0];gt(!!$,16349);const Z=$,oe=(Z==null?void 0:Z.error)||((z=Z[0])==null?void 0:z.error);if(oe){Ie(Mn,`RPC '${e}' stream ${s} received error:`,oe);const we=oe.status;let me=(function(N){const V=rn[N];if(V!==void 0)return R0(V)})(we),I=oe.message;me===void 0&&(me=ee.INTERNAL,I="Unknown error status: "+we+" with message "+oe.message),S=!0,C.a_(new pe(me,I)),E.close()}else Ie(Mn,`RPC '${e}' stream ${s} received:`,$),C.u_($)}})),U(h,Uw.STAT_EVENT,(L=>{L.stat===Hp.PROXY?Ie(Mn,`RPC '${e}' stream ${s} detected buffering proxy`):L.stat===Hp.NOPROXY&&Ie(Mn,`RPC '${e}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{C.__()}),0),C}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function Ip(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Th(n){return new Jb(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ym{constructor(e,t,r=1e3,s=1.5,a=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=s,this.R_=a,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,t-r);s>0&&Ie("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kv="PersistentStream";class B0{constructor(e,t,r,s,a,l,h,f){this.Mi=e,this.S_=r,this.b_=s,this.connection=a,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=h,this.listener=f,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Ym(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ee.RESOURCE_EXHAUSTED?(ms(t.toString()),ms("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ee.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,s])=>{this.D_===t&&this.G_(r,s)}),(r=>{e((()=>{const s=new pe(ee.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)}))}))}G_(e,t){const r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((s=>{r((()=>this.z_(s)))})),this.stream.onMessage((s=>{r((()=>++this.F_==1?this.J_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Ie(kv,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(Ie(kv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class XD extends B0{constructor(e,t,r,s,a,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,l),this.serializer=a}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=nD(this.serializer,e),r=(function(a){if(!("targetChange"in a))return He.min();const l=a.targetChange;return l.targetIds&&l.targetIds.length?He.min():l.readTime?Tr(l.readTime):He.min()})(e);return this.listener.H_(t,r)}Y_(e){const t={};t.database=Zp(this.serializer),t.addTarget=(function(a,l){let h;const f=l.target;if(h=Xp(f)?{documents:iD(a,f)}:{query:sD(a,f).ft},h.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){h.resumeToken=C0(a,l.resumeToken);const p=Qp(a,l.expectedCount);p!==null&&(h.expectedCount=p)}else if(l.snapshotVersion.compareTo(He.min())>0){h.readTime=zd(a,l.snapshotVersion.toTimestamp());const p=Qp(a,l.expectedCount);p!==null&&(h.expectedCount=p)}return h})(this.serializer,e);const r=aD(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){const t={};t.database=Zp(this.serializer),t.removeTarget=e,this.q_(t)}}class YD extends B0{constructor(e,t,r,s,a,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,l),this.serializer=a}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return gt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,gt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){gt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=rD(e.writeResults,e.commitTime),r=Tr(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=Zp(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>D0(this.serializer,r)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QD{}class JD extends QD{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new pe(ee.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,l])=>this.connection.Go(e,Jp(t,r),s,a,l))).catch((a=>{throw a.name==="FirebaseError"?(a.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new pe(ee.UNKNOWN,a.toString())}))}Ho(e,t,r,s,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,h])=>this.connection.Ho(e,Jp(t,r),s,l,h,a))).catch((l=>{throw l.name==="FirebaseError"?(l.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new pe(ee.UNKNOWN,l.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class ZD{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ms(t),this.aa=!1):Ie("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ea="RemoteStore";class eO{constructor(e,t,r,s,a){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=a,this.Aa.Oo((l=>{r.enqueueAndForget((async()=>{oa(this)&&(Ie(ea,"Restarting streams for network reachability change."),await(async function(f){const p=Qe(f);p.Ea.add(4),await Xu(p),p.Ra.set("Unknown"),p.Ea.delete(4),await wh(p)})(this))}))})),this.Ra=new ZD(r,s)}}async function wh(n){if(oa(n))for(const e of n.da)await e(!0)}async function Xu(n){for(const e of n.da)await e(!1)}function j0(n,e){const t=Qe(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),eg(t)?Zm(t):hl(t).O_()&&Jm(t,e))}function Qm(n,e){const t=Qe(n),r=hl(t);t.Ia.delete(e),r.O_()&&z0(t,e),t.Ia.size===0&&(r.O_()?r.L_():oa(t)&&t.Ra.set("Unknown"))}function Jm(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(He.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}hl(n).Y_(e)}function z0(n,e){n.Va.Ue(e),hl(n).Z_(e)}function Zm(n){n.Va=new Kb({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),hl(n).start(),n.Ra.ua()}function eg(n){return oa(n)&&!hl(n).x_()&&n.Ia.size>0}function oa(n){return Qe(n).Ea.size===0}function G0(n){n.Va=void 0}async function tO(n){n.Ra.set("Online")}async function nO(n){n.Ia.forEach(((e,t)=>{Jm(n,e)}))}async function rO(n,e){G0(n),eg(n)?(n.Ra.ha(e),Zm(n)):n.Ra.set("Unknown")}async function iO(n,e,t){if(n.Ra.set("Online"),e instanceof P0&&e.state===2&&e.cause)try{await(async function(s,a){const l=a.cause;for(const h of a.targetIds)s.Ia.has(h)&&(await s.remoteSyncer.rejectListen(h,l),s.Ia.delete(h),s.Va.removeTarget(h))})(n,e)}catch(r){Ie(ea,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Wd(n,r)}else if(e instanceof Ad?n.Va.Ze(e):e instanceof A0?n.Va.st(e):n.Va.tt(e),!t.isEqual(He.min()))try{const r=await F0(n.localStore);t.compareTo(r)>=0&&await(function(a,l){const h=a.Va.Tt(l);return h.targetChanges.forEach(((f,p)=>{if(f.resumeToken.approximateByteSize()>0){const _=a.Ia.get(p);_&&a.Ia.set(p,_.withResumeToken(f.resumeToken,l))}})),h.targetMismatches.forEach(((f,p)=>{const _=a.Ia.get(f);if(!_)return;a.Ia.set(f,_.withResumeToken(vn.EMPTY_BYTE_STRING,_.snapshotVersion)),z0(a,f);const E=new Xs(_.target,f,p,_.sequenceNumber);Jm(a,E)})),a.remoteSyncer.applyRemoteEvent(h)})(n,t)}catch(r){Ie(ea,"Failed to raise snapshot:",r),await Wd(n,r)}}async function Wd(n,e,t){if(!cl(e))throw e;n.Ea.add(1),await Xu(n),n.Ra.set("Offline"),t||(t=()=>F0(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{Ie(ea,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await wh(n)}))}function H0(n,e){return e().catch((t=>Wd(n,t,e)))}async function Sh(n){const e=Qe(n),t=ao(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Mm;for(;sO(e);)try{const s=await BD(e.localStore,r);if(s===null){e.Ta.length===0&&t.L_();break}r=s.batchId,oO(e,s)}catch(s){await Wd(e,s)}W0(e)&&q0(e)}function sO(n){return oa(n)&&n.Ta.length<10}function oO(n,e){n.Ta.push(e);const t=ao(n);t.O_()&&t.X_&&t.ea(e.mutations)}function W0(n){return oa(n)&&!ao(n).x_()&&n.Ta.length>0}function q0(n){ao(n).start()}async function aO(n){ao(n).ra()}async function lO(n){const e=ao(n);for(const t of n.Ta)e.ea(t.mutations)}async function uO(n,e,t){const r=n.Ta.shift(),s=Gm.from(r,e,t);await H0(n,(()=>n.remoteSyncer.applySuccessfulWrite(s))),await Sh(n)}async function cO(n,e){e&&ao(n).X_&&await(async function(r,s){if((function(l){return I0(l)&&l!==ee.ABORTED})(s.code)){const a=r.Ta.shift();ao(r).B_(),await H0(r,(()=>r.remoteSyncer.rejectFailedWrite(a.batchId,s))),await Sh(r)}})(n,e),W0(n)&&q0(n)}async function bv(n,e){const t=Qe(n);t.asyncQueue.verifyOperationInProgress(),Ie(ea,"RemoteStore received new credentials");const r=oa(t);t.Ea.add(3),await Xu(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await wh(t)}async function dO(n,e){const t=Qe(n);e?(t.Ea.delete(2),await wh(t)):e||(t.Ea.add(2),await Xu(t),t.Ra.set("Unknown"))}function hl(n){return n.ma||(n.ma=(function(t,r,s){const a=Qe(t);return a.sa(),new XD(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)})(n.datastore,n.asyncQueue,{Xo:tO.bind(null,n),t_:nO.bind(null,n),r_:rO.bind(null,n),H_:iO.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),eg(n)?Zm(n):n.Ra.set("Unknown")):(await n.ma.stop(),G0(n))}))),n.ma}function ao(n){return n.fa||(n.fa=(function(t,r,s){const a=Qe(t);return a.sa(),new YD(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:aO.bind(null,n),r_:cO.bind(null,n),ta:lO.bind(null,n),na:uO.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await Sh(n)):(await n.fa.stop(),n.Ta.length>0&&(Ie(ea,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tg{constructor(e,t,r,s,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=a,this.deferred=new Di,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((l=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,s,a){const l=Date.now()+r,h=new tg(e,t,l,s,a);return h.start(r),h}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new pe(ee.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ng(n,e){if(ms("AsyncQueue",`${e}: ${n}`),cl(n))return new pe(ee.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ja{static emptySet(e){return new Ja(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Me.comparator(t.key,r.key):(t,r)=>Me.comparator(t.key,r.key),this.keyedMap=lu(),this.sortedSet=new Ht(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ja)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,a=r.getNext().key;if(!s.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Ja;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dv{constructor(){this.ga=new Ht(Me.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Fe(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class il{constructor(e,t,r,s,a,l,h,f,p){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=a,this.fromCache=l,this.syncStateChanged=h,this.excludesMetadataChanges=f,this.hasCachedResults=p}static fromInitialDocuments(e,t,r,s,a){const l=[];return t.forEach((h=>{l.push({type:0,doc:h})})),new il(e,t,Ja.emptySet(t),l,r,s,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&gh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hO{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class fO{constructor(){this.queries=Ov(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const s=Qe(t),a=s.queries;s.queries=Ov(),a.forEach(((l,h)=>{for(const f of h.Sa)f.onError(r)}))})(this,new pe(ee.ABORTED,"Firestore shutting down"))}}function Ov(){return new sa((n=>c0(n)),gh)}async function rg(n,e){const t=Qe(n);let r=3;const s=e.query;let a=t.queries.get(s);a?!a.ba()&&e.Da()&&(r=2):(a=new hO,r=e.Da()?0:1);try{switch(r){case 0:a.wa=await t.onListen(s,!0);break;case 1:a.wa=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(l){const h=ng(l,`Initialization of query '${Ha(e.query)}' failed`);return void e.onError(h)}t.queries.set(s,a),a.Sa.push(e),e.va(t.onlineState),a.wa&&e.Fa(a.wa)&&sg(t)}async function ig(n,e){const t=Qe(n),r=e.query;let s=3;const a=t.queries.get(r);if(a){const l=a.Sa.indexOf(e);l>=0&&(a.Sa.splice(l,1),a.Sa.length===0?s=e.Da()?0:1:!a.ba()&&e.Da()&&(s=2))}switch(s){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function pO(n,e){const t=Qe(n);let r=!1;for(const s of e){const a=s.query,l=t.queries.get(a);if(l){for(const h of l.Sa)h.Fa(s)&&(r=!0);l.wa=s}}r&&sg(t)}function mO(n,e,t){const r=Qe(n),s=r.queries.get(e);if(s)for(const a of s.Sa)a.onError(t);r.queries.delete(e)}function sg(n){n.Ca.forEach((e=>{e.next()}))}var nm,Lv;(Lv=nm||(nm={})).Ma="default",Lv.Cache="cache";class og{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new il(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=il.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==nm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $0{constructor(e){this.key=e}}class K0{constructor(e){this.key=e}}class gO{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ht(),this.mutatedKeys=ht(),this.eu=d0(e),this.tu=new Ja(this.eu)}get nu(){return this.Ya}ru(e,t){const r=t?t.iu:new Dv,s=t?t.tu:this.tu;let a=t?t.mutatedKeys:this.mutatedKeys,l=s,h=!1;const f=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,p=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((_,E)=>{const T=s.get(_),S=yh(this.query,E)?E:null,C=!!T&&this.mutatedKeys.has(T.key),U=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations);let L=!1;T&&S?T.data.isEqual(S.data)?C!==U&&(r.track({type:3,doc:S}),L=!0):this.su(T,S)||(r.track({type:2,doc:S}),L=!0,(f&&this.eu(S,f)>0||p&&this.eu(S,p)<0)&&(h=!0)):!T&&S?(r.track({type:0,doc:S}),L=!0):T&&!S&&(r.track({type:1,doc:T}),L=!0,(f||p)&&(h=!0)),L&&(S?(l=l.add(S),a=U?a.add(_):a.delete(_)):(l=l.delete(_),a=a.delete(_)))})),this.query.limit!==null)for(;l.size>this.query.limit;){const _=this.query.limitType==="F"?l.last():l.first();l=l.delete(_.key),a=a.delete(_.key),r.track({type:1,doc:_})}return{tu:l,iu:r,Cs:h,mutatedKeys:a}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,s){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const l=e.iu.ya();l.sort(((_,E)=>(function(S,C){const U=L=>{switch(L){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Fe(20277,{Rt:L})}};return U(S)-U(C)})(_.type,E.type)||this.eu(_.doc,E.doc))),this.ou(r),s=s??!1;const h=t&&!s?this._u():[],f=this.Xa.size===0&&this.current&&!s?1:0,p=f!==this.Za;return this.Za=f,l.length!==0||p?{snapshot:new il(this.query,e.tu,a,l,e.mutatedKeys,f===0,p,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:h}:{au:h}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Dv,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ht(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const t=[];return e.forEach((r=>{this.Xa.has(r)||t.push(new K0(r))})),this.Xa.forEach((r=>{e.has(r)||t.push(new $0(r))})),t}cu(e){this.Ya=e.Qs,this.Xa=ht();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return il.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const ag="SyncEngine";class yO{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class _O{constructor(e){this.key=e,this.hu=!1}}class EO{constructor(e,t,r,s,a,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=a,this.maxConcurrentLimboResolutions=l,this.Pu={},this.Tu=new sa((h=>c0(h)),gh),this.Iu=new Map,this.Eu=new Set,this.du=new Ht(Me.comparator),this.Au=new Map,this.Ru=new qm,this.Vu={},this.mu=new Map,this.fu=rl.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function vO(n,e,t=!0){const r=eS(n);let s;const a=r.Tu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),s=a.view.lu()):s=await X0(r,e,t,!0),s}async function TO(n,e){const t=eS(n);await X0(t,e,!0,!1)}async function X0(n,e,t,r){const s=await jD(n.localStore,Oi(e)),a=s.targetId,l=n.sharedClientState.addLocalQueryTarget(a,t);let h;return r&&(h=await wO(n,e,a,l==="current",s.resumeToken)),n.isPrimaryClient&&t&&j0(n.remoteStore,s),h}async function wO(n,e,t,r,s){n.pu=(E,T,S)=>(async function(U,L,z,$){let Z=L.view.ru(z);Z.Cs&&(Z=await Av(U.localStore,L.query,!1).then((({documents:I})=>L.view.ru(I,Z))));const oe=$&&$.targetChanges.get(L.targetId),we=$&&$.targetMismatches.get(L.targetId)!=null,me=L.view.applyChanges(Z,U.isPrimaryClient,oe,we);return Vv(U,L.targetId,me.au),me.snapshot})(n,E,T,S);const a=await Av(n.localStore,e,!0),l=new gO(e,a.Qs),h=l.ru(a.documents),f=Ku.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",s),p=l.applyChanges(h,n.isPrimaryClient,f);Vv(n,t,p.au);const _=new yO(e,t,l);return n.Tu.set(e,_),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),p.snapshot}async function SO(n,e,t){const r=Qe(n),s=r.Tu.get(e),a=r.Iu.get(s.targetId);if(a.length>1)return r.Iu.set(s.targetId,a.filter((l=>!gh(l,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await em(r.localStore,s.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(s.targetId),t&&Qm(r.remoteStore,s.targetId),rm(r,s.targetId)})).catch(ul)):(rm(r,s.targetId),await em(r.localStore,s.targetId,!0))}async function IO(n,e){const t=Qe(n),r=t.Tu.get(e),s=t.Iu.get(r.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Qm(t.remoteStore,r.targetId))}async function RO(n,e,t){const r=DO(n);try{const s=await(function(l,h){const f=Qe(l),p=bt.now(),_=h.reduce(((S,C)=>S.add(C.key)),ht());let E,T;return f.persistence.runTransaction("Locally write mutations","readwrite",(S=>{let C=gs(),U=ht();return f.Ns.getEntries(S,_).next((L=>{C=L,C.forEach(((z,$)=>{$.isValidDocument()||(U=U.add(z))}))})).next((()=>f.localDocuments.getOverlayedDocuments(S,C))).next((L=>{E=L;const z=[];for(const $ of h){const Z=zb($,E.get($.key).overlayedDocument);Z!=null&&z.push(new ho($.key,Z,n0(Z.value.mapValue),on.exists(!0)))}return f.mutationQueue.addMutationBatch(S,p,z,h)})).next((L=>{T=L;const z=L.applyToLocalDocumentSet(E,U);return f.documentOverlayCache.saveOverlays(S,L.batchId,z)}))})).then((()=>({batchId:T.batchId,changes:f0(E)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),(function(l,h,f){let p=l.Vu[l.currentUser.toKey()];p||(p=new Ht(dt)),p=p.insert(h,f),l.Vu[l.currentUser.toKey()]=p})(r,s.batchId,t),await Yu(r,s.changes),await Sh(r.remoteStore)}catch(s){const a=ng(s,"Failed to persist write");t.reject(a)}}async function Y0(n,e){const t=Qe(n);try{const r=await UD(t.localStore,e);e.targetChanges.forEach(((s,a)=>{const l=t.Au.get(a);l&&(gt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?l.hu=!0:s.modifiedDocuments.size>0?gt(l.hu,14607):s.removedDocuments.size>0&&(gt(l.hu,42227),l.hu=!1))})),await Yu(t,r,e)}catch(r){await ul(r)}}function xv(n,e,t){const r=Qe(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const s=[];r.Tu.forEach(((a,l)=>{const h=l.view.va(e);h.snapshot&&s.push(h.snapshot)})),(function(l,h){const f=Qe(l);f.onlineState=h;let p=!1;f.queries.forEach(((_,E)=>{for(const T of E.Sa)T.va(h)&&(p=!0)})),p&&sg(f)})(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function AO(n,e,t){const r=Qe(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.Au.get(e),a=s&&s.key;if(a){let l=new Ht(Me.comparator);l=l.insert(a,_n.newNoDocument(a,He.min()));const h=ht().add(a),f=new vh(He.min(),new Map,new Ht(dt),l,h);await Y0(r,f),r.du=r.du.remove(a),r.Au.delete(e),lg(r)}else await em(r.localStore,e,!1).then((()=>rm(r,e,t))).catch(ul)}async function PO(n,e){const t=Qe(n),r=e.batch.batchId;try{const s=await MD(t.localStore,e);J0(t,r,null),Q0(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Yu(t,s)}catch(s){await ul(s)}}async function CO(n,e,t){const r=Qe(n);try{const s=await(function(l,h){const f=Qe(l);return f.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let _;return f.mutationQueue.lookupMutationBatch(p,h).next((E=>(gt(E!==null,37113),_=E.keys(),f.mutationQueue.removeMutationBatch(p,E)))).next((()=>f.mutationQueue.performConsistencyCheck(p))).next((()=>f.documentOverlayCache.removeOverlaysForBatchId(p,_,h))).next((()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,_))).next((()=>f.localDocuments.getDocuments(p,_)))}))})(r.localStore,e);J0(r,e,t),Q0(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Yu(r,s)}catch(s){await ul(s)}}function Q0(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function J0(n,e,t){const r=Qe(n);let s=r.Vu[r.currentUser.toKey()];if(s){const a=s.get(e);a&&(t?a.reject(t):a.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function rm(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((r=>{n.Ru.containsKey(r)||Z0(n,r)}))}function Z0(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Qm(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),lg(n))}function Vv(n,e,t){for(const r of t)r instanceof $0?(n.Ru.addReference(r.key,e),NO(n,r)):r instanceof K0?(Ie(ag,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||Z0(n,r.key)):Fe(19791,{wu:r})}function NO(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(Ie(ag,"New document in limbo: "+t),n.Eu.add(r),lg(n))}function lg(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Me(Pt.fromString(e)),r=n.fu.next();n.Au.set(r,new _O(t)),n.du=n.du.insert(t,r),j0(n.remoteStore,new Xs(Oi(mh(t.path)),r,"TargetPurposeLimboResolution",fh.ce))}}async function Yu(n,e,t){const r=Qe(n),s=[],a=[],l=[];r.Tu.isEmpty()||(r.Tu.forEach(((h,f)=>{l.push(r.pu(f,e,t).then((p=>{var _;if((p||t)&&r.isPrimaryClient){const E=p?!p.fromCache:(_=t==null?void 0:t.targetChanges.get(f.targetId))==null?void 0:_.current;r.sharedClientState.updateQueryState(f.targetId,E?"current":"not-current")}if(p){s.push(p);const E=Km.As(f.targetId,p);a.push(E)}})))})),await Promise.all(l),r.Pu.H_(s),await(async function(f,p){const _=Qe(f);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>ne.forEach(p,(T=>ne.forEach(T.Es,(S=>_.persistence.referenceDelegate.addReference(E,T.targetId,S))).next((()=>ne.forEach(T.ds,(S=>_.persistence.referenceDelegate.removeReference(E,T.targetId,S)))))))))}catch(E){if(!cl(E))throw E;Ie(Xm,"Failed to update sequence numbers: "+E)}for(const E of p){const T=E.targetId;if(!E.fromCache){const S=_.Ms.get(T),C=S.snapshotVersion,U=S.withLastLimboFreeSnapshotVersion(C);_.Ms=_.Ms.insert(T,U)}}})(r.localStore,a))}async function kO(n,e){const t=Qe(n);if(!t.currentUser.isEqual(e)){Ie(ag,"User change. New user:",e.toKey());const r=await U0(t.localStore,e);t.currentUser=e,(function(a,l){a.mu.forEach((h=>{h.forEach((f=>{f.reject(new pe(ee.CANCELLED,l))}))})),a.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Yu(t,r.Ls)}}function bO(n,e){const t=Qe(n),r=t.Au.get(e);if(r&&r.hu)return ht().add(r.key);{let s=ht();const a=t.Iu.get(e);if(!a)return s;for(const l of a){const h=t.Tu.get(l);s=s.unionWith(h.view.nu)}return s}}function eS(n){const e=Qe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Y0.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=bO.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=AO.bind(null,e),e.Pu.H_=pO.bind(null,e.eventManager),e.Pu.yu=mO.bind(null,e.eventManager),e}function DO(n){const e=Qe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=PO.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=CO.bind(null,e),e}class qd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Th(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return VD(this.persistence,new OD,e.initialUser,this.serializer)}Cu(e){return new M0($m.mi,this.serializer)}Du(e){return new GD}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}qd.provider={build:()=>new qd};class OO extends qd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){gt(this.persistence.referenceDelegate instanceof Hd,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new _D(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?ar.withCacheSize(this.cacheSizeBytes):ar.DEFAULT;return new M0((r=>Hd.mi(r,t)),this.serializer)}}class im{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>xv(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=kO.bind(null,this.syncEngine),await dO(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new fO})()}createDatastore(e){const t=Th(e.databaseInfo.databaseId),r=(function(a){return new KD(a)})(e.databaseInfo);return(function(a,l,h,f){return new JD(a,l,h,f)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,s,a,l,h){return new eO(r,s,a,l,h)})(this.localStore,this.datastore,e.asyncQueue,(t=>xv(this.syncEngine,t,0)),(function(){return Nv.v()?new Nv:new HD})())}createSyncEngine(e,t){return(function(s,a,l,h,f,p,_){const E=new EO(s,a,l,h,f,p);return _&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(s){const a=Qe(s);Ie(ea,"RemoteStore shutting down."),a.Ea.add(5),await Xu(a),a.Aa.shutdown(),a.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}im.provider={build:()=>new im};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ug{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ms("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LO{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new pe(ee.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await(async function(s,a){const l=Qe(s),h={documents:a.map((E=>Gd(l.serializer,E)))},f=await l.Ho("BatchGetDocuments",l.serializer.databaseId,Pt.emptyPath(),h,a.length),p=new Map;f.forEach((E=>{const T=tD(l.serializer,E);p.set(T.key.toString(),T)}));const _=[];return a.forEach((E=>{const T=p.get(E.toString());gt(!!T,55234,{key:E}),_.push(T)})),_})(this.datastore,e);return t.forEach((r=>this.recordVersion(r))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new $u(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((t,r)=>{const s=Me.fromPath(r);this.mutations.push(new S0(s,this.precondition(s)))})),await(async function(r,s){const a=Qe(r),l={writes:s.map((h=>D0(a.serializer,h)))};await a.Go("Commit",a.serializer.databaseId,Pt.emptyPath(),l)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Fe(50498,{Gu:e.constructor.name});t=He.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new pe(ee.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(He.min())?on.exists(!1):on.updateTime(t):on.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(He.min()))throw new pe(ee.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return on.updateTime(t)}return on.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xO{constructor(e,t,r,s,a){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=s,this.deferred=a,this.zu=r.maxAttempts,this.M_=new Ym(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_((async()=>{const e=new LO(this.datastore),t=this.Hu(e);t&&t.then((r=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(r)})).catch((s=>{this.Yu(s)}))))})).catch((r=>{this.Yu(r)}))}))}Hu(e){try{const t=this.updateFunction(e);return!Wu(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ju(),Promise.resolve())))):this.deferred.reject(e)}Zu(e){if((e==null?void 0:e.name)==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!I0(t)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lo="FirestoreClient";class VO{constructor(e,t,r,s,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=Fn.UNAUTHENTICATED,this.clientId=dh.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,(async l=>{Ie(lo,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l})),this.appCheckCredentials.start(r,(l=>(Ie(lo,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Di;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=ng(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Rp(n,e){n.asyncQueue.verifyOperationInProgress(),Ie(lo,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async s=>{r.isEqual(s)||(await U0(e.localStore,s),r=s)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function Mv(n,e){n.asyncQueue.verifyOperationInProgress();const t=await MO(n);Ie(lo,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>bv(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,s)=>bv(e.remoteStore,s))),n._onlineComponents=e}async function MO(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Ie(lo,"Using user provided OfflineComponentProvider");try{await Rp(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(s){return s.name==="FirebaseError"?s.code===ee.FAILED_PRECONDITION||s.code===ee.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(t))throw t;Zo("Error using user provided cache. Falling back to memory cache: "+t),await Rp(n,new qd)}}else Ie(lo,"Using default OfflineComponentProvider"),await Rp(n,new OO(void 0));return n._offlineComponents}async function cg(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Ie(lo,"Using user provided OnlineComponentProvider"),await Mv(n,n._uninitializedComponentsProvider._online)):(Ie(lo,"Using default OnlineComponentProvider"),await Mv(n,new im))),n._onlineComponents}function UO(n){return cg(n).then((e=>e.syncEngine))}function FO(n){return cg(n).then((e=>e.datastore))}async function $d(n){const e=await cg(n),t=e.eventManager;return t.onListen=vO.bind(null,e.syncEngine),t.onUnlisten=SO.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=TO.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=IO.bind(null,e.syncEngine),t}function BO(n,e,t={}){const r=new Di;return n.asyncQueue.enqueueAndForget((async()=>(function(a,l,h,f,p){const _=new ug({next:T=>{_.Nu(),l.enqueueAndForget((()=>ig(a,E)));const S=T.docs.has(h);!S&&T.fromCache?p.reject(new pe(ee.UNAVAILABLE,"Failed to get document because the client is offline.")):S&&T.fromCache&&f&&f.source==="server"?p.reject(new pe(ee.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(T)},error:T=>p.reject(T)}),E=new og(mh(h.path),_,{includeMetadataChanges:!0,qa:!0});return rg(a,E)})(await $d(n),n.asyncQueue,e,t,r))),r.promise}function jO(n,e,t={}){const r=new Di;return n.asyncQueue.enqueueAndForget((async()=>(function(a,l,h,f,p){const _=new ug({next:T=>{_.Nu(),l.enqueueAndForget((()=>ig(a,E))),T.fromCache&&f.source==="server"?p.reject(new pe(ee.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(T)},error:T=>p.reject(T)}),E=new og(h,_,{includeMetadataChanges:!0,qa:!0});return rg(a,E)})(await $d(n),n.asyncQueue,e,t,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tS(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uv=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nS="firestore.googleapis.com",Fv=!0;class Bv{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new pe(ee.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=nS,this.ssl=Fv}else this.host=e.host,this.ssl=e.ssl??Fv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=V0;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<gD)throw new pe(ee.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Ww("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=tS(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new pe(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new pe(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new pe(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,s){return r.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ih{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Bv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new pe(ee.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new pe(ee.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Bv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new Gw;switch(r.type){case"firstParty":return new Yk(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new pe(ee.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=Uv.get(t);r&&(Ie("ComponentProvider","Removing Datastore"),Uv.delete(t),r.terminate())})(this),Promise.resolve()}}function rS(n,e,t,r={}){var p;n=Nn(n,Ih);const s=ys(e),a=n._getSettings(),l={...a,emulatorOptions:n._getEmulatorOptions()},h=`${e}:${t}`;s&&(ih(`https://${h}`),sh("Firestore",!0)),a.host!==nS&&a.host!==h&&Zo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const f={...a,host:h,ssl:s,emulatorOptions:r};if(!Ko(f,l)&&(n._setSettings(f),r.mockUserToken)){let _,E;if(typeof r.mockUserToken=="string")_=r.mockUserToken,E=Fn.MOCK_USER;else{_=$T(r.mockUserToken,(p=n._app)==null?void 0:p.options.projectId);const T=r.mockUserToken.sub||r.mockUserToken.user_id;if(!T)throw new pe(ee.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new Fn(T)}n._authCredentials=new $k(new zw(_,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ui(this.firestore,e,this._query)}}class Mt{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new cs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Mt(this.firestore,e,this._key)}toJSON(){return{type:Mt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Hu(t,Mt._jsonSchema))return new Mt(e,r||null,new Me(Pt.fromString(t.referencePath)))}}Mt._jsonSchemaVersion="firestore/documentReference/1.0",Mt._jsonSchema={type:an("string",Mt._jsonSchemaVersion),referencePath:an("string")};class cs extends Ui{constructor(e,t,r){super(e,t,mh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Mt(this.firestore,null,new Me(e))}withConverter(e){return new cs(this.firestore,e,this._path)}}function Ue(n,e,...t){if(n=yt(n),Hw("collection","path",e),n instanceof Ih){const r=Pt.fromString(e,...t);return ZE(r),new cs(n,null,r)}{if(!(n instanceof Mt||n instanceof cs))throw new pe(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Pt.fromString(e,...t));return ZE(r),new cs(n.firestore,null,r)}}function he(n,e,...t){if(n=yt(n),arguments.length===1&&(e=dh.newId()),Hw("doc","path",e),n instanceof Ih){const r=Pt.fromString(e,...t);return JE(r),new Mt(n,null,new Me(r))}{if(!(n instanceof Mt||n instanceof cs))throw new pe(ee.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Pt.fromString(e,...t));return JE(r),new Mt(n.firestore,n instanceof cs?n.converter:null,new Me(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jv="AsyncQueue";class zv{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Ym(this,"async_queue_retry"),this._c=()=>{const r=Ip();r&&Ie(jv,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=Ip();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Ip();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Di;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!cl(e))throw e;Ie(jv,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,ms("INTERNAL UNHANDLED ERROR: ",Gv(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const s=tg.createAndSchedule(this,e,t,r,(a=>this.hc(a)));return this.tc.push(s),s}uc(){this.nc&&Fe(47125,{Pc:Gv(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function Gv(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hv(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;const s=t;for(const a of r)if(a in s&&typeof s[a]=="function")return!0;return!1})(n,["next","error","complete"])}class Ur extends Ih{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new zv,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new zv(e),this._firestoreClient=void 0,await e}}}function iS(n,e){const t=typeof n=="object"?n:oh(),r=typeof n=="string"?n:e||Md,s=Bu(t,"firestore").getImmediate({identifier:r});if(!s._initialized){const a=vm("firestore");a&&rS(s,...a)}return s}function aa(n){if(n._terminated)throw new pe(ee.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||zO(n),n._firestoreClient}function zO(n){var r,s,a;const e=n._freezeSettings(),t=(function(h,f,p,_){return new fb(h,f,p,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,tS(_.experimentalLongPollingOptions),_.useFetchStreams,_.isUsingEmulator)})(n._databaseId,((r=n._app)==null?void 0:r.options.appId)||"",n._persistenceKey,e);n._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((a=e.localCache)!=null&&a._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new VO(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(h){const f=h==null?void 0:h._online.build();return{_offline:h==null?void 0:h._offline.build(f),_online:f}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new lr(vn.fromBase64String(e))}catch(t){throw new pe(ee.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new lr(vn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:lr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Hu(e,lr._jsonSchema))return lr.fromBase64String(e.bytes)}}lr._jsonSchemaVersion="firestore/bytes/1.0",lr._jsonSchema={type:an("string",lr._jsonSchemaVersion),bytes:an("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class la{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new pe(ee.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new En(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qu{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new pe(ee.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new pe(ee.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return dt(this._lat,e._lat)||dt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ii._jsonSchemaVersion}}static fromJSON(e){if(Hu(e,ii._jsonSchema))return new ii(e.latitude,e.longitude)}}ii._jsonSchemaVersion="firestore/geoPoint/1.0",ii._jsonSchema={type:an("string",ii._jsonSchemaVersion),latitude:an("number"),longitude:an("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class si{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,s){if(r.length!==s.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==s[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:si._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Hu(e,si._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new si(e.vectorValues);throw new pe(ee.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}si._jsonSchemaVersion="firestore/vectorValue/1.0",si._jsonSchema={type:an("string",si._jsonSchemaVersion),vectorValues:an("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GO=/^__.*__$/;class HO{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new ho(e,this.data,this.fieldMask,t,this.fieldTransforms):new qu(e,this.data,t,this.fieldTransforms)}}class sS{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new ho(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function oS(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Fe(40011,{Ac:n})}}class dg{constructor(e,t,r,s,a,l){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=s,a===void 0&&this.Rc(),this.fieldTransforms=a||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new dg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const t=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){var s;const t=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Kd(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(oS(this.Ac)&&GO.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class WO{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Th(e)}Cc(e,t,r,s=!1){return new dg({Ac:e,methodName:t,Dc:r,path:En.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function fl(n){const e=n._freezeSettings(),t=Th(n._databaseId);return new WO(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Rh(n,e,t,r,s,a={}){const l=n.Cc(a.merge||a.mergeFields?2:0,e,t,s);mg("Data must be an object, but it was:",l,r);const h=aS(r,l);let f,p;if(a.merge)f=new Er(l.fieldMask),p=l.fieldTransforms;else if(a.mergeFields){const _=[];for(const E of a.mergeFields){const T=sm(e,E,t);if(!l.contains(T))throw new pe(ee.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);uS(_,T)||_.push(T)}f=new Er(_),p=l.fieldTransforms.filter((E=>f.covers(E.field)))}else f=null,p=l.fieldTransforms;return new HO(new Kn(h),f,p)}class Ju extends Qu{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ju}}class hg extends Qu{constructor(e,t){super(e),this.Fc=t}_toFieldTransform(e){const t=new Ou(e.serializer,g0(e.serializer,this.Fc));return new Ub(e.path,t)}isEqual(e){return e instanceof hg&&this.Fc===e.Fc}}function fg(n,e,t,r){const s=n.Cc(1,e,t);mg("Data must be an object, but it was:",s,r);const a=[],l=Kn.empty();co(r,((f,p)=>{const _=gg(e,f,t);p=yt(p);const E=s.yc(_);if(p instanceof Ju)a.push(_);else{const T=Zu(p,E);T!=null&&(a.push(_),l.set(_,T))}}));const h=new Er(a);return new sS(l,h,s.fieldTransforms)}function pg(n,e,t,r,s,a){const l=n.Cc(1,e,t),h=[sm(e,r,t)],f=[s];if(a.length%2!=0)throw new pe(ee.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<a.length;T+=2)h.push(sm(e,a[T])),f.push(a[T+1]);const p=[],_=Kn.empty();for(let T=h.length-1;T>=0;--T)if(!uS(p,h[T])){const S=h[T];let C=f[T];C=yt(C);const U=l.yc(S);if(C instanceof Ju)p.push(S);else{const L=Zu(C,U);L!=null&&(p.push(S),_.set(S,L))}}const E=new Er(p);return new sS(_,E,l.fieldTransforms)}function qO(n,e,t,r=!1){return Zu(t,n.Cc(r?4:3,e))}function Zu(n,e){if(lS(n=yt(n)))return mg("Unsupported field value:",e,n),aS(n,e);if(n instanceof Qu)return(function(r,s){if(!oS(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(s);a&&s.fieldTransforms.push(a)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,s){const a=[];let l=0;for(const h of r){let f=Zu(h,s.wc(l));f==null&&(f={nullValue:"NULL_VALUE"}),a.push(f),l++}return{arrayValue:{values:a}}})(n,e)}return(function(r,s){if((r=yt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return g0(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=bt.fromDate(r);return{timestampValue:zd(s.serializer,a)}}if(r instanceof bt){const a=new bt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:zd(s.serializer,a)}}if(r instanceof ii)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof lr)return{bytesValue:C0(s.serializer,r._byteString)};if(r instanceof Mt){const a=s.databaseId,l=r.firestore._databaseId;if(!l.isEqual(a))throw s.Sc(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Wm(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof si)return(function(l,h){return{mapValue:{fields:{[e0]:{stringValue:t0},[Ud]:{arrayValue:{values:l.toArray().map((p=>{if(typeof p!="number")throw h.Sc("VectorValues must only contain numeric values.");return zm(h.serializer,p)}))}}}}}})(r,s);throw s.Sc(`Unsupported field value: ${hh(r)}`)})(n,e)}function aS(n,e){const t={};return Kw(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):co(n,((r,s)=>{const a=Zu(s,e.mc(r));a!=null&&(t[r]=a)})),{mapValue:{fields:t}}}function lS(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof bt||n instanceof ii||n instanceof lr||n instanceof Mt||n instanceof Qu||n instanceof si)}function mg(n,e,t){if(!lS(t)||!qw(t)){const r=hh(t);throw r==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+r)}}function sm(n,e,t){if((e=yt(e))instanceof la)return e._internalPath;if(typeof e=="string")return gg(n,e);throw Kd("Field path arguments must be of type string or ",n,!1,void 0,t)}const $O=new RegExp("[~\\*/\\[\\]]");function gg(n,e,t){if(e.search($O)>=0)throw Kd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new la(...e.split("."))._internalPath}catch{throw Kd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Kd(n,e,t,r,s){const a=r&&!r.isEmpty(),l=s!==void 0;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let f="";return(a||l)&&(f+=" (found",a&&(f+=` in field ${r}`),l&&(f+=` in document ${s}`),f+=")"),new pe(ee.INVALID_ARGUMENT,h+n+f)}function uS(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xd{constructor(e,t,r,s,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Mt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new KO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Ah("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class KO extends Xd{data(){return super.data()}}function Ah(n,e){return typeof e=="string"?gg(n,e):e instanceof la?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cS(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new pe(ee.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class yg{}class Ph extends yg{}function et(n,e,...t){let r=[];e instanceof yg&&r.push(e),r=r.concat(t),(function(a){const l=a.filter((f=>f instanceof Ch)).length,h=a.filter((f=>f instanceof ec)).length;if(l>1||l>0&&h>0)throw new pe(ee.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const s of r)n=s._apply(n);return n}class ec extends Ph{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new ec(e,t,r)}_apply(e){const t=this._parse(e);return dS(e._query,t),new Ui(e.firestore,e.converter,Yp(e._query,t))}_parse(e){const t=fl(e.firestore);return(function(a,l,h,f,p,_,E){let T;if(p.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new pe(ee.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){qv(E,_);const C=[];for(const U of E)C.push(Wv(f,a,U));T={arrayValue:{values:C}}}else T=Wv(f,a,E)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||qv(E,_),T=qO(h,l,E,_==="in"||_==="not-in");return sn.create(p,_,T)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function nt(n,e,t){const r=e,s=Ah("where",n);return ec._create(s,r,t)}class Ch extends yg{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Ch(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:oi.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(s,a){let l=s;const h=a.getFlattenedFilters();for(const f of h)dS(l,f),l=Yp(l,f)})(e._query,t),new Ui(e.firestore,e.converter,Yp(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Nh extends Ph{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Nh(e,t)}_apply(e){const t=(function(s,a,l){if(s.startAt!==null)throw new pe(ee.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new pe(ee.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ku(a,l)})(e._query,this._field,this._direction);return new Ui(e.firestore,e.converter,(function(s,a){const l=s.explicitOrderBy.concat([a]);return new dl(s.path,s.collectionGroup,l,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)})(e._query,t))}}function cu(n,e="asc"){const t=e,r=Ah("orderBy",n);return Nh._create(r,t)}class kh extends Ph{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new kh(e,t,r)}_apply(e){return new Ui(e.firestore,e.converter,Bd(e._query,this._limit,this._limitType))}}function ei(n){return nb("limit",n),kh._create("limit",n,"F")}function Wv(n,e,t){if(typeof(t=yt(t))=="string"){if(t==="")throw new pe(ee.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!u0(e)&&t.indexOf("/")!==-1)throw new pe(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Pt.fromString(t));if(!Me.isDocumentKey(r))throw new pe(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return av(n,new Me(r))}if(t instanceof Mt)return av(n,t._key);throw new pe(ee.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${hh(t)}.`)}function qv(n,e){if(!Array.isArray(n)||n.length===0)throw new pe(ee.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function dS(n,e){const t=(function(s,a){for(const l of s)for(const h of l.getFlattenedFilters())if(a.indexOf(h.op)>=0)return h.op;return null})(n.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new pe(ee.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new pe(ee.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class _g{convertValue(e,t="none"){switch(oo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Zt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(so(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Fe(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return co(e,((s,a)=>{r[s]=this.convertValue(a,t)})),r}convertVectorValue(e){var r,s,a;const t=(a=(s=(r=e.fields)==null?void 0:r[Ud].arrayValue)==null?void 0:s.values)==null?void 0:a.map((l=>Zt(l.doubleValue)));return new si(t)}convertGeoPoint(e){return new ii(Zt(e.latitude),Zt(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=ph(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Cu(e));default:return null}}convertTimestamp(e){const t=io(e);return new bt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Pt.fromString(e);gt(x0(r),9688,{name:e});const s=new el(r.get(1),r.get(3)),a=new Me(r.popFirst(5));return s.isEqual(t)||ms(`Document ${a} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bh(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class XO extends _g{constructor(e){super(),this.firestore=e}convertBytes(e){return new lr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Mt(this.firestore,null,t)}}class Ho{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ds extends Xd{constructor(e,t,r,s,a,l){super(e,t,r,s,l),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Eu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Ah("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new pe(ee.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=ds._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}ds._jsonSchemaVersion="firestore/documentSnapshot/1.0",ds._jsonSchema={type:an("string",ds._jsonSchemaVersion),bundleSource:an("string","DocumentSnapshot"),bundleName:an("string"),bundle:an("string")};class Eu extends ds{data(e={}){return super.data(e)}}class eo{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new Ho(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new Eu(this._firestore,this._userDataWriter,r.key,r,new Ho(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new pe(ee.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(s,a){if(s._snapshot.oldDocs.isEmpty()){let l=0;return s._snapshot.docChanges.map((h=>{const f=new Eu(s._firestore,s._userDataWriter,h.doc.key,h.doc,new Ho(s._snapshot.mutatedKeys.has(h.doc.key),s._snapshot.fromCache),s.query.converter);return h.doc,{type:"added",doc:f,oldIndex:-1,newIndex:l++}}))}{let l=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((h=>a||h.type!==3)).map((h=>{const f=new Eu(s._firestore,s._userDataWriter,h.doc.key,h.doc,new Ho(s._snapshot.mutatedKeys.has(h.doc.key),s._snapshot.fromCache),s.query.converter);let p=-1,_=-1;return h.type!==0&&(p=l.indexOf(h.doc.key),l=l.delete(h.doc.key)),h.type!==1&&(l=l.add(h.doc),_=l.indexOf(h.doc.key)),{type:YO(h.type),doc:f,oldIndex:p,newIndex:_}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new pe(ee.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=eo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=dh.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],s=[];return this.docs.forEach((a=>{a._document!==null&&(t.push(a._document),r.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),s.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function YO(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Fe(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function St(n){n=Nn(n,Mt);const e=Nn(n.firestore,Ur);return BO(aa(e),n._key).then((t=>fS(e,n,t)))}eo._jsonSchemaVersion="firestore/querySnapshot/1.0",eo._jsonSchema={type:an("string",eo._jsonSchemaVersion),bundleSource:an("string","QuerySnapshot"),bundleName:an("string"),bundle:an("string")};class Dh extends _g{constructor(e){super(),this.firestore=e}convertBytes(e){return new lr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Mt(this.firestore,null,t)}}function tt(n){n=Nn(n,Ui);const e=Nn(n.firestore,Ur),t=aa(e),r=new Dh(e);return cS(n._query),jO(t,n._query).then((s=>new eo(e,r,n,s)))}function Cn(n,e,t){n=Nn(n,Mt);const r=Nn(n.firestore,Ur),s=bh(n.converter,e,t);return pl(r,[Rh(fl(r),"setDoc",n._key,s,n.converter!==null,t).toMutation(n._key,on.none())])}function ct(n,e,t,...r){n=Nn(n,Mt);const s=Nn(n.firestore,Ur),a=fl(s);let l;return l=typeof(e=yt(e))=="string"||e instanceof la?pg(a,"updateDoc",n._key,e,t,r):fg(a,"updateDoc",n._key,e),pl(s,[l.toMutation(n._key,on.exists(!0))])}function Wo(n){return pl(Nn(n.firestore,Ur),[new $u(n._key,on.none())])}function hS(n,e){const t=Nn(n.firestore,Ur),r=he(n),s=bh(n.converter,e);return pl(t,[Rh(fl(n.firestore),"addDoc",r._key,s,n.converter!==null,{}).toMutation(r._key,on.exists(!1))]).then((()=>r))}function qo(n,...e){var f,p,_;n=yt(n);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||Hv(e[r])||(t=e[r++]);const s={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(Hv(e[r])){const E=e[r];e[r]=(f=E.next)==null?void 0:f.bind(E),e[r+1]=(p=E.error)==null?void 0:p.bind(E),e[r+2]=(_=E.complete)==null?void 0:_.bind(E)}let a,l,h;if(n instanceof Mt)l=Nn(n.firestore,Ur),h=mh(n._key.path),a={next:E=>{e[r]&&e[r](fS(l,n,E))},error:e[r+1],complete:e[r+2]};else{const E=Nn(n,Ui);l=Nn(E.firestore,Ur),h=E._query;const T=new Dh(l);a={next:S=>{e[r]&&e[r](new eo(l,T,E,S))},error:e[r+1],complete:e[r+2]},cS(n._query)}return(function(T,S,C,U){const L=new ug(U),z=new og(S,L,C);return T.asyncQueue.enqueueAndForget((async()=>rg(await $d(T),z))),()=>{L.Nu(),T.asyncQueue.enqueueAndForget((async()=>ig(await $d(T),z)))}})(aa(l),h,s,a)}function pl(n,e){return(function(r,s){const a=new Di;return r.asyncQueue.enqueueAndForget((async()=>RO(await UO(r),s,a))),a.promise})(aa(n),e)}function fS(n,e,t){const r=t.docs.get(e._key),s=new Dh(n);return new ds(n,s,e._key,r,new Ho(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QO={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pS{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=fl(e)}set(e,t,r){this._verifyNotCommitted();const s=Ys(e,this._firestore),a=bh(s.converter,t,r),l=Rh(this._dataReader,"WriteBatch.set",s._key,a,s.converter!==null,r);return this._mutations.push(l.toMutation(s._key,on.none())),this}update(e,t,r,...s){this._verifyNotCommitted();const a=Ys(e,this._firestore);let l;return l=typeof(t=yt(t))=="string"||t instanceof la?pg(this._dataReader,"WriteBatch.update",a._key,t,r,s):fg(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(l.toMutation(a._key,on.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Ys(e,this._firestore);return this._mutations=this._mutations.concat(new $u(t._key,on.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new pe(ee.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Ys(n,e){if((n=yt(n)).firestore!==e)throw new pe(ee.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JO{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=fl(e)}get(e){const t=Ys(e,this._firestore),r=new XO(this._firestore);return this._transaction.lookup([t._key]).then((s=>{if(!s||s.length!==1)return Fe(24041);const a=s[0];if(a.isFoundDocument())return new Xd(this._firestore,r,a.key,a,t.converter);if(a.isNoDocument())return new Xd(this._firestore,r,t._key,null,t.converter);throw Fe(18433,{doc:a})}))}set(e,t,r){const s=Ys(e,this._firestore),a=bh(s.converter,t,r),l=Rh(this._dataReader,"Transaction.set",s._key,a,s.converter!==null,r);return this._transaction.set(s._key,l),this}update(e,t,r,...s){const a=Ys(e,this._firestore);let l;return l=typeof(t=yt(t))=="string"||t instanceof la?pg(this._dataReader,"Transaction.update",a._key,t,r,s):fg(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,l),this}delete(e){const t=Ys(e,this._firestore);return this._transaction.delete(t._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mS extends JO{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Ys(e,this._firestore),r=new Dh(this._firestore);return super.get(e).then((s=>new ds(this._firestore,r,t._key,s._document,new Ho(!1,!1),t.converter)))}}function gS(n,e,t){n=Nn(n,Ur);const r={...QO,...t};return(function(a){if(a.maxAttempts<1)throw new pe(ee.INVALID_ARGUMENT,"Max attempts must be at least 1")})(r),(function(a,l,h){const f=new Di;return a.asyncQueue.enqueueAndForget((async()=>{const p=await FO(a);new xO(a.asyncQueue,p,h,l,f).ju()})),f.promise})(aa(n),(s=>e(new mS(n,s))),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZO(){return new Ju("deleteField")}function Yd(n){return new hg("increment",n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sl(n){return aa(n=Nn(n,Ur)),new pS(n,(e=>pl(n,e)))}(function(e,t=!0){(function(s){ll=s})(ra),to(new hs("firestore",((r,{instanceIdentifier:s,options:a})=>{const l=r.getProvider("app").getImmediate(),h=new Ur(new Kk(r.getProvider("auth-internal")),new Qk(l,r.getProvider("app-check-internal")),(function(p,_){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new pe(ee.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new el(p.options.projectId,_)})(l,s),l);return a={useFetchStreams:t,...a},h._setSettings(a),h}),"PUBLIC").setMultipleInstances(!0)),Vr(KE,XE,e),Vr(KE,XE,"esm2020")})();const yS=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:_g,Bytes:lr,CollectionReference:cs,DocumentReference:Mt,DocumentSnapshot:ds,FieldPath:la,FieldValue:Qu,Firestore:Ur,FirestoreError:pe,GeoPoint:ii,Query:Ui,QueryCompositeFilterConstraint:Ch,QueryConstraint:Ph,QueryDocumentSnapshot:Eu,QueryFieldFilterConstraint:ec,QueryLimitConstraint:kh,QueryOrderByConstraint:Nh,QuerySnapshot:eo,SnapshotMetadata:Ho,Timestamp:bt,Transaction:mS,VectorValue:si,WriteBatch:pS,_AutoId:dh,_ByteString:vn,_DatabaseId:el,_DocumentKey:Me,_EmptyAuthCredentialsProvider:Gw,_FieldPath:En,_cast:Nn,_logWarn:Zo,_validateIsNotUsedTogether:Ww,addDoc:hS,collection:Ue,connectFirestoreEmulator:rS,deleteDoc:Wo,deleteField:ZO,doc:he,ensureFirestoreConfigured:aa,executeWrite:pl,getDoc:St,getDocs:tt,getFirestore:iS,increment:Yd,limit:ei,onSnapshot:qo,orderBy:cu,query:et,runTransaction:gS,setDoc:Cn,updateDoc:ct,where:nt,writeBatch:sl},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _S="firebasestorage.googleapis.com",ES="storageBucket",eL=120*1e3,tL=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt extends Mi{constructor(e,t,r=0){super(Ap(e),`Firebase Storage: ${t} (${Ap(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Yt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Ap(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Xt;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Xt||(Xt={}));function Ap(n){return"storage/"+n}function Eg(){const n="An unknown error occurred, please check the error payload for server response.";return new Yt(Xt.UNKNOWN,n)}function nL(n){return new Yt(Xt.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function rL(n){return new Yt(Xt.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function iL(){const n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Yt(Xt.UNAUTHENTICATED,n)}function sL(){return new Yt(Xt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function oL(n){return new Yt(Xt.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function aL(){return new Yt(Xt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function lL(){return new Yt(Xt.CANCELED,"User canceled the upload/download.")}function uL(n){return new Yt(Xt.INVALID_URL,"Invalid URL '"+n+"'.")}function cL(n){return new Yt(Xt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function dL(){return new Yt(Xt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+ES+"' property when initializing the app?")}function hL(){return new Yt(Xt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function fL(){return new Yt(Xt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function pL(n){return new Yt(Xt.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function om(n){return new Yt(Xt.INVALID_ARGUMENT,n)}function vS(){return new Yt(Xt.APP_DELETED,"The Firebase app was deleted.")}function mL(n){return new Yt(Xt.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function vu(n,e){return new Yt(Xt.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function tu(n){throw new Yt(Xt.INTERNAL_ERROR,"Internal error: "+n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=vr.makeFromUrl(e,t)}catch{return new vr(e,"")}if(r.path==="")return r;throw cL(e)}static makeFromUrl(e,t){let r=null;const s="([A-Za-z0-9.\\-_]+)";function a(oe){oe.path.charAt(oe.path.length-1)==="/"&&(oe.path_=oe.path_.slice(0,-1))}const l="(/(.*))?$",h=new RegExp("^gs://"+s+l,"i"),f={bucket:1,path:3};function p(oe){oe.path_=decodeURIComponent(oe.path)}const _="v[A-Za-z0-9_]+",E=t.replace(/[.]/g,"\\."),T="(/([^?#]*).*)?$",S=new RegExp(`^https?://${E}/${_}/b/${s}/o${T}`,"i"),C={bucket:1,path:3},U=t===_S?"(?:storage.googleapis.com|storage.cloud.google.com)":t,L="([^?#]*)",z=new RegExp(`^https?://${U}/${s}/${L}`,"i"),Z=[{regex:h,indices:f,postModify:a},{regex:S,indices:C,postModify:p},{regex:z,indices:{bucket:1,path:2},postModify:p}];for(let oe=0;oe<Z.length;oe++){const we=Z[oe],me=we.regex.exec(e);if(me){const I=me[we.indices.bucket];let A=me[we.indices.path];A||(A=""),r=new vr(I,A),we.postModify(r);break}}if(r==null)throw uL(e);return r}}class gL{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yL(n,e,t){let r=1,s=null,a=null,l=!1,h=0;function f(){return h===2}let p=!1;function _(...L){p||(p=!0,e.apply(null,L))}function E(L){s=setTimeout(()=>{s=null,n(S,f())},L)}function T(){a&&clearTimeout(a)}function S(L,...z){if(p){T();return}if(L){T(),_.call(null,L,...z);return}if(f()||l){T(),_.call(null,L,...z);return}r<64&&(r*=2);let Z;h===1?(h=2,Z=0):Z=(r+Math.random())*1e3,E(Z)}let C=!1;function U(L){C||(C=!0,T(),!p&&(s!==null?(L||(h=2),clearTimeout(s),E(0)):L||(h=1)))}return E(0),a=setTimeout(()=>{l=!0,U(!0)},t),U}function _L(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EL(n){return n!==void 0}function vL(n){return typeof n=="object"&&!Array.isArray(n)}function vg(n){return typeof n=="string"||n instanceof String}function $v(n){return Tg()&&n instanceof Blob}function Tg(){return typeof Blob<"u"}function Kv(n,e,t,r){if(r<e)throw om(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw om(`Invalid value for '${n}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wg(n,e,t){let r=e;return t==null&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function TS(n){const e=encodeURIComponent;let t="?";for(const r in n)if(n.hasOwnProperty(r)){const s=e(r)+"="+e(n[r]);t=t+s+"&"}return t=t.slice(0,-1),t}var $o;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})($o||($o={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TL(n,e){const t=n>=500&&n<600,s=[408,429].indexOf(n)!==-1,a=e.indexOf(n)!==-1;return t||s||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wL{constructor(e,t,r,s,a,l,h,f,p,_,E,T=!0,S=!1){this.url_=e,this.method_=t,this.headers_=r,this.body_=s,this.successCodes_=a,this.additionalRetryCodes_=l,this.callback_=h,this.errorCallback_=f,this.timeout_=p,this.progressCallback_=_,this.connectionFactory_=E,this.retry=T,this.isUsingEmulator=S,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((C,U)=>{this.resolve_=C,this.reject_=U,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new hd(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const l=h=>{const f=h.loaded,p=h.lengthComputable?h.total:-1;this.progressCallback_!==null&&this.progressCallback_(f,p)};this.progressCallback_!==null&&a.addUploadProgressListener(l),a.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(l),this.pendingConnection_=null;const h=a.getErrorCode()===$o.NO_ERROR,f=a.getStatus();if(!h||TL(f,this.additionalRetryCodes_)&&this.retry){const _=a.getErrorCode()===$o.ABORT;r(!1,new hd(!1,null,_));return}const p=this.successCodes_.indexOf(f)!==-1;r(!0,new hd(p,a))})},t=(r,s)=>{const a=this.resolve_,l=this.reject_,h=s.connection;if(s.wasSuccessCode)try{const f=this.callback_(h,h.getResponse());EL(f)?a(f):a()}catch(f){l(f)}else if(h!==null){const f=Eg();f.serverResponse=h.getErrorText(),this.errorCallback_?l(this.errorCallback_(h,f)):l(f)}else if(s.canceled){const f=this.appDelete_?vS():lL();l(f)}else{const f=aL();l(f)}};this.canceled_?t(!1,new hd(!1,null,!0)):this.backoffId_=yL(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&_L(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class hd{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function SL(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function IL(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function RL(n,e){e&&(n["X-Firebase-GMPID"]=e)}function AL(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function PL(n,e,t,r,s,a,l=!0,h=!1){const f=TS(n.urlParams),p=n.url+f,_=Object.assign({},n.headers);return RL(_,e),SL(_,t),IL(_,a),AL(_,r),new wL(p,n.method,_,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,s,l,h)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CL(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function NL(...n){const e=CL();if(e!==void 0){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}else{if(Tg())return new Blob(n);throw new Yt(Xt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function kL(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bL(n){if(typeof atob>"u")throw pL("base-64");return atob(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ti={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Pp{constructor(e,t){this.data=e,this.contentType=t||null}}function wS(n,e){switch(n){case ti.RAW:return new Pp(SS(e));case ti.BASE64:case ti.BASE64URL:return new Pp(IS(n,e));case ti.DATA_URL:return new Pp(OL(e),LL(e))}throw Eg()}function SS(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const a=r,l=n.charCodeAt(++t);r=65536|(a&1023)<<10|l&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function DL(n){let e;try{e=decodeURIComponent(n)}catch{throw vu(ti.DATA_URL,"Malformed data URL.")}return SS(e)}function IS(n,e){switch(n){case ti.BASE64:{const s=e.indexOf("-")!==-1,a=e.indexOf("_")!==-1;if(s||a)throw vu(n,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case ti.BASE64URL:{const s=e.indexOf("+")!==-1,a=e.indexOf("/")!==-1;if(s||a)throw vu(n,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=bL(e)}catch(s){throw s.message.includes("polyfill")?s:vu(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r}class RS{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw vu(ti.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;r!=null&&(this.base64=xL(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function OL(n){const e=new RS(n);return e.base64?IS(ti.BASE64,e.rest):DL(e.rest)}function LL(n){return new RS(n).contentType}function xL(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s{constructor(e,t){let r=0,s="";$v(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,t){if($v(this.data_)){const r=this.data_,s=kL(r,e,t);return s===null?null:new $s(s)}else{const r=new Uint8Array(this.data_.buffer,e,t-e);return new $s(r,!0)}}static getBlob(...e){if(Tg()){const t=e.map(r=>r instanceof $s?r.data_:r);return new $s(NL.apply(null,t))}else{const t=e.map(l=>vg(l)?wS(ti.RAW,l).data:l.data_);let r=0;t.forEach(l=>{r+=l.byteLength});const s=new Uint8Array(r);let a=0;return t.forEach(l=>{for(let h=0;h<l.length;h++)s[a++]=l[h]}),new $s(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AS(n){let e;try{e=JSON.parse(n)}catch{return null}return vL(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VL(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function ML(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return n.length===0?t:n+"/"+t}function PS(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UL(n,e){return e}class $n{constructor(e,t,r,s){this.server=e,this.local=t||e,this.writable=!!r,this.xform=s||UL}}let fd=null;function FL(n){return!vg(n)||n.length<2?n:PS(n)}function CS(){if(fd)return fd;const n=[];n.push(new $n("bucket")),n.push(new $n("generation")),n.push(new $n("metageneration")),n.push(new $n("name","fullPath",!0));function e(a,l){return FL(l)}const t=new $n("name");t.xform=e,n.push(t);function r(a,l){return l!==void 0?Number(l):l}const s=new $n("size");return s.xform=r,n.push(s),n.push(new $n("timeCreated")),n.push(new $n("updated")),n.push(new $n("md5Hash",null,!0)),n.push(new $n("cacheControl",null,!0)),n.push(new $n("contentDisposition",null,!0)),n.push(new $n("contentEncoding",null,!0)),n.push(new $n("contentLanguage",null,!0)),n.push(new $n("contentType",null,!0)),n.push(new $n("metadata","customMetadata",!0)),fd=n,fd}function BL(n,e){function t(){const r=n.bucket,s=n.fullPath,a=new vr(r,s);return e._makeStorageReference(a)}Object.defineProperty(n,"ref",{get:t})}function jL(n,e,t){const r={};r.type="file";const s=t.length;for(let a=0;a<s;a++){const l=t[a];r[l.local]=l.xform(r,e[l.server])}return BL(r,n),r}function NS(n,e,t){const r=AS(e);return r===null?null:jL(n,r,t)}function zL(n,e,t,r){const s=AS(e);if(s===null||!vg(s.downloadTokens))return null;const a=s.downloadTokens;if(a.length===0)return null;const l=encodeURIComponent;return a.split(",").map(p=>{const _=n.bucket,E=n.fullPath,T="/b/"+l(_)+"/o/"+l(E),S=wg(T,t,r),C=TS({alt:"media",token:p});return S+C})[0]}function GL(n,e){const t={},r=e.length;for(let s=0;s<r;s++){const a=e[s];a.writable&&(t[a.server]=n[a.local])}return JSON.stringify(t)}class kS{constructor(e,t,r,s){this.url=e,this.method=t,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bS(n){if(!n)throw Eg()}function HL(n,e){function t(r,s){const a=NS(n,s,e);return bS(a!==null),a}return t}function WL(n,e){function t(r,s){const a=NS(n,s,e);return bS(a!==null),zL(a,s,n.host,n._protocol)}return t}function DS(n){function e(t,r){let s;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?s=sL():s=iL():t.getStatus()===402?s=rL(n.bucket):t.getStatus()===403?s=oL(n.path):s=r,s.status=t.getStatus(),s.serverResponse=r.serverResponse,s}return e}function qL(n){const e=DS(n);function t(r,s){let a=e(r,s);return r.getStatus()===404&&(a=nL(n.path)),a.serverResponse=s.serverResponse,a}return t}function $L(n,e,t){const r=e.fullServerUrl(),s=wg(r,n.host,n._protocol),a="GET",l=n.maxOperationRetryTime,h=new kS(s,a,WL(n,t),l);return h.errorHandler=qL(e),h}function KL(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function XL(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=KL(null,e)),r}function YL(n,e,t,r,s){const a=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"};function h(){let Z="";for(let oe=0;oe<2;oe++)Z=Z+Math.random().toString().slice(2);return Z}const f=h();l["Content-Type"]="multipart/related; boundary="+f;const p=XL(e,r,s),_=GL(p,t),E="--"+f+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+_+`\r
--`+f+`\r
Content-Type: `+p.contentType+`\r
\r
`,T=`\r
--`+f+"--",S=$s.getBlob(E,r,T);if(S===null)throw hL();const C={name:p.fullPath},U=wg(a,n.host,n._protocol),L="POST",z=n.maxUploadRetryTime,$=new kS(U,L,HL(n,t),z);return $.urlParams=C,$.headers=l,$.body=S.uploadData(),$.errorHandler=DS(e),$}class QL{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=$o.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=$o.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=$o.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,s,a){if(this.sent_)throw tu("cannot .send() more than once");if(ys(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),a!==void 0)for(const l in a)a.hasOwnProperty(l)&&this.xhr_.setRequestHeader(l,a[l].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw tu("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw tu("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw tu("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw tu("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class JL extends QL{initXhr(){this.xhr_.responseType="text"}}function OS(){return new JL}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ta{constructor(e,t){this._service=e,t instanceof vr?this._location=t:this._location=vr.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new ta(e,t)}get root(){const e=new vr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return PS(this._location.path)}get storage(){return this._service}get parent(){const e=VL(this._location.path);if(e===null)return null;const t=new vr(this._location.bucket,e);return new ta(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw mL(e)}}function ZL(n,e,t){n._throwIfRoot("uploadBytes");const r=YL(n.storage,n._location,CS(),new $s(e,!0),t);return n.storage.makeRequestWithTokens(r,OS).then(s=>({metadata:s,ref:n}))}function e2(n,e,t=ti.RAW,r){n._throwIfRoot("uploadString");const s=wS(t,e),a={...r};return a.contentType==null&&s.contentType!=null&&(a.contentType=s.contentType),ZL(n,s.data,a)}function t2(n){n._throwIfRoot("getDownloadURL");const e=$L(n.storage,n._location,CS());return n.storage.makeRequestWithTokens(e,OS).then(t=>{if(t===null)throw fL();return t})}function n2(n,e){const t=ML(n._location.path,e),r=new vr(n._location.bucket,t);return new ta(n.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r2(n){return/^[A-Za-z]+:\/\//.test(n)}function i2(n,e){return new ta(n,e)}function LS(n,e){if(n instanceof Sg){const t=n;if(t._bucket==null)throw dL();const r=new ta(t,t._bucket);return e!=null?LS(r,e):r}else return e!==void 0?n2(n,e):n}function s2(n,e){if(e&&r2(e)){if(n instanceof Sg)return i2(n,e);throw om("To use ref(service, url), the first argument must be a Storage instance.")}else return LS(n,e)}function Xv(n,e){const t=e==null?void 0:e[ES];return t==null?null:vr.makeFromBucketSpec(t,n)}function o2(n,e,t,r={}){n.host=`${e}:${t}`;const s=ys(e);s&&(ih(`https://${n.host}/b`),sh("Storage",!0)),n._isUsingEmulator=!0,n._protocol=s?"https":"http";const{mockUserToken:a}=r;a&&(n._overrideAuthToken=typeof a=="string"?a:$T(a,n.app.options.projectId))}class Sg{constructor(e,t,r,s,a,l=!1){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=s,this._firebaseVersion=a,this._isUsingEmulator=l,this._bucket=null,this._host=_S,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=eL,this._maxUploadRetryTime=tL,this._requests=new Set,s!=null?this._bucket=vr.makeFromBucketSpec(s,this._host):this._bucket=Xv(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=vr.makeFromBucketSpec(this._url,e):this._bucket=Xv(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Kv("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Kv("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(Pn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ta(this,e)}_makeRequest(e,t,r,s,a=!0){if(this._deleted)return new gL(vS());{const l=PL(e,this._appId,r,s,t,this._firebaseVersion,a,this._isUsingEmulator);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}async makeRequestWithTokens(e,t){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,s).getPromise()}}const Yv="@firebase/storage",Qv="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xS="storage";function VS(n,e,t,r){return n=yt(n),e2(n,e,t,r)}function MS(n){return n=yt(n),t2(n)}function US(n,e){return n=yt(n),s2(n,e)}function a2(n=oh(),e){n=yt(n);const r=Bu(n,xS).getImmediate({identifier:e}),s=vm("storage");return s&&l2(r,...s),r}function l2(n,e,t,r={}){o2(n,e,t,r)}function u2(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),s=n.getProvider("app-check-internal");return new Sg(t,r,s,e,ra)}function c2(){to(new hs(xS,u2,"PUBLIC").setMultipleInstances(!0)),Vr(Yv,Qv,""),Vr(Yv,Qv,"esm2020")}c2();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FS="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d2{constructor(e,t,r,s){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,Pn(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=t.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||t.get().then(a=>this.auth=a,()=>{}),this.messaging||r.get().then(a=>this.messaging=a,()=>{}),this.appCheck||s==null||s.get().then(a=>this.appCheck=a,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const t=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return t.error?null:t.token}return null}async getContext(e){const t=await this.getAuthToken(),r=await this.getMessagingToken(),s=await this.getAppCheckToken(e);return{authToken:t,messagingToken:r,appCheckToken:s}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const am="us-central1";class h2{constructor(e,t,r,s,a=am,l=(...h)=>fetch(...h)){this.app=e,this.fetchImpl=l,this.emulatorOrigin=null,this.contextProvider=new d2(e,t,r,s),this.cancelAllRequests=new Promise(h=>{this.deleteService=()=>Promise.resolve(h())});try{const h=new URL(a);this.customDomain=h.origin+(h.pathname==="/"?"":h.pathname),this.region=am}catch{this.customDomain=null,this.region=a}}_delete(){return this.deleteService()}_url(e){const t=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${t}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${t}.cloudfunctions.net/${e}`}}function f2(n,e,t){const r=ys(e);n.emulatorOrigin=`http${r?"s":""}://${e}:${t}`,r&&(ih(n.emulatorOrigin+"/backends"),sh("Functions",!0))}const Jv="@firebase/functions",Zv="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p2="auth-internal",m2="app-check-internal",g2="messaging-internal";function y2(n){const e=(t,{instanceIdentifier:r})=>{const s=t.getProvider("app").getImmediate(),a=t.getProvider(p2),l=t.getProvider(g2),h=t.getProvider(m2);return new h2(s,a,l,h,r)};to(new hs(FS,e,"PUBLIC").setMultipleInstances(!0)),Vr(Jv,Zv,n),Vr(Jv,Zv,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _2(n=oh(),e=am){const r=Bu(yt(n),FS).getImmediate({identifier:e}),s=vm("functions");return s&&E2(r,...s),r}function E2(n,e,t){f2(yt(n),e,t)}y2();const eT={BASE_URL:"/",DEV:!1,FIREBASE_API_KEY:"AIzaSyDW7yj_e1fvvaEPkto5IMDE4KFrlD9c6Ck",FIREBASE_APP_ID:"1:880591200812:web:72173b8d4e800072496789",FIREBASE_AUTH_DOMAIN:"doorstep-c75e3.firebaseapp.com",FIREBASE_MEASUREMENT_ID:"G-F7DWJ7N66P",FIREBASE_MESSAGING_SENDER_ID:"880591200812",FIREBASE_PROJECT_ID:"doorstep-c75e3",FIREBASE_STORAGE_BUCKET:"doorstep-c75e3.firebasestorage.app",MODE:"production",PROD:!0,SSR:!1};var v2={};class T2{constructor(){this.config=this.loadConfig(),this.validate()}loadConfig(){const e=typeof eT<"u"?eT:{},t=typeof process<"u"?v2:{},r=s=>e[s]||t[s]||"";return{FIREBASE_API_KEY:r("VITE_FIREBASE_API_KEY")||r("FIREBASE_API_KEY"),FIREBASE_AUTH_DOMAIN:r("VITE_FIREBASE_AUTH_DOMAIN")||r("FIREBASE_AUTH_DOMAIN"),FIREBASE_PROJECT_ID:r("VITE_FIREBASE_PROJECT_ID")||r("FIREBASE_PROJECT_ID"),FIREBASE_STORAGE_BUCKET:r("VITE_FIREBASE_STORAGE_BUCKET")||r("FIREBASE_STORAGE_BUCKET"),FIREBASE_MESSAGING_SENDER_ID:r("VITE_FIREBASE_MESSAGING_SENDER_ID")||r("FIREBASE_MESSAGING_SENDER_ID"),FIREBASE_APP_ID:r("VITE_FIREBASE_APP_ID")||r("FIREBASE_APP_ID"),FIREBASE_MEASUREMENT_ID:r("VITE_FIREBASE_MEASUREMENT_ID")||r("FIREBASE_MEASUREMENT_ID"),VITE_APP_NAME:r("VITE_APP_NAME")||"Doorstep",VITE_DEFAULT_LANGUAGE:r("VITE_DEFAULT_LANGUAGE")||"en",VITE_API_URL:r("VITE_API_URL")||"https://api-lsv4ogyjva-uc.a.run.app"}}validate(){const t=["FIREBASE_API_KEY","FIREBASE_AUTH_DOMAIN","FIREBASE_PROJECT_ID","FIREBASE_STORAGE_BUCKET","FIREBASE_MESSAGING_SENDER_ID","FIREBASE_APP_ID"].filter(r=>!this.config[r]);if(t.length>0)throw console.error("Missing required environment variables:",t),new Error(`Missing required environment variables: ${t.join(", ")}. Please check your .env.local file.`)}get firebase(){return{apiKey:this.config.FIREBASE_API_KEY,authDomain:this.config.FIREBASE_AUTH_DOMAIN,projectId:this.config.FIREBASE_PROJECT_ID,storageBucket:this.config.FIREBASE_STORAGE_BUCKET,messagingSenderId:this.config.FIREBASE_MESSAGING_SENDER_ID,appId:this.config.FIREBASE_APP_ID,measurementId:this.config.FIREBASE_MEASUREMENT_ID}}get app(){return{name:this.config.VITE_APP_NAME,defaultLanguage:this.config.VITE_DEFAULT_LANGUAGE,apiUrl:this.config.VITE_API_URL}}get isDevelopment(){return!1}get isProduction(){return!0}}const BS=new T2,Oh=YT(BS.firebase),pd=Wk(Oh),Je=iS(Oh),Lr=a2(Oh);_2(Oh);const w2=new as;w2.setCustomParameters({prompt:"select_account"});const S2={PHONE_EMAIL_DOMAIN:"doorsteps.tech"},Bo=n=>n?n.replace(/\D/g,""):"",Cp=n=>`${Bo(n)}@${S2.PHONE_EMAIL_DOMAIN}`;class I2{constructor(e){this.db=e,this.OTP_EXPIRY_MS=300*1e3,this.MAX_ATTEMPTS=3,this.RATE_LIMIT_WINDOW_MS=3600*1e3,this.MAX_REQUESTS_PER_HOUR=20}generateCode(){return Math.floor(1e5+Math.random()*9e5).toString()}normalizePhone(e){return Bo(e)}async checkRateLimit(e){const t=this.normalizePhone(e),r=await St(he(this.db,"otp_codes",t));if(!r.exists())return!0;const s=r.data(),l=Date.now()-this.RATE_LIMIT_WINDOW_MS;return s.createdAt<l?!0:(s.requestCount||0)<this.MAX_REQUESTS_PER_HOUR}async requestOTP(e,t="LOGIN"){try{const r=this.normalizePhone(e);if(!await this.checkRateLimit(r))return{success:!1,message:"Too many requests. Please try again later."};const a=this.generateCode(),l=Date.now(),h=l+this.OTP_EXPIRY_MS,f=await St(he(this.db,"otp_codes",r)),p=f.exists()?f.data():null,_=!p||l-p.createdAt>this.RATE_LIMIT_WINDOW_MS,E={id:r,code:a,phone:e,createdAt:l,expiresAt:h,attempts:0,verified:!1,purpose:t,requestCount:_?1:((p==null?void 0:p.requestCount)||0)+1};return await Cn(he(this.db,"otp_codes",r),E),{success:!0,message:"OTP code generated successfully. Check Firebase Console or use getOTP() to retrieve it."}}catch(r){return console.error("[OTP] Request error:",r),{success:!1,message:r.message||"Failed to generate OTP"}}}async verifyOTP(e,t){try{const r=this.normalizePhone(e),s=await St(he(this.db,"otp_codes",r));if(!s.exists())return{success:!1,message:"No OTP found for this phone number. Please request a new code."};const a=s.data(),l=Date.now();return a.verified?{success:!1,message:"This OTP has already been used. Please request a new code."}:l>a.expiresAt?(await Wo(he(this.db,"otp_codes",r)),{success:!1,message:"OTP has expired. Please request a new code."}):a.attempts>=this.MAX_ATTEMPTS?(await Wo(he(this.db,"otp_codes",r)),{success:!1,message:"Too many failed attempts. Please request a new code."}):a.code!==t?(await Cn(he(this.db,"otp_codes",r),{attempts:a.attempts+1},{merge:!0}),{success:!1,message:`Invalid OTP code. ${this.MAX_ATTEMPTS-a.attempts-1} attempts remaining.`}):(await Cn(he(this.db,"otp_codes",r),{verified:!0},{merge:!0}),await Wo(he(this.db,"otp_codes",r)),{success:!0,message:"OTP verified successfully",purpose:a.purpose})}catch(r){return console.error("[OTP] Verification error:",r),{success:!1,message:r.message||"Failed to verify OTP"}}}async getOTP(e){try{const t=this.normalizePhone(e),r=await St(he(this.db,"otp_codes",t));if(!r.exists())return{code:null,expiresAt:null};const s=r.data();return Date.now()>s.expiresAt?{code:null,expiresAt:null}:{code:s.code,expiresAt:s.expiresAt}}catch(t){return console.error("[OTP] Get OTP error:",t),{code:null,expiresAt:null}}}async cleanupExpiredOTPs(){try{const e=Date.now(),t=Ue(this.db,"otp_codes"),r=await tt(t);let s=0;for(const a of r.docs){const l=a.data();e>l.expiresAt&&(await Wo(he(this.db,"otp_codes",a.id)),s++)}return s}catch(e){return console.error("[OTP] Cleanup error:",e),0}}}class R2{constructor(e,t){this.auth=e,this.db=t,this.otpService=new I2(t)}async login(e,t){await vp(this.auth,e,t)}async callApi(e,t,r,s=!1){const a={"Content-Type":"application/json"};if(s&&this.auth.currentUser){const f=await this.auth.currentUser.getIdToken();a.Authorization=`Bearer ${f}`}const l=await fetch(`${BS.app.apiUrl}${e}`,{method:t,headers:a,body:JSON.stringify(r)}),h=await l.json();if(!l.ok)throw new Error(h.message||"API request failed");return h}async sendRegistrationLink(e,t){const r={url:window.location.origin+"/auth/login?mode=VERIFY",handleCodeInApp:!0};window.localStorage.setItem("registration_email",e),window.localStorage.setItem("registration_data",JSON.stringify(t)),await AN(this.auth,e,r)}isEmailLink(e){return PN(this.auth,e)}async completeRegistrationWithLink(e,t){const r=await CN(this.auth,e,window.location.href);if(!r.user)throw new Error("Failed to sign in with link.");const s=window.localStorage.getItem("registration_data");if(!s)throw new Error("Registration data not found. Please start over.");const a=JSON.parse(s),{name:l,phone:h,role:f="customer"}=a;return t&&await kN(r.user,t),await zp(r.user,{displayName:l}),await this.createProfile(r.user,l,{...a,phone:h,role:f,password:t}),window.localStorage.removeItem("registration_email"),window.localStorage.removeItem("registration_data"),r.user}generateReferralCode(e){const t=(e||"USR").replace(/[^A-Z]/gi,"").substring(0,3).toUpperCase()||"USR",r=Math.floor(1e3+Math.random()*9e3);return`${t}-${r}`}async createProfile(e,t,r){let s=null,a=null;const l=(r==null?void 0:r.role)||"customer",h=Date.now(),f=(r==null?void 0:r.createdAt)||(r==null?void 0:r.joinedAt)||h,p=(r==null?void 0:r.joinedAt)||(r==null?void 0:r.createdAt)||h;if(l==="customer"){const E=he(Ue(this.db,"customers"));s=E.id;const T={id:s,name:t,email:e.email,phone:r.phone||"",status:"ACTIVE",linkedUserId:e.uid,createdAt:f,bankAccounts:r.bankAccounts||[],address:r.address||"",referralCode:r.referralCode||this.generateReferralCode(t),savedLocations:r.savedLocations||[],isTaxable:r.isTaxable||!1,excludeFeesInSettlement:r.excludeFeesInSettlement||!1};await Cn(E,T)}if(l==="driver"||l==="warehouse"){const E=he(Ue(this.db,"employees"));a=E.id;const T={id:a,name:t,email:e.email||"",phone:r.phone||"",address:r.address||"",linkedUserId:e.uid,status:"ACTIVE",hireDate:new Date().toISOString().split("T")[0],isDriver:l==="driver",position:l==="driver"?"Driver":"Warehouse Staff",department:"Operations",employmentType:"FULL_TIME"};await Cn(E,T)}const _={uid:e.uid,email:e.email,name:t,role:l,status:l==="customer"?"APPROVED":"PENDING",linkedCustomerId:s,linkedEmployeeId:a,lastLogin:r.lastLogin||h,authMethod:r.authMethod||"email",joinedAt:p,phone:r.phone?Bo(r.phone):"",address:r.address||"",referralCode:l==="customer"?r.referralCode||this.generateReferralCode(t):null,referredBy:r.referredBy||null};!_.email&&e.email&&(_.email=e.email),await Cn(he(this.db,"users",e.uid),_)}async register(e,t,r,s){const a=await VE(this.auth,e,t);await this.createProfile(a.user,r,{...s,password:t})}async logout(){await LN(this.auth)}async resetPassword(e){const t={url:window.location.origin+"/auth/action",handleCodeInApp:!0};await IN(this.auth,e,t)}async signInWithGoogle(e,t="customer"){const r=await ek(this.auth,e),s=r.user,a=he(this.db,"users",s.uid);return(await St(a)).exists()?await ct(a,{lastLogin:Date.now()}):await this.createProfile(s,s.displayName||"Google User",{authMethod:"google",role:t}),r}async resetPINWithOTP(e,t,r){try{return{success:!0,message:(await this.callApi("/auth/reset-password-otp","POST",{phone:e,otp:t,newPassword:r})).message||"PIN reset successfully"}}catch(s){return console.error("[PIN RESET] API Error:",s),{success:!1,message:s.message||"Failed to reset PIN"}}}async lookupUserByPhone(e){const t=Bo(e),r=Ue(this.db,"users"),s=et(r,nt("phone","==",t),ei(1)),a=await tt(s);return a.empty?null:a.docs[0].data().email}async loginWithEmailOrPhone(e,t){if(e.includes("@"))return await vp(this.auth,e,t);{const s=Bo(e),a=Cp(s);try{return await vp(this.auth,a,t)}catch(l){throw l.code==="auth/user-not-found"?new Error("No account found with this phone number"):l.code==="auth/wrong-password"||l.code==="auth/invalid-credential"?new Error("Invalid PIN"):l}}}async registerWithPhone(e,t,r,s){const a=Cp(e),l=Bo(e);return await this.register(a,t,r,{...s,phone:l,authMethod:"phone"})}async getCurrentUser(){return new Promise(e=>{const t=ME(this.auth,async r=>{if(t(),r){const s=await St(he(this.db,"users",r.uid));if(s.exists()){const a=s.data();if(a.linkedCustomerId){const l=await St(he(this.db,"customers",a.linkedCustomerId));if(l.exists()){e({...a,...l.data(),uid:r.uid});return}}e(a)}else e({uid:r.uid,email:r.email,name:r.displayName||"",role:"customer",status:"APPROVED"})}else e(null)})})}subscribeToAuth(e){return ME(this.auth,async t=>{if(t)try{const r=await St(he(this.db,"users",t.uid));if(r.exists()){const s=r.data();if(s.linkedCustomerId){const a=await St(he(this.db,"customers",s.linkedCustomerId));if(a.exists()){e({...s,...a.data(),uid:t.uid});return}}e(s)}else e({uid:t.uid,email:t.email,name:t.displayName||"",role:"customer",status:"APPROVED"})}catch(r){console.error("Auth subscription error",r),e(null)}else e(null)})}async requestOTP(e,t="LOGIN"){var r;try{const s=await this.callApi("/auth/request-otp","POST",{phone:e,purpose:t});return{success:!0,message:s.message||"OTP sent successfully",debugCode:(r=s.data)==null?void 0:r.debugCode}}catch(s){return{success:!1,message:s.message||"Failed to send OTP"}}}async verifyOTP(e,t){try{return{success:!0,message:(await this.callApi("/auth/verify-otp","POST",{phone:e,otp:t})).message||"OTP verified"}}catch(r){return{success:!1,message:r.message||"Invalid OTP"}}}async getOTP(e){return await this.otpService.getOTP(e)}async signupWithOTP(e,t,r,s){const a=await this.verifyOTP(e,t);if(!a.success)throw new Error(a.message);const l=Bo(e),h=Cp(l),f=(s==null?void 0:s.password)||Math.random().toString(36).slice(-12);try{const p=await VE(this.auth,h,f);return await zp(p.user,{displayName:r}),await this.createProfile(p.user,r,{...s,phone:l,password:f,authMethod:"phone",role:(s==null?void 0:s.role)||"customer"}),p.user}catch(p){throw p.code==="auth/email-already-in-use"?new Error("An account with this phone number already exists."):p}}async loginWithOTP(e,t){const r=await this.callApi("/auth/login-otp","POST",{phone:e,otp:t});if(!r.token)throw new Error("Login failed: No token received");return(await SN(this.auth,r.token)).user}}class _s{constructor(e,t){this.db=e,this.storage=t}cleanData(e){const t=new WeakSet,r=s=>{if(s==null)return null;const a=typeof s;if(a==="function"||a==="symbol")return;if(a!=="object")return s;if(s instanceof Date)return s.toISOString();if(s.nodeType||s===window||s instanceof window.HTMLElement||s._reactName||s.nativeEvent&&s.target||s._leaflet_id!==void 0||t.has(s))return;if(t.add(s),Array.isArray(s))return s.map(f=>r(f)).filter(f=>f!==void 0);const l=Object.getPrototypeOf(s);if(l&&l!==Object.prototype)return typeof s.toJSON=="function"?s.toJSON():void 0;const h={};for(const f in s)if(!(f.startsWith("__")||f.startsWith("$")||f==="constructor"||f==="prototype")&&Object.prototype.hasOwnProperty.call(s,f))try{const p=r(s[f]);p!==void 0&&(h[f]=p)}catch{}return h};return r(e)}async uploadAttachment(e){try{const t=`uploads/${Date.now()}_${Math.random().toString(36).substr(2,9)}`,r=US(this.storage,t);return await VS(r,e,"data_url"),await MS(r)}catch(t){return console.error("Upload failed",t),e}}async saveDocument(e,t,r=!1){const s=this.cleanData(t);if(!s||typeof s!="object"||Array.isArray(s))throw new Error("Invalid data format for saving. Must be an object.");if(!s.id)throw new Error("Document must have an ID.");await Cn(he(this.db,e,s.id),s,{merge:r})}async getCollection(e){return(await tt(Ue(this.db,e))).docs.map(r=>r.data())}async getDocument(e,t){const r=await St(he(this.db,e,t));return r.exists()?r.data():null}async deleteDocument(e,t){await Wo(he(this.db,e,t))}}var k=(n=>(n.ASSET="Asset",n.LIABILITY="Liability",n.EQUITY="Equity",n.REVENUE="Revenue",n.EXPENSE="Expense",n))(k||{}),P=(n=>(n.CURRENT_ASSET="Current Asset",n.NON_CURRENT_ASSET="Non-Current Asset",n.CURRENT_LIABILITY="Current Liability",n.LONG_TERM_LIABILITY="Long Term Liability",n.EQUITY="Equity",n.OPERATING_REVENUE="Operating Revenue",n.OTHER_REVENUE="Other Revenue",n.COST_OF_GOODS_SOLD="Cost of Goods Sold",n.OPERATING_EXPENSE="Operating Expense",n.OTHER_EXPENSE="Other Expense",n))(P||{});const fV={[k.ASSET]:[P.CURRENT_ASSET,P.NON_CURRENT_ASSET],[k.LIABILITY]:[P.CURRENT_LIABILITY,P.LONG_TERM_LIABILITY],[k.EQUITY]:[P.EQUITY],[k.REVENUE]:[P.OPERATING_REVENUE,P.OTHER_REVENUE],[k.EXPENSE]:[P.COST_OF_GOODS_SOLD,P.OPERATING_EXPENSE,P.OTHER_EXPENSE]},Qd={"system-admin":["VIEW_DASHBOARD","VIEW_JOURNAL","CREATE_JOURNAL","APPROVE_JOURNAL","VIEW_REPORTS","MANAGE_SETTINGS","MANAGE_USERS","MANAGE_RECEIVABLES","MANAGE_PAYABLES","MANAGE_ASSETS","MANAGE_STAFF_LOANS","MANAGE_BANKING","PERFORM_CLOSING","MANAGE_PAYROLL","MANAGE_PARCELS","VIEW_PARCELS_OVERVIEW","CREATE_PARCEL_BOOKING","MANAGE_PARCEL_OPERATIONS","MANAGE_PARCEL_WAREHOUSE","MANAGE_PARCEL_DISPATCH","VIEW_PARCEL_RETENTION","VIEW_PARCEL_AGING","MANAGE_PARCEL_FLEET","MANAGE_PARCEL_PLACES","MANAGE_PARCEL_PRODUCTS","MANAGE_CASHBACK"],accountant:["VIEW_DASHBOARD","VIEW_JOURNAL","CREATE_JOURNAL","VIEW_REPORTS","MANAGE_RECEIVABLES","MANAGE_PAYABLES","MANAGE_ASSETS","MANAGE_STAFF_LOANS","MANAGE_PAYROLL","MANAGE_BANKING","MANAGE_CUSTOMER_SETTLEMENTS","MANAGE_CUSTOMERS","VIEW_PARCELS_OVERVIEW"],"finance-manager":["VIEW_DASHBOARD","VIEW_JOURNAL","APPROVE_JOURNAL","VIEW_REPORTS","MANAGE_CUSTOMER_SETTLEMENTS","MANAGE_CUSTOMERS","VIEW_PARCELS_OVERVIEW","VIEW_PARCEL_RETENTION","VIEW_PARCEL_AGING"],customer:["CREATE_BOOKING","VIEW_MY_PARCELS","TRACK_PARCELS","VIEW_PROFILE","CUSTOMER_VIEW_REPORTS","VIEW_CUSTOMER_STOCK","MANAGE_CUSTOMER_PRODUCTS","CREATE_STOCK_REQUEST"],driver:["VIEW_DRIVER_JOBS","VIEW_DRIVER_PICKUPS","VIEW_DRIVER_EARNINGS","VIEW_PROFILE"],"fleet-driver":["VIEW_DRIVER_JOBS","VIEW_DRIVER_PICKUPS","VIEW_DRIVER_EARNINGS","VIEW_PROFILE"],warehouse:["VIEW_DASHBOARD","VIEW_PARCELS_OVERVIEW","CREATE_PARCEL_BOOKING","MANAGE_PARCEL_WAREHOUSE","MANAGE_PARCEL_OPERATIONS","MANAGE_PARCEL_DISPATCH","MANAGE_PARCEL_FLEET","MANAGE_CUSTOMER_STOCK","VIEW_STOCK_REPORTS","REVIEW_STOCK_REQUEST"],sales:["VIEW_DASHBOARD","VIEW_PARCELS_OVERVIEW","MANAGE_CUSTOMERS","MANAGE_CASHBACK","VIEW_PARCEL_RETENTION","VIEW_PARCEL_AGING"]},lm=[{id:"nav-dashboard",label:"Dashboard",viewId:"DASHBOARD",iconKey:"dashboard",order:1,allowedRoles:["system-admin","accountant","warehouse"]},{id:"nav-analytics",label:"Analytics",viewId:"ANALYTICS",iconKey:"analytics",order:2,allowedRoles:["system-admin","accountant"]},{id:"nav-parcels-overview",label:"Parcels Overview",viewId:"PARCELS_OVERVIEW",iconKey:"parcels",order:10,allowedRoles:["system-admin","warehouse","accountant"],section:"warehouse"},{id:"nav-parcels-new",label:"New Booking",viewId:"PARCELS_NEW",iconKey:"plus",order:11,allowedRoles:["system-admin","warehouse"],section:"warehouse"},{id:"nav-parcels-operations",label:"Operations",viewId:"PARCELS_OPERATIONS",iconKey:"operations",order:12,allowedRoles:["system-admin","warehouse"],section:"warehouse"},{id:"nav-parcels-warehouse",label:"Warehouse",viewId:"PARCELS_WAREHOUSE",iconKey:"warehouse",order:13,allowedRoles:["system-admin","warehouse"],section:"warehouse"},{id:"nav-parcels-dispatch",label:"Dispatch",viewId:"PARCELS_DISPATCH",iconKey:"dispatch",order:14,allowedRoles:["system-admin","warehouse"],section:"warehouse"},{id:"nav-delayed-chats",label:"Delayed Chats",viewId:"DELAYED_CHATS",iconKey:"chat-delay",order:14.5,allowedRoles:["system-admin","warehouse"],section:"warehouse"},{id:"nav-stock-management",label:"Stock Management",viewId:"STOCK_MANAGEMENT",iconKey:"package",order:15,allowedRoles:["system-admin","warehouse"],section:"warehouse"},{id:"nav-incoming-requests",label:"Incoming Requests",viewId:"STOCK_REQUESTS",iconKey:"inbox",order:15.5,allowedRoles:["system-admin","warehouse"],section:"warehouse"},{id:"nav-parcels-places",label:"Places",viewId:"PARCELS_PLACES",iconKey:"places",order:16,allowedRoles:["system-admin"],section:"warehouse"},{id:"nav-parcels-products",label:"Products/Services",viewId:"PARCELS_PRODUCTS",iconKey:"products",order:17,allowedRoles:["system-admin"],section:"warehouse"},{id:"nav-promotions",label:"Promotions",viewId:"PROMOTIONS",iconKey:"gift",order:18,allowedRoles:["system-admin"],section:"warehouse"},{id:"nav-cashback",label:"Cashback Rules",viewId:"CASHBACK",iconKey:"money",order:19,allowedRoles:["system-admin","sales"],section:"sales"},{id:"nav-cashback-report",label:"Cashback Report",viewId:"CASHBACK_REPORT",iconKey:"reports",order:20,allowedRoles:["system-admin","sales","accountant"],section:"sales"},{id:"nav-parcels-fleet",label:"Fleet Management",viewId:"PARCELS_FLEET",iconKey:"fleet",order:16.5,allowedRoles:["system-admin","warehouse"],section:"driver"},{id:"nav-driver-jobs",label:"My Jobs",viewId:"DRIVER_JOBS",iconKey:"jobs",order:60,allowedRoles:["driver"],section:"driver"},{id:"nav-driver-wallet",label:"Wallet",viewId:"DRIVER_WALLET",iconKey:"wallet",order:61,allowedRoles:["driver"],section:"driver"},{id:"nav-driver-profile",label:"Profile",viewId:"DRIVER_PROFILE",iconKey:"user",order:62,allowedRoles:["driver"],section:"driver"},{id:"nav-customers",label:"Customers",viewId:"CUSTOMERS",iconKey:"users",order:19,allowedRoles:["system-admin","accountant","finance-manager"],section:"customer"},{id:"nav-customer-dashboard",label:"My Parcels",viewId:"CUSTOMER_PARCELS",iconKey:"dashboard",order:50,allowedRoles:["customer"],section:"customer"},{id:"nav-customer-booking",label:"New Booking",viewId:"CUSTOMER_BOOKING",iconKey:"plus",order:51,allowedRoles:["customer"],section:"customer"},{id:"nav-customer-stock-booking",label:"Stock Request",viewId:"CUSTOMER_STOCK_BOOKING",iconKey:"inventory",order:51.5,allowedRoles:["customer"],section:"customer"},{id:"nav-customer-wallet",label:"Wallet",viewId:"CUSTOMER_WALLET",iconKey:"wallet",order:52,allowedRoles:["customer"],section:"customer"},{id:"nav-customer-products",label:"My Products",viewId:"CUSTOMER_PRODUCTS",iconKey:"products",order:52.2,allowedRoles:["customer"],section:"customer"},{id:"nav-customer-stock",label:"My Stock",viewId:"CUSTOMER_STOCK",iconKey:"package",order:52.5,allowedRoles:["customer"],section:"customer"},{id:"nav-customer-stock-requests",label:"Stock Requests",viewId:"CUSTOMER_STOCK_REQUESTS",iconKey:"fileText",order:52.7,allowedRoles:["customer"],section:"customer"},{id:"nav-customer-reports",label:"Spending Report",viewId:"CUSTOMER_REPORTS",iconKey:"reports",order:53,allowedRoles:["customer"],section:"customer"},{id:"nav-customer-profile",label:"My Profile",viewId:"CUSTOMER_PROFILE",iconKey:"user",order:54,allowedRoles:["customer"],section:"customer"},{id:"nav-journal",label:"Journal",viewId:"JOURNAL",iconKey:"journal",order:20,allowedRoles:["system-admin","accountant"],section:"finance"},{id:"nav-banking",label:"Banking",viewId:"BANKING",iconKey:"banking",order:21,allowedRoles:["system-admin","accountant"],section:"finance"},{id:"nav-customer-payout",label:"Customer Payout",viewId:"CUSTOMER_SETTLEMENTS",iconKey:"money",order:25,allowedRoles:["system-admin","accountant","finance-manager"],section:"finance"},{id:"nav-settled-parcels",label:"Settled Parcels",viewId:"SETTLED_PARCELS",iconKey:"checkCircle",order:26,allowedRoles:["system-admin","accountant"],section:"finance"},{id:"nav-closing",label:"Period Closing",viewId:"CLOSING",iconKey:"closing",order:28,allowedRoles:["system-admin","accountant"],section:"finance"},{id:"nav-standard-expenses",label:"Post Expense",viewId:"STANDARD_EXPENSES",iconKey:"receipt",order:22,allowedRoles:["system-admin","accountant"],section:"finance"},{id:"nav-expense-templates",label:"Expense Templates",viewId:"EXPENSE_TEMPLATES",iconKey:"settings",order:23,allowedRoles:["system-admin","finance-manager","accountant"],section:"finance"},{id:"nav-staff-manage",label:"Manage Staff",viewId:"STAFF_MANAGE",iconKey:"users",order:30,allowedRoles:["system-admin","accountant"],section:"employee"},{id:"nav-staff-allowances",label:"Allowances & Attendance",viewId:"STAFF_ALLOWANCES",iconKey:"calendar",order:30.5,allowedRoles:["system-admin","accountant"],section:"employee"},{id:"nav-staff",label:"Loans Overview",viewId:"STAFF",iconKey:"staff",order:31,allowedRoles:["system-admin","accountant"],section:"employee"},{id:"nav-staff-loan-issue",label:"Issue Loan",viewId:"STAFF_LOAN_ISSUE",iconKey:"plus",order:32,allowedRoles:["system-admin","accountant"],section:"employee"},{id:"nav-staff-settlements",label:"Settlements",viewId:"STAFF_SETTLEMENTS",iconKey:"money",order:33,allowedRoles:["system-admin","accountant"],section:"employee"},{id:"nav-staff-deposit",label:"Accept Deposit",viewId:"STAFF_DEPOSIT",iconKey:"banking",order:34,allowedRoles:["system-admin","accountant"],section:"employee"},{id:"nav-payroll",label:"Payroll",viewId:"PAYROLL",iconKey:"money",order:35,allowedRoles:["system-admin","accountant"],section:"employee"},{id:"nav-reports",label:"Reports",viewId:"REPORTS",iconKey:"reports",order:40,allowedRoles:["system-admin","accountant"],section:"reports"},{id:"nav-parcels-retention",label:"Customer Retention",viewId:"PARCELS_RETENTION",iconKey:"retention",order:41,allowedRoles:["system-admin","accountant"],section:"reports"},{id:"nav-parcels-aging",label:"Aging Report",viewId:"PARCELS_AGING",iconKey:"aging",order:42,allowedRoles:["system-admin","accountant"],section:"reports"},{id:"nav-stock-alerts",label:"Stock Alerts",viewId:"STOCK_ALERTS",iconKey:"alert",order:43,allowedRoles:["system-admin","warehouse"],section:"reports"},{id:"nav-booking-map",label:"Booking Map",viewId:"BOOKING_MAP",iconKey:"places",order:44,allowedRoles:["system-admin","accountant"],section:"reports"},{id:"nav-booking-status-driver",label:"Booking Status by Driver",viewId:"BOOKING_STATUS_DRIVER",iconKey:"driver",order:45,allowedRoles:["system-admin","accountant"],section:"reports"},{id:"nav-settings",label:"Configuration",viewId:"SETTINGS",iconKey:"settings",order:90,allowedRoles:["system-admin"],section:"system"},{id:"nav-telegram",label:"Telegram",viewId:"TELEGRAM",iconKey:"telegram",order:91,allowedRoles:["system-admin"],section:"system"},{id:"nav-users",label:"Users",viewId:"USERS",iconKey:"users",order:92,allowedRoles:["system-admin"],section:"system"},{id:"nav-manual",label:"Manual",viewId:"MANUAL",iconKey:"manual",order:99,allowedRoles:["system-admin","accountant","warehouse","driver","customer"]}],pV=[{key:"VIEW_DASHBOARD",label:"View Dashboard"},{key:"VIEW_JOURNAL",label:"View General Journal"},{key:"CREATE_JOURNAL",label:"Create/Edit Journal Entries"},{key:"APPROVE_JOURNAL",label:"Approve/Reject Journal Entries"},{key:"MANAGE_RECEIVABLES",label:"Sales & Receivables"},{key:"MANAGE_PAYABLES",label:"Purchases & Payables"},{key:"MANAGE_ASSETS",label:"Fixed Assets"},{key:"MANAGE_STAFF_LOANS",label:"Staff Loans & Advances"},{key:"MANAGE_PAYROLL",label:"Payroll Management"},{key:"MANAGE_BANKING",label:"Banking & Transfers"},{key:"MANAGE_CUSTOMER_SETTLEMENTS",label:"Customer Settlements (Payouts)"},{key:"MANAGE_CUSTOMERS",label:"Customer Management"},{key:"VIEW_REPORTS",label:"Financial Reports"},{key:"PERFORM_CLOSING",label:"Period Closing"},{key:"MANAGE_SETTINGS",label:"System Configuration"},{key:"MANAGE_USERS",label:"User Management"},{key:"VIEW_PARCELS_OVERVIEW",label:"Parcels: View Overview & List"},{key:"CREATE_PARCEL_BOOKING",label:"Parcels: Create Booking"},{key:"MANAGE_PARCEL_OPERATIONS",label:"Parcels: Operations Console"},{key:"MANAGE_PARCEL_WAREHOUSE",label:"Parcels: Warehouse Operations"},{key:"MANAGE_PARCEL_DISPATCH",label:"Parcels: Dispatch Console"},{key:"VIEW_PARCEL_RETENTION",label:"Parcels: Customer Retention Reports"},{key:"VIEW_PARCEL_AGING",label:"Parcels: Aging Reports"},{key:"MANAGE_PARCEL_FLEET",label:"Parcels: Fleet/Driver Management"},{key:"MANAGE_PARCEL_PLACES",label:"Parcels: Places Management"},{key:"MANAGE_PARCEL_PRODUCTS",label:"Parcels: Products/Services Setup"},{key:"CUSTOMER_VIEW_REPORTS",label:"Customer: Spending Reports"},{key:"MANAGE_CUSTOMER_STOCK",label:"Stock: Manage Customer Stock"},{key:"VIEW_CUSTOMER_STOCK",label:"Stock: View Own Stock"},{key:"VIEW_STOCK_REPORTS",label:"Stock: View Stock Alerts"},{key:"MANAGE_CUSTOMER_PRODUCTS",label:"Products: Manage Product Catalog"},{key:"CREATE_STOCK_REQUEST",label:"Stock: Create Stock Requests"},{key:"REVIEW_STOCK_REQUEST",label:"Stock: Review Stock Requests"}],mV={FINANCE:["VIEW_JOURNAL","CREATE_JOURNAL","APPROVE_JOURNAL","MANAGE_RECEIVABLES","MANAGE_PAYABLES","MANAGE_ASSETS","MANAGE_STAFF_LOANS","MANAGE_PAYROLL","MANAGE_BANKING","MANAGE_CUSTOMER_SETTLEMENTS","MANAGE_CUSTOMERS","PERFORM_CLOSING"],LOGISTICS:["MANAGE_PARCELS","VIEW_PARCELS_OVERVIEW","CREATE_PARCEL_BOOKING","MANAGE_PARCEL_OPERATIONS","MANAGE_PARCEL_WAREHOUSE","MANAGE_PARCEL_DISPATCH","MANAGE_PARCEL_FLEET","MANAGE_PARCEL_PLACES","MANAGE_PARCEL_PRODUCTS"],REPORTS:["VIEW_REPORTS","VIEW_PARCEL_RETENTION","VIEW_PARCEL_AGING","CUSTOMER_VIEW_REPORTS"],SETTINGS:["MANAGE_SETTINGS","MANAGE_USERS","MANAGE_PARCEL_CONFIG","MANAGE_LOGISTICS_CONFIG"],SYSTEM:["VIEW_DASHBOARD"],DRIVER:["VIEW_DRIVER_JOBS","VIEW_DRIVER_PICKUPS","VIEW_DRIVER_EARNINGS"],CUSTOMER:["CREATE_BOOKING","VIEW_MY_PARCELS","TRACK_PARCELS","VIEW_PROFILE"]},gV=[{id:"1100001",code:"1100001",name:"Petty Cash",type:k.ASSET,subType:P.CURRENT_ASSET,currency:"KHR"},{id:"1101001",code:"1101001",name:"Settlement Account",type:k.ASSET,subType:P.CURRENT_ASSET,currency:"KHR"},{id:"1101002",code:"1101002",name:"Settlement Account",type:k.ASSET,subType:P.CURRENT_ASSET,currency:"USD"},{id:"1101101",code:"1101101",name:"Transit",type:k.ASSET,subType:P.CURRENT_ASSET,currency:"KHR"},{id:"1101102",code:"1101102",name:"Transit",type:k.ASSET,subType:P.CURRENT_ASSET,currency:"USD"},{id:"1105001",code:"1105001",name:"Accounts Receivable (Delivery Wallet)",type:k.ASSET,subType:P.CURRENT_ASSET,currency:"KHR"},{id:"1105002",code:"1105002",name:"Accounts Receivable (Delivery Wallet)",type:k.ASSET,subType:P.CURRENT_ASSET,currency:"USD"},{id:"1111001",code:"1111001",name:"Cash on Hand",type:k.ASSET,subType:P.CURRENT_ASSET,currency:"KHR"},{id:"1111002",code:"1111002",name:"Cash on Hand",type:k.ASSET,subType:P.CURRENT_ASSET,currency:"USD"},{id:"1112001",code:"1112001",name:"Cash in Bank",type:k.ASSET,subType:P.CURRENT_ASSET,currency:"KHR"},{id:"1112002",code:"1112002",name:"Cash in Bank",type:k.ASSET,subType:P.CURRENT_ASSET,currency:"USD"},{id:"1113001",code:"1113001",name:"Employee Advances",type:k.ASSET,subType:P.CURRENT_ASSET,currency:"KHR"},{id:"1113002",code:"1113002",name:"Employee Advances",type:k.ASSET,subType:P.CURRENT_ASSET,currency:"USD"},{id:"1114001",code:"1114001",name:"Other Receivables",type:k.ASSET,subType:P.CURRENT_ASSET,currency:"KHR"},{id:"1114002",code:"1114002",name:"Other Receivables",type:k.ASSET,subType:P.CURRENT_ASSET,currency:"USD"},{id:"1130001",code:"1130001",name:"Prepaid Insurance",type:k.ASSET,subType:P.CURRENT_ASSET,currency:"KHR"},{id:"1130002",code:"1130002",name:"Prepaid Insurance",type:k.ASSET,subType:P.CURRENT_ASSET,currency:"USD"},{id:"1131001",code:"1131001",name:"Prepaid Rent",type:k.ASSET,subType:P.CURRENT_ASSET,currency:"KHR"},{id:"1131002",code:"1131002",name:"Prepaid Rent",type:k.ASSET,subType:P.CURRENT_ASSET,currency:"USD"},{id:"1132001",code:"1132001",name:"Prepaid Expenses - Other",type:k.ASSET,subType:P.CURRENT_ASSET,currency:"KHR"},{id:"1132002",code:"1132002",name:"Prepaid Expenses - Other",type:k.ASSET,subType:P.CURRENT_ASSET,currency:"USD"},{id:"1133001",code:"1133001",name:"Deposits - Security",type:k.ASSET,subType:P.CURRENT_ASSET,currency:"KHR"},{id:"1133002",code:"1133002",name:"Deposits - Security",type:k.ASSET,subType:P.CURRENT_ASSET,currency:"USD"},{id:"1134001",code:"1134001",name:"Deferred Tax Asset - Current",type:k.ASSET,subType:P.CURRENT_ASSET,currency:"KHR"},{id:"1134002",code:"1134002",name:"Deferred Tax Asset - Current",type:k.ASSET,subType:P.CURRENT_ASSET,currency:"USD"},{id:"1234002",code:"1234002",name:"VAT-Input",type:k.ASSET,subType:P.CURRENT_ASSET,currency:"USD"},{id:"1234001",code:"1234001",name:"VAT-Input",type:k.ASSET,subType:P.CURRENT_ASSET,currency:"KHR"},{id:"2140001",code:"2140001",name:"Land",type:k.ASSET,subType:P.NON_CURRENT_ASSET,currency:"KHR"},{id:"2140002",code:"2140002",name:"Land",type:k.ASSET,subType:P.NON_CURRENT_ASSET,currency:"USD"},{id:"2141001",code:"2141001",name:"Buildings",type:k.ASSET,subType:P.NON_CURRENT_ASSET,currency:"KHR"},{id:"2141002",code:"2141002",name:"Buildings",type:k.ASSET,subType:P.NON_CURRENT_ASSET,currency:"USD"},{id:"2141101",code:"2141101",name:"Accumulated Depreciation - Buildings",type:k.ASSET,subType:P.NON_CURRENT_ASSET,currency:"KHR"},{id:"2141102",code:"2141102",name:"Accumulated Depreciation - Buildings",type:k.ASSET,subType:P.NON_CURRENT_ASSET,currency:"USD"},{id:"2142001",code:"2142001",name:"Leasehold Improvements",type:k.ASSET,subType:P.NON_CURRENT_ASSET,currency:"KHR"},{id:"2142002",code:"2142002",name:"Leasehold Improvements",type:k.ASSET,subType:P.NON_CURRENT_ASSET,currency:"USD"},{id:"2142101",code:"2142101",name:"Accumulated Amortization - Leasehold",type:k.ASSET,subType:P.NON_CURRENT_ASSET,currency:"KHR"},{id:"2142102",code:"2142102",name:"Accumulated Amortization - Leasehold",type:k.ASSET,subType:P.NON_CURRENT_ASSET,currency:"USD"},{id:"2151001",code:"2151001",name:"Office Equipment",type:k.ASSET,subType:P.NON_CURRENT_ASSET,currency:"KHR"},{id:"2151002",code:"2151002",name:"Office Equipment",type:k.ASSET,subType:P.NON_CURRENT_ASSET,currency:"USD"},{id:"2151101",code:"2151101",name:"Accumulated Depreciation - Office Equipment",type:k.ASSET,subType:P.NON_CURRENT_ASSET,currency:"KHR"},{id:"2151102",code:"2151102",name:"Accumulated Depreciation - Office Equipment",type:k.ASSET,subType:P.NON_CURRENT_ASSET,currency:"USD"},{id:"2152001",code:"2152001",name:"Computer Equipment",type:k.ASSET,subType:P.NON_CURRENT_ASSET,currency:"KHR"},{id:"2152002",code:"2152002",name:"Computer Equipment",type:k.ASSET,subType:P.NON_CURRENT_ASSET,currency:"USD"},{id:"2152101",code:"2152101",name:"Accumulated Depreciation - Computer Equipment",type:k.ASSET,subType:P.NON_CURRENT_ASSET,currency:"KHR"},{id:"2152102",code:"2152102",name:"Accumulated Depreciation - Computer Equipment",type:k.ASSET,subType:P.NON_CURRENT_ASSET,currency:"USD"},{id:"2153001",code:"2153001",name:"Furniture & Fixtures",type:k.ASSET,subType:P.NON_CURRENT_ASSET,currency:"KHR"},{id:"2153002",code:"2153002",name:"Furniture & Fixtures",type:k.ASSET,subType:P.NON_CURRENT_ASSET,currency:"USD"},{id:"2153101",code:"2153101",name:"Accumulated Depreciation - Furniture",type:k.ASSET,subType:P.NON_CURRENT_ASSET,currency:"KHR"},{id:"2153102",code:"2153102",name:"Accumulated Depreciation - Furniture",type:k.ASSET,subType:P.NON_CURRENT_ASSET,currency:"USD"},{id:"2160001",code:"2160001",name:"Vehicles",type:k.ASSET,subType:P.NON_CURRENT_ASSET,currency:"KHR"},{id:"2160002",code:"2160002",name:"Vehicles",type:k.ASSET,subType:P.NON_CURRENT_ASSET,currency:"USD"},{id:"2160101",code:"2160101",name:"Accumulated Depreciation - Vehicles",type:k.ASSET,subType:P.NON_CURRENT_ASSET,currency:"KHR"},{id:"2160102",code:"2160102",name:"Accumulated Depreciation - Vehicles",type:k.ASSET,subType:P.NON_CURRENT_ASSET,currency:"USD"},{id:"2170001",code:"2170001",name:"Intangible Assets - Patents",type:k.ASSET,subType:P.NON_CURRENT_ASSET,currency:"KHR"},{id:"2170002",code:"2170002",name:"Intangible Assets - Patents",type:k.ASSET,subType:P.NON_CURRENT_ASSET,currency:"USD"},{id:"2171001",code:"2171001",name:"Intangible Assets - Trademarks",type:k.ASSET,subType:P.NON_CURRENT_ASSET,currency:"KHR"},{id:"2171002",code:"2171002",name:"Intangible Assets - Trademarks",type:k.ASSET,subType:P.NON_CURRENT_ASSET,currency:"USD"},{id:"2172001",code:"2172001",name:"Intangible Assets - Goodwill",type:k.ASSET,subType:P.NON_CURRENT_ASSET,currency:"KHR"},{id:"2172002",code:"2172002",name:"Intangible Assets - Goodwill",type:k.ASSET,subType:P.NON_CURRENT_ASSET,currency:"USD"},{id:"2173001",code:"2173001",name:"Accumulated Amortization - Intangibles",type:k.ASSET,subType:P.NON_CURRENT_ASSET,currency:"KHR"},{id:"2173002",code:"2173002",name:"Accumulated Amortization - Intangibles",type:k.ASSET,subType:P.NON_CURRENT_ASSET,currency:"USD"},{id:"2174001",code:"2174001",name:"Intangible Asset-Software & Licenses",type:k.ASSET,subType:P.NON_CURRENT_ASSET,currency:"KHR"},{id:"2174002",code:"2174002",name:"Intangible Asset -Software & Licenses",type:k.ASSET,subType:P.NON_CURRENT_ASSET,currency:"USD"},{id:"2175001",code:"2175001",name:"Accumulated Amortization  Software",type:k.ASSET,subType:P.NON_CURRENT_ASSET,currency:"KHR"},{id:"2175002",code:"2175002",name:"Accumulated Amortization  Software",type:k.ASSET,subType:P.NON_CURRENT_ASSET,currency:"USD"},{id:"2180001",code:"2180001",name:"Long-term Investments",type:k.ASSET,subType:P.NON_CURRENT_ASSET,currency:"KHR"},{id:"2180002",code:"2180002",name:"Long-term Investments",type:k.ASSET,subType:P.NON_CURRENT_ASSET,currency:"USD"},{id:"2181001",code:"2181001",name:"Notes Receivable - Long-term",type:k.ASSET,subType:P.NON_CURRENT_ASSET,currency:"KHR"},{id:"2181002",code:"2181002",name:"Notes Receivable - Long-term",type:k.ASSET,subType:P.NON_CURRENT_ASSET,currency:"USD"},{id:"2190001",code:"2190001",name:"Deferred Tax Asset - Long-term",type:k.ASSET,subType:P.NON_CURRENT_ASSET,currency:"KHR"},{id:"2190002",code:"2190002",name:"Deferred Tax Asset - Long-term",type:k.ASSET,subType:P.NON_CURRENT_ASSET,currency:"USD"},{id:"3200001",code:"3200001",name:"Accounts Payable(Customer Wallet)",type:k.LIABILITY,subType:P.CURRENT_LIABILITY,currency:"KHR"},{id:"3200002",code:"3200002",name:"Accounts Payable(Customer Wallet)",type:k.LIABILITY,subType:P.CURRENT_LIABILITY,currency:"USD"},{id:"3210102",code:"3210102",name:"Accrued Commision",type:k.LIABILITY,subType:P.CURRENT_LIABILITY,currency:"USD"},{id:"3210101",code:"3210101",name:"Accrued Commision",type:k.LIABILITY,subType:P.CURRENT_LIABILITY,currency:"KHR"},{id:"3201001",code:"3201001",name:"Accrued Expenses",type:k.LIABILITY,subType:P.CURRENT_LIABILITY,currency:"KHR"},{id:"3201002",code:"3201002",name:"Accrued Expenses",type:k.LIABILITY,subType:P.CURRENT_LIABILITY,currency:"USD"},{id:"3202001",code:"3202001",name:"Notes Payable - Current",type:k.LIABILITY,subType:P.CURRENT_LIABILITY,currency:"KHR"},{id:"3202002",code:"3202002",name:"Notes Payable - Current",type:k.LIABILITY,subType:P.CURRENT_LIABILITY,currency:"USD"},{id:"3210001",code:"3210001",name:"Salaries & Wages Payable",type:k.LIABILITY,subType:P.CURRENT_LIABILITY,currency:"KHR"},{id:"3210002",code:"3210002",name:"Salaries & Wages Payable",type:k.LIABILITY,subType:P.CURRENT_LIABILITY,currency:"USD"},{id:"3211001",code:"3211001",name:"Payroll Tax Payable - Federal",type:k.LIABILITY,subType:P.CURRENT_LIABILITY,currency:"KHR"},{id:"3211002",code:"3211002",name:"Payroll Tax Payable - Federal",type:k.LIABILITY,subType:P.CURRENT_LIABILITY,currency:"USD"},{id:"3211101",code:"3211101",name:"Payroll Tax Payable - State",type:k.LIABILITY,subType:P.CURRENT_LIABILITY,currency:"KHR"},{id:"3211102",code:"3211102",name:"Payroll Tax Payable - State",type:k.LIABILITY,subType:P.CURRENT_LIABILITY,currency:"USD"},{id:"3211201",code:"3211201",name:"Payroll Tax Payable - Local",type:k.LIABILITY,subType:P.CURRENT_LIABILITY,currency:"KHR"},{id:"3211202",code:"3211202",name:"Payroll Tax Payable - Local",type:k.LIABILITY,subType:P.CURRENT_LIABILITY,currency:"USD"},{id:"3212001",code:"3212001",name:"Employee Benefits Payable",type:k.LIABILITY,subType:P.CURRENT_LIABILITY,currency:"KHR"},{id:"3212002",code:"3212002",name:"Employee Benefits Payable",type:k.LIABILITY,subType:P.CURRENT_LIABILITY,currency:"USD"},{id:"3213001",code:"3213001",name:"Health Insurance Payable",type:k.LIABILITY,subType:P.CURRENT_LIABILITY,currency:"KHR"},{id:"3213002",code:"3213002",name:"Health Insurance Payable",type:k.LIABILITY,subType:P.CURRENT_LIABILITY,currency:"USD"},{id:"3221001",code:"3221001",name:"Income Tax Payable - Federal",type:k.LIABILITY,subType:P.CURRENT_LIABILITY,currency:"KHR"},{id:"3222002",code:"3222002",name:"Income Tax Payable - Federal",type:k.LIABILITY,subType:P.CURRENT_LIABILITY,currency:"USD"},{id:"3222101",code:"3222101",name:"Income Tax Payable - State",type:k.LIABILITY,subType:P.CURRENT_LIABILITY,currency:"KHR"},{id:"3222102",code:"3222102",name:"Income Tax Payable - State",type:k.LIABILITY,subType:P.CURRENT_LIABILITY,currency:"USD"},{id:"3223001",code:"3223001",name:"Property Tax Payable",type:k.LIABILITY,subType:P.CURRENT_LIABILITY,currency:"KHR"},{id:"3223002",code:"3223002",name:"Property Tax Payable",type:k.LIABILITY,subType:P.CURRENT_LIABILITY,currency:"USD"},{id:"3224001",code:"3224001",name:"Estimated Tax Payments",type:k.LIABILITY,subType:P.CURRENT_LIABILITY,currency:"KHR"},{id:"3224002",code:"3224002",name:"Estimated Tax Payments",type:k.LIABILITY,subType:P.CURRENT_LIABILITY,currency:"USD"},{id:"3230001",code:"3230001",name:"Unearned Revenue",type:k.LIABILITY,subType:P.CURRENT_LIABILITY,currency:"KHR"},{id:"3230002",code:"3230002",name:"Unearned Revenue",type:k.LIABILITY,subType:P.CURRENT_LIABILITY,currency:"USD"},{id:"3232001",code:"3232001",name:"Dividends Payable",type:k.LIABILITY,subType:P.CURRENT_LIABILITY,currency:"KHR"},{id:"3232002",code:"3232002",name:"Dividends Payable",type:k.LIABILITY,subType:P.CURRENT_LIABILITY,currency:"USD"},{id:"3233001",code:"3233001",name:"Interest Payable",type:k.LIABILITY,subType:P.CURRENT_LIABILITY,currency:"KHR"},{id:"3233002",code:"3233002",name:"Interest Payable",type:k.LIABILITY,subType:P.CURRENT_LIABILITY,currency:"USD"},{id:"3333002",code:"3333002",name:"VAT-Output",type:k.LIABILITY,subType:P.CURRENT_LIABILITY,currency:"USD"},{id:"3333001",code:"3333001",name:"VAT-Output",type:k.LIABILITY,subType:P.CURRENT_LIABILITY,currency:"KHR"},{id:"3240001",code:"3240001",name:"Notes Payable - Long-term",type:k.LIABILITY,subType:P.LONG_TERM_LIABILITY,currency:"KHR"},{id:"3240002",code:"3240002",name:"Notes Payable - Long-term",type:k.LIABILITY,subType:P.LONG_TERM_LIABILITY,currency:"USD"},{id:"3241001",code:"3241001",name:"Mortgage Payable",type:k.LIABILITY,subType:P.LONG_TERM_LIABILITY,currency:"KHR"},{id:"3241002",code:"3241002",name:"Mortgage Payable",type:k.LIABILITY,subType:P.LONG_TERM_LIABILITY,currency:"USD"},{id:"3242001",code:"3242001",name:"Bonds Payable",type:k.LIABILITY,subType:P.LONG_TERM_LIABILITY,currency:"KHR"},{id:"3242002",code:"3242002",name:"Bonds Payable",type:k.LIABILITY,subType:P.LONG_TERM_LIABILITY,currency:"USD"},{id:"3243001",code:"3243001",name:"Deferred Tax Liability",type:k.LIABILITY,subType:P.LONG_TERM_LIABILITY,currency:"KHR"},{id:"3243002",code:"3243002",name:"Deferred Tax Liability",type:k.LIABILITY,subType:P.LONG_TERM_LIABILITY,currency:"USD"},{id:"3244001",code:"3244001",name:"Pension Liability",type:k.LIABILITY,subType:P.LONG_TERM_LIABILITY,currency:"KHR"},{id:"3244002",code:"3244002",name:"Pension Liability",type:k.LIABILITY,subType:P.LONG_TERM_LIABILITY,currency:"USD"},{id:"3245001",code:"3245001",name:"Lease Liability - Long-term",type:k.LIABILITY,subType:P.LONG_TERM_LIABILITY,currency:"KHR"},{id:"3245002",code:"3245002",name:"Lease Liability - Long-term",type:k.LIABILITY,subType:P.LONG_TERM_LIABILITY,currency:"USD"},{id:"4300001",code:"4300001",name:"Common Stock",type:k.EQUITY,subType:P.EQUITY,currency:"KHR"},{id:"4300002",code:"4300002",name:"Common Stock",type:k.EQUITY,subType:P.EQUITY,currency:"USD"},{id:"4301001",code:"4301001",name:"Preferred Stock",type:k.EQUITY,subType:P.EQUITY,currency:"KHR"},{id:"4301002",code:"4301002",name:"Preferred Stock",type:k.EQUITY,subType:P.EQUITY,currency:"USD"},{id:"4302001",code:"4302001",name:"Additional Paid-in Capital",type:k.EQUITY,subType:P.EQUITY,currency:"KHR"},{id:"4302002",code:"4302002",name:"Additional Paid-in Capital",type:k.EQUITY,subType:P.EQUITY,currency:"USD"},{id:"4303001",code:"4303001",name:"Treasury Stock",type:k.EQUITY,subType:P.EQUITY,currency:"KHR"},{id:"4303002",code:"4303002",name:"Treasury Stock",type:k.EQUITY,subType:P.EQUITY,currency:"USD"},{id:"4310001",code:"4310001",name:"Retained Earnings",type:k.EQUITY,subType:P.EQUITY,currency:"KHR"},{id:"4310002",code:"4310002",name:"Retained Earnings",type:k.EQUITY,subType:P.EQUITY,currency:"USD"},{id:"4330001",code:"4330001",name:"Dividends Declared",type:k.EQUITY,subType:P.EQUITY,currency:"KHR"},{id:"4330002",code:"4330002",name:"Dividends Declared",type:k.EQUITY,subType:P.EQUITY,currency:"USD"},{id:"4340001",code:"4340001",name:"Accumulated Other Comprehensive Income",type:k.EQUITY,subType:P.EQUITY,currency:"KHR"},{id:"4340002",code:"4340002",name:"Accumulated Other Comprehensive Income",type:k.EQUITY,subType:P.EQUITY,currency:"USD"},{id:"5401001",code:"5401001",name:"Delivery revenue",type:k.REVENUE,subType:P.OPERATING_REVENUE,currency:"KHR"},{id:"5401002",code:"5401002",name:"Delivery revenue",type:k.REVENUE,subType:P.OPERATING_REVENUE,currency:"USD"},{id:"5411001",code:"5411001",name:"Delivery Discounts",type:k.REVENUE,subType:P.OPERATING_REVENUE,currency:"KHR"},{id:"5411002",code:"5411002",name:"Delivery Discounts",type:k.REVENUE,subType:P.OPERATING_REVENUE,currency:"USD"},{id:"5450001",code:"5450001",name:"Interest Income from bank",type:k.REVENUE,subType:P.OTHER_REVENUE,currency:"KHR"},{id:"5450002",code:"5450002",name:"Interest Income from bank",type:k.REVENUE,subType:P.OTHER_REVENUE,currency:"USD"},{id:"5451001",code:"5451001",name:"Dividend Income",type:k.REVENUE,subType:P.OTHER_REVENUE,currency:"KHR"},{id:"5451002",code:"5451002",name:"Dividend Income",type:k.REVENUE,subType:P.OTHER_REVENUE,currency:"USD"},{id:"5453001",code:"5453001",name:"Gain on Sale of Assets",type:k.REVENUE,subType:P.OTHER_REVENUE,currency:"KHR"},{id:"5453002",code:"5453002",name:"Gain on Sale of Assets",type:k.REVENUE,subType:P.OTHER_REVENUE,currency:"USD"},{id:"5454001",code:"5454001",name:"Foreign Exchange Gain",type:k.REVENUE,subType:P.OTHER_REVENUE,currency:"KHR"},{id:"5454002",code:"5454002",name:"Foreign Exchange Gain",type:k.REVENUE,subType:P.OTHER_REVENUE,currency:"USD"},{id:"5455001",code:"5455001",name:"Miscellaneous Income",type:k.REVENUE,subType:P.OTHER_REVENUE,currency:"KHR"},{id:"5455002",code:"5455002",name:"Miscellaneous Income",type:k.REVENUE,subType:P.OTHER_REVENUE,currency:"USD"},{id:"6501001",code:"6501001",name:"Delivery commision expense Labor",type:k.EXPENSE,subType:P.COST_OF_GOODS_SOLD,currency:"KHR"},{id:"6501002",code:"6501002",name:"Delivery commision expense Labor",type:k.EXPENSE,subType:P.COST_OF_GOODS_SOLD,currency:"USD"},{id:"6502001",code:"6502001",name:"Cost of Goods Sold - Overhead",type:k.EXPENSE,subType:P.COST_OF_GOODS_SOLD,currency:"KHR"},{id:"6502002",code:"6502002",name:"Cost of Goods Sold - Overhead",type:k.EXPENSE,subType:P.COST_OF_GOODS_SOLD,currency:"USD"},{id:"6600001",code:"6600001",name:"Advertising & Marketing",type:k.EXPENSE,subType:P.OPERATING_EXPENSE,currency:"KHR"},{id:"6600002",code:"6600002",name:"Advertising & Marketing",type:k.EXPENSE,subType:P.OPERATING_EXPENSE,currency:"USD"},{id:"6601001",code:"6601001",name:"Sales Commissions",type:k.EXPENSE,subType:P.OPERATING_EXPENSE,currency:"KHR"},{id:"6601002",code:"6601002",name:"Sales Commissions",type:k.EXPENSE,subType:P.OPERATING_EXPENSE,currency:"USD"},{id:"6602001",code:"6602001",name:"Sales Salaries",type:k.EXPENSE,subType:P.OPERATING_EXPENSE,currency:"KHR"},{id:"6602002",code:"6602002",name:"Sales Salaries",type:k.EXPENSE,subType:P.OPERATING_EXPENSE,currency:"USD"},{id:"6603001",code:"6603001",name:"Travel & Entertainment",type:k.EXPENSE,subType:P.OPERATING_EXPENSE,currency:"KHR"},{id:"6603002",code:"6603002",name:"Travel & Entertainment",type:k.EXPENSE,subType:P.OPERATING_EXPENSE,currency:"USD"},{id:"6606001",code:"6606001",name:"Commission Fee Expense",type:k.EXPENSE,subType:P.OPERATING_EXPENSE,currency:"KHR"},{id:"6606002",code:"6606002",name:"Commission Fee Expense",type:k.EXPENSE,subType:P.OPERATING_EXPENSE,currency:"USD"},{id:"6650001",code:"6650001",name:"Salaries & Wages - Administrative",type:k.EXPENSE,subType:P.OPERATING_EXPENSE,currency:"KHR"},{id:"6650002",code:"6650002",name:"Salaries & Wages - Administrative",type:k.EXPENSE,subType:P.OPERATING_EXPENSE,currency:"USD"},{id:"6651001",code:"6651001",name:"Salaries & Wages - Management",type:k.EXPENSE,subType:P.OPERATING_EXPENSE,currency:"KHR"},{id:"6651002",code:"6651002",name:"Salaries & Wages - Management",type:k.EXPENSE,subType:P.OPERATING_EXPENSE,currency:"USD"},{id:"6652001",code:"6652001",name:"Employee Benefits",type:k.EXPENSE,subType:P.OPERATING_EXPENSE,currency:"KHR"},{id:"6652002",code:"6652002",name:"Employee Benefits",type:k.EXPENSE,subType:P.OPERATING_EXPENSE,currency:"USD"},{id:"6653001",code:"6653001",name:"Payroll Taxes",type:k.EXPENSE,subType:P.OPERATING_EXPENSE,currency:"KHR"},{id:"6653002",code:"6653002",name:"Payroll Taxes",type:k.EXPENSE,subType:P.OPERATING_EXPENSE,currency:"USD"},{id:"6654001",code:"6654001",name:"Workers Compensation Insurance",type:k.EXPENSE,subType:P.OPERATING_EXPENSE,currency:"KHR"},{id:"6654002",code:"6654002",name:"Workers Compensation Insurance",type:k.EXPENSE,subType:P.OPERATING_EXPENSE,currency:"USD"},{id:"6655001",code:"6655001",name:"Health Insurance",type:k.EXPENSE,subType:P.OPERATING_EXPENSE,currency:"KHR"},{id:"6655002",code:"6655002",name:"Health Insurance",type:k.EXPENSE,subType:P.OPERATING_EXPENSE,currency:"USD"},{id:"6657001",code:"6657001",name:"Training & Development",type:k.EXPENSE,subType:P.OPERATING_EXPENSE,currency:"KHR"},{id:"6657002",code:"6657002",name:"Training & Development",type:k.EXPENSE,subType:P.OPERATING_EXPENSE,currency:"USD"},{id:"6658001",code:"6658001",name:"Recruitment Expenses",type:k.EXPENSE,subType:P.OPERATING_EXPENSE,currency:"KHR"},{id:"6658002",code:"6658002",name:"Recruitment Expenses",type:k.EXPENSE,subType:P.OPERATING_EXPENSE,currency:"USD"},{id:"6670001",code:"6670001",name:"Rent Expense",type:k.EXPENSE,subType:P.OPERATING_EXPENSE,currency:"KHR"},{id:"6670002",code:"6670002",name:"Rent Expense",type:k.EXPENSE,subType:P.OPERATING_EXPENSE,currency:"USD"},{id:"6671001",code:"6671001",name:"Property Tax",type:k.EXPENSE,subType:P.OPERATING_EXPENSE,currency:"KHR"},{id:"6671002",code:"6671002",name:"Property Tax",type:k.EXPENSE,subType:P.OPERATING_EXPENSE,currency:"USD"},{id:"6672001",code:"6672001",name:"Building Maintenance",type:k.EXPENSE,subType:P.OPERATING_EXPENSE,currency:"KHR"},{id:"6672002",code:"6672002",name:"Building Maintenance",type:k.EXPENSE,subType:P.OPERATING_EXPENSE,currency:"USD"},{id:"6673001",code:"6673001",name:"Utilities - Electric",type:k.EXPENSE,subType:P.OPERATING_EXPENSE,currency:"KHR"},{id:"6673002",code:"6673002",name:"Utilities - Electric",type:k.EXPENSE,subType:P.OPERATING_EXPENSE,currency:"USD"},{id:"6673101",code:"6673101",name:"Utilities - Gas",type:k.EXPENSE,subType:P.OPERATING_EXPENSE,currency:"KHR"},{id:"6673102",code:"6673102",name:"Utilities - Gas",type:k.EXPENSE,subType:P.OPERATING_EXPENSE,currency:"USD"},{id:"6673201",code:"6673201",name:"Utilities - Water",type:k.EXPENSE,subType:P.OPERATING_EXPENSE,currency:"KHR"},{id:"6673202",code:"6673202",name:"Utilities - Water",type:k.EXPENSE,subType:P.OPERATING_EXPENSE,currency:"USD"},{id:"6680001",code:"6680001",name:"Office Supplies",type:k.EXPENSE,subType:P.OPERATING_EXPENSE,currency:"KHR"},{id:"6680002",code:"6680002",name:"Office Supplies",type:k.EXPENSE,subType:P.OPERATING_EXPENSE,currency:"USD"},{id:"6681001",code:"6681001",name:"Postage & Shipping",type:k.EXPENSE,subType:P.OPERATING_EXPENSE,currency:"KHR"},{id:"6681002",code:"6681002",name:"Postage & Shipping",type:k.EXPENSE,subType:P.OPERATING_EXPENSE,currency:"USD"},{id:"6682001",code:"6682001",name:"Telephone & Internet",type:k.EXPENSE,subType:P.OPERATING_EXPENSE,currency:"KHR"},{id:"6682002",code:"6682002",name:"Telephone & Internet",type:k.EXPENSE,subType:P.OPERATING_EXPENSE,currency:"USD"},{id:"6683001",code:"6683001",name:"Printing & Copying",type:k.EXPENSE,subType:P.OPERATING_EXPENSE,currency:"KHR"},{id:"6683002",code:"6683002",name:"Printing & Copying",type:k.EXPENSE,subType:P.OPERATING_EXPENSE,currency:"USD"},{id:"6684001",code:"6684001",name:"Subscriptions & Memberships",type:k.EXPENSE,subType:P.OPERATING_EXPENSE,currency:"KHR"},{id:"6684002",code:"6684002",name:"Subscriptions & Memberships",type:k.EXPENSE,subType:P.OPERATING_EXPENSE,currency:"USD"},{id:"6690001",code:"6690001",name:"Legal Fees",type:k.EXPENSE,subType:P.OPERATING_EXPENSE,currency:"KHR"},{id:"6690002",code:"6690002",name:"Legal Fees",type:k.EXPENSE,subType:P.OPERATING_EXPENSE,currency:"USD"},{id:"6691001",code:"6691001",name:"Accounting & Bookkeeping",type:k.EXPENSE,subType:P.OPERATING_EXPENSE,currency:"KHR"},{id:"6691002",code:"6691002",name:"Accounting & Bookkeeping",type:k.EXPENSE,subType:P.OPERATING_EXPENSE,currency:"USD"},{id:"6692001",code:"6692001",name:"Consulting Fees",type:k.EXPENSE,subType:P.OPERATING_EXPENSE,currency:"KHR"},{id:"6692002",code:"6692002",name:"Consulting Fees",type:k.EXPENSE,subType:P.OPERATING_EXPENSE,currency:"USD"},{id:"6693001",code:"6693001",name:"Professional Fees - Other",type:k.EXPENSE,subType:P.OPERATING_EXPENSE,currency:"KHR"},{id:"6693002",code:"6693002",name:"Professional Fees - Other",type:k.EXPENSE,subType:P.OPERATING_EXPENSE,currency:"USD"},{id:"6700001",code:"6700001",name:"Software & Licenses",type:k.EXPENSE,subType:P.OPERATING_EXPENSE,currency:"KHR"},{id:"6700002",code:"6700002",name:"Software & Licenses",type:k.EXPENSE,subType:P.OPERATING_EXPENSE,currency:"USD"},{id:"6701001",code:"6701001",name:"IT Support & Services",type:k.EXPENSE,subType:P.OPERATING_EXPENSE,currency:"KHR"},{id:"6701002",code:"6701002",name:"IT Support & Services",type:k.EXPENSE,subType:P.OPERATING_EXPENSE,currency:"USD"},{id:"6702001",code:"6702001",name:"Cloud Services & Hosting",type:k.EXPENSE,subType:P.OPERATING_EXPENSE,currency:"KHR"},{id:"6702002",code:"6702002",name:"Cloud Services & Hosting",type:k.EXPENSE,subType:P.OPERATING_EXPENSE,currency:"USD"},{id:"6703001",code:"6703001",name:"Computer Supplies",type:k.EXPENSE,subType:P.OPERATING_EXPENSE,currency:"KHR"},{id:"6703002",code:"6703002",name:"Computer Supplies",type:k.EXPENSE,subType:P.OPERATING_EXPENSE,currency:"USD"},{id:"6710001",code:"6710001",name:"Insurance - General Liability",type:k.EXPENSE,subType:P.OPERATING_EXPENSE,currency:"KHR"},{id:"6710002",code:"6710002",name:"Insurance - General Liability",type:k.EXPENSE,subType:P.OPERATING_EXPENSE,currency:"USD"},{id:"6711001",code:"6711001",name:"Insurance - Property",type:k.EXPENSE,subType:P.OPERATING_EXPENSE,currency:"KHR"},{id:"6711002",code:"6711002",name:"Insurance - Property",type:k.EXPENSE,subType:P.OPERATING_EXPENSE,currency:"USD"},{id:"6712001",code:"6712001",name:"Insurance - Professional Liability",type:k.EXPENSE,subType:P.OPERATING_EXPENSE,currency:"KHR"},{id:"6712002",code:"6712002",name:"Insurance - Professional Liability",type:k.EXPENSE,subType:P.OPERATING_EXPENSE,currency:"USD"},{id:"6713001",code:"6713001",name:"Insurance - Vehicle",type:k.EXPENSE,subType:P.OPERATING_EXPENSE,currency:"KHR"},{id:"6713002",code:"6713002",name:"Insurance - Vehicle",type:k.EXPENSE,subType:P.OPERATING_EXPENSE,currency:"USD"},{id:"6714001",code:"6714001",name:"Insurance - Other",type:k.EXPENSE,subType:P.OPERATING_EXPENSE,currency:"KHR"},{id:"6714002",code:"6714002",name:"Insurance - Other",type:k.EXPENSE,subType:P.OPERATING_EXPENSE,currency:"USD"},{id:"6720001",code:"6720001",name:"Vehicle Fuel",type:k.EXPENSE,subType:P.OPERATING_EXPENSE,currency:"KHR"},{id:"6720002",code:"6720002",name:"Vehicle Fuel",type:k.EXPENSE,subType:P.OPERATING_EXPENSE,currency:"USD"},{id:"6721001",code:"6721001",name:"Vehicle Maintenance & Repairs",type:k.EXPENSE,subType:P.OPERATING_EXPENSE,currency:"KHR"},{id:"6721002",code:"6721002",name:"Vehicle Maintenance & Repairs",type:k.EXPENSE,subType:P.OPERATING_EXPENSE,currency:"USD"},{id:"6722001",code:"6722001",name:"Vehicle Registration & Licenses",type:k.EXPENSE,subType:P.OPERATING_EXPENSE,currency:"KHR"},{id:"6722002",code:"6722002",name:"Vehicle Registration & Licenses",type:k.EXPENSE,subType:P.OPERATING_EXPENSE,currency:"USD"},{id:"6730001",code:"6730001",name:"Depreciation Expense",type:k.EXPENSE,subType:P.OPERATING_EXPENSE,currency:"KHR"},{id:"6730002",code:"6730002",name:"Depreciation Expense",type:k.EXPENSE,subType:P.OPERATING_EXPENSE,currency:"USD"},{id:"6731001",code:"6731001",name:"Amortization Expense",type:k.EXPENSE,subType:P.OPERATING_EXPENSE,currency:"KHR"},{id:"6731002",code:"6731002",name:"Amortization Expense",type:k.EXPENSE,subType:P.OPERATING_EXPENSE,currency:"USD"},{id:"6740001",code:"6740001",name:"Bank Charges & Fees",type:k.EXPENSE,subType:P.OPERATING_EXPENSE,currency:"KHR"},{id:"6740002",code:"6740002",name:"Bank Charges & Fees",type:k.EXPENSE,subType:P.OPERATING_EXPENSE,currency:"USD"},{id:"6741001",code:"6741001",name:"Credit Card Processing Fees",type:k.EXPENSE,subType:P.OPERATING_EXPENSE,currency:"KHR"},{id:"6741002",code:"6741002",name:"Credit Card Processing Fees",type:k.EXPENSE,subType:P.OPERATING_EXPENSE,currency:"USD"},{id:"6742001",code:"6742001",name:"Bad Debt Expense",type:k.EXPENSE,subType:P.OPERATING_EXPENSE,currency:"KHR"},{id:"6742002",code:"6742002",name:"Bad Debt Expense",type:k.EXPENSE,subType:P.OPERATING_EXPENSE,currency:"USD"},{id:"6743001",code:"6743001",name:"Licenses & Permits",type:k.EXPENSE,subType:P.OPERATING_EXPENSE,currency:"KHR"},{id:"6743002",code:"6743002",name:"Licenses & Permits",type:k.EXPENSE,subType:P.OPERATING_EXPENSE,currency:"USD"},{id:"6744001",code:"6744001",name:"Donations & Contributions",type:k.EXPENSE,subType:P.OPERATING_EXPENSE,currency:"KHR"},{id:"6744002",code:"6744002",name:"Donations & Contributions",type:k.EXPENSE,subType:P.OPERATING_EXPENSE,currency:"USD"},{id:"6745001",code:"6745001",name:"Meals & Entertainment",type:k.EXPENSE,subType:P.OPERATING_EXPENSE,currency:"KHR"},{id:"6745002",code:"6745002",name:"Meals & Entertainment",type:k.EXPENSE,subType:P.OPERATING_EXPENSE,currency:"USD"},{id:"6746001",code:"6746001",name:"Repairs & Maintenance - Equipment",type:k.EXPENSE,subType:P.OPERATING_EXPENSE,currency:"KHR"},{id:"6746002",code:"6746002",name:"Repairs & Maintenance - Equipment",type:k.EXPENSE,subType:P.OPERATING_EXPENSE,currency:"USD"},{id:"6747001",code:"6747001",name:"Uniforms & Laundry",type:k.EXPENSE,subType:P.OPERATING_EXPENSE,currency:"KHR"},{id:"6747002",code:"6747002",name:"Uniforms & Laundry",type:k.EXPENSE,subType:P.OPERATING_EXPENSE,currency:"USD"},{id:"6748001",code:"6748001",name:"Waste Disposal",type:k.EXPENSE,subType:P.OPERATING_EXPENSE,currency:"KHR"},{id:"6748002",code:"6748002",name:"Waste Disposal",type:k.EXPENSE,subType:P.OPERATING_EXPENSE,currency:"USD"},{id:"6749001",code:"6749001",name:"Miscellaneous Expense",type:k.EXPENSE,subType:P.OPERATING_EXPENSE,currency:"KHR"},{id:"6749002",code:"6749002",name:"Miscellaneous Expense",type:k.EXPENSE,subType:P.OPERATING_EXPENSE,currency:"USD"},{id:"6800001",code:"6800001",name:"Interest Expense",type:k.EXPENSE,subType:P.OTHER_EXPENSE,currency:"KHR"},{id:"6800002",code:"6800002",name:"Interest Expense",type:k.EXPENSE,subType:P.OTHER_EXPENSE,currency:"USD"},{id:"6801001",code:"6801001",name:"Loss on Sale of Assets",type:k.EXPENSE,subType:P.OTHER_EXPENSE,currency:"KHR"},{id:"6801002",code:"6801002",name:"Loss on Sale of Assets",type:k.EXPENSE,subType:P.OTHER_EXPENSE,currency:"USD"},{id:"6802001",code:"6802001",name:"Foreign Exchange Loss",type:k.EXPENSE,subType:P.OTHER_EXPENSE,currency:"KHR"},{id:"6802002",code:"6802002",name:"Foreign Exchange Loss",type:k.EXPENSE,subType:P.OTHER_EXPENSE,currency:"USD"},{id:"6803001",code:"6803001",name:"Income Tax Expense",type:k.EXPENSE,subType:P.OTHER_EXPENSE,currency:"KHR"},{id:"6803002",code:"6803002",name:"Income Tax Expense",type:k.EXPENSE,subType:P.OTHER_EXPENSE,currency:"USD"},{id:"6804001",code:"6804001",name:"Penalties & Fines",type:k.EXPENSE,subType:P.OTHER_EXPENSE,currency:"KHR"},{id:"6804002",code:"6804002",name:"Penalties & Fines",type:k.EXPENSE,subType:P.OTHER_EXPENSE,currency:"USD"}],yV=[{id:1,description:"Pickup from Customer",auto:"Y"},{id:2,description:"Received Cash",auto:"Y"},{id:3,description:"Exchange",auto:"Y"},{id:4,description:"Settle to Company",auto:"Y"},{id:5,description:"Settle to Customer",auto:"Y"},{id:6,description:"Return back to Customer",auto:"Y"},{id:7,description:"Warehouse Delivery",auto:"Y"},{id:8,description:"Pickup from warehouse",auto:"Y"},{id:9,description:"Service Fee",auto:"Y"},{id:10,description:"Commission Expense",auto:"Y"},{id:11,description:"Transit warehouse",auto:"Y"},{id:12,description:"Collection Fee",auto:"Y"},{id:13,description:"VAT-Output",auto:"Y"},{id:14,description:"VAT-Input",auto:"Y"}];class jS extends _s{async getSettings(){const e=await St(he(this.db,"settings","general"));return e.exists()?e.data():{}}async updateSettings(e){await Cn(he(this.db,"settings","general"),e,{merge:!0})}async getCompanyProfile(){const e=await St(he(this.db,"settings","company_profile"));return e.exists()?e.data():{}}async saveCompanyProfile(e){await Cn(he(this.db,"settings","company_profile"),{...e,updatedAt:Date.now()},{merge:!0})}async getPayrollConfig(){const e=await St(he(this.db,"settings","payroll"));return e.exists()?e.data():{standardWorkingDays:26,standardDayOffs:4,paySchedule:"SEMI_MONTHLY",latenessDeductionAmount:1,excessLeavePenaltyAmount:10,minDaysForDayOff:15,dayOffsPerPeriod:2,workStartTime:"08:00",workEndTime:"17:00",lateGracePeriodMinutes:15}}async updatePayrollConfig(e){await Cn(he(this.db,"settings","payroll"),e,{merge:!0})}async getBranches(){return this.getCollection("branches")}async addBranch(e){await this.saveDocument("branches",e)}async updateBranch(e){await this.saveDocument("branches",e)}async deleteBranch(e){await this.deleteDocument("branches",e)}async getCurrencies(){return this.getCollection("currencies")}async addCurrency(e){await this.saveDocument("currencies",e)}async updateCurrency(e){await this.saveDocument("currencies",e)}async getTaxRates(){return this.getCollection("tax_rates")}async addTaxRate(e){await this.saveDocument("tax_rates",e)}async updateTaxRate(e){await this.saveDocument("tax_rates",e)}async getUsers(){return this.getCollection("users")}async updateUserRole(e,t){await ct(he(this.db,"users",e),{role:t})}async updateUserStatus(e,t){await ct(he(this.db,"users",e),{status:t})}async updateUserProfile(e,t,r,s){await ct(he(this.db,"users",e),{name:t,lastLogin:Date.now()}),s&&s.currentUser&&await zp(s.currentUser,{displayName:t});const a=await St(he(this.db,"users",e));if(a.exists()){const l=a.data();if(l.linkedCustomerId){const h={name:t,updatedAt:Date.now()};r&&["phone","address","referralCode","isTaxable","excludeFeesInSettlement","customExchangeRate","bankAccounts"].forEach(p=>{r[p]!==void 0&&(h[p]=r[p])}),await ct(he(this.db,"customers",l.linkedCustomerId),h)}}}async updateUserBranch(e,t){await ct(he(this.db,"users",e),{managedBranchId:t})}async updateUserWalletMapping(e,t){await ct(he(this.db,"users",e),{walletAccountId:t})}async deleteUserAndCustomer(e,t){const r=sl(this.db);r.delete(he(this.db,"users",e)),t&&r.delete(he(this.db,"customers",t)),await r.commit()}async getRolePermissions(){const e=await St(he(this.db,"settings","permissions"));return e.exists()?e.data():{}}async updateRolePermissions(e){await Cn(he(this.db,"settings","permissions"),e)}async seedDefaultPermissions(){await Cn(he(this.db,"settings","permissions"),Qd,{merge:!0})}async getUserUidByCustomerId(e){const t=et(Ue(this.db,"users"),nt("linkedCustomerId","==",e)),r=await tt(t);if(!r.empty)return r.docs[0].id}async updateUserLocations(e,t){const r=await St(he(this.db,"users",e));if(r.exists()){const s=r.data();if(s.linkedCustomerId){await ct(he(this.db,"customers",s.linkedCustomerId),{savedLocations:this.cleanData(t),updatedAt:Date.now()});return}}await ct(he(this.db,"users",e),{savedLocations:this.cleanData(t)})}subscribeToUserProfile(e,t){return qo(he(this.db,"users",e),r=>{r.exists()&&t(r.data())})}async sendNotification(e){await this.saveDocument("notifications",e)}async getNotifications(e,t){const r=et(Ue(this.db,"notifications"),nt("targetAudience","in",[e,t,"ALL"]),ei(50));return(await tt(r)).docs.map(l=>l.data()).sort((l,h)=>h.createdAt-l.createdAt)}subscribeToNotifications(e,t,r){const s=et(Ue(this.db,"notifications"),nt("targetAudience","in",[e,t,"ALL"]),ei(50));return qo(s,a=>{const l=a.docs.map(h=>h.data());l.sort((h,f)=>f.createdAt-h.createdAt),r(l)})}async markNotificationRead(e){await ct(he(this.db,"notifications",e),{read:!0})}async getMenuItems(){return(await tt(Ue(this.db,"navigation_menu"))).docs.map(t=>t.data()).sort((t,r)=>t.order-r.order)}async saveMenuItem(e){await this.saveDocument("navigation_menu",e)}async deleteMenuItem(e){await this.deleteDocument("navigation_menu",e)}async seedDefaultMenu(){await this.overwriteMenu(lm)}async overwriteMenu(e){const t=sl(this.db);(await tt(Ue(this.db,"navigation_menu"))).docs.forEach(s=>{t.delete(s.ref)});for(const s of e){const a=he(this.db,"navigation_menu",s.id);t.set(a,s)}await t.commit()}}const _V=new jS(Je,Lr);class A2 extends _s{async getAccounts(){return this.getCollection("accounts")}async addAccount(e){await this.saveDocument("accounts",e)}async updateAccount(e){await this.saveDocument("accounts",e)}async deleteAccount(e){await this.deleteDocument("accounts",e)}async importAccounts(e){if(!Array.isArray(e))return;const t=Array.from(new Map(e.map(s=>[s.code,s])).values()),r=400;for(let s=0;s<t.length;s+=r){const a=t.slice(s,s+r),l=sl(this.db);a.forEach(h=>{const f=h.code,p=he(this.db,"accounts",f),_=this.cleanData({...h,id:f});l.set(p,_)}),await l.commit()}}async getTransactions(){return this.getCollection("transactions")}async addTransaction(e){await this.saveDocument("transactions",e)}async updateTransaction(e){await this.saveDocument("transactions",e)}async deleteTransactions(e){await Promise.all(e.map(t=>Wo(he(this.db,"transactions",t))))}async submitForApproval(e,t,r){const s={...e,status:"PENDING_APPROVAL",createdBy:t,createdByName:r,createdAt:Date.now()};await this.saveDocument("transactions",s)}async saveAsDraft(e,t,r){const s={...e,status:"DRAFT",createdBy:t,createdByName:r,createdAt:e.createdAt||Date.now()};await this.saveDocument("transactions",s)}async approveJournalEntry(e,t,r){const s=he(this.db,"transactions",e);await ct(s,{status:"POSTED",approvedBy:t,approvedByName:r,approvedAt:Date.now(),rejectionReason:null})}async rejectJournalEntry(e,t,r,s){const a=he(this.db,"transactions",e);await ct(a,{status:"REJECTED",approvedBy:r,approvedByName:s,approvedAt:Date.now(),rejectionReason:t})}async getPendingApprovals(){const e=et(Ue(this.db,"transactions"),nt("status","==","PENDING_APPROVAL"));return(await tt(e)).docs.map(r=>({...r.data(),id:r.id}))}async getUserDrafts(e){const t=et(Ue(this.db,"transactions"),nt("status","==","DRAFT"),nt("createdBy","==",e));return(await tt(t)).docs.map(s=>({...s.data(),id:s.id}))}async getFixedAssets(){return this.getCollection("fixed_assets")}async addFixedAsset(e){await this.saveDocument("fixed_assets",e)}async updateFixedAsset(e){await this.saveDocument("fixed_assets",e)}async getFixedAssetCategories(){return this.getCollection("fixed_asset_categories")}async addFixedAssetCategory(e){await this.saveDocument("fixed_asset_categories",e)}async updateFixedAssetCategory(e){await this.saveDocument("fixed_asset_categories",e)}async deleteFixedAssetCategory(e){await this.deleteDocument("fixed_asset_categories",e)}async runBatchDepreciation(e){return{processed:0,totalAmount:0}}async depreciateAsset(e,t,r){}async disposeAsset(e,t,r,s,a){}async getExpenseTemplates(){return this.getCollection("expense_templates")}async saveExpenseTemplate(e){await this.saveDocument("expense_templates",e)}async deleteExpenseTemplate(e){await this.deleteDocument("expense_templates",e)}}class P2 extends _s{async getCustomers(){return this.getCollection("customers")}async addCustomer(e){await this.saveDocument("customers",e)}async updateCustomer(e){await this.saveDocument("customers",e)}async getInvoices(){return this.getCollection("invoices")}async createInvoice(e){await this.saveDocument("invoices",e)}async recordPayment(e){await this.saveDocument("payments",e)}async getVendors(){return this.getCollection("vendors")}async addVendor(e){await this.saveDocument("vendors",e)}async updateVendor(e){await this.saveDocument("vendors",e)}async getBills(){return this.getCollection("bills")}async createBill(e){await this.saveDocument("bills",e)}async recordBillPayment(e){await this.saveDocument("bill_payments",e)}async getBillPayments(e){return[]}async createCustomerFromUser(e){const t=et(Ue(this.db,"customers"),nt("linkedUserId","==",e.uid)),r=await tt(t);let s;if(!r.empty)s=r.docs[0].id;else{const a=`cust-${Date.now()}`,l={id:a,linkedUserId:e.uid,bankAccounts:[],createdAt:Date.now()};await this.saveDocument("customers",l),s=a}await ct(he(this.db,"users",e.uid),{linkedCustomerId:s})}}class C2 extends _s{async getEmployees(){return this.getCollection("employees")}async addEmployee(e){await this.saveDocument("employees",e)}async updateEmployee(e){await this.saveDocument("employees",{...e,updatedAt:Date.now()},!0)}async deleteEmployee(e){await this.deleteDocument("employees",e)}async getEmployeeByUserId(e){return(await this.getEmployees()).find(r=>r.linkedUserId===e)||null}async linkEmployeeToUser(e,t){const s=(await this.getEmployees()).find(a=>a.id===e);s&&await this.updateEmployee({...s,linkedUserId:t})}async createEmployeeForUser(e,t,r){const s={id:crypto.randomUUID(),linkedUserId:e,name:t,isDriver:r,status:"ACTIVE",createdAt:Date.now()};return await this.addEmployee(s),s}async getStaffLoans(){return this.getCollection("staff_loans")}async createStaffLoan(e){await this.saveDocument("staff_loans",e)}async recordStaffLoanRepayment(e){await this.saveDocument("loan_repayments",e)}async getPayrollRuns(){return this.getCollection("payroll_runs")}async createPayrollRun(e){await this.saveDocument("payroll_runs",e)}async updatePayrollRun(e){await this.saveDocument("payroll_runs",e)}async getPayslips(e){return this.getCollection("payslips")}async savePayslips(e){this.batch;for(const t of e)await this.saveDocument("payslips",t)}async getStaffTransactions(){return this.getCollection("staff_transactions")}async createStaffTransaction(e){await this.saveDocument("staff_transactions",e)}async updateStaffTransaction(e){await this.saveDocument("staff_transactions",e,!0)}async deleteStaffTransaction(e){await this.deleteDocument("staff_transactions",e)}async getDailyAttendance(){return this.getCollection("daily_attendance")}async saveDailyAttendance(e){await this.saveDocument("daily_attendance",e,!0)}async getAttendanceRecords(){return this.getCollection("attendance_records")}async saveAttendanceRecord(e){await this.saveDocument("attendance_records",e,!0)}}const N2="modulepreload",k2=function(n){return"/"+n},tT={},ge=function(e,t,r){let s=Promise.resolve();if(t&&t.length>0){let l=function(p){return Promise.all(p.map(_=>Promise.resolve(_).then(E=>({status:"fulfilled",value:E}),E=>({status:"rejected",reason:E}))))};document.getElementsByTagName("link");const h=document.querySelector("meta[property=csp-nonce]"),f=(h==null?void 0:h.nonce)||(h==null?void 0:h.getAttribute("nonce"));s=l(t.map(p=>{if(p=k2(p),p in tT)return;tT[p]=!0;const _=p.endsWith(".css"),E=_?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${E}`))return;const T=document.createElement("link");if(T.rel=_?"stylesheet":N2,_||(T.as="script"),T.crossOrigin="",T.href=p,f&&T.setAttribute("nonce",f),document.head.appendChild(T),_)return new Promise((S,C)=>{T.addEventListener("load",S),T.addEventListener("error",()=>C(new Error(`Unable to preload CSS for ${p}`)))})}))}function a(l){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=l,window.dispatchEvent(h),!h.defaultPrevented)throw l}return s.then(l=>{for(const h of l||[])h.status==="rejected"&&a(h.reason);return e().catch(a)})};class b2{constructor(){this.stockCollection="customerStocks",this.transactionCollection="stockTransactions",this.productCollection="customerProducts",this.requestCollection="stockRequests",this.notificationCollection="notifications"}generateId(){return`${Date.now()}-${Math.random().toString(36).substr(2,9)}`}async uploadImage(e){try{const t=`stock-images/${Date.now()}_${Math.random().toString(36).substr(2,9)}`,r=US(Lr,t);return await VS(r,e,"data_url"),await MS(r)}catch(t){return console.error("Image upload failed",t),e}}cleanData(e){const t={};for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)){const s=e[r];s!==void 0&&(Array.isArray(s)?t[r]=s.map(a=>typeof a=="object"&&a!==null?this.cleanData(a):a):typeof s=="object"&&s!==null?t[r]=this.cleanData(s):t[r]=s)}return t}async getCustomerStock(e,t){if(t){const a=`${e}_${t}`,l=he(Je,this.stockCollection,a),h=await St(l);return h.exists()?[{id:h.id,...h.data()}]:[]}const r=et(Ue(Je,this.stockCollection),nt("customerId","==",e));return(await tt(r)).docs.map(a=>({id:a.id,...a.data()}))}async getStocksByBranch(e){const t=et(Ue(Je,this.stockCollection),nt("branchId","==",e));return(await tt(t)).docs.map(s=>({id:s.id,...s.data()}))}async getStockItem(e,t,r){const s=`${e}_${t}`,a=he(Je,this.stockCollection,s),l=await St(a);return l.exists()&&l.data().items.find(f=>f.id===r)||null}async depositStock(e,t,r,s,a,l,h,f){const p=`${e}_${r}`,_=he(Je,this.stockCollection,p),E=await St(_),T=Date.now(),S=a.map(C=>this.cleanData({productName:C.productName,quantity:C.quantity,sku:C.sku,unitPrice:C.unitPrice,image:C.image,productId:C.productId,unitPriceCurrency:C.unitPriceCurrency,description:C.description,id:this.generateId(),reservedQuantity:0,createdAt:T,updatedAt:T}));if(E.exists()){const U=[...E.data().items,...S],L=U.reduce((z,$)=>z+$.quantity,0);await ct(_,{items:U,totalItemCount:L,lastUpdated:T})}else{const C=S.reduce((L,z)=>L+z.quantity,0),U=this.cleanData({id:p,customerId:e,customerName:t,branchId:r,branchName:s,items:S,totalItemCount:C,lastUpdated:T});await Cn(he(Je,this.stockCollection,p),U)}await this.recordTransaction({customerId:e,customerName:t,branchId:r,branchName:s,type:"DEPOSIT",items:S.map(C=>({stockItemId:C.id,productName:C.productName,quantityChange:C.quantity})),notes:f,createdBy:l,createdByName:h})}async reserveStock(e,t,r,s,a,l){const h=`${e}_${t}`,f=he(Je,this.stockCollection,h),p=await St(f);if(!p.exists())return{success:!1,error:"Stock not found"};const _=p.data(),E=[..._.items],T=[];for(const S of r){const C=E.findIndex(z=>z.id===S.stockItemId);if(C===-1)return{success:!1,error:`Stock item ${S.stockItemId} not found`};const U=E[C],L=U.quantity-U.reservedQuantity;if(S.quantity>L)return{success:!1,error:`Insufficient stock for ${U.productName}. Available: ${L}, Requested: ${S.quantity}`};E[C]={...U,reservedQuantity:U.reservedQuantity+S.quantity,updatedAt:Date.now()},T.push({stockItemId:U.id,productName:U.productName,quantityChange:-S.quantity})}return await ct(f,{items:E,lastUpdated:Date.now()}),await this.recordTransaction({customerId:e,customerName:_.customerName,branchId:t,branchName:_.branchName,type:"BOOKING_RESERVE",items:T,relatedBookingId:s,createdBy:a,createdByName:l}),{success:!0}}async confirmDelivery(e,t,r,s,a,l,h){const f=`${e}_${t}`,p=he(Je,this.stockCollection,f),_=await St(p);if(!_.exists())return{success:!1,error:"Stock not found"};const E=_.data(),T=[...E.items],S=[];for(const L of r){const z=T.findIndex(Z=>Z.id===L.stockItemId);if(z===-1)continue;const $=T[z];T[z]={...$,quantity:$.quantity-L.quantity,reservedQuantity:Math.max(0,$.reservedQuantity-L.quantity),updatedAt:Date.now()},S.push({stockItemId:$.id,productName:$.productName,quantityChange:-L.quantity})}const C=T.filter(L=>L.quantity>0),U=C.reduce((L,z)=>L+z.quantity,0);return await ct(p,{items:C,totalItemCount:U,lastUpdated:Date.now()}),await this.recordTransaction({customerId:e,customerName:E.customerName,branchId:t,branchName:E.branchName,type:"BOOKING_DELIVERED",items:S,relatedBookingId:s,relatedItemId:a,createdBy:l,createdByName:h}),{success:!0}}async releaseReservation(e,t,r,s,a,l){const h=`${e}_${t}`,f=he(Je,this.stockCollection,h),p=await St(f);if(!p.exists())return{success:!1,error:"Stock not found"};const _=p.data(),E=[..._.items],T=[];for(const S of r){const C=E.findIndex(L=>L.id===S.stockItemId);if(C===-1)continue;const U=E[C];E[C]={...U,reservedQuantity:Math.max(0,U.reservedQuantity-S.quantity),updatedAt:Date.now()},T.push({stockItemId:U.id,productName:U.productName,quantityChange:S.quantity})}return await ct(f,{items:E,lastUpdated:Date.now()}),await this.recordTransaction({customerId:e,customerName:_.customerName,branchId:t,branchName:_.branchName,type:"BOOKING_CANCELLED",items:T,relatedBookingId:s,createdBy:a,createdByName:l}),{success:!0}}async adjustStock(e,t,r,s,a,l,h){const f=`${e}_${t}`,p=he(Je,this.stockCollection,f),_=await St(p);if(!_.exists())return{success:!1,error:"Stock not found"};const E=_.data(),T=E.items.findIndex($=>$.id===r);if(T===-1)return{success:!1,error:"Item not found"};const S=E.items[T],C=S.quantity+s;if(C<0)return{success:!1,error:"Adjustment would result in negative stock"};const U=[...E.items];U[T]={...S,quantity:C,updatedAt:Date.now()};const L=U.filter($=>$.quantity>0),z=L.reduce(($,Z)=>$+Z.quantity,0);return await ct(p,{items:L,totalItemCount:z,lastUpdated:Date.now()}),await this.recordTransaction({customerId:e,customerName:E.customerName,branchId:t,branchName:E.branchName,type:"ADJUSTMENT",items:[{stockItemId:S.id,productName:S.productName,quantityChange:s}],notes:a,createdBy:l,createdByName:h}),{success:!0}}async getStockTransactions(e,t,r=100){let s;return e&&t?s=et(Ue(Je,this.transactionCollection),nt("customerId","==",e),nt("branchId","==",t),cu("createdAt","desc"),ei(r)):e?s=et(Ue(Je,this.transactionCollection),nt("customerId","==",e),cu("createdAt","desc"),ei(r)):t?s=et(Ue(Je,this.transactionCollection),nt("branchId","==",t),cu("createdAt","desc"),ei(r)):s=et(Ue(Je,this.transactionCollection),cu("createdAt","desc"),ei(r)),(await tt(s)).docs.map(l=>({id:l.id,...l.data()}))}async getLowStockItems(e,t=10){const r=e?await this.getStocksByBranch(e):await this.getAllStocks(),s=[];for(const a of r)for(const l of a.items){const h=l.quantity-l.reservedQuantity;h<=t&&s.push({customerId:a.customerId,customerName:a.customerName,branchId:a.branchId,branchName:a.branchName,item:l,availableQuantity:h})}return s.sort((a,l)=>a.availableQuantity-l.availableQuantity)}async getAllStocks(){return(await tt(Ue(Je,this.stockCollection))).docs.map(t=>({id:t.id,...t.data()}))}async recordTransaction(e){const t={...e,id:this.generateId(),createdAt:Date.now()};await Cn(he(Je,this.transactionCollection,t.id),t)}async createNotification(e,t,r,s="INFO"){try{await hS(Ue(Je,this.notificationCollection),{userId:e,title:t,message:r,read:!1,createdAt:Date.now(),type:s})}catch(a){console.error("Error sending notification:",a)}}async getCustomerProducts(e){const t=et(Ue(Je,this.productCollection),nt("customerId","==",e));return(await tt(t)).docs.map(a=>({id:a.id,...a.data()})).sort((a,l)=>(l.createdAt||0)-(a.createdAt||0))}async saveProduct(e){const t=this.cleanData(e);await Cn(he(Je,this.productCollection,e.id),t)}async deleteProduct(e){const{deleteDoc:t,getDoc:r}=await ge(async()=>{const{deleteDoc:l,getDoc:h}=await Promise.resolve().then(()=>yS);return{deleteDoc:l,getDoc:h}},[]),s=he(Je,this.productCollection,e),a=await r(s);if(a.exists()){const l=a.data();if(await this.hasStockForProduct(l.customerId,e,l.productName))throw new Error("Cannot delete product because it has active stock.")}await t(he(Je,this.productCollection,e))}async hasStockForProduct(e,t,r){const s=et(Ue(Je,this.stockCollection),nt("customerId","==",e)),a=await tt(s);for(const l of a.docs)if(l.data().items.find(p=>(p.productId===t||p.productName===r)&&p.quantity>0))return!0;return!1}async createStockRequest(e){const t=this.cleanData(e);await Cn(he(Je,this.requestCollection,e.id),t)}async getCustomerRequests(e){const t=et(Ue(Je,this.requestCollection),nt("customerId","==",e));return(await tt(t)).docs.map(a=>({id:a.id,...a.data()})).sort((a,l)=>(l.createdAt||0)-(a.createdAt||0))}async getPendingRequests(e){const t=et(Ue(Je,this.requestCollection),nt("status","in",["PENDING","APPROVED"]));let s=(await tt(t)).docs.map(a=>({id:a.id,...a.data()}));return e&&(s=s.filter(a=>a.branchId===e)),s.sort((a,l)=>(l.createdAt||0)-(a.createdAt||0))}async approveRequest(e,t,r,s,a){const l={status:"APPROVED",reviewedAt:Date.now(),reviewedBy:r,reviewedByName:s};a?(l.items=a,a.some(f=>f.actualQuantity!==void 0&&f.actualQuantity!==f.quantity)?await this.createNotification(t,"Stock Request Adjustment","Your stock request has been approved with quantity adjustments. Please check the details.","WARNING"):await this.createNotification(t,"Stock Request Approved","Your stock request has been approved and is ready for delivery/drop-off.","SUCCESS")):await this.createNotification(t,"Stock Request Approved","Your stock request has been approved and is ready for delivery/drop-off.","SUCCESS"),await ct(he(Je,this.requestCollection,e),l)}async rejectRequest(e,t,r,s){await ct(he(Je,this.requestCollection,e),{status:"REJECTED",rejectionReason:t,reviewedAt:Date.now(),reviewedBy:r,reviewedByName:s})}async receiveRequest(e,t,r){await this.depositStock(e.customerId,e.customerName,e.branchId,e.branchName,e.items.map(s=>({productName:s.productName,quantity:s.actualQuantity??s.quantity,sku:s.sku,unitPrice:s.unitPrice,image:s.image,productId:s.productId})),t,r,`Stock Request Deposit (${e.id})`),await ct(he(Je,this.requestCollection,e.id),{status:"RECEIVED",receivedAt:Date.now(),receivedBy:t,receivedByName:r})}async cancelRequest(e){await ct(he(Je,this.requestCollection,e),{status:"CANCELLED"})}}const nu=new b2;function Uo(n){return Math.round((n+Number.EPSILON)*100)/100}function nT(n,e,t,r,s,a,l=4e3){if(!n||!n.isDriver)return 0;const h=n.hasBaseSalary||!1,f=n.zone;let p;if(f&&(p=r.find(E=>E.zoneName===f&&E.commissionFor===t&&E.driverSalaryType===(h?"WITH_BASE_SALARY":"WITHOUT_BASE_SALARY"))),!p&&f&&(p=r.find(E=>E.zoneName===f&&E.commissionFor===t&&E.driverSalaryType==="ALL")),p||(p=r.find(E=>!E.zoneName&&E.commissionFor===t&&E.driverSalaryType===(h?"WITH_BASE_SALARY":"WITHOUT_BASE_SALARY"))),p||(p=r.find(E=>!E.zoneName&&E.commissionFor===t&&E.driverSalaryType==="ALL")),p||(p=r.find(E=>E.commissionFor===t&&E.isDefault)),!p)return 0;const _=s!==void 0?s:e.totalDeliveryFee||0;if(p.type==="PERCENTAGE")return Uo(_*(p.value/100));{const E=a||e.currency||"USD";if(p.valueUSD!==void 0||p.valueKHR!==void 0)return Uo(E==="USD"?p.valueUSD||0:p.valueKHR||0);const T=p.currency||"USD";return Uo(T===E?p.value:T==="USD"&&E==="KHR"?p.value*l:T==="KHR"&&E==="USD"?p.value/l:p.value)}}function EV(n,e,t){if(!n||!n.isDriver)return;const r=n.hasBaseSalary||!1,s=n.zone;let a;return s&&(a=t.find(l=>l.zoneName===s&&l.commissionFor===e&&l.driverSalaryType===(r?"WITH_BASE_SALARY":"WITHOUT_BASE_SALARY"))),!a&&s&&(a=t.find(l=>l.zoneName===s&&l.commissionFor===e&&l.driverSalaryType==="ALL")),a||(a=t.find(l=>l.isDefault&&l.commissionFor===e&&l.driverSalaryType===(r?"WITH_BASE_SALARY":"WITHOUT_BASE_SALARY"))),a||(a=t.find(l=>l.isDefault&&l.commissionFor===e&&l.driverSalaryType==="ALL")),a||(a=t.find(l=>l.commissionFor===e&&l.isDefault)),a}class zS extends _s{async getParcelServices(){return this.getCollection("parcel_services")}async saveParcelService(e){e.image&&e.image.startsWith("data:")&&(e.image=await this.uploadAttachment(e.image)),await this.saveDocument("parcel_services",e)}async deleteParcelService(e){await this.deleteDocument("parcel_services",e)}async getParcelPromotions(){return this.getCollection("parcel_promotions")}async saveParcelPromotion(e){await this.saveDocument("parcel_promotions",e)}async deleteParcelPromotion(e){await this.deleteDocument("parcel_promotions",e)}async getParcelStatuses(){return this.getCollection("parcel_statuses")}async saveParcelStatus(e){await this.saveDocument("parcel_statuses",e)}async deleteParcelStatus(e){await this.deleteDocument("parcel_statuses",e)}async seedDefaultParcelStatuses(){const e=[{id:"ps-pending",label:"Pending",color:"bg-gray-100 text-gray-800",order:1,isDefault:!0,triggersRevenue:!1,isTerminal:!1},{id:"ps-pickup",label:"Picked Up",color:"bg-blue-100 text-blue-800",order:2,isDefault:!1,triggersRevenue:!1,isTerminal:!1},{id:"ps-transit",label:"In Transit",color:"bg-yellow-100 text-yellow-800",order:3,isDefault:!1,triggersRevenue:!1,isTerminal:!1},{id:"ps-out-for-delivery",label:"Out for Delivery",color:"bg-purple-100 text-purple-800",order:3.5,isDefault:!1,triggersRevenue:!1,isTerminal:!1},{id:"ps-delivered",label:"Delivered",color:"bg-green-100 text-green-800",order:4,isDefault:!1,triggersRevenue:!0,isTerminal:!0},{id:"ps-returned",label:"Returned",color:"bg-orange-100 text-orange-800",order:5,isDefault:!1,triggersRevenue:!1,isTerminal:!0},{id:"ps-cancelled",label:"Cancelled",color:"bg-red-100 text-red-800",order:6,isDefault:!1,triggersRevenue:!1,isTerminal:!0}];for(const t of e)await this.saveParcelStatus(t)}async getDriverCommissionRules(){return this.getCollection("driver_commissions")}async saveDriverCommissionRule(e){await this.saveDocument("driver_commissions",e)}async deleteDriverCommissionRule(e){await this.deleteDocument("driver_commissions",e)}async getCustomerSpecialRates(e){const t=et(Ue(this.db,"customer_rates"),nt("customerId","==",e));return(await tt(t)).docs.map(s=>s.data())}async saveCustomerSpecialRate(e){await this.saveDocument("customer_rates",e)}async deleteCustomerSpecialRate(e){await this.deleteDocument("customer_rates",e)}async getCustomerCashbackRules(e){if(e){const t=et(Ue(this.db,"customer_cashback_rules"),nt("customerId","==",e));return(await tt(t)).docs.map(s=>s.data())}return this.getCollection("customer_cashback_rules")}async saveCustomerCashbackRule(e){await this.saveDocument("customer_cashback_rules",e)}async deleteCustomerCashbackRule(e){await this.deleteDocument("customer_cashback_rules",e)}async getReferralRules(){return this.getCollection("referral_rules")}async saveReferralRule(e){await this.saveDocument("referral_rules",e)}async deleteReferralRule(e){await this.deleteDocument("referral_rules",e)}async getTelegramGroups(){return this.getCollection("telegram_groups")}async saveTelegramGroup(e){await this.saveDocument("telegram_groups",e)}async deleteTelegramGroup(e){await this.deleteDocument("telegram_groups",e)}async getParcelBookings(){return this.getCollection("parcel_bookings")}async getUserBookings(e,t=90){try{const r=new Date;r.setDate(r.getDate()-t);const s=r.getTime(),a=l=>l.filter(h=>(h.createdAt||0)>=s);if(e.role==="driver"){const l=et(Ue(this.db,"parcel_bookings"),nt("driverId","==",e.uid)),h=et(Ue(this.db,"parcel_bookings"),nt("involvedDriverIds","array-contains",e.uid)),[f,p]=await Promise.all([tt(l),tt(h)]),_=new Map;return f.docs.forEach(E=>_.set(E.id,E.data())),p.docs.forEach(E=>_.set(E.id,E.data())),a(Array.from(_.values()))}else if(e.role==="customer"){let l;e.linkedCustomerId?l=et(Ue(this.db,"parcel_bookings"),nt("senderId","==",e.linkedCustomerId)):l=et(Ue(this.db,"parcel_bookings"),nt("senderName","==",e.name));const h=await tt(l);return a(h.docs.map(f=>f.data()))}else if(["system-admin","accountant","finance-manager","warehouse"].includes(e.role))return[];return[]}catch(r){return console.error("Error fetching user bookings",r),[]}}async getDriverJobs(e){try{const t=et(Ue(this.db,"parcel_bookings"),nt("involvedDriverIds","array-contains",e)),r=await tt(t),s=et(Ue(this.db,"parcel_bookings"),nt("driverId","==",e)),a=await tt(s),l=et(Ue(this.db,"parcel_bookings"),nt("status","==","PENDING")),h=await tt(l),f=et(Ue(this.db,"parcel_bookings"),nt("status","in",["CONFIRMED","IN_TRANSIT"])),p=await tt(f),_=new Map;return r.docs.forEach(E=>_.set(E.id,E.data())),a.docs.forEach(E=>_.set(E.id,E.data())),h.docs.forEach(E=>_.set(E.id,E.data())),p.docs.forEach(E=>{const T=E.data();(T.items||[]).some(C=>C.driverId===e||C.collectorId===e||C.delivererId===e)&&_.set(E.id,T)}),Array.from(_.values())}catch(t){return console.error("Error fetching driver jobs",t),[]}}async saveParcelBooking(e,t,r,s,a){var E;const l=this.cleanData(e);if(l.senderId&&l.branchId&&l.status==="PENDING"){if(l.stockProducts&&l.stockProducts.length>0)try{const T=l.stockProducts.map(C=>({stockItemId:C.stockItemId,quantity:C.quantity||1})),S=await nu.reserveStock(l.senderId,l.branchId,T,l.id,"customer-app",l.senderName||"Customer");if(!S.success)throw new Error(`Stock Reservation Failed: ${S.error}`)}catch(T){throw new Error(`Stock Error: ${T.message}`)}else if(l.items){const T=l.items.filter(S=>S.stockItemId);if(T.length>0)try{const S={};T.forEach(L=>{L.stockItemId&&(S[L.stockItemId]=(S[L.stockItemId]||0)+(L.quantity||1))});const C=Object.entries(S).map(([L,z])=>({stockItemId:L,quantity:z})),U=await nu.reserveStock(l.senderId,l.branchId,C,l.id,"customer-app",l.senderName||"Customer");if(!U.success)throw new Error(`Stock Reservation Failed: ${U.error}`)}catch(S){throw new Error(`Stock Error: ${S.message}`)}}}if(r&&a&&l.id&&l.items)try{const T=await St(he(this.db,"parcel_bookings",l.id)),S=T.exists()?T.data():null,C=await this.getDriverCommissionRules(),U=await a.getEmployees();let L=4e3;try{const $=(await s.getCurrencies()).find(Z=>Z.code==="KHR");$!=null&&$.rate&&(L=$.rate)}catch{}for(const z of l.items){const $=(E=S==null?void 0:S.items)==null?void 0:E.find(A=>A.id===z.id),Z=z.deliveryFee??(l.totalDeliveryFee||0)/(l.items.length||1),oe=z.status==="DELIVERED",we=!$||$.status!=="DELIVERED",me=z.codCurrency||l.currency||"USD";if(oe&&we){if(l.stockProducts&&l.stockProducts.length>0&&l.senderId&&l.branchId)try{const A=l.stockProducts.map(N=>({stockItemId:N.stockItemId,quantity:N.quantity||1}));await nu.confirmDelivery(l.senderId,l.branchId,A,l.id,z.id,"driver-app","Driver")}catch(A){console.error("Stock Deduction (stockProducts) Failed:",A)}else if(z.stockItemId&&l.senderId&&l.branchId)try{await nu.confirmDelivery(l.senderId,l.branchId,[{stockItemId:z.stockItemId,quantity:z.quantity||1}],l.id,z.id,"driver-app","Driver")}catch(A){console.error("Stock Deduction Failed:",A)}if(z.collectorId&&!z.pickupCommission){const A=U.find(V=>V.linkedUserId===z.collectorId);let N=nT(A,l,"PICKUP",C,Z,me,L);N>0&&(z.pickupCommission=N,z.pickupCommissionCurrency=me,await r.processWalletTransaction(z.collectorId,N,me,"EARNING","",`Pickup: ${z.receiverName}`,[{bookingId:l.id,itemId:z.id}]))}if(z.delivererId&&!z.deliveryCommission){const A=U.find(V=>V.linkedUserId===z.delivererId);let N=nT(A,l,"DELIVERY",C,Z,me,L);N>0&&(z.deliveryCommission=N,z.deliveryCommissionCurrency=me,await r.processWalletTransaction(z.delivererId,N,me,"EARNING","",`Delivery: ${z.receiverName}`,[{bookingId:l.id,itemId:z.id}]))}if(z.isTaxiDelivery&&z.taxiFee&&z.taxiFee>0&&!z.taxiFeePosted){const A=z.delivererId||z.driverId;A&&(await r.processWalletTransaction(A,z.taxiFee,z.taxiFeeCurrency||"USD","TAXI_FEE","",`Taxi Reimbursement: ${z.receiverName}`,[{bookingId:l.id,itemId:z.id}]),z.taxiFeePosted=!0)}}if((z.status==="CANCELLED"||l.status==="CANCELLED")&&(!$||$.status!=="CANCELLED"&&$.status!=="RETURN_TO_SENDER")&&z.stockItemId&&l.senderId&&l.branchId)try{await nu.releaseReservation(l.senderId,l.branchId,[{stockItemId:z.stockItemId,quantity:z.quantity||1}],l.id,"system","System")}catch{}}}catch(T){console.warn("Commission trigger failed:",T)}if(l.items&&l.items.length>0){const T=await Promise.all(l.items.map(async S=>{var U,L;const C={};return(U=S.image)!=null&&U.startsWith("data:")&&(C.image=await this.uploadAttachment(S.image)),(L=S.proofOfDelivery)!=null&&L.startsWith("data:")&&(C.proofOfDelivery=await this.uploadAttachment(S.proofOfDelivery)),{...S,...C}}));l.items=T}if((l.status==="COMPLETED"||l.items.every(T=>T.status==="DELIVERED"))&&!l.referralProcessed&&r&&s&&l.senderId)try{const T=await s.getUserUidByCustomerId(l.senderId);if(T){await ct(he(this.db,"users",T),{completedOrderCount:Yd(1)});const S=await St(he(this.db,"users",T));if(S.exists()){const C=S.data();if(C.referredBy){const U=C.completedOrderCount||1,L=C.joinedAt||C.createdAt||0,$=(await tt(et(Ue(this.db,"referral_rules"),nt("isActive","==",!0)))).docs.map(Z=>Z.data());for(const Z of $){let oe=!1;Z.expiryDays&&Z.expiryDays>0&&(Date.now()-L)/864e5>Z.expiryDays||((Z.trigger==="FIRST_ORDER"&&U===1||Z.trigger==="ORDER_MILESTONE"&&Z.milestoneCount&&U===Z.milestoneCount)&&(oe=!0),oe&&await r.executeReferralRule(T,C.referredBy,Z))}}}}l.referralProcessed=!0}catch{}const f=new Set,p=(T,S)=>{if(!T)return;f.add(T);const C=S.find(U=>U.id===T||U.linkedUserId===T);C!=null&&C.linkedUserId&&f.add(C.linkedUserId),C!=null&&C.id&&f.add(C.id)};try{const T=a?await a.getEmployees():await this.getCollection("employees");l.driverId&&p(l.driverId,T),l.items&&l.items.forEach(S=>{p(S.driverId,T),p(S.collectorId,T),p(S.delivererId,T)}),l.involvedDriverIds=Array.from(f)}catch{l.driverId&&f.add(l.driverId),l.items&&l.items.forEach(S=>{S.driverId&&f.add(S.driverId)}),l.involvedDriverIds=Array.from(f)}const _=new Set;l.items&&l.items.forEach(T=>{T.barcode&&_.add(T.barcode.trim()),T.trackingCode&&_.add(T.trackingCode.trim()),T.id&&_.add(T.id.trim())}),l.id&&_.add(l.id),l.itemBarcodes=Array.from(_).filter(T=>T&&T.length>0),await gS(this.db,async T=>{const S=he(this.db,"parcel_bookings",l.id),C=await T.get(S),U=C.exists()?C.data():null,L=new Set;l.items&&l.items.forEach(oe=>{oe.barcode&&L.add(oe.barcode.trim())});const z=new Set;U&&U.items&&U.items.forEach(oe=>{oe.barcode&&z.add(oe.barcode.trim())});const $=Array.from(L).filter(oe=>!z.has(oe));for(const oe of $){if(!oe)continue;const we=he(this.db,"barcodes",oe),me=await T.get(we);if(me.exists()){const I=me.data();if(I.bookingId!==l.id)throw new Error(`Barcode verification failed: Code "${oe}" is already used by Booking ID ${I.bookingId}`)}}const Z=Array.from(z).filter(oe=>!L.has(oe));for(const oe of Z)T.delete(he(this.db,"barcodes",oe));for(const oe of Array.from(L))T.set(he(this.db,"barcodes",oe),{bookingId:l.id,updatedAt:Date.now()});T.set(S,l,{merge:!0})})}async findBookingByBarcode(e){try{const t=e.trim();if(!t)return null;const r=et(Ue(this.db,"parcel_bookings"),nt("itemBarcodes","array-contains",t),ei(1)),s=await tt(r);return s.empty?null:s.docs[0].data()}catch(t){return console.error("Error finding booking by barcode",t),null}}async updateParcelStatus(e,t,r,s){await ct(he(this.db,"parcel_bookings",e),{statusId:t,status:"UPDATED"})}async receiveItemAtWarehouse(e,t,r){const s=he(this.db,"parcel_bookings",e),a=await St(s);if(a.exists()){const l=a.data();if(!l.items)return;const h=l.items.map(p=>p.id===t?{...p,status:"AT_WAREHOUSE",driverId:void 0,driverName:void 0,modifications:[...p.modifications||[],{timestamp:Date.now(),userId:"warehouse",userName:r,field:"Status",oldValue:p.status,newValue:"AT_WAREHOUSE"}]}:p),f=this.cleanData(h);await ct(s,{items:f})}}async updateParcelItemStatus(e,t,r){const s=he(this.db,"parcel_bookings",e),a=await St(s);if(a.exists()){const h=a.data().items.map(f=>f.id===t?{...f,status:r}:f);await ct(s,{items:h})}}async assignBookingDriver(e,t,r){const s=he(this.db,"parcel_bookings",e),a=await St(s);if(a.exists()){const l=a.data(),h=Date.now(),f={driverId:t,driverName:r,status:"CONFIRMED",statusId:"ps-pickup",lockedByDriverId:t,lockedByDriverName:r,lockedAt:h,driverAcceptedAt:h,updatedAt:h,involvedDriverIds:Array.from(new Set([...l.involvedDriverIds||[],t])),statusHistory:[...l.statusHistory||[],{statusId:"ps-pickup",statusLabel:"Picked Up",timestamp:h,updatedBy:"Dispatcher",notes:`Assigned to driver ${r}`}]};if(l.items){const p=l.items.map(_=>({..._,driverId:t,driverName:r,modifications:[..._.modifications||[],{timestamp:Date.now(),userId:"system",userName:"Dispatcher",field:"Driver Assignment",oldValue:_.driverName||"Unassigned",newValue:r}]}));f.items=p}await ct(s,f)}}async updateParcelItemCOD(e,t,r,s){const a=he(this.db,"parcel_bookings",e),l=await St(a);if(l.exists()){const f=l.data().items.map(p=>p.id===t?{...p,productPrice:r,codCurrency:s}:p);await ct(a,{items:f})}}subscribeToParcelBookings(e){const t=et(Ue(this.db,"parcel_bookings"));return qo(t,r=>{const s=r.docs.map(a=>a.data());e(s)})}subscribeToCustomerBookings(e,t,r,s){let a;return t?a=et(Ue(this.db,"parcel_bookings"),nt("senderId","==",t)):a=et(Ue(this.db,"parcel_bookings"),nt("senderName","==",r)),qo(a,l=>{const h=l.docs.map(f=>f.data());s(h)},l=>console.error("Customer Subscription Error:",l))}async sendChatMessage(e){await this.saveDocument("chat_messages",e)}subscribeToChat(e,t){const r=et(Ue(this.db,"chat_messages"),nt("itemId","==",e));return qo(r,s=>{const a=s.docs.map(l=>l.data());a.sort((l,h)=>l.timestamp-h.timestamp),t(a)})}async settleParcelItems(e,t="customer",r,s){const a={};e.forEach(l=>{a[l.bookingId]||(a[l.bookingId]=[]),a[l.bookingId].push(l.itemId)});for(const[l,h]of Object.entries(a)){const f=he(this.db,"parcel_bookings",l),p=await St(f);if(p.exists()){const E=p.data().items.map(T=>h.includes(T.id)?t==="driver"?{...T,driverSettlementStatus:"SETTLED",driverSettledCurrency:r||T.codCurrency||"USD",driverSettlementTxnId:s}:{...T,customerSettlementStatus:"SETTLED",customerSettledCurrency:r||T.codCurrency||"USD",customerSettlementTxnId:s}:T);await ct(f,{items:E})}}}async markTaxiFeesAsReimbursed(e){const t={};e.forEach(r=>{t[r.bookingId]||(t[r.bookingId]=[]),t[r.bookingId].push(r.itemId)});for(const[r,s]of Object.entries(t)){const a=he(this.db,"parcel_bookings",r),l=await St(a);if(l.exists()){const h=l.data();if(h.items){const f=h.items.map(p=>s.includes(p.id)?{...p,taxiFeeReimbursed:!0}:p);await ct(a,{items:f})}}}}}const vV=new zS(Je,Lr);class D2 extends _s{async getWalletTransactions(e){const t=et(Ue(this.db,"wallet_transactions"),nt("userId","==",e));return(await tt(t)).docs.map(s=>s.data())}subscribeToWalletTransactions(e,t){const r=et(Ue(this.db,"wallet_transactions"),nt("userId","==",e));return qo(r,s=>{t(s.docs.map(a=>a.data()))})}async getAllWalletTransactions(){return(await tt(Ue(this.db,"wallet_transactions"))).docs.map(t=>t.data())}async requestWalletTopUp(e,t,r,s,a,l){a&&a.startsWith("data:")&&(a=await this.uploadAttachment(a));const h={id:`wtxn-${Date.now()}`,userId:e,amount:t,currency:r,type:"DEPOSIT",status:"PENDING",date:new Date().toISOString().split("T")[0],description:l,bankAccountId:s,attachment:a};await this.saveDocument("wallet_transactions",h)}async requestWithdrawal(e,t,r,s,a,l,h){const f={id:`wtxn-wd-${Date.now()}`,userId:e,userName:t,amount:r,currency:s,type:"WITHDRAWAL",status:"PENDING",date:new Date().toISOString().split("T")[0],description:l,bankAccountId:a,relatedItems:h};await this.saveDocument("wallet_transactions",f)}async requestSettlement(e,t,r,s,a,l,h,f,p){l&&l.startsWith("data:")&&(l=await this.uploadAttachment(l));const _={id:`wtxn-stl-${Date.now()}`,userId:e,userName:t,amount:r,currency:s,type:"SETTLEMENT",status:"PENDING",date:new Date().toISOString().split("T")[0],description:h,bankAccountId:a,attachment:l,relatedItems:f,excludeFees:p||!1};await this.saveDocument("wallet_transactions",_)}async processWalletTransaction(e,t,r,s,a,l,h){const f={id:`wtxn-${Date.now()}`,userId:e,amount:t,currency:r,type:s,status:"APPROVED",date:new Date().toISOString().split("T")[0],description:l,bankAccountId:a,relatedItems:h};await this.saveDocument("wallet_transactions",f)}async getPendingWalletTransactions(){const e=et(Ue(this.db,"wallet_transactions"),nt("status","==","PENDING"));return(await tt(e)).docs.map(r=>r.data())}async approveWalletTransaction(e,t,r,s){const a={status:"APPROVED"};r&&(a.journalEntryId=r),s&&(a.approvalNote=s),await ct(he(this.db,"wallet_transactions",e),a)}async markTaxiFeeTransactionsAsSettled(e,t){const r=et(Ue(this.db,"wallet_transactions"),nt("type","==","TAXI_FEE")),s=await tt(r),a=new Set(e.map(l=>`${l.bookingId}|${l.itemId}`));for(const l of s.docs){const h=l.data();if(h.taxiFeeSettled)continue;let f=!1;h.relatedItems&&h.relatedItems.length>0&&(f=h.relatedItems.some(p=>a.has(`${p.bookingId}|${p.itemId}`))),!f&&t&&h.userId===t&&(!h.relatedItems||h.relatedItems.length===0)&&(f=!0),f&&await ct(he(this.db,"wallet_transactions",l.id),{taxiFeeSettled:!0})}}async rejectWalletTransaction(e,t){await ct(he(this.db,"wallet_transactions",e),{status:"REJECTED",rejectionReason:t})}async processReferralReward(e,t){}async executeReferralRule(e,t,r){const s=et(Ue(this.db,"users"),nt("referralCode","==",t)),a=await tt(s);if(a.empty)return;const l=a.docs[0].data(),h=l.uid;if(h===e)return;const f=new Date().toISOString().split("T")[0];if(r.referrerAmount>0){const p={id:`wtxn-ref-out-${Date.now()}`,userId:h,userName:l.name,amount:r.referrerAmount,currency:r.referrerCurrency,type:"EARNING",status:"APPROVED",date:f,description:`Referral Reward: ${r.name}`,bankAccountId:""};await this.saveDocument("wallet_transactions",p),await ct(he(this.db,"users",h),{"referralStats.count":Yd(1),"referralStats.earnings":Yd(r.referrerAmount)})}if(r.refereeAmount>0){const p={id:`wtxn-ref-in-${Date.now()}`,userId:e,userName:"Referee",amount:r.refereeAmount,currency:r.refereeCurrency,type:"EARNING",status:"APPROVED",date:f,description:`Welcome Bonus: ${r.name}`,bankAccountId:""};await this.saveDocument("wallet_transactions",p)}}}class O2 extends _s{mapDocToPlace(e,t){return{id:e,name:t.main_text||t.name||"Unknown Place",address:t.description||t.secondary_text||t.address||"",location:t.lat_lon||t.location,category:t.category,phone:t.phone,keywords:t.keywords}}async searchPlaces(e){if(!e||e.length<2)return[];try{const t=Ue(this.db,"place"),r=e.toLowerCase().trim(),{query:s,where:a,limit:l}=await ge(async()=>{const{query:T,where:S,limit:C}=await Promise.resolve().then(()=>yS);return{query:T,where:S,limit:C}},void 0),h=s(t,a("keywords","array-contains",r),l(20)),f=await tt(h);if(f.size>0)return console.log(`[SEARCH] Found ${f.size} matches using keywords index`),f.docs.map(T=>this.mapDocToPlace(T.id,T.data()));console.log(`[SEARCH] Fallback to client-side search for '${e}'`);const E=(await tt(t)).docs.map(T=>this.mapDocToPlace(T.id,T.data())).filter(T=>{var L,z,$;const S=(L=T.name)==null?void 0:L.toLowerCase().includes(r),C=(z=T.address)==null?void 0:z.toLowerCase().includes(r),U=($=T.keywords)==null?void 0:$.some(Z=>Z.toLowerCase().includes(r));return S||C||U});return console.log(`[SEARCH] Client-side found ${E.length} matches for '${e}'`),E.slice(0,20)}catch(t){return console.error("Place search failed",t),[]}}async getAllPlaces(){return(await tt(Ue(this.db,"place"))).docs.map(t=>this.mapDocToPlace(t.id,t.data()))}async addPlace(e){const t={id:e.id,main_text:e.name,secondary_text:e.address,description:`${e.name}, ${e.address}`,lat_lon:e.location,category:e.category,phone:e.phone,keywords:e.keywords||e.name.toLowerCase().split(" ").concat(e.address.toLowerCase().split(" "))};await this.saveDocument("place",t)}}class L2 extends _s{async syncUserToCustomer(e){try{const t=Ue(this.db,"customers");let r,s;if(e.linkedCustomerId){const l=await this.getDocument("customers",e.linkedCustomerId);l&&(s=l,r=e.linkedCustomerId)}if(!s){const l=et(t,nt("linkedUserId","==",e.uid)),h=await tt(l);h.empty||(s=h.docs[0].data(),r=h.docs[0].id)}if(!s||!r)return{success:!1,error:"No linked customer found"};const a={...s,name:e.name||s.name,phone:e.phone||s.phone,email:e.email||s.email,address:e.address||s.address,savedLocations:this.mergeLocations(s.savedLocations,e.savedLocations),referralCode:s.referralCode||e.referralCode,updatedAt:Date.now()};return await this.saveDocument("customers",{...a,id:r}),e.linkedCustomerId||await ct(he(this.db,"users",e.uid),{linkedCustomerId:r}),{success:!0,customerId:r}}catch(t){return console.error("Sync failed:",t),{success:!1,error:String(t)}}}mergeLocations(e,t){const r=[...e||[]],s=new Set(r.map(a=>a.id));for(const a of t||[])s.has(a.id)||r.push(a);return r}async syncAllUsersToCustomers(){const e=await this.getCollection("users"),t=[];let r=0;for(const s of e)if(s.role==="customer"||s.linkedCustomerId){const a=await this.syncUserToCustomer(s);a.success?r++:a.error&&a.error!=="No linked customer found"&&t.push(`${s.name}: ${a.error}`)}return{synced:r,errors:t}}}class x2{constructor(){this.authService=new R2(pd,Je),this.configService=new jS(Je,Lr),this.financeService=new A2(Je,Lr),this.billingService=new P2(Je,Lr),this.hrService=new C2(Je,Lr),this.logisticsService=new zS(Je,Lr),this.walletService=new D2(Je,Lr),this.placeService=new O2(Je,Lr),this.base=new _s(Je,Lr),this.syncService=new L2(Je,Lr)}login(e,t){return this.authService.loginWithEmailOrPhone(e,t)}register(e,t,r,s){return this.authService.register(e,t,r,s)}registerWithPhone(e,t,r,s){return this.authService.registerWithPhone(e,t,r,s)}requestOTP(e,t="LOGIN"){return this.authService.requestOTP(e,t)}verifyOTP(e,t){return this.authService.verifyOTP(e,t)}getOTP(e){return this.authService.getOTP(e)}signupWithOTP(e,t,r,s){return this.authService.signupWithOTP(e,t,r,s)}loginWithOTP(e,t){return this.authService.loginWithOTP(e,t)}logout(){return this.authService.logout()}resetPassword(e){return this.authService.resetPassword(e)}resetPasswordWithOTP(e,t,r){return this.authService.resetPINWithOTP(e,t,r)}getCurrentUser(){return this.authService.getCurrentUser()}subscribeToAuth(e){return this.authService.subscribeToAuth(e)}sendRegistrationLink(e,t){return this.authService.sendRegistrationLink(e,t)}isEmailLink(e){return this.authService.isEmailLink(e)}completeRegistrationWithLink(e,t){return this.authService.completeRegistrationWithLink(e,t)}signInWithGoogle(e,t){return this.authService.signInWithGoogle(e,t)}resetPINWithOTP(e,t,r){return this.authService.resetPINWithOTP(e,t,r)}getSettings(){return this.configService.getSettings()}updateSettings(e){return this.configService.updateSettings(e)}getCompanyProfile(){return this.configService.getCompanyProfile()}saveCompanyProfile(e){return this.configService.saveCompanyProfile(e)}getBranches(){return this.configService.getBranches()}addBranch(e){return this.configService.addBranch(e)}updateBranch(e){return this.configService.updateBranch(e)}deleteBranch(e){return this.configService.deleteBranch(e)}getCurrencies(){return this.configService.getCurrencies()}addCurrency(e){return this.configService.addCurrency(e)}updateCurrency(e){return this.configService.updateCurrency(e)}getTaxRates(){return this.configService.getTaxRates()}addTaxRate(e){return this.configService.addTaxRate(e)}updateTaxRate(e){return this.configService.updateTaxRate(e)}getUsers(){return this.configService.getUsers()}updateUserRole(e,t){return this.configService.updateUserRole(e,t)}updateUserStatus(e,t){return this.configService.updateUserStatus(e,t)}updateUserProfile(e,t){const r=pd.currentUser;return r?this.configService.updateUserProfile(r.uid,e,t,pd):Promise.resolve()}updateUserBranch(e,t){return this.configService.updateUserBranch(e,t)}updateUserWalletMapping(e,t){return this.configService.updateUserWalletMapping(e,t)}deleteUserAndCustomer(e,t){return this.configService.deleteUserAndCustomer(e,t)}getRolePermissions(){return this.configService.getRolePermissions()}updateRolePermissions(e){return this.configService.updateRolePermissions(e)}seedDefaultPermissions(){return this.configService.seedDefaultPermissions()}updateUserLocations(e){const t=pd.currentUser;return t?this.configService.updateUserLocations(t.uid,e):Promise.resolve()}subscribeToUser(e,t){return this.configService.subscribeToUserProfile(e,t)}sendNotification(e){return this.configService.sendNotification(e)}getNotifications(e,t){return this.configService.getNotifications(e,t)}subscribeToNotifications(e,t,r){return this.configService.subscribeToNotifications(e,t,r)}markNotificationRead(e){return this.configService.markNotificationRead(e)}getMenuItems(){return this.configService.getMenuItems()}saveMenuItem(e){return this.configService.saveMenuItem(e)}deleteMenuItem(e){return this.configService.deleteMenuItem(e)}seedDefaultMenu(){return this.configService.seedDefaultMenu()}overwriteMenu(e){return this.configService.overwriteMenu(e)}getAccounts(){return this.financeService.getAccounts()}addAccount(e){return this.financeService.addAccount(e)}updateAccount(e){return this.financeService.updateAccount(e)}deleteAccount(e){return this.financeService.deleteAccount(e)}importAccounts(e){return this.financeService.importAccounts(e)}getTransactions(){return this.financeService.getTransactions()}addTransaction(e){return this.financeService.addTransaction(e)}updateTransaction(e){return this.financeService.updateTransaction(e)}deleteTransactions(e){return this.financeService.deleteTransactions(e)}submitForApproval(e,t,r){return this.financeService.submitForApproval(e,t,r)}saveAsDraft(e,t,r){return this.financeService.saveAsDraft(e,t,r)}approveJournalEntry(e,t,r){return this.financeService.approveJournalEntry(e,t,r)}rejectJournalEntry(e,t,r,s){return this.financeService.rejectJournalEntry(e,t,r,s)}getPendingApprovals(){return this.financeService.getPendingApprovals()}getUserDrafts(e){return this.financeService.getUserDrafts(e)}getFixedAssets(){return this.financeService.getFixedAssets()}addFixedAsset(e){return this.financeService.addFixedAsset(e)}updateFixedAsset(e){return this.financeService.updateFixedAsset(e)}getFixedAssetCategories(){return this.financeService.getFixedAssetCategories()}addFixedAssetCategory(e){return this.financeService.addFixedAssetCategory(e)}updateFixedAssetCategory(e){return this.financeService.updateFixedAssetCategory(e)}deleteFixedAssetCategory(e){return this.financeService.deleteFixedAssetCategory(e)}runBatchDepreciation(e){return this.financeService.runBatchDepreciation(e)}depreciateAsset(e,t,r){return this.financeService.depreciateAsset(e,t,r)}disposeAsset(e,t,r,s,a){return this.financeService.disposeAsset(e,t,r,s,a)}getCustomers(){return this.billingService.getCustomers()}addCustomer(e){return this.billingService.addCustomer(e)}updateCustomer(e){return this.billingService.updateCustomer(e)}getUserUidByCustomerId(e){return this.configService.getUserUidByCustomerId(e)}createCustomerFromUser(e){return this.billingService.createCustomerFromUser(e)}getInvoices(){return this.billingService.getInvoices()}createInvoice(e){return this.billingService.createInvoice(e)}recordPayment(e){return this.billingService.recordPayment(e)}getVendors(){return this.billingService.getVendors()}addVendor(e){return this.billingService.addVendor(e)}updateVendor(e){return this.billingService.updateVendor(e)}getBills(){return this.billingService.getBills()}createBill(e){return this.billingService.createBill(e)}recordBillPayment(e){return this.billingService.recordBillPayment(e)}getBillPayments(e){return this.billingService.getBillPayments(e)}getEmployees(){return this.hrService.getEmployees()}addEmployee(e){return this.hrService.addEmployee(e)}updateEmployee(e){return this.hrService.updateEmployee(e)}deleteEmployee(e){return this.hrService.deleteEmployee(e)}getStaffLoans(){return this.hrService.getStaffLoans()}createStaffLoan(e){return this.hrService.createStaffLoan(e)}recordStaffLoanRepayment(e){return this.hrService.recordStaffLoanRepayment(e)}getStaffTransactions(){return this.hrService.getStaffTransactions()}createStaffTransaction(e){return this.hrService.createStaffTransaction(e)}updateStaffTransaction(e){return this.hrService.updateStaffTransaction(e)}deleteStaffTransaction(e){return this.hrService.deleteStaffTransaction(e)}getDailyAttendance(){return this.hrService.getDailyAttendance()}saveDailyAttendance(e){return this.hrService.saveDailyAttendance(e)}getAttendanceRecords(){return this.hrService.getAttendanceRecords()}saveAttendanceRecord(e){return this.hrService.saveAttendanceRecord(e)}getParcelServices(){return this.logisticsService.getParcelServices()}saveParcelService(e){return this.logisticsService.saveParcelService(e)}deleteParcelService(e){return this.logisticsService.deleteParcelService(e)}getParcelPromotions(){return this.logisticsService.getParcelPromotions()}saveParcelPromotion(e){return this.logisticsService.saveParcelPromotion(e)}deleteParcelPromotion(e){return this.logisticsService.deleteParcelPromotion(e)}getParcelStatuses(){return this.logisticsService.getParcelStatuses()}saveParcelStatus(e){return this.logisticsService.saveParcelStatus(e)}deleteParcelStatus(e){return this.logisticsService.deleteParcelStatus(e)}seedDefaultParcelStatuses(){return this.logisticsService.seedDefaultParcelStatuses()}getParcelBookings(){return this.logisticsService.getParcelBookings()}getDriverJobs(e){return this.logisticsService.getDriverJobs(e)}getUserBookings(e){return this.logisticsService.getUserBookings(e)}saveParcelBooking(e,t){return this.logisticsService.saveParcelBooking(e,t,this.walletService,this.configService,this.hrService)}updateParcelStatus(e,t,r,s){return this.logisticsService.updateParcelStatus(e,t,r,s)}updateParcelItemStatus(e,t,r){return this.logisticsService.updateParcelItemStatus(e,t,r)}updateParcelItemCOD(e,t,r,s){return this.logisticsService.updateParcelItemCOD(e,t,r,s)}receiveItemAtWarehouse(e,t,r){return this.logisticsService.receiveItemAtWarehouse(e,t,r)}subscribeToParcelBookings(e){return this.logisticsService.subscribeToParcelBookings(e)}subscribeToCustomerBookings(e,t,r,s){return this.logisticsService.subscribeToCustomerBookings(e,t,r,s)}findBookingByBarcode(e){return this.logisticsService.findBookingByBarcode(e)}sendChatMessage(e){return this.logisticsService.sendChatMessage(e)}subscribeToChat(e,t){return this.logisticsService.subscribeToChat(e,t)}settleParcelItems(e,t="customer",r,s){return this.logisticsService.settleParcelItems(e,t,r,s)}getCustomerSpecialRates(e){return this.logisticsService.getCustomerSpecialRates(e)}saveCustomerSpecialRate(e){return this.logisticsService.saveCustomerSpecialRate(e)}deleteCustomerSpecialRate(e){return this.logisticsService.deleteCustomerSpecialRate(e)}getCustomerCashbackRules(e){return this.logisticsService.getCustomerCashbackRules(e)}saveCustomerCashbackRule(e){return this.logisticsService.saveCustomerCashbackRule(e)}deleteCustomerCashbackRule(e){return this.logisticsService.deleteCustomerCashbackRule(e)}getReferralRules(){return this.logisticsService.getReferralRules()}saveReferralRule(e){return this.logisticsService.saveReferralRule(e)}deleteReferralRule(e){return this.logisticsService.deleteReferralRule(e)}getTelegramGroups(){return this.logisticsService.getTelegramGroups()}saveTelegramGroup(e){return this.logisticsService.saveTelegramGroup(e)}deleteTelegramGroup(e){return this.logisticsService.deleteTelegramGroup(e)}markTaxiFeesAsReimbursed(e){return this.logisticsService.markTaxiFeesAsReimbursed(e)}markTaxiFeeTransactionsAsSettled(e,t){return this.walletService.markTaxiFeeTransactionsAsSettled(e,t)}getWalletTransactions(e){return this.walletService.getWalletTransactions(e)}subscribeToWalletTransactions(e,t){return this.walletService.subscribeToWalletTransactions(e,t)}getAllWalletTransactions(){return this.walletService.getAllWalletTransactions()}requestWalletTopUp(e,t,r,s,a,l){return this.walletService.requestWalletTopUp(e,t,r,s,a,l)}requestSettlement(e,t,r,s,a,l,h,f){return this.walletService.requestSettlement(e,t,r,s,a,l,h,f)}requestWithdrawal(e,t,r,s,a,l,h){return this.walletService.requestWithdrawal(e,t,r,s,a,l,h)}processWalletTransaction(e,t,r,s,a,l,h){return this.walletService.processWalletTransaction(e,t,r,s,a,l,h)}getPendingWalletTransactions(){return this.walletService.getPendingWalletTransactions()}approveWalletTransaction(e,t,r,s){return this.walletService.approveWalletTransaction(e,t,r,s)}rejectWalletTransaction(e,t){return this.walletService.rejectWalletTransaction(e,t)}processReferralReward(e,t){return this.walletService.processReferralReward(e,t)}searchPlaces(e){return this.placeService.searchPlaces(e)}getAllPlaces(){return this.placeService.getAllPlaces()}addPlace(e){return this.placeService.addPlace(e)}getDocument(e,t){return this.base.getDocument(e,t)}deleteDocument(e,t){return this.base.deleteDocument(e,t)}createCustomer(e){return this.billingService.addCustomer(e)}async clearFinancialAndLogisticsData(){const e=["transactions","invoices","bills","bill_payments","payments","parcel_bookings","wallet_transactions","staff_loans","loan_repayments","fixed_assets","fixed_asset_categories","notifications","chat_messages","customer_rates","referral_rules"];for(const t of e)try{const r=Ue(Je,t);for(;;){const s=et(r,ei(400)),a=await tt(s);if(a.empty)break;const l=sl(Je);a.docs.forEach(h=>{l.delete(h.ref)}),await l.commit()}}catch(r){console.error(`Failed to clear collection ${t}`,r)}}async initializeCompanyData(e,t,r,s){if(s){await this.clearFinancialAndLogisticsData();const a=async l=>{try{const h=Ue(Je,l);for(;;){const f=et(h,ei(400)),p=await tt(f);if(p.empty)break;const _=sl(Je);p.docs.forEach(E=>_.delete(E.ref)),await _.commit()}}catch(h){console.error("Clean meta error",h)}};await a("accounts"),await a("branches"),await a("navigation_menu")}await this.financeService.importAccounts(t);for(const a of r)await this.addBranch(a);await this.seedDefaultMenu(),await this.updateSettings(e)}}const zt=new x2,GS=b.createContext(void 0);function V2({children:n}){const[e,t]=b.useState(null),[r,s]=b.useState(null),[a,l]=b.useState(!0);b.useEffect(()=>{const C=setTimeout(()=>{a&&(console.warn("Auth initialization timeout"),l(!1))},5e3),U=zt.subscribeToAuth(L=>{t(L),s(L?zt.getCurrentUser():null),l(!1),clearTimeout(C)});return()=>{U(),clearTimeout(C)}},[]);const S={user:e,firebaseUser:r,loading:a,login:async(C,U)=>{await zt.login(C,U)},register:async(C,U,L,z)=>{await zt.register(C,U,L,z)},logout:async()=>{await zt.logout(),t(null),s(null)},resetPassword:async C=>{await zt.resetPassword(C)},hasPermission:C=>e?zt.getRolePermissions().then(L=>(L[e.role]||[]).includes(C)).catch(()=>!1):!1,hasRole:C=>e?Array.isArray(C)?C.includes(e.role):e.role===C:!1};return J.jsx(GS.Provider,{value:S,children:n})}function ua(){const n=b.useContext(GS);return n===void 0?{user:null,firebaseUser:null,loading:!0,login:async()=>{throw new Error("Auth not initialized")},register:async()=>{throw new Error("Auth not initialized")},logout:async()=>{throw new Error("Auth not initialized")},resetPassword:async()=>{throw new Error("Auth not initialized")},hasPermission:()=>!1,hasRole:()=>!1}:n}const HS=b.createContext(void 0);function M2({children:n,userRole:e}){const[t,r]=b.useState({}),[s,a]=b.useState([]),[l,h]=b.useState([]),[f,p]=b.useState([]),[_,E]=b.useState([]),[T,S]=b.useState([]),[C,U]=b.useState([]),[L,z]=b.useState([]),[$,Z]=b.useState([]),[oe,we]=b.useState([]),[me,I]=b.useState([]),[A,N]=b.useState([]),[V,M]=b.useState([]),[G,D]=b.useState([]),[We,ft]=b.useState(Qd),[Xe,Ge]=b.useState(!0),[ie,_e]=b.useState(null),ue=async()=>{if(!e)return;if(["system-admin","accountant","finance-manager"].includes(e))try{const[De,xe,ze,rt,$e,_t]=await Promise.all([zt.getTransactions().catch(()=>[]),zt.getInvoices().catch(()=>[]),zt.getVendors().catch(()=>[]),zt.getBills().catch(()=>[]),zt.getStaffLoans().catch(()=>[]),zt.getPendingWalletTransactions().catch(()=>[])]);p(De),S(xe),U(ze),z(rt),we($e),I(_t)}catch(De){console.error("Error loading financial data:",De)}else p([]),S([]),U([]),z([]),we([]),I([])},j=async()=>{if(!e){Ge(!1);return}try{Ge(!0),_e(null);const[be,De,xe,ze,rt,$e,_t,ln,Ir]=await Promise.all([zt.getSettings().catch(()=>({})),zt.getAccounts().catch(()=>[]),zt.getBranches().catch(()=>[]),zt.getCurrencies().catch(()=>[]),zt.getTaxRates().catch(()=>[]),zt.getRolePermissions().catch(()=>({})),zt.getEmployees().catch(()=>[]),zt.getCustomers().catch(()=>[]),zt.getMenuItems().catch(()=>[])]);r(be),a(De),h(xe),N(ze),M(rt),$e&&Object.keys($e).length>0?ft($e):ft(Qd),Z(_t),E(ln),Ir&&Ir.length>0?D(Ir):D(lm),await ue()}catch(be){console.error("Critical failure in loadData",be),_e(be),D(lm)}finally{Ge(!1)}};b.useEffect(()=>{e?j():Ge(!1)},[e]);const te={settings:t,branches:l,currencies:A,taxRates:V,menuItems:G,rolePermissions:We,accounts:s,transactions:f,customers:_,invoices:T,vendors:C,bills:L,employees:$,loans:oe,pendingWalletRequests:me,loading:Xe,error:ie,refreshData:j,refreshFinancialData:ue};return J.jsx(HS.Provider,{value:te,children:n})}function WS(){const n=b.useContext(HS);if(n===void 0)throw new Error("useData must be used within a DataProvider");return n}const U2={en:{dashboard:"Dashboard",Dashboard:"Dashboard",Analytics:"Analytics",Journal:"General Journal",Banking:"Banking & Cash","Staff Loans":"Staff Loans",Closing:"Period Closing",Booking:"Booking","Parcel List":"Parcel Bookings",Operations:"Operations",Dispatch:"Dispatch",Warehouse:"Warehouse",Fleet:"Fleet",Places:"Places & Zones",Commissions:"Commissions","Logistics Config":"Logistics Configuration",Reports:"Reports","Aging Report":"Aging Report",Retention:"Retention",Configuration:"Configuration",Users:"Users",Manual:"User Manual","My Deliveries":"My Deliveries","Pickup Jobs":"Pickup Jobs","My Earnings":"My Earnings","My Wallet":"My Wallet","New Booking":"New Booking","My Parcels":"My Parcels",Tracking:"Tracking","My Profile":"My Profile",loading:"Loading...",save:"Save",cancel:"Cancel",delete:"Delete",edit:"Edit",view:"View",actions:"Actions",status:"Status",date:"Date",total:"Total",signOut:"Sign Out",profile:"Profile",search:"Search",filter:"Filter",print:"Print",refresh:"Refresh",confirm:"Confirm",back:"Back",next:"Next",reset:"Reset",remove:"Remove",status_PENDING:"Pending",status_CONFIRMED:"Accepted",status_PICKED_UP:"Picked Up",status_IN_TRANSIT:"In Transit",status_AT_WAREHOUSE:"At Warehouse",status_DELIVERED:"Delivered",status_COMPLETED:"Completed",status_CANCELLED:"Cancelled",status_RETURN_TO_SENDER:"Returned",status_APPROVED:"Approved",status_REJECTED:"Rejected",status_SETTLED:"Settled",wallet:"Wallet",my_wallet:"My Wallet",net_balance:"Net Balance",top_up:"Top Up",request_payout:"Request Payout",detailed_statement:"Detailed Statement",floating_cash:"Floating Cash (To Settle)",request_settlement:"Request Settlement",settlement_history:"Settlement History",proof_of_transfer:"Proof of Transfer",submit_request:"Submit Request",deposit_to_company:"Deposit To Company",pay_to_company:"Pay To Company",wallet_credit:"Wallet Credit",wallet_debit:"Wallet Debit",transaction_type:"Transaction Type",pending_approval:"Pending Approval",i_am_paying:"I Am Paying",analytics:"Analytics",journal:"General Journal",receivables:"Sales & Receivables",payables:"Purchases & Payables",banking:"Banking & Cash",staff_loans:"Staff Loans",fixed_assets:"Fixed Assets",parcels:"Parcel Logistics",reports:"Financial Reports",closing:"Period Closing",configuration:"Configuration",users:"User Management",manual:"User Manual",system:"System",revenue:"Revenue",expenses:"Expenses",net_income:"Net Income",assets:"Assets",liabilities:"Liabilities",equity:"Equity",recent_activity:"Recent Activity",description:"Description",reference:"Reference",debit:"Debit",credit:"Credit",balance:"Balance",account:"Account",code:"Code",amount:"Amount",currency:"Currency",exchange_rate:"Exchange Rate",trial_balance:"Trial Balance",balance_sheet:"Balance Sheet",profit_loss:"Profit & Loss",general_ledger:"General Ledger",grand_total:"Grand Total",from_date:"From Date",to_date:"To Date",as_of:"As of",invoice:"Invoice",customer:"Customer",create_invoice:"Create Invoice",manage_customers:"Manage Customers",aging_report:"Aging Report",total_receivables:"Total Receivables",overdue_invoices:"Overdue Invoices",receive_payment:"Receive Payment",bill:"Bill",vendor:"Vendor",enter_bill:"Enter Bill",cash_purchase:"Cash Purchase",manage_vendors:"Manage Vendors",total_payable:"Total Payable",overdue_bills:"Overdue Bills",record_payment:"Record Payment",transfer_funds:"Transfer Funds",add_bank:"Add Bank",cash_position:"Cash Position",real_time_balance:"Real-time Balance",source_account:"Source Account",destination_account:"Destination Account",employees:"Employees",issue_loan:"Issue Loan",manage_staff:"Manage Staff",settlements:"Settlements",accept_deposit:"Accept Deposit",total_outstanding:"Total Outstanding",total_issued:"Total Issued",repay:"Repay",register_asset:"Register Asset",depreciation_schedule:"Depreciation Schedule",total_asset_cost:"Total Asset Cost",net_book_value:"Net Book Value",depreciate:"Depreciate",dispose:"Dispose",purchase_date:"Purchase Date",useful_life:"Useful Life",general_config:"General",chart_of_accounts:"Chart of Accounts",branches:"Branches / Warehouses",currencies:"Currencies",taxes:"Taxes",add_account:"Add Account",company_name:"Company Name",overview:"Overview",new_booking_admin:"+ New Booking",operations:"Operations",dispatch:"Dispatch",fleet:"Fleet",promotions:"Promotions",workflow:"Workflow",products:"Products",parcel_list:"Parcel Bookings",sender:"Sender",service:"Service",items:"Items",fee:"Fee",warehouse:"Warehouse",places:"Places & Zones",commissions:"Commissions",logistics_config:"Logistics Configuration",booking:"Booking",step_sender:"Sender & Route",step_items:"Parcel Items",step_review:"Review & Financials",sender_name:"Sender Name",sender_phone:"Sender Phone",pickup_addr:"Pickup Address",est_distance:"Est. Distance (km)",delivery_notes:"Delivery Instructions / Notes",receiver_name:"Receiver Name",receiver_phone:"Receiver Phone",dest_addr:"Destination Address",item_desc:"Item Description",cod_amount:"Cash to Collect (COD)",weight:"Weight (kg)",tracking_id:"Tracking ID",apply_promo:"Apply Promotion",booking_status:"Booking Status",deposit_to:"Deposit To (If Paid)",payment_summary:"Payment Summary",subtotal:"Subtotal",discount:"Discount",tax:"Tax",total_fee:"Total Fee",confirm_booking:"Confirm Booking",add_parcel:"+ Add Parcel",search_placeholder:"ID, Sender, Receiver...",all_customers:"All Customers",all_statuses:"All Statuses",showing:"Showing",reset_filters:"Reset Filters",booking_ref:"Ref",my_profile:"My Profile",new_booking:"New Booking",spending_report:"Spending Report",delivery_reports:"Delivery Reports",hello:"Hello",track_shipment:"Track your shipments & spend.",active_orders:"Active Orders",history:"History",spent:"Spent",new_order:"New Order",summary_report:"Summary Report",financial_overview:"Financial overview of your deliveries.",delivery_expenses:"Delivery Expenses",total_spent_orders:"Total spent on {0} orders",cod_collected:"COD Collected",cash_collected_desc:"Cash collected from receivers",cod_pending:"COD Pending",cod_pending_desc:"In transit or at warehouse",transaction_details:"Transaction Details",delivery_fee:"Delivery Fee",cod_amount_table:"COD Amount",no_transactions_period:"No transactions found in this period.",sender_route:"Sender & Route",parcel_details:"Parcel Details",financials:"Financials",pickup_location:"Pickup Location",select_vehicle:"Select Vehicle",photo_booking:"Photo Booking",manual_entry:"Manual Entry",receiver_details:"Receiver Details",delivery_instructions:"Delivery Instructions / Note",promo_code:"Promo Code",review_financials:"Review & Financials",cancel_booking:"Cancel Booking",confirm_cancel:"Are you sure you want to cancel this booking?",my_jobs:"My Jobs",pickups:"Pickups",active:"Active",available:"New",settlement:"Settlement",cash_on_hand:"Cash On Hand",process_pickup:"Process Pickup",accept_job:"Accept Job",start_delivery:"Start Delivery",completed:"Completed",failed_return:"Failed / Return",confirm_pickup:"Confirm Pickup",saved_locations:"Saved Locations",bank_accounts:"Bank Accounts",bank_accounts_subtitle:"For Payouts & Settlements",referral_program:"Referral Program",default_address:"Default Address",save_basic_info:"Save Basic Info",profile_updated:"Profile updated!",need_billing_profile:"You need to set up a billing profile to add bank accounts.",init_wallet_profile:"Initialize Wallet Profile",bank_name:"Bank Name",account_no:"Account No.",qr_enabled:"QR Enabled",add_bank_account:"Add Bank Account",max_bank_limit:"Maximum of 2 bank accounts reached.",save_account:"Save Account",qr_code_label:"QR Code Image (Optional but Recommended)",loc_label_placeholder:"Label (e.g. Home, Office)",address_coordinates:"Address / Coordinates",enter_address_placeholder:"Enter address or select on map",coordinates_set:"Coordinates Set",set_primary:"Set Primary",primary_badge:"PRIMARY",add_new_location:"Add New Location",save_location:"Save Location",referral_code_title:"Your Unique Referral Code",referral_desc:"Share this code with friends. They get a discount, and you get credits!",copy_code:"Copy Code",copied:"Copied!",confirm_delete_location:"Delete this location?",confirm_delete_bank:"Delete this bank account?",bank_deleted:"Bank account deleted",location_deleted:"Location deleted",cod_pref_title:"COD Exchange Rate Preference",daily_rate_title:"Daily Exchange Rate",cod_rate_expl:"Set the exchange rate (USD to KHR) that drivers should use when collecting cash for your COD parcels. If you leave this blank, the system default ({0}) will be applied.",custom_rate_label:"Your Custom Rate (KHR)",update_rate:"Update Rate",rate_updated_success:"Exchange rate updated successfully.",rate_updated_error:"Failed to update rate.",welcome_back:"Welcome back",get_started:"Get Started",email:"Email address",password:"Password",login:"Sign In",register:"Create Account",reset_password:"Reset Password",full_name:"Full Name",phone_number:"Phone Number",forgot_password:"Forgot?",create_account:"Create an account",sign_in_link:"Sign in",i_am_customer:"I'm a Customer",business_staff:"Business Staff",notif_new_booking_title:"New Parcel Booking",notif_new_booking_msg:"New booking from {sender} - {itemCount} item(s)",notif_booking_confirmed_title:"Booking Confirmed",notif_booking_confirmed_msg:"Your booking has been confirmed and is ready for pickup.",notif_parcel_delivered_title:"Parcel Delivered",notif_parcel_delivered_msg:"Your parcel to {receiver} has been delivered.",notif_parcel_returned_title:"Parcel Returned",notif_parcel_returned_msg:"Your parcel to {receiver} is being returned to you.",notif_cod_updated_title:"COD Amount Updated",notif_cod_updated_by_driver_msg:"COD for parcel to {receiver} updated to {amount} by driver.",notif_cod_updated_by_customer_msg:"COD for parcel to {receiver} updated to {amount} by customer.",notif_wallet_approved_title:"Wallet Request Approved",notif_wallet_approved_msg:"Your wallet request has been approved.",notif_wallet_rejected_title:"Wallet Request Rejected",notif_wallet_rejected_msg:"Your wallet request has been rejected.",notif_parcel_at_warehouse_title:"Parcel at Warehouse",notif_parcel_at_warehouse_msg:"Your parcel to {receiver} has arrived at the warehouse.",notif_delivery_assigned_title:"New Delivery Assignment",notif_delivery_assigned_msg:"You have been assigned a new delivery.",notif_pickup_assigned_title:"New Pickup Assignment",notif_pickup_assigned_msg:"You have been assigned a new pickup job.",notif_new_message_title:"New Message",notif_new_message_msg:"You have a new message about your parcel."},km:{dashboard:"",Dashboard:"",Analytics:"",Journal:"",Banking:" & ","Staff Loans":"",Closing:"",Booking:"","Parcel List":"",Operations:"",Dispatch:"",Warehouse:"",Fleet:"",Places:" & ",Commissions:"","Logistics Config":"",Reports:"","Aging Report":"",Retention:"",Configuration:"",Users:"",Manual:"","My Deliveries":"","Pickup Jobs":"","My Earnings":"","My Wallet":"","New Booking":"","My Parcels":"",Tracking:"","My Profile":"",loading:"...",save:"",cancel:"",delete:"",edit:"",view:"",actions:"",status:"",date:"",total:"",signOut:"",profile:"",search:"",filter:"",print:"",refresh:"",confirm:"",back:"",next:"",reset:"",remove:"",status_PENDING:"",status_CONFIRMED:"",status_PICKED_UP:"",status_IN_TRANSIT:"",status_AT_WAREHOUSE:"",status_DELIVERED:"",status_COMPLETED:"",status_CANCELLED:"",status_RETURN_TO_SENDER:"",status_APPROVED:"",status_REJECTED:"",status_SETTLED:"",wallet:"",my_wallet:"",net_balance:"",top_up:"",request_payout:"",detailed_statement:"",floating_cash:" ()",request_settlement:"",settlement_history:"",proof_of_transfer:" ()",submit_request:"",deposit_to_company:"",pay_to_company:"",wallet_credit:"",wallet_debit:"",transaction_type:"",pending_approval:"",i_am_paying:"",analytics:"",journal:"",receivables:" & ",payables:" & ",banking:" & ",staff_loans:"",fixed_assets:"",parcels:"",reports:"",closing:"",configuration:"",users:"",manual:"",system:"",revenue:"",expenses:"",net_income:"",assets:"",liabilities:"",equity:"",recent_activity:"",description:"",reference:"",debit:" (Debit)",credit:" (Credit)",balance:"",account:"",code:"",amount:"",currency:"",exchange_rate:"",trial_balance:"",balance_sheet:" (BS)",profit_loss:"",general_ledger:"",grand_total:"",from_date:"",to_date:"",as_of:"",invoice:"",customer:"",create_invoice:"",manage_customers:"",aging_report:"",total_receivables:"",overdue_invoices:"",receive_payment:"",bill:"",vendor:"",enter_bill:"",cash_purchase:"",manage_vendors:"",total_payable:"",overdue_bills:"",record_payment:"",transfer_funds:"",add_bank:"",cash_position:"",real_time_balance:"",source_account:"",destination_account:"",employees:"",issue_loan:"",manage_staff:"",settlements:"",accept_deposit:"",total_outstanding:"",total_issued:"",repay:"",register_asset:"",depreciation_schedule:"",total_asset_cost:"",net_book_value:"",depreciate:"",dispose:"/",purchase_date:"",useful_life:"",general_config:"",chart_of_accounts:"",branches:" / ",currencies:"",taxes:"",add_account:"",company_name:"",overview:"",new_booking_admin:"+ ",operations:"",dispatch:"",fleet:"",promotions:"",workflow:"",products:"/",parcel_list:"",sender:"",service:"",items:"",fee:"",warehouse:"",places:" & ",commissions:"",logistics_config:"",booking:"",retention:"",tracking:"",my_deliveries:"",pickup_jobs:"",my_earnings:"",my_parcels:"",step_sender:" & ",step_items:"",step_review:" & ",sender_name:"",sender_phone:"",pickup_addr:" (Pickup)",est_distance:" (km)",delivery_notes:" / ",receiver_name:"",receiver_phone:"",dest_addr:"",item_desc:"",cod_amount:" (COD)",weight:" (kg)",tracking_id:" (Tracking ID)",apply_promo:"",booking_status:"",deposit_to:" ()",payment_summary:"",subtotal:"",discount:"",tax:"",total_fee:"",confirm_booking:"",add_parcel:"+ ",search_placeholder:", , ...",all_customers:"",all_statuses:"",showing:"",reset_filters:"",booking_ref:"",my_profile:"",new_booking:"",spending_report:"",delivery_reports:"",hello:"",track_shipment:" ",active_orders:"",history:"",spent:"",new_order:"",summary_report:"",financial_overview:"",delivery_expenses:"",total_spent_orders:" {0}",cod_collected:"COD ",cash_collected_desc:"",cod_pending:"COD ",cod_pending_desc:" ",transaction_details:"",delivery_fee:"",cod_amount_table:" COD",no_transactions_period:"",sender_route:" & ",parcel_details:"",financials:"",pickup_location:"",select_vehicle:"",photo_booking:"",manual_entry:"",receiver_details:"",delivery_instructions:"",promo_code:"",review_financials:" & ",cancel_booking:"",confirm_cancel:"?",my_jobs:"",pickups:"",active:"",available:"",settlement:"",cash_on_hand:"",process_pickup:"",accept_job:"",start_delivery:"",completed:"",failed_return:" / ",confirm_pickup:"",saved_locations:"",bank_accounts:"",bank_accounts_subtitle:" & ",referral_program:"",default_address:"",save_basic_info:"",profile_updated:"!",need_billing_profile:" ",init_wallet_profile:"",bank_name:"",account_no:"",qr_enabled:" QR",add_bank_account:"",max_bank_limit:"  ",save_account:"",qr_code_label:" QR Code ( )",loc_label_placeholder:" (. , )",address_coordinates:" / ",enter_address_placeholder:" ",coordinates_set:"",set_primary:"",primary_badge:"",add_new_location:"",save_location:"",referral_code_title:"",referral_desc:"  !",copy_code:"",copied:"!",confirm_delete_location:"?",confirm_delete_bank:"?",bank_deleted:"",location_deleted:"",cod_pref_title:" COD",daily_rate_title:"",cod_rate_expl:" (  )  COD   ({0})",custom_rate_label:" ()",update_rate:"",rate_updated_success:"",rate_updated_error:"",welcome_back:"",get_started:"",email:"",password:"",login:"",register:"",reset_password:"",full_name:"",phone_number:"",forgot_password:"?",create_account:"",sign_in_link:"",i_am_customer:"",business_staff:"",notif_new_booking_title:"",notif_new_booking_msg:" {sender} - {itemCount} ",notif_booking_confirmed_title:"",notif_booking_confirmed_msg:" ",notif_parcel_delivered_title:"",notif_parcel_delivered_msg:" {receiver} ",notif_parcel_returned_title:"",notif_parcel_returned_msg:" {receiver} ",notif_cod_updated_title:" COD ",notif_cod_updated_by_driver_msg:"COD  {receiver}  {amount} ",notif_cod_updated_by_customer_msg:"COD  {receiver}  {amount} ",notif_wallet_approved_title:"",notif_wallet_approved_msg:"",notif_wallet_rejected_title:"",notif_wallet_rejected_msg:"",notif_parcel_at_warehouse_title:"",notif_parcel_at_warehouse_msg:" {receiver} ",notif_delivery_assigned_title:"",notif_delivery_assigned_msg:"",notif_pickup_assigned_title:"",notif_pickup_assigned_msg:"",notif_new_message_title:"",notif_new_message_msg:""}},qS=b.createContext(void 0),F2=({children:n})=>{const[e,t]=b.useState("en");b.useEffect(()=>{const a=localStorage.getItem("app_language");a&&(a==="en"||a==="km")&&t(a)},[]);const r=a=>{t(a),localStorage.setItem("app_language",a)},s=a=>U2[e][a]||a;return J.jsx(qS.Provider,{value:{language:e,setLanguage:r,t:s},children:n})},TV=()=>{const n=b.useContext(qS);if(!n)throw new Error("useLanguage must be used within a LanguageProvider");return n},$S=b.createContext(void 0),B2=({children:n})=>{const[e,t]=b.useState(Qd),[r,s]=b.useState(!0),a=async()=>{s(!0);try{const f=await zt.getRolePermissions();f&&Object.keys(f).length>0&&t(f)}catch(f){console.error("Failed to fetch permissions:",f)}finally{s(!1)}},l=f=>{t(f),s(!1)},h=(f,p)=>f?f.role==="system-admin"?!0:(e[f.role]||[]).includes(p):!1;return J.jsx($S.Provider,{value:{permissions:e,setPermissions:l,hasPermission:h,refreshPermissions:a,isLoading:r},children:n})},wV=()=>{const n=b.useContext($S);if(!n)throw new Error("usePermissions must be used within a PermissionsProvider");return n},KS=b.createContext(void 0);function j2({children:n}){const[e,t]=b.useState([]),r=b.useCallback((l,h="info",f=3e3)=>{const p=Math.random().toString(36).substr(2,9);t(_=>[..._,{id:p,message:l,type:h,duration:f}]),f>0&&setTimeout(()=>{t(_=>_.filter(E=>E.id!==p))},f)},[]),s=b.useCallback(l=>{t(h=>h.filter(f=>f.id!==l))},[]),a={toasts:e,addToast:r,removeToast:s};return J.jsx(KS.Provider,{value:a,children:n})}function z2(){const n=b.useContext(KS);if(!n)throw new Error("useToast must be used within ToastProvider");return n}const SV={success:(n,e)=>{typeof window<"u"&&window.__toast&&window.__toast.addToast(n,"success",e)},error:(n,e)=>{typeof window<"u"&&window.__toast&&window.__toast.addToast(n,"error",e)},warning:(n,e)=>{typeof window<"u"&&window.__toast&&window.__toast.addToast(n,"warning",e)},info:(n,e)=>{typeof window<"u"&&window.__toast&&window.__toast.addToast(n,"info",e)}};function G2(){const{toasts:n,removeToast:e,addToast:t}=z2();b.useEffect(()=>(window.__toast={addToast:t},()=>{delete window.__toast}),[t]);const r={success:"bg-green-600",error:"bg-red-600",warning:"bg-yellow-600",info:"bg-indigo-600"},s={success:J.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:J.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),error:J.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:J.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})}),warning:J.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:J.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),info:J.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:J.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})};return J.jsx("div",{className:"fixed bottom-6 right-6 z-50 flex flex-col gap-2 pointer-events-none",children:n.map(a=>J.jsxs("div",{className:`flex items-center gap-3 px-4 py-3 rounded-lg shadow-2xl text-white ${r[a.type]} animate-fade-in-up transition-all max-w-md pointer-events-auto`,children:[J.jsx("div",{className:"flex-shrink-0",children:s[a.type]}),J.jsx("span",{className:"flex-1 font-medium text-sm",children:a.message}),J.jsx("button",{onClick:()=>e(a.id),className:"flex-shrink-0 text-white/80 hover:text-white focus:outline-none transition-colors",children:J.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:J.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]},a.id))})}function H2({children:n}){return J.jsx(j2,{children:J.jsx(F2,{children:J.jsx(V2,{children:J.jsx(W2,{children:J.jsx(B2,{children:J.jsxs(q2,{children:[n,J.jsx(G2,{})]})})})})})})}function W2({children:n}){const{loading:e}=ua();return e?J.jsx("div",{className:"min-h-screen flex items-center justify-center text-gray-500 font-medium",children:J.jsxs("div",{className:"text-center",children:[J.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-400 mx-auto mb-4"}),"Loading..."]})}):J.jsx(J.Fragment,{children:n})}function q2({children:n}){const{user:e}=ua();return J.jsx(M2,{userRole:e==null?void 0:e.role,children:n})}function Np({children:n,requireRoles:e,redirectTo:t="/landing"}){const{user:r,loading:s}=ua(),a=Vi();return s?J.jsx("div",{className:"min-h-screen flex items-center justify-center text-gray-500 font-medium",children:"Loading..."}):r?r.status==="PENDING"&&a.pathname!=="/pending"?J.jsx(_r,{to:"/pending",replace:!0}):e&&e.length>0&&!e.includes(r.role)?J.jsx(_r,{to:$2(r.role),replace:!0}):J.jsx(J.Fragment,{children:n}):J.jsx(_r,{to:t,state:{from:a},replace:!0})}function $2(n){switch(n){case"customer":return"/app/customer/booking";case"driver":return"/app/driver/jobs";case"system-admin":case"accountant":case"finance-manager":case"warehouse":return"/app/dashboard";default:return"/landing"}}function K2(n){const{user:e}=ua(),{rolePermissions:t}=WS();return e?e.role==="system-admin"?!0:(t[e.role]||[]).includes(n):!1}function IV(){const{user:n}=ua(),{rolePermissions:e}=WS();return n?e[n.role]||[]:[]}function Ne({children:n,requiredPermission:e,fallbackRoute:t="/app/dashboard"}){const{user:r}=ua(),s=K2(e);return r?r.role==="system-admin"?J.jsx(J.Fragment,{children:n}):s?J.jsx(J.Fragment,{children:n}):J.jsx(_r,{to:t,replace:!0}):J.jsx(_r,{to:"/landing",replace:!0})}const X2=()=>{const{user:n,loading:e}=ua();return e?J.jsx("div",{className:"min-h-screen flex items-center justify-center text-gray-500",children:"Loading..."}):n?n.role==="customer"?J.jsx(_r,{to:"/app/customer/parcels",replace:!0}):n.role==="driver"?J.jsx(_r,{to:"/app/driver/jobs",replace:!0}):J.jsx(_r,{to:"/app/dashboard",replace:!0}):J.jsx(_r,{to:"/landing",replace:!0})};class Y2 extends b.Component{constructor(){super(...arguments),this.state={hasError:!1,error:null},this.handleReset=()=>{window.location.href="/"}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("CRITICAL UI ERROR:",e,t)}render(){var e;return this.state.hasError?J.jsxs("div",{className:"min-h-screen bg-slate-50 flex flex-col items-center justify-center p-6 text-center",children:[J.jsxs("div",{className:"max-w-md w-full bg-white rounded-2xl shadow-2xl p-8 border border-slate-100",children:[J.jsx("div",{className:"w-20 h-20 bg-red-50 text-red-600 rounded-2xl flex items-center justify-center mx-auto mb-6 shadow-inner",children:J.jsx("svg",{className:"w-10 h-10",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:J.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),J.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Unexpected Application Error"}),J.jsx("p",{className:"text-slate-500 mb-8 text-sm leading-relaxed",children:"Something went wrong while rendering this page. Our team has been notified."}),!1,((e=this.state.error)==null?void 0:e.toString().includes("Failed to fetch dynamically imported module"))&&J.jsxs("div",{className:"mb-4 text-amber-600 bg-amber-50 p-3 rounded-lg text-sm",children:[J.jsx("strong",{children:"Tip:"})," This usually happens when a new version is deployed or your connection is interrupted."]}),J.jsxs("div",{className:"flex flex-col gap-3",children:[J.jsx("button",{onClick:()=>window.location.reload(),className:"w-full bg-red-600 hover:bg-red-700 text-white font-bold py-3 px-6 rounded-xl shadow-lg shadow-red-200 transition-all active:scale-95",children:"Reload Page"}),J.jsx("button",{onClick:this.handleReset,className:"w-full bg-white hover:bg-slate-50 text-slate-600 font-semibold py-3 px-6 border border-slate-200 rounded-xl transition-all",children:"Return to Dashboard"})]})]}),J.jsx("div",{className:"mt-8 text-slate-400 text-xs font-medium uppercase tracking-widest",children:"Doorstep Logistics Engine"})]}):this.props.children}}const Q2=b.lazy(()=>ge(()=>import("./LandingPage-CwHJjakf.js"),__vite__mapDeps([0,1,2,3])).then(n=>({default:n.LandingPage})));b.lazy(()=>ge(()=>import("./AuthForms-DKiK7dhL.js"),__vite__mapDeps([4,1,5])).then(n=>({default:n.AuthForms})));const J2=b.lazy(()=>ge(()=>import("./PendingApproval-CWmLvJ4W.js"),__vite__mapDeps([6,1,7])).then(n=>({default:n.PendingApproval}))),Z2=b.lazy(()=>ge(()=>import("./OnboardingView-C7c95oSd.js"),__vite__mapDeps([8,7,1,9,3])));b.lazy(()=>ge(()=>import("./OTPSignup-DQvKrk72.js"),__vite__mapDeps([10,1])).then(n=>({default:n.OTPSignup})));const ex=b.lazy(()=>ge(()=>import("./PhoneSignupView-DmOxvqaV.js"),__vite__mapDeps([11,1,5]))),tx=b.lazy(()=>ge(()=>import("./PhoneResetView-BH7M0Qbn.js"),__vite__mapDeps([12,1,5]))),rT=b.lazy(()=>ge(()=>import("./EmailResetView-BjYcUANN.js"),__vite__mapDeps([13,1])));b.lazy(()=>ge(()=>import("./CustomerLayout-DKswQ628.js"),__vite__mapDeps([14,15,16,3,17,1,18,7,9,19,20,21,22,23,24,25,26,27,28,2,29,30])).then(n=>({default:n.CustomerLayout})));b.lazy(()=>ge(()=>import("./DriverLayout-Cyec8Cn6.js"),__vite__mapDeps([31,32,33,1,20,17,3,34,7,35,22,23,18,9,19,21,28,25,29,30,16,2])).then(n=>({default:n.DriverLayout})));const nx=b.lazy(()=>ge(()=>import("./MainLayout-BgUzvvHj.js"),__vite__mapDeps([36,28,25,2,37]))),rx=b.lazy(()=>ge(()=>import("./Dashboard-X4OS45Tf.js"),__vite__mapDeps([38,39,7])).then(n=>({default:n.Dashboard}))),ix=b.lazy(()=>ge(()=>import("./AnalyticsDashboard-Df7FcXlf.js"),__vite__mapDeps([40,7,39])).then(n=>({default:n.AnalyticsDashboard}))),sx=b.lazy(()=>ge(()=>import("./JournalView-5Z7OtgyM.js"),__vite__mapDeps([41,7,1,42,9,39,20,5,3]))),ox=b.lazy(()=>ge(()=>import("./BankingView-BWQw10ED.js"),__vite__mapDeps([43,7,1,9,5,44,20,34,3,19,29,21]))),ax=b.lazy(()=>ge(()=>import("./StaffLoansView-CFmfXvhf.js"),__vite__mapDeps([45,7,1,3]))),lx=b.lazy(()=>ge(()=>import("./StandardExpenseView-C-VewPEy.js"),__vite__mapDeps([46,7,1,9,5,47,48]))),ux=b.lazy(()=>ge(()=>import("./ExpenseTemplatesView-0OYvdfWa.js"),__vite__mapDeps([49,7,1,9,5,50,47,48,51]))),cx=b.lazy(()=>ge(()=>import("./ParcelsOverviewView-B213r7qS.js"),__vite__mapDeps([52,7,17,3,16,21,1]))),dx=b.lazy(()=>ge(()=>import("./ParcelsNewView-C0MMZ4EF.js"),__vite__mapDeps([53,7,1,9,22,3,23,26]))),hx=b.lazy(()=>ge(()=>import("./ParcelsOperationsView-Rd07awOQ.js"),__vite__mapDeps([54,7,1,3]))),fx=b.lazy(()=>ge(()=>import("./ParcelsWarehouseView-DuFvyaqp.js"),__vite__mapDeps([55,7,1,3]))),px=b.lazy(()=>ge(()=>import("./ParcelsDispatchView-XMjIihj1.js"),__vite__mapDeps([56,7,1,3]))),mx=b.lazy(()=>ge(()=>import("./DelayedChatsView-Dbv9Ea4U.js"),__vite__mapDeps([57,58,7,1,3]))),gx=b.lazy(()=>ge(()=>import("./ParcelsFleetView-D_Onh1Oe.js"),__vite__mapDeps([59,7,1,9,3]))),yx=b.lazy(()=>ge(()=>import("./ParcelsPlacesView-ByA1Ltln.js"),__vite__mapDeps([60,7,1,9,23,3]))),_x=b.lazy(()=>ge(()=>import("./ParcelsProductsView-CXYmEkX-.js"),__vite__mapDeps([61,62,1,21,3,9,20,50,47,63,51]))),Ex=b.lazy(()=>ge(()=>import("./ParcelsRetentionView-BpKzFEru.js"),__vite__mapDeps([64,7,1]))),iT=b.lazy(()=>ge(()=>import("./ParcelsServiceSetupView-SfA8jx3e.js"),__vite__mapDeps([65,62,1,21,3,9,20,50,47,63,51]))),vx=b.lazy(()=>ge(()=>import("./DriverCommissionSetupView-DRF7Kr1W.js"),__vite__mapDeps([66,67,7,1,9,3]))),Tx=b.lazy(()=>ge(()=>import("./ParcelsAgingView-CTR9EZd2.js"),__vite__mapDeps([68,69,7,1,16,3]))),wx=b.lazy(()=>ge(()=>import("./PromotionsPage-DZpgjaL7.js"),__vite__mapDeps([70,7,1,9,3]))),Sx=b.lazy(()=>ge(()=>import("./CashbackPage-BA1EsNLI.js"),__vite__mapDeps([71,7,1,9,3]))),Ix=b.lazy(()=>ge(()=>import("./CashbackReportPage-CizitoJQ.js"),__vite__mapDeps([72,7,1,3]))),Rx=b.lazy(()=>ge(()=>import("./StockManagement-BWKPntj-.js"),__vite__mapDeps([73,3,63,47,50,74,75,76,51,77,78])).then(n=>({default:n.StockManagement}))),Ax=b.lazy(()=>ge(()=>import("./StockAlertReport-D2jcw8Fv.js"),__vite__mapDeps([79,76,47,80,81,63])).then(n=>({default:n.StockAlertReport}))),Px=b.lazy(()=>ge(()=>import("./CustomerStockView-N4_h94-e.js"),__vite__mapDeps([82,63,47,75])).then(n=>({default:n.CustomerStockView}))),Cx=b.lazy(()=>ge(()=>import("./ProductCatalog-BZqldX7i.js"),__vite__mapDeps([83,3,63,47,50,74,51,77,78])).then(n=>({default:n.ProductCatalog}))),Nx=b.lazy(()=>ge(()=>import("./StockRequestList-CPMgOp8d.js"),__vite__mapDeps([84,3,1,47,50,81,85,63,76,77])).then(n=>({default:n.StockRequestList}))),kx=b.lazy(()=>ge(()=>import("./IncomingRequests-Dby-cghP.js"),__vite__mapDeps([86,3,47,81,63,85,77,76])).then(n=>({default:n.IncomingRequests}))),bx=b.lazy(()=>ge(()=>import("./ReportsView-BH_UedjD.js"),__vite__mapDeps([87,39,7,1,69,16,3,58]))),Dx=b.lazy(()=>ge(()=>import("./ClosingView-DvH4AG4w.js"),__vite__mapDeps([88,7,1,39,42,9,20,5,3]))),Ox=b.lazy(()=>ge(()=>import("./SettingsView-C95G30Va.js"),__vite__mapDeps([89,7,1,44,9,20,3,67,90,21,37]))),sT=b.lazy(()=>ge(()=>import("./UsersView-5HGoXx76.js"),__vite__mapDeps([91,7,19,1,9,3,23,22]))),Lx=b.lazy(()=>ge(()=>import("./CustomersView-EWBaW9kv.js"),__vite__mapDeps([92,1,21,3]))),xx=b.lazy(()=>ge(()=>import("./BookingMapReport-CWvd4RO1.js"),[]).then(n=>({default:n.BookingMapReport}))),Vx=b.lazy(()=>ge(()=>import("./BookingStatusByDriverReport-DufFNZct.js"),__vite__mapDeps([93,7,1,16,3,80,47,74])).then(n=>({default:n.BookingStatusByDriverReport}))),Mx=b.lazy(()=>ge(()=>import("./UserProfileView-CItl2_C5.js"),__vite__mapDeps([94,1,9,7,19]))),Ux=b.lazy(()=>ge(()=>import("./UserManualView-DtPhJDvB.js"),__vite__mapDeps([95,7]))),Fx=b.lazy(()=>ge(()=>import("./SeedPermissionsView-Br7Nw2Iz.js"),__vite__mapDeps([96,7]))),Bx=b.lazy(()=>ge(()=>import("./MenuBuilderView-Bk-6JEkK.js"),__vite__mapDeps([97,90,21,37]))),jx=b.lazy(()=>ge(()=>import("./DriverJobsView-2OWPrr7W.js"),__vite__mapDeps([98,32,33,1,20,17,3,34,7,35,22,23]))),zx=b.lazy(()=>ge(()=>import("./DriverPickupsView-D2uomEp-.js"),__vite__mapDeps([99,35,1,22,3,23,7]))),Gx=b.lazy(()=>ge(()=>import("./DriverEarningsView-DN6kpa8u.js"),__vite__mapDeps([100,7]))),Hx=b.lazy(()=>ge(()=>import("./DriverWalletView-BotsP9mx.js"),__vite__mapDeps([101,29,7,1,20,3]))),Wx=b.lazy(()=>ge(()=>import("./DriverProfileView-BZ3wk_J_.js"),__vite__mapDeps([102,18,7,1,9,19,20,21,22,3,23]))),oT=b.lazy(()=>ge(()=>import("./CustomerBookingView-x1bWFV-Y.js"),__vite__mapDeps([103,24,1,9,7,25,22,3,23,26]))),qx=b.lazy(()=>ge(()=>import("./CustomerParcelsView-Z5iMqDfl.js"),__vite__mapDeps([104,15,16,3,17,1]))),$x=b.lazy(()=>ge(()=>import("./CustomerTrackingView-B2VSsJcd.js"),__vite__mapDeps([105,7,9,1]))),Kx=b.lazy(()=>ge(()=>import("./CustomerWalletView-Bz6Ko1A6.js"),__vite__mapDeps([106,29,7,1,20,3]))),Xx=b.lazy(()=>ge(()=>import("./CustomerReportView-DrtBNfpc.js"),__vite__mapDeps([107,27,7,1]))),Yx=b.lazy(()=>ge(()=>import("./CustomerProfileView-DsGRQw7g.js"),__vite__mapDeps([108,18,7,1,9,19,20,21,22,3,23]))),Qx=()=>J.jsx("div",{className:"min-h-screen flex items-center justify-center text-gray-500 font-medium",children:"Loading..."}),ye=n=>J.jsx(b.Suspense,{fallback:J.jsx(Qx,{}),children:J.jsx(n,{})}),Jx=b.lazy(()=>ge(()=>import("./AuthView-Lp1ZpZTr.js"),__vite__mapDeps([109,4,1,5]))),Zx=[{path:"/",element:J.jsx(_r,{to:"/landing",replace:!0}),errorElement:J.jsx(Y2,{})},{path:"/landing",element:ye(Q2)},{path:"/auth/:mode?",element:ye(Jx)},{path:"/auth/login/phone",element:ye(b.lazy(()=>ge(()=>import("./PhoneLoginView-JbUntCiM.js"),__vite__mapDeps([110,1,5]))))},{path:"/signup/phone",element:ye(ex)},{path:"/auth/reset/phone",element:ye(tx)},{path:"/auth/action",element:ye(rT)},{path:"/__/auth/action",element:ye(rT)},{path:"/pending",element:J.jsx(Np,{children:ye(J2)})},{path:"/onboarding",element:J.jsx(Np,{requireRoles:["system-admin"],children:ye(Z2)})},{path:"/app",element:J.jsx(Np,{children:ye(nx)}),children:[{index:!0,element:J.jsx(X2,{})},{path:"dashboard",element:J.jsx(Ne,{requiredPermission:"VIEW_DASHBOARD",children:ye(rx)})},{path:"analytics",element:J.jsx(Ne,{requiredPermission:"VIEW_REPORTS",children:ye(ix)})},{path:"journal",element:J.jsx(Ne,{requiredPermission:"VIEW_JOURNAL",children:ye(sx)})},{path:"banking",element:J.jsx(Ne,{requiredPermission:"MANAGE_BANKING",children:ye(ox)})},{path:"expenses",children:[{path:"standard",element:J.jsx(Ne,{requiredPermission:"MANAGE_BANKING",children:ye(lx)})},{path:"templates",element:J.jsx(Ne,{requiredPermission:"MANAGE_BANKING",children:ye(ux)})}]},{path:"staff",element:J.jsx(Ne,{requiredPermission:"MANAGE_STAFF_LOANS",children:ye(ax)})},{path:"staff/manage",element:J.jsx(Ne,{requiredPermission:"MANAGE_STAFF_LOANS",children:ye(b.lazy(()=>ge(()=>import("./EmployeeManagementView-DBdpDxe6.js"),__vite__mapDeps([111,21,1,9,19,3]))))})},{path:"staff/issue-loan",element:J.jsx(Ne,{requiredPermission:"MANAGE_STAFF_LOANS",children:ye(b.lazy(()=>ge(()=>import("./StaffLoanIssueView-B2vnPEb3.js"),__vite__mapDeps([112,1,9,7,5]))))})},{path:"staff/allowances",element:J.jsx(Ne,{requiredPermission:"MANAGE_STAFF_LOANS",children:ye(b.lazy(()=>ge(()=>import("./StaffAllowanceView-BZaSfWeD.js"),__vite__mapDeps([113,1,9,7,5,3,114]))))})},{path:"staff/settlements",element:J.jsx(Ne,{requiredPermission:"MANAGE_STAFF_LOANS",children:ye(b.lazy(()=>ge(()=>import("./StaffSettlementView-EMLJ7GeH.js"),__vite__mapDeps([115,1,9,7]))))})},{path:"staff/deposit",element:J.jsx(Ne,{requiredPermission:"MANAGE_STAFF_LOANS",children:ye(b.lazy(()=>ge(()=>import("./StaffDepositView-DOvT4Ntv.js"),__vite__mapDeps([116,1,9,7,5]))))})},{path:"payroll",element:J.jsx(Ne,{requiredPermission:"MANAGE_PAYROLL",children:ye(b.lazy(()=>ge(()=>import("./PayrollView-BOjB0VJO.js"),__vite__mapDeps([117,114,7,1,9,3]))))})},{path:"customer-settlements",element:J.jsx(Ne,{requiredPermission:"MANAGE_CUSTOMER_SETTLEMENTS",children:ye(b.lazy(()=>ge(()=>import("./CustomerSettlementReport-CeweiNB7.js"),__vite__mapDeps([118,7,1,9,3])).then(n=>({default:n.CustomerSettlementReport}))))})},{path:"settled-parcels",element:J.jsx(Ne,{requiredPermission:"MANAGE_CUSTOMER_SETTLEMENTS",children:ye(b.lazy(()=>ge(()=>import("./SettledParcelsReport-yzouF--c.js"),__vite__mapDeps([119,7,1,9,3])).then(n=>({default:n.SettledParcelsReport}))))})},{path:"parcels/overview",element:J.jsx(Ne,{requiredPermission:"VIEW_PARCELS_OVERVIEW",children:ye(cx)})},{path:"parcels/new",element:J.jsx(Ne,{requiredPermission:"CREATE_PARCEL_BOOKING",children:ye(dx)})},{path:"parcels/operations",element:J.jsx(Ne,{requiredPermission:"MANAGE_PARCEL_OPERATIONS",children:ye(hx)})},{path:"parcels/warehouse",element:J.jsx(Ne,{requiredPermission:"MANAGE_PARCEL_WAREHOUSE",children:ye(fx)})},{path:"parcels/dispatch",element:J.jsx(Ne,{requiredPermission:"MANAGE_PARCEL_DISPATCH",children:ye(px)})},{path:"parcels/delayed-chats",element:J.jsx(Ne,{requiredPermission:"MANAGE_PARCEL_WAREHOUSE",children:ye(mx)})},{path:"stock",element:J.jsx(Ne,{requiredPermission:"MANAGE_CUSTOMER_STOCK",children:ye(Rx)})},{path:"stock/alerts",element:J.jsx(Ne,{requiredPermission:"VIEW_STOCK_REPORTS",children:ye(Ax)})},{path:"stock/requests",element:J.jsx(Ne,{requiredPermission:"REVIEW_STOCK_REQUEST",children:ye(kx)})},{path:"parcels/fleet",element:J.jsx(Ne,{requiredPermission:"MANAGE_PARCEL_FLEET",children:ye(gx)})},{path:"parcels/places",element:J.jsx(Ne,{requiredPermission:"MANAGE_PARCEL_PLACES",children:ye(yx)})},{path:"parcels/products",element:J.jsx(Ne,{requiredPermission:"MANAGE_PARCEL_PRODUCTS",children:ye(_x)})},{path:"promotions",element:J.jsx(Ne,{requiredPermission:"MANAGE_PARCEL_PRODUCTS",children:ye(wx)})},{path:"cashback",element:J.jsx(Ne,{requiredPermission:"MANAGE_CASHBACK",children:ye(Sx)})},{path:"cashback-report",element:J.jsx(Ne,{requiredPermission:"MANAGE_CASHBACK",children:ye(Ix)})},{path:"parcels/retention",element:J.jsx(Ne,{requiredPermission:"VIEW_PARCEL_RETENTION",children:ye(Ex)})},{path:"parcels/aging",element:J.jsx(Ne,{requiredPermission:"VIEW_PARCEL_AGING",children:ye(Tx)})},{path:"parcels/service/setup",element:J.jsx(Ne,{requiredPermission:"MANAGE_PARCEL_CONFIG",children:ye(iT)})},{path:"parcels/commissions",element:J.jsx(Ne,{requiredPermission:"MANAGE_LOGISTICS_CONFIG",children:ye(vx)})},{path:"parcels/config",element:J.jsx(Ne,{requiredPermission:"MANAGE_PARCEL_CONFIG",children:ye(iT)})},{path:"parcels/booking",element:J.jsx(_r,{to:"/app/parcels/new",replace:!0})},{path:"parcels/list",element:J.jsx(_r,{to:"/app/parcels/overview",replace:!0})},{path:"reports",element:J.jsx(Ne,{requiredPermission:"VIEW_REPORTS",children:ye(bx)})},{path:"reports/booking-map",element:J.jsx(Ne,{requiredPermission:"VIEW_REPORTS",children:ye(xx)})},{path:"reports/booking-status-driver",element:J.jsx(Ne,{requiredPermission:"VIEW_REPORTS",children:ye(Vx)})},{path:"closing",element:J.jsx(Ne,{requiredPermission:"PERFORM_CLOSING",children:ye(Dx)})},{path:"settings",element:J.jsx(Ne,{requiredPermission:"MANAGE_SETTINGS",children:ye(Ox)})},{path:"settings/menu-builder",element:J.jsx(Ne,{requiredPermission:"MANAGE_SETTINGS",children:ye(Bx)})},{path:"seed-permissions",element:J.jsx(Ne,{requiredPermission:"MANAGE_SETTINGS",children:ye(Fx)})},{path:"telegram",element:J.jsx(Ne,{requiredPermission:"MANAGE_SETTINGS",children:ye(b.lazy(()=>ge(()=>import("./TelegramView-CRf6OZzI.js"),__vite__mapDeps([120,7,1,9,3,21]))))})},{path:"users",element:J.jsx(Ne,{requiredPermission:"MANAGE_USERS",children:ye(sT)})},{path:"users",element:J.jsx(Ne,{requiredPermission:"MANAGE_USERS",children:ye(sT)})},{path:"admin/migration",element:J.jsx(Ne,{requiredPermission:"MANAGE_SETTINGS",children:ye(b.lazy(()=>ge(()=>import("./MigrationPage-CflVU9mv.js"),[])))})},{path:"customers",element:J.jsx(Ne,{requiredPermission:"MANAGE_CUSTOMERS",children:ye(Lx)})},{path:"profile",element:ye(Mx)},{path:"manual",element:ye(Ux)},{path:"driver/jobs",element:J.jsx(Ne,{requiredPermission:"VIEW_DRIVER_JOBS",children:ye(jx)})},{path:"driver/pickups",element:J.jsx(Ne,{requiredPermission:"VIEW_DRIVER_PICKUPS",children:ye(zx)})},{path:"driver/earnings",element:J.jsx(Ne,{requiredPermission:"VIEW_DRIVER_EARNINGS",children:ye(Gx)})},{path:"driver/wallet",element:J.jsx(Ne,{requiredPermission:"VIEW_DRIVER_EARNINGS",children:ye(Hx)})},{path:"driver/profile",element:J.jsx(Ne,{requiredPermission:"VIEW_PROFILE",children:ye(Wx)})},{path:"customer/booking",element:J.jsx(Ne,{requiredPermission:"CREATE_BOOKING",children:ye(oT)})},{path:"customer/stock-booking",element:J.jsx(Ne,{requiredPermission:"CREATE_BOOKING",children:ye(oT)})},{path:"customer/parcels",element:J.jsx(Ne,{requiredPermission:"VIEW_MY_PARCELS",children:ye(qx)})},{path:"customer/reports",element:J.jsx(Ne,{requiredPermission:"CUSTOMER_VIEW_REPORTS",children:ye(Xx)})},{path:"customer/tracking",element:J.jsx(Ne,{requiredPermission:"TRACK_PARCELS",children:ye($x)})},{path:"customer/profile",element:J.jsx(Ne,{requiredPermission:"VIEW_PROFILE",children:ye(Yx)})},{path:"customer/wallet",element:J.jsx(Ne,{requiredPermission:"VIEW_PROFILE",children:ye(Kx)})},{path:"customer/stock",element:J.jsx(Ne,{requiredPermission:"VIEW_CUSTOMER_STOCK",children:ye(Px)})},{path:"customer/products",element:J.jsx(Ne,{requiredPermission:"MANAGE_CUSTOMER_PRODUCTS",children:ye(Cx)})},{path:"customer/stock-requests",element:J.jsx(Ne,{requiredPermission:"CREATE_STOCK_REQUEST",children:ye(Nx)})}]},{path:"*",element:J.jsx(_r,{to:"/landing",replace:!0})}],eV=AP(Zx);function tV(){return J.jsx(H2,{children:J.jsx(FP,{router:eV})})}const XS=document.getElementById("root");if(!XS)throw new Error("Could not find root element to mount to");const nV=hR.createRoot(XS);nV.render(J.jsx(lT.StrictMode,{children:J.jsx(tV,{})}));export{IV as $,k as A,iV as B,w2 as C,lm as D,_s as E,x2 as F,St as G,he as H,Lr as I,lV as J,uV as K,Bo as L,Cp as M,VE as N,zp as O,vp as P,Cn as Q,lT as R,YT as S,fV as T,BS as U,Wk as V,sl as W,ZO as X,iS as Y,gV as Z,ge as _,mm as a,FT as a0,oV as a1,K2 as a2,pV as a3,C2 as a4,A2 as a5,bt as a6,cu as a7,ei as a8,ct as a9,_V as aa,mV as ab,yV as ac,rV as ad,aT as ae,um as af,yS as ag,ua as b,aV as c,pd as d,cV as e,zt as f,wV as g,WS as h,P as i,J as j,EV as k,nT as l,Ue as m,Je as n,tt as o,vV as p,et as q,b as r,nu as s,SV as t,TV as u,dV as v,nt as w,qo as x,Qd as y,Vi as z};
