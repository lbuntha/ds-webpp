import{r as a,A as Q,j as e,f as v,h as xe}from"./index-BjK2osQV.js";import{C as T}from"./Card-DROeE3UG.js";import{B as j}from"./Button-JCYNVMjR.js";import{A as $}from"./accountingService-CShnyhxo.js";import{J as me}from"./JournalEntryForm-CV_B38tU.js";import{t as i}from"./toast-DTXa3ATd.js";import"./Input-B96Hj4QL.js";import"./ImageUpload-CVnIZI_m.js";import"./errorUtils-CUS756ws.js";const he=({settings:l,accounts:n,transactions:x,branches:S,currencies:M,invoices:w=[],bills:k=[],onUpdateSettings:m,onPostClosingEntry:c,onDeleteAccount:C})=>{const[b,N]=a.useState("MONTH_END"),[h,H]=a.useState(l.lockDate||""),[Y,q]=a.useState(!1),[z,Z]=a.useState(!1),[X,A]=a.useState(!1),[u,D]=a.useState({bankRec:!1,inventory:!1,depreciationReview:!1,draftReview:!1}),[d,ee]=a.useState(new Date().getFullYear()-1),[se,B]=a.useState(!1),[te,E]=a.useState(!1),[O,U]=a.useState(!1),[P,_]=a.useState(null),[f,I]=a.useState(null),[L,F]=a.useState(null),W=a.useMemo(()=>$.validateLedgerHealth(x,n,w,k),[x,n,w,k]),R=W.filter(s=>s.severity==="CRITICAL"),V=W.filter(s=>s.severity==="WARNING"),y=R.length===0,G=Object.values(u).every(s=>s===!0),J=y&&G&&h!=="",re=s=>{if(!C)return;const t=(x||[]).filter(r=>r.lines.some(o=>o.accountId===s)).length;I({id:s,usageCount:t})},ae=async()=>{if(!(!f||!C)){_(f.id);try{await C(f.id),I(null)}catch(s){i.error(`Failed to delete account: ${s.message}`)}finally{_(null)}}},le=s=>(x||[]).some(t=>t.lines.some(r=>r.accountId===s)),ne=async()=>{if(J){A(!0);try{if(z&&h&&v.runBatchDepreciation)try{const s=await v.runBatchDepreciation(h);s.processed>0&&i.success(`Successfully depreciated ${s.processed} assets. Total: $${s.totalAmount.toFixed(2)}.`)}catch(s){i.warning(`Warning: Depreciation failed (${s.message}). The period has NOT been locked. Please fix the error and try again.`),A(!1);return}if(Y&&h){const s=h.substring(0,8)+"01",t=n.find(r=>r.type===Q.EQUITY&&(r.code==="3020"||r.name.toLowerCase().includes("retained earnings")));if(!t)i.error("Error: Could not find Retained Earnings account (Code 3020) to post closing entry.");else{const r=$.generatePeriodClosingEntry(s,h,n,x,t.id);r&&await c(r)}}await m({...l,lockDate:h}),i.success("Period lock date updated successfully.")}catch(s){i.error(`Failed to update lock date: ${s.message}`)}finally{A(!1)}}},g=n.find(s=>s.type===Q.EQUITY&&(s.code==="3020"||s.name.toLowerCase().includes("retained earnings"))),p=a.useMemo(()=>g?$.generatePeriodClosingEntry(`${d}-01-01`,`${d}-12-31`,n,x,g.id):null,[d,n,x,g]),ie=async()=>{if(p){B(!0);try{await c(p);const s=`${d}-12-31`;await m({...l,lockDate:s}),i.success(`Fiscal Year ${d} closed successfully. Period locked through ${s}.`),E(!1),H(s)}catch{i.error("Failed to close fiscal year.")}finally{B(!1)}}},ce=async()=>{if(!L)return;const s=l.lockDate;U(!0);try{await m({...l,lockDate:void 0}),await c(L),await m({...l,lockDate:s}),i.success("Adjustment posted successfully. Period has been re-locked."),N("MONTH_END")}catch(t){i.error(`Error during adjustment process: ${t.message}. Check if period is locked.`);try{await m({...l,lockDate:s})}catch{}}finally{U(!1),F(null)}},de=async s=>{const t=l.lockDate;if(t&&s.date<=t){F(s);return}else await c(s),i.success("Transaction posted successfully."),N("MONTH_END")};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex space-x-1 bg-white p-1 rounded-xl shadow-sm border border-gray-100 max-w-fit",children:[e.jsx("button",{onClick:()=>N("MONTH_END"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${b==="MONTH_END"?"bg-indigo-50 text-indigo-700":"text-gray-600 hover:bg-gray-50"}`,children:"Month-End Closing"}),e.jsx("button",{onClick:()=>N("YEAR_END"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${b==="YEAR_END"?"bg-indigo-50 text-indigo-700":"text-gray-600 hover:bg-gray-50"}`,children:"Year-End Closing"}),e.jsx("button",{onClick:()=>N("ADJUSTMENTS"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${b==="ADJUSTMENTS"?"bg-indigo-50 text-indigo-700":"text-gray-600 hover:bg-gray-50"}`,children:"Adjustments"})]}),b==="MONTH_END"&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(T,{title:"1. Closing Configuration",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-4",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),e.jsx("div",{className:"ml-3",children:e.jsxs("p",{className:"text-sm text-yellow-700",children:["Current Lock Date: ",e.jsx("strong",{children:l.lockDate||"None"})]})})]})}),e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Close Books Through"}),e.jsx("input",{type:"date",className:"block w-full px-3 py-2 border border-gray-300 rounded-xl shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",value:h,onChange:s=>H(s.target.value)}),e.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"All transactions on or before this date will become read-only."})]}),e.jsxs("div",{className:"space-y-4 border-t border-gray-100 pt-4",children:[e.jsxs("label",{className:"flex items-center space-x-3 p-2 hover:bg-gray-50 rounded-lg cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded",checked:z,onChange:s=>Z(s.target.checked)}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-700 font-medium block",children:"Run Monthly Depreciation"}),e.jsx("span",{className:"text-xs text-gray-500",children:"Calculates and posts depreciation for all active assets."})]})]}),e.jsxs("label",{className:"flex items-center space-x-3 p-2 hover:bg-gray-50 rounded-lg cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded",checked:Y,onChange:s=>q(s.target.checked)}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-700 font-medium block",children:"Generate P&L Closing Entry"}),e.jsx("span",{className:"text-xs text-gray-500",children:"Zeros out Revenue/Expenses to Retained Earnings."})]})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(T,{title:"2. System Health & Validation",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:`p-4 rounded-lg border ${y?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0 mt-0.5",children:y?e.jsx("svg",{className:"h-5 w-5 text-green-500",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}):e.jsx("svg",{className:"h-5 w-5 text-red-500",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),e.jsxs("div",{className:"ml-3 w-full",children:[e.jsx("h3",{className:`text-sm font-bold ${y?"text-green-800":"text-red-800"}`,children:y?"Ledger Integrity: Passed":"Ledger Integrity: Errors Found"}),!y&&e.jsxs("ul",{className:"mt-2 list-disc list-inside text-xs text-red-700 space-y-1",children:[R.slice(0,5).map((s,t)=>e.jsx("li",{children:s.message},t)),R.length>5&&e.jsxs("li",{children:["...and ",R.length-5," more errors."]})]})]})]})}),V.length>0?e.jsxs("div",{className:"bg-orange-50 border border-orange-200 p-4 rounded-lg",children:[e.jsxs("h4",{className:"text-sm font-bold text-orange-800 flex items-center",children:[e.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),"Data Quality Warnings"]}),e.jsx("ul",{className:"mt-2 space-y-3 text-xs text-orange-700",children:V.map((s,t)=>{var r;return e.jsx("li",{className:"pb-4 border-b border-orange-200 last:border-0",children:e.jsx("div",{className:"flex flex-col md:flex-row justify-between items-start gap-4",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold",children:s.message}),s.type==="DUPLICATE_COA"&&e.jsxs("div",{className:"mt-1",children:[e.jsx("p",{className:"text-orange-600/80 mb-2",children:"Review the accounts below. Keep the one that is correct/used."}),((r=s.meta)==null?void 0:r.accounts)&&C&&e.jsx("div",{className:"w-full flex flex-col space-y-2",children:s.meta.accounts.map(o=>{const K=le(o.id);return e.jsxs("div",{className:"flex items-center justify-between p-2 bg-white/60 rounded border border-orange-200/50",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-xs font-bold text-gray-800",children:o.name}),e.jsxs("span",{className:"text-[10px] font-mono text-gray-500",children:["...",o.id.slice(-6)]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[K?e.jsx("span",{className:"text-[10px] bg-red-100 text-red-700 px-2 py-0.5 rounded font-medium",children:"Used"}):e.jsx("span",{className:"text-[10px] bg-green-100 text-green-700 px-2 py-0.5 rounded font-medium",children:"Unused"}),e.jsx("button",{type:"button",onClick:oe=>{oe.stopPropagation(),re(o.id)},disabled:!!P,className:`text-xs px-2 py-1 rounded border transition-colors ${K?"bg-white border-red-200 text-red-600 hover:bg-red-50":"bg-white border-gray-300 text-gray-600 hover:bg-gray-50 hover:text-red-600"}`,children:P===o.id?"...":"Delete"})]})]},o.id)})})]})]})})},t)})}),e.jsx("p",{className:"text-xs text-orange-600 mt-4 font-medium",children:"Review these items before closing the period."})]}):e.jsxs("div",{className:"text-xs text-gray-500 flex items-center pl-1",children:[e.jsx("svg",{className:"w-4 h-4 text-green-500 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),"No unposted documents or duplicate accounts found."]})]})}),e.jsxs(T,{title:"3. Pre-Closing Checklist",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-start space-x-3 text-sm text-gray-700 cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"mt-1 h-4 w-4 text-indigo-600 rounded border-gray-300",checked:u.bankRec,onChange:s=>D({...u,bankRec:s.target.checked})}),e.jsx("span",{children:"Bank accounts reconciled with actual statements."})]}),e.jsxs("label",{className:"flex items-start space-x-3 text-sm text-gray-700 cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"mt-1 h-4 w-4 text-indigo-600 rounded border-gray-300",checked:u.inventory,onChange:s=>D({...u,inventory:s.target.checked})}),e.jsx("span",{children:"Physical inventory count matched with system (if applicable)."})]}),e.jsxs("label",{className:"flex items-start space-x-3 text-sm text-gray-700 cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"mt-1 h-4 w-4 text-indigo-600 rounded border-gray-300",checked:u.depreciationReview,onChange:s=>D({...u,depreciationReview:s.target.checked})}),e.jsx("span",{children:"Fixed assets reviewed for additions/disposals."})]}),e.jsxs("label",{className:"flex items-start space-x-3 text-sm text-gray-700 cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"mt-1 h-4 w-4 text-indigo-600 rounded border-gray-300",checked:u.draftReview,onChange:s=>D({...u,draftReview:s.target.checked})}),e.jsx("span",{children:"Draft invoices/bills reviewed or deleted."})]})]}),e.jsx("div",{className:"mt-6 pt-4 border-t border-gray-100",children:e.jsx(j,{onClick:ne,isLoading:X,disabled:!J,className:"w-full",children:y?G?h?"Run Processes & Lock Period":"Select Date to Proceed":"Complete Checklist to Proceed":"Fix Ledger Errors to Proceed"})})]})]})]}),b==="YEAR_END"&&e.jsx("div",{className:"space-y-6",children:e.jsxs(T,{title:"Fiscal Year Closing",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-6",children:"This process will generate a closing journal entry to zero out all Revenue and Expense accounts for the selected year and transfer the Net Income/Loss to Retained Earnings. Finally, it will lock the period through the end of the year."}),!g&&e.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg text-sm mb-6",children:[e.jsx("strong",{children:"Error:"}),' Could not find a "Retained Earnings" account (Type: Equity, Code: 3020). Please add this account in Settings before closing the year.']}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Fiscal Year"}),e.jsx("select",{className:"block w-full px-3 py-2 border border-gray-300 rounded-xl shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",value:d,onChange:s=>{ee(parseInt(s.target.value)),E(!1)},children:Array.from({length:5},(s,t)=>new Date().getFullYear()-t).map(s=>e.jsx("option",{value:s,children:s},s))})]})}),e.jsxs("div",{className:"bg-gray-50 p-6 rounded-xl border border-gray-200",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:["Preview Closing Entry (",d,")"]}),p?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Date:"}),e.jsx("span",{className:"font-medium",children:p.date})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Description:"}),e.jsx("span",{className:"font-medium",children:p.description})]}),e.jsx("div",{className:"border rounded-lg bg-white overflow-hidden mt-4",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 text-sm",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left",children:"Account"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Debit"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Credit"})]})}),e.jsxs("tbody",{className:"divide-y divide-gray-200",children:[p.lines.map((s,t)=>{const r=n.find(o=>o.id===s.accountId);return e.jsxs("tr",{children:[e.jsxs("td",{className:"px-4 py-2 text-gray-700",children:[r?`${r.code} - ${r.name}`:s.accountId,(r==null?void 0:r.id)===(g==null?void 0:g.id)&&e.jsx("span",{className:"ml-2 text-xs bg-green-100 text-green-800 px-1.5 rounded",children:"Retained Earnings"})]}),e.jsx("td",{className:"px-4 py-2 text-right text-gray-600",children:s.debit>0?s.debit.toLocaleString("en-US",{minimumFractionDigits:2}):"-"}),e.jsx("td",{className:"px-4 py-2 text-right text-gray-600",children:s.credit>0?s.credit.toLocaleString("en-US",{minimumFractionDigits:2}):"-"})]},t)}),e.jsxs("tr",{className:"bg-gray-50 font-bold",children:[e.jsx("td",{className:"px-4 py-2",children:"Total"}),e.jsx("td",{className:"px-4 py-2 text-right",children:p.lines.reduce((s,t)=>s+t.debit,0).toLocaleString("en-US",{minimumFractionDigits:2})}),e.jsx("td",{className:"px-4 py-2 text-right",children:p.lines.reduce((s,t)=>s+t.credit,0).toLocaleString("en-US",{minimumFractionDigits:2})})]})]})]})}),te?e.jsxs("div",{className:"mt-6 bg-red-50 p-4 rounded-xl border border-red-200",children:[e.jsx("h4",{className:"text-red-800 font-bold mb-2",children:"Confirm Year-End Closing"}),e.jsxs("p",{className:"text-sm text-red-700 mb-4",children:["This action will post the journal entry above and ",e.jsx("strong",{children:"LOCK"})," the system through ",d,"-12-31. This cannot be easily undone."]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx(j,{variant:"danger",onClick:ie,isLoading:se,children:"Confirm & Close Books"}),e.jsx(j,{variant:"outline",onClick:()=>E(!1),children:"Cancel"})]})]}):e.jsx("div",{className:"mt-6 flex justify-end",children:e.jsxs(j,{onClick:()=>E(!0),disabled:!g,children:["Close Fiscal Year ",d]})})]}):e.jsxs("div",{className:"text-center py-8 text-gray-500",children:["No income statement activity found for ",d,"."]})]})]})}),b==="ADJUSTMENTS"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-orange-50 border-l-4 border-orange-400 p-4",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-orange-400",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm text-orange-700 font-bold",children:"Post-Closing Adjustment Mode"}),e.jsxs("p",{className:"text-sm text-orange-700 mt-1",children:["This tool allows you to fix forgotten transactions from a closed period. Submitting this form will ",e.jsx("strong",{children:"automatically unlock"})," the period, post the entry, and ",e.jsx("strong",{children:"re-lock"})," the period immediately."]})]})]})}),e.jsx("div",{className:"border border-gray-200 rounded-2xl bg-white p-1",children:O?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Processing Adjustment (Unlock → Post → Relock)..."})]}):e.jsx(me,{accounts:n,branches:S,currencies:M,onSubmit:de,onCancel:()=>N("MONTH_END")})})]}),f&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-gray-900 bg-opacity-50 backdrop-blur-sm p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-sm p-6 animate-fade-in-up",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"bg-red-100 p-3 rounded-full",children:e.jsx("svg",{className:"w-8 h-8 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})}),e.jsx("h3",{className:"text-lg font-bold text-gray-900 text-center mb-2",children:"Delete Duplicate Account?"}),f.usageCount>0?e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 mb-4 text-left",children:[e.jsx("p",{className:"text-xs font-bold text-red-800 mb-1",children:"CRITICAL WARNING:"}),e.jsxs("p",{className:"text-xs text-red-700",children:["This account is used in ",e.jsxs("strong",{children:[f.usageCount," transactions"]}),". Deleting it will create orphaned records and cause Health Check failures."]})]}):e.jsx("p",{className:"text-center text-gray-600 mb-6 text-sm",children:"Are you sure you want to delete this unused duplicate account? This cannot be undone."}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx(j,{variant:"outline",onClick:()=>I(null),className:"w-full justify-center",children:"Cancel"}),e.jsx(j,{variant:"danger",onClick:ae,className:"w-full justify-center bg-red-600 hover:bg-red-700 text-white",isLoading:!!P,children:f.usageCount>0?"Force Delete":"Confirm Delete"})]})]})}),L&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-gray-900 bg-opacity-50 backdrop-blur-sm p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-lg p-6 animate-fade-in-up",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"bg-yellow-100 p-3 rounded-full",children:e.jsx("svg",{className:"w-8 h-8 text-yellow-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})})}),e.jsx("h3",{className:"text-lg font-bold text-gray-900 text-center mb-2",children:"Post to Closed Period?"}),e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6",children:[e.jsxs("p",{className:"text-sm text-yellow-800 mb-2",children:[e.jsx("strong",{children:"WARNING:"})," The transaction date (",L.date,") is within a ",e.jsx("strong",{children:"LOCKED"})," period (Locked until ",l.lockDate,")."]}),e.jsx("p",{className:"text-xs text-yellow-700",children:"Proceeding will temporarily unlock the period, post this adjustment, and immediately re-lock it."})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx(j,{variant:"outline",onClick:()=>F(null),className:"w-full justify-center",children:"Cancel"}),e.jsx(j,{onClick:ce,className:"w-full justify-center bg-yellow-600 hover:bg-yellow-700 text-white",isLoading:O,children:"Unlock & Post"})]})]})})]})};function we(){const{settings:l,accounts:n,transactions:x,branches:S,currencies:M,invoices:w,bills:k,refreshData:m}=xe();return e.jsx(he,{settings:l,accounts:n,transactions:x,branches:S,currencies:M,invoices:w,bills:k,onUpdateSettings:async c=>{await v.updateSettings(c),await m()},onPostClosingEntry:async c=>{await v.addTransaction(c),await m()},onDeleteAccount:async c=>{await v.deleteAccount(c),await m()}})}export{we as default};
