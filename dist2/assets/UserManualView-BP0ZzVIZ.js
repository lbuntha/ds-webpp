import{r as i,j as e,f as y}from"./index-BjK2osQV.js";import{C as n}from"./Card-DROeE3UG.js";const f=[{id:"intro",label:"1. Introduction",allowedRoles:["ALL"]},{id:"config",label:"2. System Configuration",allowedRoles:["system-admin"]},{id:"financials",label:"3. Financial Management",allowedRoles:["system-admin","accountant","finance-manager"]},{id:"logistics",label:"4. Parcel Logistics",allowedRoles:["system-admin","warehouse","customer"]},{id:"driver",label:"5. Driver Operations",allowedRoles:["system-admin","driver","warehouse"]},{id:"wallet",label:"6. Wallet & Settlements",allowedRoles:["ALL"]},{id:"accounting_flow",label:"7. Accounting Logic",allowedRoles:["system-admin","accountant"]},{id:"closing",label:"8. Period Closing",allowedRoles:["system-admin","accountant"]}],v=()=>{const[x,m]=i.useState("intro"),[o,u]=i.useState(null),[g,j]=i.useState(!0);i.useEffect(()=>{(async()=>{try{const t=await y.getCurrentUser();t&&u(t.role)}catch(t){console.error("Failed to load user role for manual",t)}finally{j(!1)}})()},[]);const h=i.useMemo(()=>o?f.filter(s=>s.allowedRoles.includes("ALL")||s.allowedRoles.includes(o)):[],[o]),b=s=>{m(s);const t=document.getElementById(s);t&&t.scrollIntoView({behavior:"smooth"})},l=({children:s})=>e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-6 pb-3 border-b border-gray-200",children:s}),c=({children:s})=>e.jsxs("h4",{className:"text-lg font-bold text-indigo-700 mt-8 mb-3 flex items-center",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 011.414 0l4-4z",clipRule:"evenodd"})}),s]}),r=({children:s})=>e.jsx("p",{className:"text-gray-600 mb-4 leading-relaxed text-sm",children:s}),d=({children:s})=>e.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-500 p-4 mb-6 rounded-r-lg",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-blue-500",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),e.jsx("div",{className:"ml-3 text-sm text-blue-700",children:s})]})}),p=({title:s,children:t})=>e.jsxs("div",{className:"bg-gray-50 border border-gray-300 rounded-lg p-4 my-4 shadow-sm",children:[e.jsxs("h5",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider mb-3 border-b border-gray-200 pb-2",children:["Entry: ",s]}),e.jsx("div",{className:"text-sm text-gray-800 space-y-2 font-mono",children:t})]});if(g)return e.jsx("div",{className:"p-8 text-center text-gray-500",children:"Loading manual..."});const a=s=>h.some(t=>t.id===s);return e.jsxs("div",{className:"flex flex-col lg:flex-row gap-8 h-full",children:[e.jsx("div",{className:"lg:w-72 flex-shrink-0",children:e.jsxs(n,{className:"sticky top-6 border-none shadow-lg bg-white/80 backdrop-blur-md",children:[e.jsxs("h4",{className:"font-bold text-gray-900 mb-4 px-2 text-lg",children:["User Manual ",e.jsxs("span",{className:"text-xs font-normal text-gray-500 block",children:["for ",o]})]}),e.jsx("nav",{className:"space-y-1",children:h.map(s=>e.jsx("button",{onClick:()=>b(s.id),className:`w-full text-left px-4 py-3 rounded-xl text-sm font-medium transition-all duration-200 ${x===s.id?"bg-indigo-50 text-indigo-700 shadow-sm translate-x-1":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"}`,children:s.label},s.id))})]})}),e.jsxs("div",{className:"flex-1 space-y-12 pb-24 max-w-4xl",children:[a("intro")&&e.jsx("section",{id:"intro",className:"scroll-mt-24",children:e.jsxs(n,{children:[e.jsx(l,{children:"1. Introduction"}),e.jsx(r,{children:"Welcome to Doorstep, a comprehensive logistics and accounting operating system. This platform unifies parcel booking, fleet management, and financial reporting into a single real-time dashboard."}),e.jsx(r,{children:"Unlike traditional systems where logistics and accounting are separate, Doorstep automates the creation of journal entries based on operational activities like deliveries, driver settlements, and customer payouts."})]})}),a("config")&&e.jsx("section",{id:"config",className:"scroll-mt-24",children:e.jsxs(n,{children:[e.jsx(l,{children:"2. System Configuration"}),e.jsxs(r,{children:["Before starting operations, ensure the system is correctly mapped in ",e.jsx("strong",{children:"Settings"}),"."]}),e.jsxs("ul",{className:"list-disc pl-5 space-y-2 text-sm text-gray-600 mb-4",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Chart of Accounts:"}),' Ensure you have created Asset accounts for Cash/Bank and Liability accounts for "Customer Wallet" and "Driver Wallet".']}),e.jsxs("li",{children:[e.jsx("strong",{children:"Commissions:"})," Configure driver commission rules (Percentage or Fixed) per Zone in the Logistics Settings."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"General Settings:"})," Map the default settlement bank accounts for USD and KHR transactions. This controls where cash is deposited when drivers settle."]})]}),e.jsxs(d,{children:["Go to ",e.jsx("strong",{children:"Settings > General"}),' to link your "Customer Wallet" and "Driver Wallet" Liability accounts. This is crucial for the Wallet Dashboard to function.']})]})}),a("financials")&&e.jsx("section",{id:"financials",className:"scroll-mt-24",children:e.jsxs(n,{children:[e.jsx(l,{children:"3. Financial Management"}),e.jsx(r,{children:"The system handles standard accounting functions including:"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg border border-gray-200",children:[e.jsx("h5",{className:"font-bold text-gray-900 mb-1",children:"Receivables"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Create invoices for corporate clients, track aging, and record payments."})]}),e.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg border border-gray-200",children:[e.jsx("h5",{className:"font-bold text-gray-900 mb-1",children:"Payables"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Manage vendor bills and record expenses like fuel, rent, or maintenance."})]}),e.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg border border-gray-200",children:[e.jsx("h5",{className:"font-bold text-gray-900 mb-1",children:"Banking"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Transfer funds between accounts and monitor real-time cash positions in USD and KHR."})]}),e.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg border border-gray-200",children:[e.jsx("h5",{className:"font-bold text-gray-900 mb-1",children:"Fixed Assets"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Register vehicles and equipment. Run automated depreciation schedules."})]})]})]})}),a("logistics")&&e.jsx("section",{id:"logistics",className:"scroll-mt-24",children:e.jsxs(n,{children:[e.jsx(l,{children:"4. Parcel Logistics"}),e.jsx(c,{children:"Booking Lifecycle"}),e.jsxs(r,{children:["1. ",e.jsx("strong",{children:"Creation:"})," A booking is created via the Admin Panel or Customer App. Status: ",e.jsx("em",{children:"PENDING"}),".",e.jsx("br",{}),"2. ",e.jsx("strong",{children:"Dispatch:"})," The Dispatch Console allows admins to assign bookings to Drivers. Status updates to ",e.jsx("em",{children:"CONFIRMED"}),".",e.jsx("br",{}),"3. ",e.jsx("strong",{children:"Pickup:"})," Driver verifies items (weight/photos) and confirms pickup. Status: ",e.jsx("em",{children:"PICKED_UP"}),".",e.jsx("br",{}),"4. ",e.jsx("strong",{children:"Hub/Transit:"})," Items can be transferred to a Warehouse (Hub) or directly delivered.",e.jsx("br",{}),"5. ",e.jsx("strong",{children:"Delivery:"})," Driver marks item as delivered and collects COD. Status: ",e.jsx("em",{children:"DELIVERED"}),"."]}),e.jsxs(d,{children:["Admins can use the ",e.jsx("strong",{children:"Dispatch Console"})," to bulk assign new jobs or transfer items from Warehouse to Drivers."]})]})}),a("driver")&&e.jsx("section",{id:"driver",className:"scroll-mt-24",children:e.jsxs(n,{children:[e.jsx(l,{children:"5. Driver Operations"}),e.jsx(r,{children:"Drivers use a simplified interface to manage their tasks."}),e.jsxs("ul",{className:"list-disc pl-5 space-y-2 text-sm text-gray-600 mb-4",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"My Jobs:"})," Drivers accept new jobs and process pickups using the camera to verify parcels."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Delivery:"}),` On delivery, the driver collects Cash on Delivery (COD). This cash is tracked as "Floating Cash" in the driver's wallet.`]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Transfers:"})," Drivers can transfer items to a Branch (Warehouse) if they cannot deliver immediately."]})]}),e.jsxs(r,{children:['When a driver collects cash, they "owe" this amount to the company until they perform a ',e.jsx("strong",{children:"Settlement"}),"."]})]})}),a("wallet")&&e.jsx("section",{id:"wallet",className:"scroll-mt-24",children:e.jsxs(n,{children:[e.jsx(l,{children:"6. Wallet & Settlements"}),e.jsx(r,{children:"The unique feature of Doorstep is the unified Wallet system for Drivers and Customers."}),e.jsx(c,{children:"For Drivers (Settlement)"}),e.jsxs(r,{children:['Drivers accumulate cash (COD) and earn Commissions. They must periodically "Settle" with the company.',e.jsx("br",{}),"1. Driver goes to ",e.jsx("strong",{children:"Wallet > Request Settlement"}),".",e.jsx("br",{}),"2. System calculates Total COD held vs Commissions Earned.",e.jsx("br",{}),"3. Driver uploads proof of transfer (Bank Slip) for the net amount.",e.jsx("br",{}),"4. Finance approves the request in ",e.jsx("strong",{children:"Banking > Requests"}),"."]}),e.jsx(c,{children:"For Customers (Withdrawal)"}),e.jsxs(r,{children:["Customers accumulate credits from COD deliveries (after fees are deducted).",e.jsx("br",{}),"1. Customer requests a ",e.jsx("strong",{children:"Payout"})," via their app.",e.jsx("br",{}),"2. Finance team reviews and transfers funds to the customer's bank.",e.jsx("br",{}),"3. Request is marked Approved, debiting the customer's wallet liability."]})]})}),a("accounting_flow")&&e.jsx("section",{id:"accounting_flow",className:"scroll-mt-24",children:e.jsxs(n,{children:[e.jsx(l,{children:"7. Automated Accounting Logic"}),e.jsxs(r,{children:["When a ",e.jsx("strong",{children:"Driver Settlement"})," is approved, the system automatically creates a complex Journal Entry to balance all ledgers."]}),e.jsx(c,{children:"Scenario: Driver Settles $100 COD"}),e.jsxs("div",{className:"text-sm text-gray-600 mb-2",children:["Assumptions: COD Collected = $100. Service Fee = $10. Driver Commission = $7.",e.jsx("br",{}),"Driver sends $100 cash to company. (Company keeps $10 revenue, owes $90 to Customer).",e.jsx("br",{}),e.jsx("em",{children:"Note: In this system, we book the full cash in, then credit Revenue and Customer Liability separately."})]}),e.jsxs(p,{title:"Automated Journal Entry (Settlement Approval)",children:[e.jsxs("div",{className:"flex justify-between border-b border-gray-200 pb-1",children:[e.jsx("span",{children:"1010 - Company Bank (Asset)"}),e.jsx("span",{className:"font-bold text-green-600",children:"Debit: $100.00"}),e.jsx("span",{className:"text-xs text-gray-400",children:" (Cash In)"})]}),e.jsxs("div",{className:"flex justify-between pt-1 border-b border-gray-100 pb-1",children:[e.jsx("span",{children:"4000 - Service Revenue"}),e.jsx("span",{className:"font-bold text-red-600",children:"Credit: $10.00"}),e.jsx("span",{className:"text-xs text-gray-400",children:" (Fee Earned)"})]}),e.jsxs("div",{className:"flex justify-between pt-1 border-b border-gray-100 pb-1",children:[e.jsx("span",{children:"2100 - Customer Wallet (Liability)"}),e.jsx("span",{className:"font-bold text-red-600",children:"Credit: $90.00"}),e.jsx("span",{className:"text-xs text-gray-400",children:" (Net Owed to Customer)"})]}),e.jsxs("div",{className:"flex justify-between pt-1 border-b border-gray-100 pb-1",children:[e.jsx("span",{children:"5001 - Driver Commissions (Expense)"}),e.jsx("span",{className:"font-bold text-green-600",children:"Debit: $7.00"}),e.jsx("span",{className:"text-xs text-gray-400",children:" (Cost of Sales)"})]}),e.jsxs("div",{className:"flex justify-between pt-1",children:[e.jsx("span",{children:"2110 - Driver Wallet (Liability)"}),e.jsx("span",{className:"font-bold text-red-600",children:"Credit: $7.00"}),e.jsx("span",{className:"text-xs text-gray-400",children:" (Owed to Driver)"})]})]}),e.jsx(d,{children:"This single entry reconciles the Bank Account, recognizes Revenue, updates the Customer's withdrawable balance, and records the Driver's earnings simultaneously."})]})}),a("closing")&&e.jsx("section",{id:"closing",className:"scroll-mt-24",children:e.jsxs(n,{children:[e.jsx(l,{children:"8. Period Closing Procedures"}),e.jsx(r,{children:"Closing the books ensures that your financial reports (Income Statement and Balance Sheet) are finalized and accurate. Doorstep provides tools to automate Month-End and Year-End processes."}),e.jsxs("div",{className:"space-y-8 mt-6",children:[e.jsxs("div",{className:"bg-white border-l-4 border-indigo-500 pl-6 py-2",children:[e.jsx("h4",{className:"text-xl font-bold text-indigo-900 mb-4",children:"A. Month-End Closing"}),e.jsx(r,{children:"Perform these steps after the last day of the month to lock in your results."}),e.jsxs("ol",{className:"list-decimal pl-5 space-y-3 text-sm text-gray-700",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Reconcile Accounts:"}),e.jsx("br",{}),'Check that "Cash on Hand" and "Bank" balances in the ',e.jsx("em",{children:"Banking"})," dashboard match your actual physical cash and bank statements."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Process Fixed Assets:"}),e.jsx("br",{}),"Go to ",e.jsx("em",{children:"Closing Dashboard"}),'. Check "Run Monthly Depreciation". This will automatically calculate depreciation expenses for all active assets for the month.']}),e.jsxs("li",{children:[e.jsx("strong",{children:"Review Unposted Transactions:"}),e.jsx("br",{}),"The Health Check panel will alert you if there are unposted Draft Invoices or Bills. Finalize or delete them."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Generate Closing Entry (Optional):"}),e.jsx("br",{}),'If you want to zero out P&L accounts monthly (not required for standard SMEs, usually done yearly), check "Generate P&L Closing Entry".']}),e.jsxs("li",{children:[e.jsx("strong",{children:"Lock the Period:"}),e.jsx("br",{}),'Select the last day of the month (e.g., 31st Jan) in the "Close Books Through" field and click ',e.jsx("strong",{children:"Run Processes & Lock"}),".",e.jsx("br",{}),e.jsx("em",{children:"Effect: No users can add, edit, or delete transactions dated on or before this date."})]})]})]}),e.jsxs("div",{className:"bg-white border-l-4 border-purple-500 pl-6 py-2",children:[e.jsx("h4",{className:"text-xl font-bold text-purple-900 mb-4",children:"B. Year-End Closing"}),e.jsx(r,{children:"Perform these steps at the end of the Fiscal Year (e.g., Dec 31st). This resets your Income Statement for the new year."}),e.jsxs("ol",{className:"list-decimal pl-5 space-y-3 text-sm text-gray-700",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Complete Month-End:"})," Ensure December (or your final month) is closed and locked first."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Go to Year-End Tab:"})," Navigate to ",e.jsx("em",{children:"Period Closing > Year-End Closing"}),"."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Preview Closing Entry:"}),e.jsx("br",{}),"Select the Fiscal Year. The system will display a preview of the Journal Entry.",e.jsx("br",{}),"It will Debit all Revenue accounts and Credit all Expense accounts (or vice versa) to zero them out.",e.jsx("br",{}),"The difference (Net Profit/Loss) is booked to ",e.jsx("strong",{children:"Retained Earnings (Equity)"}),"."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Confirm Closing:"}),e.jsx("br",{}),'Click "Close Fiscal Year". The system will post the entry and extend the Lock Date to Dec 31st of that year.']})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[e.jsxs("h5",{className:"font-bold text-gray-800 mb-2 flex items-center",children:[e.jsx("svg",{className:"w-5 h-5 mr-2 text-orange-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),"Troubleshooting & Corrections"]}),e.jsxs("ul",{className:"list-disc pl-5 space-y-1 text-xs text-gray-600",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Health Check Errors:"}),' If the closing dashboard shows "Unbalanced Journal" errors, you cannot close. Go to the Journal list and locate the transaction ID to fix it.']}),e.jsxs("li",{children:[e.jsx("strong",{children:"Making Corrections after Closing:"})," If you find a mistake in a locked period:",e.jsx("br",{}),"1. Go to the ",e.jsx("strong",{children:"Adjustments"})," tab in Period Closing.",e.jsx("br",{}),"2. Enter the corrective journal entry.",e.jsx("br",{}),"3. Submitting this form will temporarily unlock the period for 1 second, post the entry, and immediately re-lock it."]})]})]})]})]})})]})]})};function C(){return e.jsx(v,{})}export{C as default};
