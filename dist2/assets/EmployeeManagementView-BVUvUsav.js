import{r as t,j as e,h as me,f as H}from"./index-BjK2osQV.js";import{M as he}from"./Modal-B63ndL_a.js";import{B as u}from"./Button-JCYNVMjR.js";import{I as s}from"./Input-B96Hj4QL.js";import{A as ue}from"./Avatar-BzcIcvYu.js";import{t as O}from"./toast-DTXa3ATd.js";const pe=({employees:l,onAddEmployee:i,onUpdateEmployee:r,onDeleteEmployee:se})=>{const[P,d]=t.useState(!1),[n,W]=t.useState(null),[p,g]=t.useState(""),[z,b]=t.useState(""),[U,y]=t.useState(""),[K,v]=t.useState(""),[q,f]=t.useState(""),[re,V]=t.useState(!1),[c,j]=t.useState(!1),[Y,N]=t.useState(0),[k,m]=t.useState("USD"),[le,w]=t.useState(""),[_,S]=t.useState("MONTHLY"),[J,C]=t.useState("BANK_TRANSFER"),[$,D]=t.useState(""),[G,A]=t.useState(""),[E,M]=t.useState(""),[Q,L]=t.useState(""),[X,B]=t.useState("RESIDENT"),[Z,T]=t.useState(0),[ee,R]=t.useState(""),[o,h]=t.useState(null),[ne,ae]=t.useState(!1),I=()=>{W(null),g(""),b(""),y(""),v(""),f(""),V(!1),j(!1),N(0),m("USD"),w(""),S("MONTHLY"),C("BANK_TRANSFER"),D(""),A(""),M(""),L(""),B("RESIDENT"),T(0),R("")},oe=()=>{I(),d(!0)},ie=a=>{W(a.id),g(a.name),b(a.email||""),y(a.phone||""),v(a.position||""),f(a.department||""),V(a.isDriver||!1),j(a.hasBaseSalary||!1),N(a.baseSalaryAmount||0),m(a.baseSalaryCurrency||"USD"),w(a.bankAccount||""),S(a.paymentFrequency||"MONTHLY"),C(a.paymentMethod||"BANK_TRANSFER"),D(a.bankName||""),A(a.bankAccountName||""),M(a.bankAccountNumber||a.bankAccount||""),L(a.taxId||""),B(a.taxStatus||"RESIDENT"),T(a.numberOfDependents||0),R(a.employeeCode||""),d(!0)},de=async a=>{var te;if(a.preventDefault(),!p)return;ae(!0);const x={id:n||`emp-${Date.now()}`,name:p,email:z,phone:U,position:K,department:q,isDriver:re,hasBaseSalary:c,baseSalaryAmount:c?Y:void 0,baseSalaryCurrency:c?k:void 0,bankAccount:E,paymentFrequency:_,paymentMethod:J,bankName:$,bankAccountName:G,bankAccountNumber:E,taxId:Q,taxStatus:X,numberOfDependents:Z,employeeCode:ee,createdAt:n&&((te=l.find(F=>F.id===n))==null?void 0:te.createdAt)||Date.now()};try{n?await r(x):await i(x),d(!1),I()}catch(F){console.error("Failed to save employee",F),O.error("Failed to save employee record")}finally{ae(!1)}},ce=(a,x)=>{h({id:a,name:x})},xe=async()=>{if(o)try{await se(o.id),O.success("Employee deleted successfully")}catch(a){console.error("Failed to delete",a),O.error("Failed to delete employee")}finally{h(null)}};return e.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-extrabold text-gray-900 tracking-tight",children:"Staff Management"}),e.jsx("p",{className:"text-gray-500 font-medium",children:"Manage your team members, organizational roles, and driver payroll."})]}),!P&&e.jsxs(u,{onClick:oe,className:"bg-indigo-600 hover:bg-indigo-700 text-white shadow-xl shadow-indigo-100 px-6 py-2.5 rounded-2xl flex items-center gap-2 transform active:scale-95 transition-all",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add New Member"]})]}),P&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-gray-900/50 backdrop-blur-sm p-4 animate-in fade-in duration-200",children:e.jsx("div",{className:"bg-white rounded-[2rem] shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto animate-in zoom-in-95 slide-in-from-bottom-4 duration-300",children:e.jsx("form",{onSubmit:de,className:"p-2",children:e.jsxs("div",{className:"bg-gray-50/50 p-6 rounded-[1.5rem] border border-gray-100",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:n?"Edit Employee Profile":"Create New Employee"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Fill in the professional details for your team member."})]}),e.jsx("button",{type:"button",onClick:()=>d(!1),className:"p-2 hover:bg-white rounded-full text-gray-400 hover:text-gray-600 transition-colors shadow-sm",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-6",children:[e.jsxs("div",{className:"md:col-span-2 grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx("div",{className:"md:col-span-2",children:e.jsx(s,{label:"Full Name",value:p,onChange:a=>g(a.target.value),required:!0,placeholder:"e.g. John Doe",className:"text-lg font-bold py-3 px-4"})}),e.jsx(s,{label:"Employee Code",value:ee,onChange:a=>R(a.target.value),placeholder:"e.g. EMP001, DS004",className:"font-mono"})]}),e.jsx(s,{label:"Email Address",type:"email",value:z,onChange:a=>b(a.target.value),placeholder:"john@example.com"}),e.jsx(s,{label:"Phone Number",value:U,onChange:a=>y(a.target.value),placeholder:"+855 ..."}),e.jsx(s,{label:"Job Title / Position",value:K,onChange:a=>v(a.target.value),placeholder:"e.g. Driver, Manager"}),e.jsx(s,{label:"Department",value:q,onChange:a=>f(a.target.value),placeholder:"e.g. Logistics, Operations"}),e.jsx("div",{className:"md:col-span-2",children:e.jsx(s,{label:"Bank Account Information",value:le,onChange:a=>w(a.target.value),placeholder:"e.g. ABA: 000 000 000"})})]}),e.jsxs("div",{className:"md:col-span-2 space-y-6 mt-6",children:[e.jsx("h4",{className:"text-lg font-bold text-gray-900 border-b border-gray-100 pb-2",children:"Payroll & Tax Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-xl border border-gray-100 space-y-4",children:[e.jsxs("label",{className:"font-bold text-gray-700 flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:c,onChange:a=>j(a.target.checked),className:"rounded text-indigo-600"}),"Enable Base Salary"]}),c&&e.jsxs("div",{className:"space-y-3 pl-6 border-l-2 border-indigo-100 ml-1",children:[e.jsx(s,{label:"Amount",type:"number",step:"0.01",value:Y,onChange:a=>N(parseFloat(a.target.value))}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Currency"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"button",onClick:()=>m("USD"),className:`px-3 py-1 rounded-lg text-xs font-bold ${k==="USD"?"bg-indigo-600 text-white":"bg-white border"}`,children:"USD"}),e.jsx("button",{type:"button",onClick:()=>m("KHR"),className:`px-3 py-1 rounded-lg text-xs font-bold ${k==="KHR"?"bg-indigo-600 text-white":"bg-white border"}`,children:"KHR"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Payment Frequency"}),e.jsxs("select",{value:_,onChange:a=>S(a.target.value),className:"w-full text-sm border-gray-300 rounded-lg",children:[e.jsx("option",{value:"MONTHLY",children:"Monthly"}),e.jsx("option",{value:"WEEKLY",children:"Weekly"})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(s,{label:"Bank Name",value:$,onChange:a=>D(a.target.value),placeholder:"e.g. ABA Bank"}),e.jsx(s,{label:"Account Name",value:G,onChange:a=>A(a.target.value),placeholder:"e.g. JOHN DOE"}),e.jsx(s,{label:"Account Number",value:E,onChange:a=>M(a.target.value),placeholder:"000 111 222"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Payment Method"}),e.jsxs("select",{value:J,onChange:a=>C(a.target.value),className:"w-full text-sm border-gray-300 rounded-lg",children:[e.jsx("option",{value:"BANK_TRANSFER",children:"Bank Transfer"}),e.jsx("option",{value:"CASH",children:"Cash"})]})]})]}),e.jsxs("div",{className:"md:col-span-2 grid grid-cols-1 md:grid-cols-3 gap-4 bg-gray-50 p-4 rounded-xl border border-gray-100",children:[e.jsx(s,{label:"Tax ID (TIN)",value:Q,onChange:a=>L(a.target.value),placeholder:"Likely N/A for most"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Tax Status"}),e.jsxs("select",{value:X,onChange:a=>B(a.target.value),className:"w-full text-sm border-gray-300 rounded-lg",children:[e.jsx("option",{value:"RESIDENT",children:"Resident"}),e.jsx("option",{value:"NON_RESIDENT",children:"Non-Resident"})]})]}),e.jsx(s,{label:"No. of Dependents",type:"number",value:Z,onChange:a=>T(parseInt(a.target.value)||0)})]})]})]}),e.jsxs("div",{className:"flex justify-end items-center gap-3 mt-10 pt-6 border-t border-gray-100",children:[e.jsx("button",{type:"button",onClick:()=>d(!1),className:"px-6 py-2.5 text-sm font-bold text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-xl transition-all",children:"Discard"}),e.jsxs("button",{type:"button",onClick:I,className:"px-6 py-2.5 text-sm font-bold text-indigo-600 hover:text-indigo-800 hover:bg-indigo-50 rounded-xl transition-all flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Reset"]}),e.jsxs(u,{type:"submit",isLoading:ne,className:"bg-gray-900 hover:bg-black text-white px-8 py-2.5 rounded-xl shadow-xl transition-all flex items-center gap-2",children:[n?"Update Profile":"Create Staff Record",e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})]})]})]})})})}),e.jsxs("div",{className:"bg-white rounded-[2rem] shadow-sm border border-gray-100 overflow-hidden",children:[e.jsxs("div",{className:"px-8 py-6 border-b border-gray-50 bg-gray-50/30 flex justify-between items-center",children:[e.jsx("h3",{className:"font-bold text-gray-900",children:"Active Staff Members"}),e.jsxs("span",{className:"px-3 py-1 bg-white border border-gray-200 rounded-full text-xs font-bold text-gray-500 shadow-sm",children:[l.length," Total"]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-white",children:[e.jsx("th",{className:"px-8 py-4 text-left text-[10px] font-black text-gray-400 uppercase tracking-[0.1em]",children:"Staff Information"}),e.jsx("th",{className:"px-8 py-4 text-left text-[10px] font-black text-gray-400 uppercase tracking-[0.1em]",children:"Role & Department"}),e.jsx("th",{className:"px-8 py-4 text-left text-[10px] font-black text-gray-400 uppercase tracking-[0.1em]",children:"Contact Details"}),e.jsx("th",{className:"px-8 py-4 text-right text-[10px] font-black text-gray-400 uppercase tracking-[0.1em]",children:"Actions"})]})}),e.jsxs("tbody",{className:"divide-y divide-gray-50",children:[l.map((a,x)=>e.jsxs("tr",{className:"group hover:bg-indigo-50/30 transition-all duration-300",children:[e.jsx("td",{className:"px-8 py-5",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(ue,{name:a.name,size:"md",className:"rounded-2xl shadow-sm border-2 border-white group-hover:scale-110 transition-transform duration-300"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-bold text-gray-900 group-hover:text-indigo-600 transition-colors uppercase tracking-tight",children:a.name}),e.jsxs("div",{className:"text-[10px] font-bold text-gray-400 mt-0.5 tracking-wider uppercase",children:["ID: ",a.id.substring(0,8)]})]})]})}),e.jsx("td",{className:"px-8 py-5",children:e.jsxs("div",{className:"flex flex-col gap-1.5",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"px-2.5 py-1 bg-white border border-gray-200 rounded-lg text-[10px] font-bold text-gray-700 shadow-sm uppercase tracking-wide",children:a.position||"Staff"}),a.isDriver&&e.jsx("span",{className:"px-2.5 py-1 bg-indigo-600 text-white rounded-lg text-[10px] font-black shadow-lg shadow-indigo-100 uppercase tracking-wide",children:"Driver"})]}),e.jsx("span",{className:"text-xs font-semibold text-gray-400 ml-1",children:a.department||"Unassigned Dept"})]})}),e.jsx("td",{className:"px-8 py-5",children:e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 font-medium",children:[e.jsx("svg",{className:"w-3.5 h-3.5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),a.email||"No Email"]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 font-medium",children:[e.jsx("svg",{className:"w-3.5 h-3.5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),a.phone||"No Phone"]})]})}),e.jsxs("td",{className:"px-8 py-5 text-right",children:[e.jsxs("button",{onClick:()=>ie(a),className:"inline-flex items-center gap-2 px-4 py-2 bg-white border border-gray-100 rounded-xl text-xs font-bold text-gray-900 shadow-sm hover:shadow-md hover:border-indigo-100 hover:text-indigo-600 transition-all active:scale-90",children:[e.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Edit"]}),e.jsxs("button",{onClick:()=>ce(a.id,a.name),className:"inline-flex items-center gap-2 px-4 py-2 bg-white border border-red-100 rounded-xl text-xs font-bold text-red-600 shadow-sm hover:shadow-md hover:border-red-200 hover:bg-red-50 transition-all active:scale-90",children:[e.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete"]})]})]},a.id)),l.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:4,className:"px-8 py-20 text-center",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"w-20 h-20 bg-gray-50 rounded-full flex items-center justify-center mb-4 border-2 border-dashed border-gray-200",children:e.jsx("svg",{className:"w-10 h-10 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),e.jsx("p",{className:"text-gray-400 font-bold uppercase tracking-widest text-xs",children:"No Staff Members Found"}),e.jsx("p",{className:"text-gray-300 text-sm mt-1",children:"Start by adding your first team member."})]})})})]})]})}),e.jsx(he,{isOpen:!!o,onClose:()=>h(null),title:"Confirm Deletion",maxWidth:"max-w-md",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("p",{className:"text-gray-600",children:["Are you sure you want to delete ",e.jsx("span",{className:"font-bold text-gray-900",children:o==null?void 0:o.name}),"? This action cannot be undone."]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[e.jsx(u,{onClick:()=>h(null),className:"bg-white border border-gray-300 text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx(u,{onClick:xe,className:"bg-red-600 hover:bg-red-700 text-white shadow-lg shadow-red-100",children:"Delete Employee"})]})]})})]})]})};function Ne(){const{employees:l,refreshData:i}=me();return e.jsx("div",{className:"p-6",children:e.jsx(pe,{employees:l,onAddEmployee:async r=>{await H.addEmployee(r),await i()},onUpdateEmployee:async r=>{await H.updateEmployee(r),await i()},onDeleteEmployee:async r=>{await H.deleteEmployee(r),await i()}})})}export{Ne as default};
