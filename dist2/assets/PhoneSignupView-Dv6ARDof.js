import{a as L,r as l,j as e,f as h}from"./index-BjK2osQV.js";import{B as b}from"./Button-JCYNVMjR.js";import{g as f}from"./errorUtils-CUS756ws.js";function V(){const p=L(),[s,i]=l.useState("PHONE"),[o,k]=l.useState(""),[d,g]=l.useState(""),[x,C]=l.useState(""),[c,O]=l.useState(""),[m,j]=l.useState("customer"),[N,S]=l.useState(""),[u,n]=l.useState(!1),[v,r]=l.useState(null),[y,w]=l.useState(null),P=async()=>{if(!o.trim()){r("Please enter your phone number");return}n(!0),r(null);try{const t=await h.requestOTP(o.trim(),"SIGNUP");if(t.success){const a=await h.getOTP(o.trim());a.code&&w(a.code),i("OTP")}else r(t.message)}catch(t){r(f(t))}finally{n(!1)}},E=async()=>{if(!d.trim()||d.length!==6){r("Please enter the 6-digit code");return}n(!0),r(null);try{i("DETAILS")}catch(t){r(f(t))}finally{n(!1)}},T=async()=>{if(!x.trim()){r("Please enter your name");return}if(!c||c.length<6){r("Password must be at least 6 characters");return}n(!0),r(null);try{await h.signupWithOTP(o.trim(),d,x.trim(),{role:m,password:c,referredBy:N.trim()||void 0}),p("/app",{replace:!0})}catch(t){const a=f(t);r(a),(a.includes("No OTP found")||a.includes("expired"))&&(g(""),w(null),i("PHONE"))}finally{n(!1)}};return e.jsxs("div",{className:"min-h-screen flex flex-row bg-white",children:[e.jsxs("div",{className:"hidden lg:flex lg:w-5/12 bg-slate-900 relative overflow-hidden flex-col justify-between p-12 text-white",children:[e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-10",children:[e.jsx("img",{src:"/logo/icon.png",alt:"Doorstep",className:"h-8 w-8 object-contain"}),e.jsx("span",{className:"text-2xl font-bold tracking-tight text-white drop-shadow-sm",children:"Doorstep"})]}),e.jsx("h1",{className:"text-4xl font-extrabold leading-tight mb-6",children:"Sign Up with Phone"}),e.jsx("p",{className:"text-slate-400 text-lg leading-relaxed max-w-md",children:"No email required. Sign up quickly with just your phone number."})]}),e.jsx("div",{className:"absolute -bottom-20 -right-20 w-80 h-80 bg-red-600/10 rounded-full blur-3xl"})]}),e.jsx("div",{className:"flex-1 flex items-center justify-center p-8",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs("button",{onClick:()=>s==="PHONE"?p("/auth/register"):i(s==="OTP"?"PHONE":"OTP"),className:"flex items-center gap-2 text-slate-500 hover:text-slate-700 mb-8 transition-colors",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Back"]}),e.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-sm border border-gray-100",children:[e.jsxs("div",{className:"mb-8 text-center",children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-3xl",children:"ðŸ“±"})})}),e.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:s==="PHONE"?"Enter Phone Number":s==="OTP"?"Verify Code":"Complete Profile"}),e.jsx("p",{className:"mt-2 text-sm text-slate-600",children:s==="PHONE"?"We'll send you a verification code":s==="OTP"?`Enter the code sent to ${o}`:"Just a few more details"})]}),v&&e.jsx("div",{className:"mb-6 p-4 rounded-lg bg-red-50 border border-red-200 text-red-700 text-sm",children:v}),y&&s==="OTP"&&e.jsxs("div",{className:"mb-6 p-4 rounded-lg bg-blue-50 border border-blue-200 text-blue-700 text-sm",children:[e.jsx("strong",{children:"Dev Mode:"})," Your OTP is ",e.jsx("code",{className:"font-mono bg-blue-100 px-2 py-1 rounded",children:y})]}),s==="PHONE"&&e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Phone Number"}),e.jsx("input",{type:"tel",value:o,onChange:t=>k(t.target.value),placeholder:"e.g., 012 345 678",className:"w-full px-4 py-3 rounded-xl border border-gray-300 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-all text-lg",autoFocus:!0})]}),e.jsx(b,{onClick:P,isLoading:u,className:"w-full py-3",children:"Send Code"})]}),s==="OTP"&&e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Verification Code"}),e.jsx("input",{type:"text",value:d,onChange:t=>g(t.target.value.replace(/\D/g,"").slice(0,6)),placeholder:"Enter 6-digit code",className:"w-full px-4 py-3 rounded-xl border border-gray-300 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-all text-lg text-center tracking-widest font-mono",maxLength:6,autoFocus:!0})]}),e.jsx(b,{onClick:E,isLoading:u,className:"w-full py-3",children:"Verify Code"}),e.jsx("button",{onClick:P,className:"w-full text-sm text-blue-600 hover:text-blue-700",disabled:u,children:"Resend Code"})]}),s==="DETAILS"&&e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Full Name"}),e.jsx("input",{type:"text",value:x,onChange:t=>C(t.target.value),placeholder:"Enter your name",className:"w-full px-4 py-3 rounded-xl border border-gray-300 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-all font-medium",autoFocus:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("button",{type:"button",onClick:()=>j("customer"),className:`flex flex-col items-center justify-center p-4 rounded-xl border-2 transition-all ${m==="customer"?"border-red-500 bg-red-50 text-red-600":"border-slate-100 bg-slate-50 text-slate-400 hover:border-slate-200"}`,children:[e.jsx("svg",{className:"w-6 h-6 mb-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})}),e.jsx("span",{className:"text-xs font-bold",children:"Customer"})]}),e.jsxs("button",{type:"button",onClick:()=>j("driver"),className:`flex flex-col items-center justify-center p-4 rounded-xl border-2 transition-all ${m==="driver"?"border-red-500 bg-red-50 text-red-600":"border-slate-100 bg-slate-50 text-slate-400 hover:border-slate-200"}`,children:[e.jsxs("svg",{className:"w-6 h-6 mb-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 17a2 2 0 11-4 0 2 2 0 014 0zM19 17a2 2 0 11-4 0 2 2 0 014 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 16V6a1 1 0 00-1-1H4a1 1 0 00-1 1v10a1 1 0 001 1h1m8-1a1 1 0 01-1 1H9m4-1V8a1 1 0 011-1h2.586a1 1 0 01.707.293l3.414 3.414a1 1 0 01.293.707V16a1 1 0 01-1 1h-1m-6-1a1 1 0 001 1h1M5 17a2 2 0 104 0m-4 0a2 2 0 114 0m6 0a2 2 0 104 0m-4 0a2 2 0 114 0"})]}),e.jsx("span",{className:"text-xs font-bold",children:"Driver"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Password"}),e.jsx("input",{type:"password",value:c,onChange:t=>O(t.target.value),placeholder:"Create a password (min 6 chars)",className:"w-full px-4 py-3 rounded-xl border border-gray-300 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-all"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Referral Code (Optional)"}),e.jsx("input",{type:"text",value:N,onChange:t=>S(t.target.value),placeholder:"Enter code if you have one",className:"w-full px-4 py-3 rounded-xl border border-gray-300 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-all"})]}),e.jsx(b,{onClick:T,isLoading:u,className:"w-full py-3",children:"Create Account"})]}),e.jsx("div",{className:"flex justify-center mt-8 gap-2",children:["PHONE","OTP","DETAILS"].map((t,a)=>e.jsx("div",{className:`w-2 h-2 rounded-full transition-colors ${s===t?"bg-blue-600":"bg-gray-300"}`},t))})]})]})})]})}export{V as default};
