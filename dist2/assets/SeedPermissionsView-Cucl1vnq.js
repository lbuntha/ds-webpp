const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-BjK2osQV.js","assets/index-CY9_X8xj.css"])))=>i.map(i=>d[i]);
import{r as t,f as F,j as e,y as x,D as d,_ as O}from"./index-BjK2osQV.js";import{C as T}from"./Card-DROeE3UG.js";function M(){const[c,m]=t.useState(!1),[b,u]=t.useState(!0),[i,n]=t.useState(""),[p,y]=t.useState(null);t.useEffect(()=>{j()},[]);const j=async()=>{u(!0);try{const s=await F.getRolePermissions();y(s)}catch(s){console.error("Error loading permissions:",s)}finally{u(!1)}},f=async()=>{m(!0),n("");try{const{getFirestore:s,doc:g,setDoc:N,collection:v,getDocs:w,writeBatch:S}=await O(async()=>{const{getFirestore:r,doc:l,setDoc:C,collection:E,getDocs:_,writeBatch:D}=await import("./index-BjK2osQV.js").then(R=>R.ag);return{getFirestore:r,doc:l,setDoc:C,collection:E,getDocs:_,writeBatch:D}},__vite__mapDeps([0,1])),a=s();await N(g(a,"settings","permissions"),x);const h=v(a,"navigation_menu"),P=await w(h),o=S(a);P.forEach(r=>{o.delete(r.ref)}),d.forEach(r=>{const l=g(h,r.id);o.set(l,r)}),await o.commit(),n("✅ Permissions & Menu seeded successfully! Reloading..."),setTimeout(()=>{window.location.reload()},1500)}catch(s){n(`❌ Error: ${s.message}`),m(!1)}};return e.jsx("div",{className:"space-y-6",children:e.jsx(T,{title:"Seed System Configuration",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("p",{className:"text-gray-600",children:["This will update Firebase with the default values from the code:",e.jsxs("ul",{className:"list-disc ml-5 mt-2",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Permissions:"})," ",e.jsx("code",{className:"bg-gray-100 px-2 py-1 rounded",children:"settings/permissions"})]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Navigation Menu:"})," ",e.jsx("code",{className:"bg-gray-100 px-2 py-1 rounded",children:"navigation_menu"})," collection"]})]})]}),e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:e.jsxs("p",{className:"text-sm text-yellow-800",children:[e.jsx("strong",{children:"Warning:"})," This will overwrite any custom permissions or menu items you've created in Firebase."]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:"Current Firebase Permissions:"}),b?e.jsx("div",{className:"text-gray-500",children:"Loading..."}):e.jsx("pre",{className:"bg-gray-50 p-4 rounded text-xs overflow-auto max-h-96 border",children:JSON.stringify(p,null,2)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:"Code Constants (To be seeded):"}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded text-xs overflow-auto max-h-96 border border-blue-200 space-y-4",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Permissions:"}),e.jsx("pre",{children:JSON.stringify(x,null,2)})]}),e.jsxs("div",{className:"border-t border-blue-200 pt-4",children:[e.jsxs("strong",{children:["Menu Items (",d.length,"):"]}),e.jsx("pre",{children:JSON.stringify(d.map(s=>s.label),null,2)})]})]})]})]}),e.jsx("button",{onClick:f,disabled:c,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50 w-full",children:c?"Seeding Configuration...":"Seed Permissions & Menu to Firebase"}),i&&e.jsx("div",{className:`p-4 rounded-lg ${i.startsWith("✅")?"bg-green-50 text-green-800 border border-green-200":"bg-red-50 text-red-800 border border-red-200"}`,children:i})]})})})}export{M as default};
