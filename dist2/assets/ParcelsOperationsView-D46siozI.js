import{r as i,j as e,R as Ie,f as c}from"./index-BjK2osQV.js";import{C as T}from"./Card-DROeE3UG.js";import{B as x}from"./Button-JCYNVMjR.js";import{t as g}from"./toast-DTXa3ATd.js";const _=20,Te=()=>{const[j,O]=i.useState([]),[xe,ue]=i.useState([]),[Be,me]=i.useState([]),[ge,K]=i.useState(!1),[B,h]=i.useState(!1),[L,G]=i.useState("TABLE"),[b,H]=i.useState(null),[C,he]=i.useState(""),[p,pe]=i.useState("ALL"),[S,fe]=i.useState(()=>new Date().toISOString().split("T")[0]),[N,W]=i.useState(1),[o,f]=i.useState(new Set),[a,R]=i.useState(null),[Y,q]=i.useState(0),[A,ye]=i.useState(""),[je,be]=i.useState("VERIFY"),[J,Q]=i.useState(""),[X,Z]=i.useState(""),[D,ee]=i.useState(0),[P,se]=i.useState("USD"),[E,te]=i.useState(0),[v,F]=i.useState(null),[$,re]=i.useState(""),[Ne,M]=i.useState(!1),I=async()=>{K(!0);try{const[s,t,r]=await Promise.all([c.getParcelBookings(),c.getBranches(),c.getParcelServices()]),n=s.filter(l=>l.status!=="CANCELLED"&&l.status!=="COMPLETED");O(n),ue(t),me(r),t.length>0&&re(t[0].id)}catch{}finally{K(!1)}};i.useEffect(()=>{I()},[]);const u=i.useMemo(()=>j.filter(s=>{if(S&&s.bookingDate!==S)return!1;const t=s.items||[];if(p!=="ALL"&&(p==="PENDING"&&s.status!=="PENDING"||p==="PICKED_UP"&&!t.some(r=>r.status==="PICKED_UP")||p==="IN_TRANSIT"&&s.status!=="IN_TRANSIT"))return!1;if(C){const r=C.toLowerCase();if(!((s.senderName||"").toLowerCase().includes(r)||(s.senderPhone||"").includes(r)||(s.id||"").toLowerCase().includes(r)||t.some(l=>(l.receiverName||"").toLowerCase().includes(r)||l.trackingCode&&l.trackingCode.toLowerCase().includes(r))))return!1}return!0}).sort((s,t)=>(t.createdAt||0)-(s.createdAt||0)),[j,C,p,S]),m=i.useMemo(()=>{const s=(N-1)*_;return u.slice(s,s+_)},[u,N]),z=Math.ceil(u.length/_),ae=i.useMemo(()=>{const s=u.reduce((r,n)=>r+(n.items||[]).length,0),t=u.reduce((r,n)=>r+(n.items||[]).reduce((l,oe)=>l+(Number(oe.productPrice)||0),0),0);return{count:u.length,items:s,estCod:t}},[u]),ie=s=>{H(b===s?null:s)},ne=s=>{const t=new Set(o);t.has(s)?t.delete(s):t.add(s),f(t)},ve=()=>{if(o.size===m.length&&m.length>0)f(new Set);else{const s=new Set(m.map(t=>t.id));f(s)}},we=(s,t,r="VERIFY")=>{ye(s),R(t),q(t.weight||0),Q(t.receiverName||""),Z(t.receiverPhone||""),ee(t.productPrice||0),se(t.codCurrency||"USD"),te(t.deliveryFee||0),be(r)},ke=async()=>{if(!(!A||!a)){h(!0);try{const s=j.find(d=>d.id===A);if(!s)return;const t=a.status==="DELIVERED",r=a.productPrice!==D,n=a.deliveryFee!==E,l=a.codCurrency!==P,oe=a.productPrice||0,Le=D||0,w=a.deliveryFee||0,U=E||0,de=a.codCurrency||"USD",Re=P||"USD",Ee=(s.items||[]).map(d=>d.id===a.id?{...d,weight:Y,receiverName:J,receiverPhone:X,productPrice:D,codCurrency:P,deliveryFee:E}:d),ce={...s,items:Ee};if(await c.saveParcelBooking(ce),t&&(r||n||l))try{if(n&&!l){const d=U-w;if(a.collectorId&&a.pickupCommission){const y=a.pickupCommission/w,k=d*y;Math.abs(k)>.01&&await c.processWalletTransaction(a.collectorId,k,de,"EARNING","",`Pickup Commission Adjustment: ${a.receiverName} (${s.id.slice(-4)}) - Fee ${w} → ${U}`)}if(a.delivererId&&a.deliveryCommission){const y=a.deliveryCommission/w,k=d*y;Math.abs(k)>.01&&await c.processWalletTransaction(a.delivererId,k,de,"EARNING","",`Delivery Commission Adjustment: ${a.receiverName} (${s.id.slice(-4)}) - Fee ${w} → ${U}`)}}}catch{g.error("Item updated but wallet adjustment failed. Please check manually.")}O(d=>d.map(y=>y.id===A?ce:y)),R(null),g.success(t&&(r||n)?"Parcel details and wallet adjustments updated.":"Parcel details updated.")}catch{g.error("Failed to save changes")}finally{h(!1)}}},Ce=async()=>{if(!(!v||!$)){h(!0);try{for(const s of v.bookingIds){const t=j.find(r=>r.id===s);if(t){const r=(t.items||[]).map(n=>({...n,status:"IN_TRANSIT",targetBranchId:$}));await c.saveParcelBooking({...t,items:r,status:"IN_TRANSIT"})}}await I(),F(null),f(new Set),g.success(`Successfully transferred ${v.bookingIds.length} bookings.`)}catch{g.error("Bulk transfer failed.")}finally{h(!1)}}},Se=()=>{o.size!==0&&M(!0)},De=async()=>{h(!0);try{const s=Array.from(o);for(const t of s){const r=j.find(n=>n.id===t);if(r&&r.status==="PENDING"){const n=(r.items||[]).map(l=>({...l,status:"PICKED_UP"}));await c.saveParcelBooking({...r,items:n,status:"CONFIRMED"})}}await I(),f(new Set),g.success("Bulk pickup confirmed.")}catch{g.error("Bulk confirm failed.")}finally{h(!1),M(!1)}},le=s=>{if(!s||s.length===0)return"$0.00";let t=0,r=0;return s.forEach(n=>{const l=Number(n.productPrice)||0;n.codCurrency==="KHR"?r+=l:t+=l}),t>0&&r>0?`$${t.toFixed(2)} + ${r.toLocaleString()}៛`:r>0?`${r.toLocaleString()} ៛`:`$${t.toFixed(2)}`},Pe=s=>{if(!s||s.length===0)return"$0.00";let t=0,r=0;return s.forEach(n=>{if(n.deliveryFeeUSD&&n.deliveryFeeUSD>0)t+=Number(n.deliveryFeeUSD);else if(n.deliveryFeeKHR&&n.deliveryFeeKHR>0)r+=Number(n.deliveryFeeKHR);else{const l=Number(n.deliveryFee)||0;l>0&&(l>=100?r+=l:t+=l)}}),t>0&&r>0?`$${t.toFixed(2)} + ${r.toLocaleString()}៛`:r>0?`${r.toLocaleString()} ៛`:`$${t.toFixed(2)}`},V=s=>{const t={PENDING:"bg-yellow-100 text-yellow-800",PICKED_UP:"bg-blue-100 text-blue-700",IN_TRANSIT:"bg-purple-100 text-purple-800",DELIVERED:"bg-green-100 text-green-700"};return e.jsx("span",{className:`text-[10px] px-2 py-1 rounded font-bold uppercase ${t[s]||"bg-gray-100"}`,children:s})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Operations Console"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Manage daily pickups and hub transfers"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(x,{variant:"outline",onClick:I,isLoading:ge,className:"text-xs",children:"Refresh"}),e.jsxs("div",{className:"bg-gray-100 p-1 rounded-lg flex space-x-1",children:[e.jsx("button",{onClick:()=>G("CARD"),className:`p-2 rounded-md transition-all ${L==="CARD"?"bg-white shadow text-indigo-600":"text-gray-500"}`,title:"Card View",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})})}),e.jsx("button",{onClick:()=>G("TABLE"),className:`p-2 rounded-md transition-all ${L==="TABLE"?"bg-white shadow text-indigo-600":"text-gray-500"}`,title:"Table View (High Density)",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 10h16M4 14h16M4 18h16"})})})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-4",children:[e.jsx(T,{className:"lg:col-span-3",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center",children:[e.jsxs("div",{className:"flex-1 w-full",children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Search"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Ref #, Sender, Receiver...",className:"w-full pl-9 pr-4 py-2 border border-gray-300 rounded-lg text-sm focus:ring-indigo-500 focus:border-indigo-500",value:C,onChange:s=>he(s.target.value)}),e.jsx("svg",{className:"w-4 h-4 text-gray-400 absolute left-3 top-2.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})]}),e.jsxs("div",{className:"w-full md:w-48",children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Date"}),e.jsx("input",{type:"date",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-indigo-500 focus:border-indigo-500",value:S,onChange:s=>fe(s.target.value)})]}),e.jsxs("div",{className:"w-full md:w-48",children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Status"}),e.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-indigo-500 focus:border-indigo-500",value:p,onChange:s=>pe(s.target.value),children:[e.jsx("option",{value:"ALL",children:"All Statuses"}),e.jsx("option",{value:"PENDING",children:"Pending Pickup"}),e.jsx("option",{value:"PICKED_UP",children:"Picked Up"}),e.jsx("option",{value:"IN_TRANSIT",children:"In Transit"})]})]})]})}),e.jsx(T,{className:"bg-indigo-50 border-indigo-100 flex flex-col justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xs font-bold text-indigo-400 uppercase tracking-wider",children:"Workload"}),e.jsxs("div",{className:"text-2xl font-bold text-indigo-900 mt-1",children:[ae.count," Bookings"]}),e.jsxs("p",{className:"text-xs text-indigo-600 mt-1",children:[ae.items," Items • Est. Volume"]})]})})]}),o.size>0&&e.jsxs("div",{className:"bg-indigo-900 text-white px-6 py-3 rounded-lg shadow-lg flex items-center justify-between animate-fade-in-up sticky top-4 z-20",children:[e.jsxs("span",{className:"font-bold text-sm",children:[o.size," Selected"]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:Se,disabled:B,className:"bg-green-500 hover:bg-green-600 text-white px-3 py-1.5 rounded-md text-xs font-bold transition-colors",children:"Confirm Pickups"}),e.jsx("button",{onClick:()=>F({bookingIds:Array.from(o)}),disabled:B,className:"bg-indigo-600 hover:bg-indigo-500 text-white border border-indigo-400 px-3 py-1.5 rounded-md text-xs font-bold transition-colors",children:"Transfer to Branch"}),e.jsx("button",{onClick:()=>f(new Set),className:"text-indigo-300 hover:text-white",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]})]}),L==="TABLE"?e.jsx(T,{className:"p-0 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 w-8",children:e.jsx("input",{type:"checkbox",className:"rounded text-indigo-600 focus:ring-indigo-500",checked:o.size===m.length&&m.length>0,onChange:ve})}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Booking Ref"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Sender"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Route"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Items"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Total COD"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Fee"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Action"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200 text-sm",children:m.map(s=>e.jsxs(Ie.Fragment,{children:[e.jsxs("tr",{className:`hover:bg-gray-50 ${b===s.id?"bg-indigo-50/50":""}`,children:[e.jsx("td",{className:"px-4 py-3",children:e.jsx("input",{type:"checkbox",className:"rounded text-indigo-600 focus:ring-indigo-500",checked:o.has(s.id),onChange:()=>ne(s.id)})}),e.jsxs("td",{className:"px-4 py-3 font-mono text-gray-600",children:[s.id.slice(-6),e.jsx("div",{className:"text-[10px] text-gray-400",children:new Date(s.createdAt||0).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),e.jsxs("td",{className:"px-4 py-3",children:[e.jsx("div",{className:"font-bold text-gray-900",children:s.senderName}),e.jsx("div",{className:"text-xs text-gray-500",children:s.senderPhone})]}),e.jsxs("td",{className:"px-4 py-3",children:[e.jsx("div",{className:"max-w-xs truncate text-gray-600",title:s.pickupAddress,children:s.pickupAddress}),s.serviceTypeName&&e.jsx("span",{className:"text-[10px] bg-gray-100 px-1.5 rounded",children:s.serviceTypeName})]}),e.jsx("td",{className:"px-4 py-3 text-center font-bold text-gray-700",children:(s.items||[]).length}),e.jsx("td",{className:"px-4 py-3 text-right text-red-600 font-medium",children:le(s.items)}),e.jsx("td",{className:"px-4 py-3 text-right text-indigo-600 font-medium",children:Pe(s.items)}),e.jsx("td",{className:"px-4 py-3 text-center",children:V(s.status)}),e.jsx("td",{className:"px-4 py-3 text-right",children:e.jsx("button",{onClick:()=>ie(s.id),className:"text-indigo-600 hover:text-indigo-900 text-xs font-bold border border-indigo-100 bg-indigo-50 px-2 py-1 rounded",children:b===s.id?"Close":"Manage"})})]}),b===s.id&&e.jsx("tr",{children:e.jsx("td",{colSpan:9,className:"bg-gray-50 p-4 border-b border-gray-200 shadow-inner",children:e.jsx("div",{className:"grid grid-cols-1 gap-2",children:(s.items||[]).map((t,r)=>e.jsxs("div",{className:"flex items-center justify-between bg-white p-2 rounded border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"font-bold text-gray-400 text-xs w-6",children:["#",r+1]}),e.jsx("div",{className:"w-8 h-8 bg-gray-100 rounded overflow-hidden",children:e.jsx("img",{src:t.image,className:"w-full h-full object-cover",alt:"img"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-gray-800",children:t.receiverName}),e.jsx("p",{className:"text-[10px] text-gray-500",children:t.destinationAddress})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[V(t.status||"PENDING"),e.jsx(x,{variant:"outline",className:"h-6 text-[10px] px-2",onClick:()=>we(s.id,t,t.status==="PENDING"?"VERIFY":"EDIT"),children:"Details"})]})]},t.id))})})})]},s.id))})]})})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:m.map(s=>e.jsx(T,{className:`border transition-all ${b===s.id?"ring-2 ring-indigo-500":"hover:border-indigo-300"}`,children:e.jsxs("div",{className:"flex flex-col justify-between cursor-pointer",onClick:()=>ie(s.id),children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",className:"rounded text-indigo-600 focus:ring-indigo-500",checked:o.has(s.id),onClick:t=>t.stopPropagation(),onChange:()=>ne(s.id)}),e.jsx("span",{className:"font-bold text-sm text-gray-900",children:s.senderName})]}),V(s.status)]}),e.jsxs("div",{className:"text-xs text-gray-600 mb-2 pl-6",children:[e.jsx("p",{children:s.pickupAddress}),e.jsx("p",{className:"mt-1 text-gray-400",children:s.bookingDate})]}),e.jsxs("div",{className:"flex justify-between items-center pl-6 mt-2 border-t border-gray-50 pt-2",children:[e.jsxs("span",{className:"font-bold text-gray-800",children:[(s.items||[]).length," items"]}),e.jsx("span",{className:"font-bold text-red-600",children:le(s.items)})]})]})},s.id))}),z>1&&e.jsxs("div",{className:"flex justify-center gap-2 pt-4",children:[e.jsx("button",{disabled:N===1,onClick:()=>W(s=>s-1),className:"px-3 py-1 rounded border hover:bg-gray-50 disabled:opacity-50",children:"Prev"}),e.jsxs("span",{className:"px-3 py-1 text-sm text-gray-600",children:["Page ",N," of ",z]}),e.jsx("button",{disabled:N===z,onClick:()=>W(s=>s+1),className:"px-3 py-1 rounded border hover:bg-gray-50 disabled:opacity-50",children:"Next"})]}),a&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-gray-900 bg-opacity-50 backdrop-blur-sm p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md p-6 max-h-[90vh] overflow-y-auto",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:je==="VERIFY"?"Verify & Pickup Parcel":"Edit Parcel Details"}),e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("img",{src:a.image,className:"h-40 w-40 object-cover rounded-lg border cursor-pointer hover:opacity-80 transition-opacity",alt:"verify",title:"Click to view full size",onClick:()=>window.open(a.image,"_blank")})}),e.jsx("p",{className:"text-center text-xs text-gray-400 -mt-2 mb-3",children:"Click image to zoom"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500",children:"Tracking ID"}),e.jsx("div",{className:"font-mono font-bold text-lg",children:a.trackingCode})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Receiver Name"}),e.jsx("input",{type:"text",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-indigo-500 focus:border-indigo-500",value:J,onChange:s=>Q(s.target.value),placeholder:"Recipient name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),e.jsx("input",{type:"tel",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-indigo-500 focus:border-indigo-500",value:X,onChange:s=>Z(s.target.value),placeholder:"Phone number"})]})]}),(()=>{const s=(a==null?void 0:a.driverSettlementStatus)==="SETTLED"||(a==null?void 0:a.customerSettlementStatus)==="SETTLED";return e.jsxs(e.Fragment,{children:[s&&e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3 text-sm text-yellow-800",children:"⚠️ This parcel has been settled. COD and fee cannot be modified."}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"COD Amount"}),e.jsx("input",{type:"number",className:`w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-indigo-500 focus:border-indigo-500 ${s?"bg-gray-100 cursor-not-allowed":""}`,value:D||"",onChange:t=>ee(parseFloat(t.target.value)||0),placeholder:"0.00",disabled:s})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Currency"}),e.jsxs("select",{className:`w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-indigo-500 focus:border-indigo-500 ${s?"bg-gray-100 cursor-not-allowed":""}`,value:P,onChange:t=>se(t.target.value),disabled:s,children:[e.jsx("option",{value:"USD",children:"USD"}),e.jsx("option",{value:"KHR",children:"KHR"})]})]})]})]})})(),(()=>{const s=(a==null?void 0:a.driverSettlementStatus)==="SETTLED"||(a==null?void 0:a.customerSettlementStatus)==="SETTLED";return e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Delivery Fee"}),e.jsx("input",{type:"number",className:`w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-indigo-500 focus:border-indigo-500 ${s?"bg-gray-100 cursor-not-allowed":""}`,value:E||"",onChange:t=>te(parseFloat(t.target.value)||0),placeholder:"0.00",disabled:s})]})})(),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Weight (kg)"}),e.jsx("input",{type:"number",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-indigo-500 focus:border-indigo-500",value:Y||"",onChange:s=>q(parseFloat(s.target.value)||0),placeholder:"0.0"})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[e.jsx(x,{variant:"outline",onClick:()=>R(null),children:"Cancel"}),e.jsx(x,{onClick:ke,isLoading:B,className:"bg-green-600 hover:bg-green-700",children:"Save Changes"})]})]})}),v&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-gray-900 bg-opacity-50 backdrop-blur-sm p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-sm p-6",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"Bulk Transfer"}),e.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Moving ",e.jsx("strong",{children:v.bookingIds.length})," bookings to a branch hub."]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Destination Branch"}),e.jsx("select",{className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-indigo-500 focus:border-indigo-500",value:$,onChange:s=>re(s.target.value),children:xe.map(s=>e.jsxs("option",{value:s.id,children:[s.name," (",s.code,")"]},s.id))})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(x,{variant:"outline",onClick:()=>F(null),children:"Cancel"}),e.jsx(x,{onClick:Ce,className:"bg-indigo-600 hover:bg-indigo-700",children:"Start Transit"})]})]})}),Ne&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-gray-900 bg-opacity-50 backdrop-blur-sm p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-sm p-6",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"Confirm Bulk Pickup"}),e.jsxs("p",{className:"text-sm text-gray-600 mb-6",children:["Confirm pickup for ",e.jsx("strong",{children:o.size})," bookings? This will mark all items as ",e.jsx("span",{className:"text-green-600 font-bold",children:"PICKED_UP"}),"."]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(x,{variant:"outline",onClick:()=>M(!1),children:"Cancel"}),e.jsx(x,{onClick:De,className:"bg-green-600 hover:bg-green-700",children:"Confirm All"})]})]})})]})};function ze(){return e.jsx(Te,{})}export{ze as default};
