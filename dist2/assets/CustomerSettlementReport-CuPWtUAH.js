import{r as d,j as e,f as p}from"./index-BjK2osQV.js";import{C as E}from"./Card-DROeE3UG.js";import{B as N}from"./Button-JCYNVMjR.js";import{I as re}from"./Input-B96Hj4QL.js";import{t as S}from"./toast-DTXa3ATd.js";const de=()=>{const[F,B]=d.useState([]),[D,_]=d.useState([]),[k,Z]=d.useState([]),[ae,J]=d.useState([]),[T,Q]=d.useState([]),[c,X]=d.useState(null),[Y,$]=d.useState(!1),[R,ee]=d.useState(""),[g,W]=d.useState(null),[I,M]=d.useState(!1);d.useEffect(()=>{(async()=>{$(!0);try{const[t,s,a,n,i,o]=await Promise.all([p.getParcelBookings(),p.getCustomers(),p.getUsers(),p.getCurrencies(),p.getAccounts(),p.getSettings()]);B(t),_(s),Z(a),J(n),Q(i),X(o)}catch{S.error("Failed to load data")}finally{$(!1)}})()},[]);const b=d.useMemo(()=>{const r=new Map;return D.forEach(t=>{r.set(t.id,{id:t.id,name:t.name,phone:t.phone||"",totalCodUSD:0,totalCodKHR:0,totalFeeUSD:0,totalFeeKHR:0,netUSD:0,netKHR:0,unsettledCount:0})}),F.forEach(t=>{let s;if(t.senderId&&(s=r.get(t.senderId)),!s&&t.senderPhone){const a=t.senderPhone.replace(/\D/g,"");for(const[n,i]of r.entries())if(i.phone){const o=i.phone.replace(/\D/g,"");if(a.length>5&&o.length>5&&(a.endsWith(o)||o.endsWith(a))){s=i;break}}}if(!s&&t.senderName){const a=`temp-${t.senderPhone||t.senderName}`;r.has(a)||r.set(a,{id:a,name:`${t.senderName} (Unregistered)`,phone:t.senderPhone||"",totalCodUSD:0,totalCodKHR:0,totalFeeUSD:0,totalFeeKHR:0,netUSD:0,netKHR:0,unsettledCount:0}),s=r.get(a)}s&&(t.items||[]).forEach(a=>{if(a.status==="DELIVERED"&&a.customerSettlementStatus!=="SETTLED"){const n=Number(a.productPrice)||0,i=a.codCurrency==="KHR";if(a.deliveryFeeUSD!==void 0||a.deliveryFeeKHR!==void 0)i?(s.totalCodKHR+=n,s.totalFeeKHR+=a.deliveryFeeKHR||0):(s.totalCodUSD+=n,s.totalFeeUSD+=a.deliveryFeeUSD||0);else{const o=Number(a.deliveryFee)||0;i?(s.totalCodKHR+=n,s.totalFeeKHR+=o):(s.totalCodUSD+=n,s.totalFeeUSD+=o)}a.taxiFee&&a.taxiFee>0&&(a.taxiFeeCurrency==="KHR"?s.totalFeeKHR+=a.taxiFee:s.totalFeeUSD+=a.taxiFee),s.unsettledCount++}})}),r.forEach(t=>{const s=k.find(a=>a.linkedCustomerId===t.id||a.phone===t.phone);if(s&&t.name.includes("(Unregistered)")){const a=s.linkedCustomerId?D.find(n=>n.id===s.linkedCustomerId):null;a?(t.name=a.name,t.id=a.id):(t.name=s.name,t.id=s.linkedCustomerId||t.id)}t.netUSD=t.totalCodUSD-t.totalFeeUSD,t.netKHR=t.totalCodKHR-t.totalFeeKHR}),Array.from(r.values()).filter(t=>t.unsettledCount>0).filter(t=>t.name.toLowerCase().includes(R.toLowerCase())||t.phone.includes(R)).sort((t,s)=>s.unsettledCount-t.unsettledCount)},[F,D,R,k]),[O,H]=d.useState(null),[u,K]=d.useState(null),[y,P]=d.useState(!1),[L,V]=d.useState(!1);d.useEffect(()=>{if(g){(async()=>{const s=b.find(n=>n.id===g),a=k.find(n=>n.linkedCustomerId===g||(s==null?void 0:s.phone)&&n.phone===s.phone);if(a)try{const[n,i]=await Promise.all([p.getWalletTransactions(a.uid),p.getUserBookings(a)]);let o=0,x=0;n.forEach(l=>{if(l.status==="REJECTED"||l.status==="FAILED")return;const h=l.amount;l.type==="DEPOSIT"||l.type==="EARNING"||l.type==="REFUND"?l.currency==="KHR"?x+=h:o+=h:(l.type==="SETTLEMENT"||l.type==="WITHDRAWAL")&&(l.currency==="KHR"?x-=h:o-=h)}),i.forEach(l=>{const h=l.items||[],U=h.filter(m=>m.status==="DELIVERED").length;if(h.forEach(m=>{m.status==="DELIVERED"&&(m.codCurrency==="KHR"?x+=m.productPrice||0:o+=m.productPrice||0)}),l.status!=="CANCELLED"&&(U>0||l.status==="COMPLETED"||l.status==="CONFIRMED")){let m=0,A=0;h.forEach(f=>{if(f.status==="DELIVERED"){const q=f.codCurrency==="KHR";if(f.deliveryFeeUSD!==void 0||f.deliveryFeeKHR!==void 0)q?m+=f.deliveryFeeKHR||0:A+=f.deliveryFeeUSD||0;else{const z=Number(f.deliveryFee)||0;q?m+=z:A+=z}f.taxiFee&&f.taxiFee>0&&(f.taxiFeeCurrency==="KHR"?x-=f.taxiFee:o-=f.taxiFee)}}),o-=A,x-=m}}),K({usd:o,khr:x})}catch{}else K(null)})();const t=D.find(s=>s.id===g);if(t){const s=t.excludeFeesInSettlement||!1;P(s),V(s)}}else K(null),P(!1),V(!1)},[g,k,b,D]);const v=d.useMemo(()=>{if(!g)return[];const r=[];return F.forEach(t=>{t.senderId===g&&(t.items||[]).forEach(s=>{if(s.status==="DELIVERED"&&s.customerSettlementStatus!=="SETTLED"){let a=0,n=s.codCurrency||"USD";s.deliveryFeeUSD!==void 0||s.deliveryFeeKHR!==void 0?a=n==="KHR"?s.deliveryFeeKHR||0:s.deliveryFeeUSD||0:a=Number(s.deliveryFee)||0;const i=s.taxiFee||0,o=s.taxiFeeCurrency||"KHR";let x=(Number(s.productPrice)||0)-a;i>0&&o===n&&(x-=i),r.push({bookingId:t.id,itemId:s.id,trackingCode:s.trackingCode,receiverName:s.receiverName,receiverPhone:s.receiverPhone,deliveryDate:t.bookingDate,image:s.image,cod:Number(s.productPrice)||0,codCurrency:s.codCurrency||"USD",fee:a,feeCurrency:n,taxiFee:i,taxiFeeCurrency:o,net:x})}})}),r},[F,g]),C=d.useMemo(()=>{let r=0,t=0;return y&&v.forEach(s=>{s.fee>0&&(s.feeCurrency==="KHR"?t+=s.fee:r+=s.fee),s.taxiFee>0&&(s.taxiFeeCurrency==="USD"?r+=s.taxiFee:t+=s.taxiFee)}),{usd:r,khr:t}},[y,v]),[j,w]=d.useState(null),G=(r,t)=>{let s=u?u.usd:r.netUSD,a=u?u.khr:r.netKHR;y&&(s+=C.usd,a+=C.khr);const n=t==="USD"?s:a,i=v.filter(o=>o.codCurrency===t||o.taxiFee>0&&o.taxiFeeCurrency===t).map(o=>({bookingId:o.bookingId,itemId:o.itemId}));w({summary:r,targetCurrency:t,netAmount:n,itemsToSettle:i})},te=async()=>{if(!j)return;const{summary:r,targetCurrency:t,netAmount:s,itemsToSettle:a}=j;M(!0);try{const n=k.find(x=>x.linkedCustomerId===r.id||x.phone===r.phone);if(!n){S.error("This customer is not linked to any User account. Create a User Profile first.");return}const i="Payout Request ("+a.length+" parcels)"+(y?" - Gross Payout":"");t==="USD"&&Math.abs(s)>.01?await p.walletService.requestSettlement(n.uid,n.name,Number(s.toFixed(2)),"USD","system","",i,a,y):t==="KHR"&&Math.abs(s)>.1&&await p.walletService.requestSettlement(n.uid,n.name,Number(s.toFixed(0)),"KHR","system","",i,a,y),S.success("Payout Request Sent!"),w(null);const o=await p.getParcelBookings();B(o)}catch(n){S.error("Failed to initiate payout: "+n.message)}finally{M(!1)}},se=()=>{var x;if(v.length===0){S.error("No data to export");return}const r=["Date","Booking Code","Tracking Code","Receiver Name","Receiver Phone","COD Amount","COD Currency","Delivery Fee","Fee Currency","Net Payout"],t=v.map(l=>[new Date(l.deliveryDate).toLocaleDateString(),(l.bookingId||"").slice(-6).toUpperCase(),l.trackingCode,l.receiverName,l.receiverPhone||"",l.cod,l.codCurrency,l.fee,l.feeCurrency,l.net!==null?l.net:"Split Currency"]),s=[r.join(","),...t.map(l=>l.map(h=>`"${String(h).replace(/"/g,'""')}"`).join(","))].join(`
`),a=new Blob([s],{type:"text/csv;charset=utf-8;"}),n=URL.createObjectURL(a),i=document.createElement("a"),o=((x=b.find(l=>l.id===g))==null?void 0:x.name)||"customer";i.href=n,i.download=`settlement_${o.replace(/\s+/g,"_")}_${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(n),S.success("Exported successfully!")};if(g){const r=b.find(t=>t.id===g);return e.jsxs("div",{className:"space-y-6",children:[O&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-75 p-4",onClick:()=>H(null),children:e.jsxs("div",{className:"relative max-w-3xl max-h-full",children:[e.jsx("img",{src:O,alt:"Zoomed",className:"max-w-full max-h-[90vh] rounded shadow-2xl"}),e.jsx("button",{className:"absolute top-2 right-2 bg-white rounded-full p-2 text-black font-bold",onClick:()=>H(null),children:"✕"})]})}),j&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-gray-900 bg-opacity-50 backdrop-blur-sm p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-lg overflow-hidden",children:[e.jsxs("div",{className:"bg-gray-50 px-6 py-4 border-b border-gray-100 flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Confirm Settlement Payout"}),e.jsx("button",{onClick:()=>w(null),className:"text-gray-400 hover:text-gray-600",children:"×"})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm text-gray-500 uppercase font-bold tracking-wide mb-1",children:"Total Payout Amount"}),e.jsx("div",{className:"text-4xl font-black text-indigo-600",children:j.targetCurrency==="USD"?"$"+j.netAmount.toFixed(2):j.netAmount.toLocaleString()+" ៛"}),e.jsxs("div",{className:"text-sm text-gray-500 mt-2",children:["To: ",e.jsx("span",{className:"font-bold text-gray-900",children:j.summary.name})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[e.jsx("div",{className:"text-xs font-bold text-gray-500 uppercase mb-3 border-b border-gray-200 pb-2",children:"Proposed Accounting Entries (GL Preview)"}),e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-gray-500 text-xs",children:[e.jsx("th",{className:"text-left pb-1",children:"Account"}),e.jsx("th",{className:"text-right pb-1",children:"Dr"}),e.jsx("th",{className:"text-right pb-1",children:"Cr"})]})}),e.jsx("tbody",{className:"font-mono text-gray-700",children:(()=>{var U;const t=j.targetCurrency==="USD";let a=((U=c==null?void 0:c.transactionRules)==null?void 0:U["5"])||(t?(c==null?void 0:c.customerWalletAccountUSD)||(c==null?void 0:c.defaultCustomerWalletAccountId):(c==null?void 0:c.customerWalletAccountKHR)||(c==null?void 0:c.defaultCustomerWalletAccountId));const n=T.find(m=>m.id===a),i=n?`${n.code} - ${n.name}`:"3200 - Accounts Payable (Customer Wallet)",o=t?(c==null?void 0:c.defaultCustomerSettlementBankIdUSD)||(c==null?void 0:c.defaultCustomerSettlementBankId)||"":(c==null?void 0:c.defaultCustomerSettlementBankIdKHR)||(c==null?void 0:c.defaultCustomerSettlementBankId)||"",x=T.find(m=>m.id===o),l=x?`${x.code} - ${x.name}`:"(Not Configured - Set in Settings)",h=t?j.netAmount.toFixed(2):j.netAmount.toLocaleString();return e.jsxs(e.Fragment,{children:[e.jsxs("tr",{children:[e.jsx("td",{className:"py-1",children:i}),e.jsx("td",{className:"text-right py-1",children:h}),e.jsx("td",{className:"text-right py-1 text-gray-300",children:"-"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"py-1",children:l}),e.jsx("td",{className:"text-right py-1 text-gray-300",children:"-"}),e.jsx("td",{className:"text-right py-1",children:h})]})]})})()}),e.jsx("tfoot",{className:"border-t border-gray-200 mt-2 text-xs text-gray-400 italic",children:e.jsx("tr",{children:e.jsx("td",{colSpan:3,className:"pt-2 text-center",children:"(Note: Final GL booking occurs explicitly upon payout approval)"})})})]})]}),y&&e.jsxs("div",{className:"text-xs text-amber-600 bg-amber-50 p-2 rounded border border-amber-100 flex items-center gap-2",children:[e.jsx("span",{className:"font-bold",children:"⚠ Note:"})," Fees are excluded/deferred from this payout (Gross Payment)."]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(N,{className:"flex-1 bg-white border border-gray-300 text-gray-700 hover:bg-gray-50",onClick:()=>w(null),children:"Cancel"}),e.jsx(N,{className:"flex-1 bg-indigo-600 hover:bg-indigo-700 text-white font-bold shadow-lg",onClick:te,isLoading:I,children:"Confirm & Pay"})]})]})]})}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between md:items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(N,{variant:"outline",onClick:()=>W(null),children:"← Back"}),e.jsxs("h2",{className:"text-xl font-bold",children:["Settlement Details: ",r==null?void 0:r.name]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:`flex items-center gap-2 px-3 py-2 rounded border ${L||y?"bg-green-50 border-green-200":"bg-white border-gray-200"}`,title:L?"Set by admin in User Management. Cannot be enabled here.":"Can be enabled for this settlement session.",children:[e.jsx("input",{type:"checkbox",id:"excludeFees",checked:y,onChange:t=>P(t.target.checked),className:"w-4 h-4 text-green-600 rounded cursor-pointer"}),e.jsxs("label",{htmlFor:"excludeFees",className:`text-sm font-medium select-none cursor-pointer text-gray-700 ${y?"font-bold":""}`,children:["Exclude Fees (Pay Gross) ",L?"(Default)":""]})]}),u&&e.jsxs("div",{className:"bg-indigo-50 px-4 py-2 rounded-lg border border-indigo-100 flex items-center gap-2",children:[e.jsx("span",{className:"text-indigo-800 font-bold text-sm",children:"Verified Wallet Balance:"}),e.jsxs("span",{className:"text-indigo-900 font-bold",children:["$",(u.usd||0).toFixed(2)," / ",(u.khr||0).toLocaleString()," ៛"]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(E,{className:"bg-green-50 p-4",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-bold text-green-800 uppercase",children:"Wait to Pay (USD)"}),e.jsxs("div",{className:"text-3xl font-bold text-green-900 mt-1",children:["$",(u?(u.usd||0)+C.usd:(r==null?void 0:r.netUSD)||0).toFixed(2)]}),e.jsxs("div",{className:"text-[10px] text-green-600 mt-1",children:["Based on ",u?"Verified Wallet Balance":"Pending Bookings"]})]}),e.jsx(N,{className:"bg-green-600 hover:bg-green-700 text-white font-bold",onClick:()=>r&&G(r,"USD"),isLoading:I,disabled:Math.abs(u?(u.usd||0)+C.usd:(r==null?void 0:r.netUSD)||0)<.01,children:"Pay USD"})]})}),e.jsx(E,{className:"bg-blue-50 p-4",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-bold text-blue-800 uppercase",children:"Wait to Pay (KHR)"}),e.jsxs("div",{className:"text-3xl font-bold text-blue-900 mt-1",children:[(u?(u.khr||0)+C.khr:(r==null?void 0:r.netKHR)||0).toLocaleString()," ៛"]}),e.jsxs("div",{className:"text-[10px] text-blue-600 mt-1",children:["Based on ",u?"Verified Wallet Balance":"Pending Bookings"]})]}),e.jsx(N,{className:"bg-blue-600 hover:bg-blue-700 text-white font-bold",onClick:()=>r&&G(r,"KHR"),isLoading:I,disabled:Math.abs(u?(u.khr||0)+C.khr:(r==null?void 0:r.netKHR)||0)<1,children:"Pay KHR"})]})})]})]}),e.jsxs(E,{children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Individual Parcel Items"}),e.jsxs(N,{variant:"outline",onClick:se,className:"flex items-center gap-2",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Export to Excel"]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 text-sm",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left font-medium text-gray-500",children:"Date"}),e.jsx("th",{className:"px-4 py-3 text-left font-medium text-gray-500",children:"Booking Code"}),e.jsx("th",{className:"px-4 py-3 text-left font-medium text-gray-500",children:"Tracking Code"}),e.jsx("th",{className:"px-4 py-3 text-left font-medium text-gray-500",children:"Receiver"}),e.jsx("th",{className:"px-4 py-3 text-right font-medium text-gray-500",children:"COD Amount"}),e.jsx("th",{className:"px-4 py-3 text-right font-medium text-gray-500",children:"Delivery Fee"}),e.jsx("th",{className:"px-4 py-3 text-right font-medium text-gray-500",children:"Taxi Fee"}),e.jsx("th",{className:"px-4 py-3 text-right font-medium text-gray-500 font-bold",children:"Net Payout"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:v.map((t,s)=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-2",children:new Date(t.deliveryDate).toLocaleDateString()}),e.jsx("td",{className:"px-4 py-2 font-mono text-xs text-gray-500",children:(t.bookingId||"").slice(-6).toUpperCase()}),e.jsx("td",{className:"px-4 py-2 font-mono font-bold text-indigo-600",children:t.trackingCode}),e.jsx("td",{className:"px-4 py-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[t.image?e.jsx("img",{src:t.image,alt:"",className:"w-10 h-10 rounded object-cover border border-gray-200 cursor-zoom-in hover:opacity-80 transition-opacity",onClick:()=>H(t.image||null)}):e.jsx("div",{className:"w-10 h-10 rounded bg-gray-100 flex items-center justify-center text-xs text-gray-400",children:"No Img"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:t.receiverName}),e.jsx("div",{className:"text-xs text-indigo-600 font-mono",children:t.receiverPhone||""})]})]})}),e.jsxs("td",{className:"px-4 py-2 text-right",children:[t.cod.toLocaleString()," ",t.codCurrency]}),e.jsxs("td",{className:"px-4 py-2 text-right",children:[t.fee.toLocaleString()," ",t.feeCurrency]}),e.jsx("td",{className:"px-4 py-2 text-right",children:t.taxiFee>0?e.jsxs("span",{className:"bg-red-50 text-red-700 px-2 py-1 rounded text-xs font-bold border border-red-100",children:[t.taxiFee.toLocaleString()," ",t.taxiFeeCurrency]}):e.jsx("span",{className:"text-gray-300",children:"-"})}),e.jsx("td",{className:"px-4 py-2 text-right font-bold text-green-700",children:t.net!==null&&t.codCurrency===t.feeCurrency&&(!t.taxiFee||t.taxiFeeCurrency===t.codCurrency)?t.net.toLocaleString()+" "+t.codCurrency:e.jsx("span",{className:" text-amber-600 italic",children:"Mixed Currency"})})]},s))})]})})]})]})}return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Customer Settlement Report"}),e.jsx("div",{className:"w-64",children:e.jsx(re,{placeholder:"Search customer name or phone...",value:R,onChange:r=>ee(r.target.value)})})]}),e.jsx(E,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Pending Parcels"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Net Owed (USD)"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Net Owed (KHR)"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:Y?e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"px-6 py-4 text-center text-gray-500",children:"Loading customer data..."})}):b.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"px-6 py-4 text-center text-gray-500",children:"No customers with pending settlements found."})}):b.map(r=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{className:"font-bold text-gray-900",children:r.name}),e.jsx("div",{className:"text-sm text-gray-500",children:r.phone})]}),e.jsx("td",{className:"px-6 py-4 text-center font-medium text-gray-700",children:r.unsettledCount}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsxs("span",{className:`font-bold ${r.netUSD>0?"text-green-600":"text-gray-400"}`,children:["$",r.netUSD.toFixed(2)]})}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsxs("span",{className:`font-bold ${r.netKHR>0?"text-green-600":"text-gray-400"}`,children:[r.netKHR.toLocaleString()," ៛"]})}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsx(N,{variant:"outline",onClick:()=>W(r.id),children:"View & Settle"})})]},r.id))})]})})})]})};export{de as CustomerSettlementReport};
